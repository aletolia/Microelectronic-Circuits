# Microelectronic-Circuits

## CHAPTER 2 Operational Amplifiers

该元件简称op amp，起初被运用在复杂原件和模拟计算器上，随着IC电路的发展，运放也为电器工程揭开了新的一页

### 2.1 The Ideal Op Amp

从信号的角度来看，运放有三个端口：两个输入端口和一个输出端口

![image-20210528102850373](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528102850373.png)

放大器的电压增幅来源于其外接电源，因此大多数IC放大器还需要两个直流电源才可以正常工作，因此我们从放大器的封装中再引出两个端口来外接电源，如上图所示，需要注意的是这两个直流电源并非真的接地，这个接地只是表示他们有一个公共端，下面我们将不会明确指出电源存在（默认放大器已经偏置完成）

运算放大器的输入电压是两个输入端口之间的差分电压，并将其放大A倍然后在输出端口输出

理想的运放不存在输入电流，即流入端口1、2的电流大小应该为0，换言之，其阻抗应为无穷大；而输出端口应充当理想的输出电源，其阻抗为0

因此我们得出以下的等效电路

![image-20210528103852489](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528103852489.png)

此外，我们对这种只对差分信号有反应而忽略共模信号的现象称为共模抑制，类似的，我们称增益A为差分增益（或称开环增益）。

运放的另外一个重要特性是其可以直接耦合，这使其拥有许多重要的应用，不过这也会带来一些问题，我们会在后面描述。

我们认为理想运放的带宽大小使无穷大的，并且其差分增益A的理想值也应该是无穷大，不过如何应用A这个问题也由此产生，事实上，没有电路会单独使用一个运放，我们将在后面详细描述这一点

### 2.2 The Inverting Configuration（反向配置）

如同我们上面所说的，运放不能单独使用，不过我们有两种使用运放的基本电路配置：同相配置和反相配置，下图即展示了反相配置

![image-20210528104621537](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528104621537.png)

它由一个运放和两个电阻构成

闭环增益（The Close-loop Gain):

我们现在计算上图闭环电路中的电压增益G，有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528104910939.png" alt="image-20210528104910939" style="zoom:67%;" />

基于该运放使理想运放的假设，我们开始进行电路分析

我们假设输出端得到了一个有限的、可测的电压$V_o$，有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528105112169.png" alt="image-20210528105112169" style="zoom:67%;" />

得到这个结果是因为A是无穷大（或趋向于无穷大的），因此我们得到，在理想状态下

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528105238111.png" alt="image-20210528105238111" style="zoom:67%;" />

这两个端口之间的电势恒定相等，因此我们称其为“虚拟短路”（简称虚短 virtual short circuit)(请注意其与真实短路之间的区别)，而我们在电路图上可以看到，二端口接地，因此1端口处的电势为0，我们称此时的1端口为"虚拟接地"（简称虚地 virtual ground)(同样注意其与真实接地的区别)

接着我们计算$R_1$上的电流大小，由欧姆定律

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528134246405.png" alt="image-20210528134246405" style="zoom:67%;" />

接着，因为端口1处的电阻大小为无穷大，因此$i_1$全部流入反馈回路，因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528134444836.png" alt="image-20210528134444836" style="zoom:67%;" />

从而

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528134553818.png" alt="image-20210528134553818" style="zoom:67%;" />

整体分析的图示如下

![image-20210528134631188](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528134631188.png)

![image-20210528134657709](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528134657709.png)

因此我们看到闭环增益的值为两只电阻的比值，负号表明输出信号是反相的。

闭环增益的大小取决于外部原件这一点非常重要，因为这意味着我们可以通过适当选择原件来使增益达到我们想要的值或精确度。通过在其上施加负反馈，我们得到了一个远小于A的稳定可预测增益大小

有限开环增益（开环增益非无穷大）分析：

假设运放A的增益有限，记为A，依照之前的思路，我们可以得到正负输入端口间的电压大小是
$$
v=-\frac{v_o}A
$$
因此输入电压$v_i$的大小会被分去一些，从而电流大小变为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528135815401.png" alt="image-20210528135815401" style="zoom:67%;" />

因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528135902138.png" alt="image-20210528135902138" style="zoom:67%;" />

从而

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528135918916.png" alt="image-20210528135918916" style="zoom:67%;" />

分析图示如下

![image-20210528135946425](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528135946425.png)

输入与输出电阻：

对于一般的电压放大器，我们一般要求其输入电阻尽可能大以使信号损失达到最小，但我们同样也计算出该运放电路的电压增益大小为$-R_2/R_1$，这意味着假如我们同时要求信号损失低和高放大倍数两个要求时，$R_2$将会变得不切实际的大，下面的例子给出了一个解决方案

##### Example 2.2

考虑下面的电路图

![image-20210528140825026](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528140825026.png)

初始分析与此前相同，不同的是，$i_2$使节点x处产生了一个负的电势，使得电阻$R_3$上产生电流$i_3$因此在$R_4$上的电流大小为$i_2+i_3$，分析如下

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528141045886.png" alt="image-20210528141045886" style="zoom:67%;" />

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528141055998.png" alt="image-20210528141055998" style="zoom:67%;" />

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528141110314.png" alt="image-20210528141110314" style="zoom:67%;" />

因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528141125492.png" alt="image-20210528141125492" style="zoom:67%;" />

从而$v_o$为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528141146698.png" alt="image-20210528141146698" style="zoom:67%;" />

因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528141227665.png" alt="image-20210528141227665" style="zoom:67%;" />

这意味着我们只要合适调整$R_3$的大小就可以获得足够大的放大倍数

一个重要应用：加权求和器

![image-20210528141711013](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528141711013.png)

由于虚地存在，每条支路的输入电流都是

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528141818964.png" alt="image-20210528141818964" style="zoom:67%;" />

因此总的输入电流大小为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528141839928.png" alt="image-20210528141839928" style="zoom:67%;" />

而

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528141907491.png" alt="image-20210528141907491" style="zoom:67%;" />

因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528141918706.png" alt="image-20210528141918706" style="zoom:67%;" />

我们可以通过独立调整$v_1$或者其他输入电压的大小来调整对应系数，这使得混合信号的放大变得轻而易举。此外，由于输出是反相的，我们还可以在这个加权放大器的基础上再次叠加一个加权放大器，来使输出信号与输入信号同相，并且这种叠加还使其允许进行减法操作，如下图所示

![image-20210528142209258](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528142209258.png)

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528142259058.png" alt="image-20210528142259058" style="zoom:67%;" />

### 2.3 The Noninverting Configuration

我们研究的第二个闭环电路配置如下所示

![image-20210528142355625](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528142355625.png)

##### 2.3.1 The Closed-Loop Gain

我们首先研究理想状态下的闭环增益大小，首先

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528142533081.png" alt="image-20210528142533081" style="zoom:67%;" />

因此仍然存在虚短效应，换言之
$$
v_1=v_2=v_I
$$
接着我们计算输入电流大小，不难发现
$$
i=v_1/R_1=v_I/R_1
$$
因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528142757999.png" alt="image-20210528142757999" style="zoom:67%;" />

简化为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528142829280.png" alt="image-20210528142829280" style="zoom:67%;" />

分析图示如下

![image-20210528142903412](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528142903412.png)



##### 2.3.2 Effect of Finite Open-Loop Gain

同样我们可以证明，假如输出端的放大倍数并非无穷大，其闭环增益大小为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528143239901.png" alt="image-20210528143239901" style="zoom:67%;" />

当运放本身的放大倍数A远远大于闭环增益的理想值时

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528143520557.png" alt="image-20210528143520557" style="zoom:67%;" />

我们可以采用上一部分的方法来计算闭环增益大小。

##### 2.3.3 Input and Output Resistance

同相配置的增益为正，因此名称为同相。 由于没有电流流入运算放大器的正输入端，因此该闭环放大器的输入阻抗在理想情况下是无限的。 同相放大器的输出取自理想电压源$A（v_2-v_1）$的端子（参见图2.3中的运算放大器等效电路），因此同相配置的输出电阻为零。

##### 2.3.4 The Voltage Follower

同相放大器高输入电阻和低输出电阻的特点使其可以成为缓冲放大器，为此我们可以使$R_2\rightarrow0$而$R_1\rightarrow\infin$来使其增益趋向于1，在最极端的状况下

![image-20210528143929731](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528143929731.png)

![image-20210528143940467](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528143940467.png)

### 2.4 Difference Amplifiers

在研究了运放的两种基本配置以后，我们可以着手设计一些重要应用。在这一节中，我们将研究差分放大器，差分放大器是一种对两个输入端差分信号作出反应的放大器。理想状态下其仅接受输入差分信号$v_{$I_D$}$而不接受共模信号$v_{Icm}$,不过一般而言，实际电路的输出电压为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528144326963.png" alt="image-20210528144326963" style="zoom:67%;" />

其中$A_d$表示差分增益而$A_{cm}$表示共模增益，共模抑制比定义为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528144444970.png" alt="image-20210528144444970" style="zoom:67%;" />

![image-20210528145015355](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528145015355.png)

差分放大器在电路设计中有很广泛的应用，比如考虑一个换能器，其两条线会输出一个1mV的差分信号，但其中包含有1V的噪声，此时差分放大器就能起到过滤噪声的作用。

运放本身由于放大倍数太大而不适用于差分放大器的设计，不过通过反馈网络，我们便可以设计一个合适的稳定电路

##### 2.4.1 A Single-Op-Amp Difference Amplifier（单运放差分放大器）

![image-20210528145415917](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528145415917.png)

假设运放是理想运放，电路分析如下

从下方电路开始，由于流入运放的电流大小为0，因此$R_4$处的电压大小为
$$
v_{I2}\frac{R_4}{R_3+R_4}=v_2
$$
因为虚短，$v_1$的值为
$$
v_1=v_2=v_{I2}\frac{R_4}{R_3+R_4}
$$
因此我们可以得到$R_1$上的电势差为
$$
v_{I1}-v_{I2}\frac{R_4}{R_3+R_4}
$$
换言之，其电流为
$$
i_1=\frac{(v_{I1}-v_{I2}\frac{R_4}{R_3+R_4})}{R_1}
$$
基于同样的原因，我们可以得到$R_2$上的电势差大小为
$$
\frac{(v_{I1}-v_{I2}\frac{R_4}{R_3+R_4})}{R_1}*R_2
$$
从而输出电压为
$$
v_{I2}\frac{R_4}{R_3+R_4}+\frac{(v_{I1}-v_{I2}\frac{R_4}{R_3+R_4})}{R_1}*R_2
$$
化简可以得到
$$
v_o=-\frac{R_2}{R_1}v_{I1}+(1+\frac{R_2}{R_1})(\frac{R_4}{R_3+R_4})v_{I2}
$$
要使得$v_o=A(v_{I2}-v_{I1})$,这两项前的系数必须相同，换言之，我们比较系数可以得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528151013176.png" alt="image-20210528151013176" style="zoom:67%;" />

即

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528151031970.png" alt="image-20210528151031970" style="zoom:67%;" />

也就是说

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528151050151.png" alt="image-20210528151050151" style="zoom:67%;" />

此外还可以得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528151124341.png" alt="image-20210528151124341" style="zoom:67%;" />

但是由于信号源存在内电阻并且$v_{I1}$和$v_{I2}$的信号源内阻几乎不可能相同，为了防止信号失真，我们可以在两个信号的输入处连接两个电压跟随器，如下节所示

对于共模输入信号我们可以用同样的分析方法得到结果，
$$
v_o=\frac{R_4}{R_3+R_4}(1-\frac{R_2R_3}{R_1R_4})v_{Icm}
$$
故
$$
A_{cm}=\frac{R_4}{R_3+R_4}(1-\frac{R_2R_3}{R_1R_4})
$$
因此只要$R_3=R_1,R_4=R_2$即可使$A_{cm}=0$

##### 2.4.2 A Superior Circuit—The Instrumentation Amplifier

![image-20210528151437569](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528151437569.png)

分析如下

![image-20210528151636930](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528151636930.png)

上述分析也表明我们可以从阻抗缓冲中获得更多的收益。

### 2.5 Integrators and Differentiators

目前为止，我们在反馈回路中都仅加入了电阻这一元件，它的加入并不会改变输入信号的频率，但加入电容会如何呢？我们可以利用电容来得到信号的微分器和积分器

##### 2.5.1 The Inverting Configuration with General Impedances

下图展示了包含一般阻抗$Z_i$的反向配置

![image-20210528160614839](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528160614839.png)

就上图而言，其增益大小为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528160643424.png" alt="image-20210528160643424" style="zoom:67%;" />

##### Example 2.4

下面的电路中同时采用了电容和电阻

![image-20210528160739883](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528160739883.png)

代入开头给出的模型，我们可以得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528160820972.png" alt="image-20210528160820972" style="zoom:67%;" />

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528160838857.png" alt="image-20210528160838857" style="zoom:67%;" />

令其倒数为$Y_2(s)$，有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528160931497.png" alt="image-20210528160931497" style="zoom:67%;" />

代入得

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528161027968.png" alt="image-20210528161027968" style="zoom:67%;" />

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528161102843.png" alt="image-20210528161102843" style="zoom:67%;" />

不难看出其直流增益大小为

![image-20210528161144825](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528161144825.png)

并且其3-dB频率$ω_0$为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528161220955.png" alt="image-20210528161220955" style="zoom:67%;" />

##### 2.5.2 The Inverting Integrator（反相积分器）

将上节中电路中的$Z_1$改为电阻，$Z_2$改为电容，我们得到以下电路

![image-20210528161403456](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528161403456.png)

设输入信号是时变函数$v_I(t)$,不难看出R上的电流大小为
$$
I_i=\frac{v_I(t)}{R}
$$
该电流也是一个时变函数，随着时间增加不断给反馈回路中的电容充电。但由于电容的阻拦作用，在$I_i$反相以前电流都不会通过C，如果我们假设在初始状态时，电容器上的电压大小为$V_C$,那么在电流反相以前，电荷都会不断在电容器上聚集，根据电容的定义式，我们可以得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528161940787.png" alt="image-20210528161940787" style="zoom:67%;" />

而输出电压$v_o(t)=-v_C(t)$,因此有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528162047599.png" alt="image-20210528162047599" style="zoom:67%;" />

而如果我们直接把电容等效为其容抗，根据反相配置的闭环增益表达式，我们可以直接得到其传递函数为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528162355257.png" alt="image-20210528162355257" style="zoom:67%;" />

该传递函数的模是

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528162509850.png" alt="image-20210528162509850" style="zoom:67%;" />

相位差是（注：可以从传递函数中看出，分母为纯虚数而分子为纯实数，因此相位差为90度）

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528162556357.png" alt="image-20210528162556357" style="zoom:67%;" />

其波特图如下

![image-20210528162710069](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528162710069.png)

这个传递函数同时带来了一个问题，那就是当输入一个直流电压会产生什么效果？很明显，输入直流电压将会导致输出变为无穷大。但实际上，电容器在直流电压下可以视作短路，因此并不会工作，换言之，此时的放大器是开环工作的（反馈回路断开了）。根据理想运放的特性，理论上来说，输入信号中的任何直流分量（比如驼载电压）都会导致输出信号变为无穷大，为了解决这一问题，我们在反馈回路中添加了一条直流支路，来防止其开环。

![image-20210528163409765](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528163409765.png)

通过简单的分析，我们可以得到以上电路的传递函数，为
$$
\frac{v_o}{v_i}=-\frac{R_F/R}{1+sCR_F}
$$
我们为$R_F$选择的值越小，其转折频率就会越高。因此其直流性能于交流性能之间的均衡取决于$R_F$的值。

##### Example 2.5

求密勒积分器对阶跃函数信号的响应（如下图所示），其中$R=10kΩ，C=10\mu F$.如果我们在反馈支路上再加一个大小为1M的电阻，其相应图又会如何？

![image-20210528164254668](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528164254668.png)

解：

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528164323164.png" alt="image-20210528164323164" style="zoom:67%;" />

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528164332664.png" alt="image-20210528164332664" style="zoom:67%;" />



因此

![image-20210528164350329](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528164350329.png)

接着考虑$R_F=1MΩ$的情况，与之前一样，1V的电压会提供一个0.1mA大小的电流，但不同的是，现在这个电流会进入由电容$C$与$R_F$所构成的STC中，我们考虑这个拥有一个恒流源的STC，可以计算其输出电压大小为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528164723135.png" alt="image-20210528164723135" style="zoom:67%;" />

并在$t=0.1ms$时达到到最大值

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528164836746.png" alt="image-20210528164836746" style="zoom:67%;" />

接着由于回路的存在，电容中的电荷放出，由此引起电压下降，因此其总体的图像如下

![image-20210528165037829](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528165037829.png)

（上图分段的两条曲线分别是输入信号不变和变为0的图线）

积分器在电路工程中有重要的应用，即变换信号，比如说把直线波变成三角波。

##### 2.5.3 The Op-Amp Differentiator

该电路与积分器的差别在于电容和电阻的位置发生了交换

![image-20210528191645141](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528191645141.png)

我们知道
$$
C=\frac{Q}V\rightarrow V=\frac{Q}C\rightarrow \frac{dV}{dt}=\frac1C\frac{dQ}{dt}=\frac1Ci\rightarrow i=C\frac{dV}{dt}
$$
因此干路中的电流为
$$
i(t)=C\frac{dv_I{t}}{dt}
$$
通过与之前类似的而分析过程，我们可以得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528192003139.png" alt="image-20210528192003139" style="zoom:67%;" />

及其传递函数

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528192248859.png" alt="image-20210528192248859" style="zoom:67%;" />

模长为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528192322551.png" alt="image-20210528192322551" style="zoom:67%;" />

相位差为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528192338855.png" alt="image-20210528192338855" style="zoom:67%;" />

波特图如下

![image-20210528192403144](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528192403144.png)

微分放大器的频率响应可以看作是拐角频率为无穷大的STC的响应。最后们应该注意到，微分放大器会成为“噪声放大器”（因为信号中小小的波动都会引起微分放大器的输出信号中的一个尖峰），因此一般会避免使用微分放大器。

### 2.6 DC Imperfections

目前为止，我们都认为运放是理想的，唯一的例外是讨论了放大倍数有限时大的电路闭环增益。尽管在许多应用中，认为运放是理想的这一假说并不坏，但实验人员必须完全了解运放的特性，以期了解这些特性对电路的影响

##### 2.6.1 Offset Voltage（失调电压）

事实上，op是直流放大器见，因此面临的第一个问题就是电压失调的问题。

考虑这样一个虚拟实验：如果运算放大器的两个输入端子连接在一起并接地，则会发现尽管$v_{$I_D$}$ = 0，但输出端仍存在有限的直流电压。 实际上，如果运算放大器具有高直流增益，则输出将处于正或负饱和电平。 通过在运算放大器的两个输入端子之间连接适当极性和大小的直流电压源，可以将运算放大器的输出恢复到理想的0 V值。 该外部源平衡了运算放大器的输入失调电压。 因此，输入失调电压（$V_{OS}$）必须与我们外部施加的电压具有相同的幅值并且极性相反

一般而言，失调电压的大小在1mV到5mV的范围内。此外，其还取决于温度等外部因素

事实上，我们并不会事先知道失调的极性如何，因此我们暂时以下面的模型来描述这一现象



![image-20210528193319722](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528193319722.png)

通过分析运算放大器电路来确定运算放大器VOS对其性能的影响是很简单的：输入电压信号源短路，运算放大器替换为图2.28的模型。  （为简化起见，消除输入信号是基于叠加原理。）

![image-20210528193710172](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528193710172.png)

按照此步骤，我们发现反相放大器和同相放大器配置都产生相同的电路，如图2.29所示，从该电路中 发现由于$V_{OS}$而产生的输出直流电压为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528193721091.png" alt="image-20210528193721091" style="zoom:67%;" />

该输出直流电压可能具有很大的幅度。 例如，当由具有5mV输入失调电压的运算放大器构成时，闭环增益为1000的同相放大器的直流输出电压为+5 V或-5 V（取决于极性）。而不是0 V的理想值。现在，当将输入信号施加到放大器时，相应的信号输出将叠加在5 V dc上。

通常而言，解决这个问题有两种办法，一是直接引入外部电源来将其消除，如下图

![image-20210528193913033](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528193913033.png)

另一种则是在其输入端耦合一个电容，但这样做的问题是会使放大器只能进行开环放大，如下图（失调电压因为虚短仍会出现，但不会被放大）

![image-20210528194211177](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528194211177.png)

##### 2.6.2 Input Bias and Offset Currents

为了使op amp工作，必须向两个输入端子提供直流电流（称输入偏置电流），如下图

![image-20210528194331946](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528194331946.png)

理想状态下，这两个电流大小应该相等，记$I_B$为总输入偏置电流，有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528194438835.png" alt="image-20210528194438835" style="zoom:67%;" />

不过在实际操作过程中，电流大小不可能相等，记其差值为输入失调电流（$I_{OS}$)]

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528194738279.png" alt="image-20210528194738279" style="zoom:67%;" />

为了分析失调电流对放大器性能的影响，如之前所做的一样，我们首先断开信号源

1.反相：

![image-20210528194846169](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528194846169.png)



通过对输入端负极的节点方程计算可知，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528194949246.png" alt="image-20210528194949246" style="zoom:67%;" />

2.同相：

![image-20210528195046750](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528195046750.png)

同样分析输入端负极的节点方程，可以得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528195137070.png" alt="image-20210528195137070" style="zoom:67%;" />

假设$I_{B1}=I_{B2}=I_B$,有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528195222452.png" alt="image-20210528195222452" style="zoom:67%;" />

从而我们可以借此设置$R_3$的值来使$V_O$变为0

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528195311910.png" alt="image-20210528195311910" style="zoom:67%;" />

若两者之间存在失调电流$I_{OS}$,那么

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528195426424.png" alt="image-20210528195426424" style="zoom:67%;" />

我们得出的结论是，为了最大程度地减小输入偏置电流的影响，应在正极引线中放置一个电阻，该电阻应等于反相端子看到的等效直流电阻。 我们在最后一个语句中强调dc一词； 注意，如果放大器是交流耦合的，则应选择$R_3 = R_2$，如图2.35所示。

![image-20210528195730339](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528195730339.png)

当我们讨论交流耦合放大器时，我们应注意，必须始终在运算放大器的每个输入端子与地面之间提供连续的直流路径。不管$I_B$多么小，都是如此。 因此，如果没有接地电阻$R_3$，图2.36的交流耦合同相放大器将无法工作。 不幸的是，包括R3会大大降低闭环放大器的输入电阻。

![image-20210528195627257](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528195627257.png)

##### 2.6.3 Effect of $V_{OS}$ and $I_{OS}$ on the Operation of the Inverting Integrator

我们在第2.5.2节中对反相积分器电路的讨论提到了在小直流电压或小电流存在的情况下该电路对饱和的敏感性。 因此，我们有必要考虑运算放大器直流失调对其工作的影响。 可以看出，这些影响可能非常显著

![image-20210528195926631](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528195926631.png)

分析过程和结果如上图所示，最后我们得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528200020864.png" alt="image-20210528200020864" style="zoom:67%;" />

我们可以在C上面并联一个电阻$R_F$来减弱此效应

### 2.7 Effect of Finite Open-Loop Gain and Bandw$I_D$th on Circuit Performance

##### 2.7.1 Frequency Dependence of the Open-Loop Gain

运算放大器的差分开环增益A并非无限大； 相反，它是有限的，并且随频率而降低。 图2.39显示了$| A |$的曲线图，其中带有一些市售通用运算放大器（例如，可从许多半导体制造商处购买的流行741型运算放大器；其内部电路在第13章中进行研究）的典型曲线。

![image-20210528200246330](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528200246330.png)

请注意，尽管增益在直流和低频时都很高，但在相当低的频率（在我们的示例中为10 Hz）下会开始下降。 所示的均匀的–20 dB /十倍增益衰减是内部补偿运算放大器的典型特性。 这些是在同一IC芯片中包含网络（通常是单个电容器）的单元，其功能是使运算放大器增益具有所示的单时间常数（STC）低通响应。 修改开环增益的过程称为频率补偿，其目的是确保运算放大器电路稳定（与振荡相反）。 运放电路（或更一般而言，反馈放大器）的稳定性问题将在第11章中进行研究。

从上面的波特图中我们可以看到3-dB频率点和单位增益频率点

实际上，我们注意到，相同类型的运算放大器单元之间的$f_t$值的差异通常比$A_0$和$f_b$之间的差异小得多。 因此，首选$f_t$作为规范参数。 最后，应该提到的是，具有这种均匀的–6 dB /倍频程（或等效地–20 dB /十倍频）增益衰减的运算放大器具有单极点模型。 同样，由于该单极点在放大器的频率响应中占主导地位，因此被称为主导极点。 有关极点（和零点）的更多信息，读者不妨参考附录F。

##### 2.7.2 Frequency Response of Closed-Loop Amplifiers

接下来，我们考虑有限的运算放大器增益和带宽对两个基本配置的闭环传递函数的影响：图2.5的反相电路和图2.12的同相电路。 假设运算放大器的开环增益为A，则反相放大器的闭环增益在第2.2节中得出，如下

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528200840836.png" alt="image-20210528200840836" style="zoom:67%;" />

我们假设该放大器有一个主导极点，因此其传递函数应为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528200955695.png" alt="image-20210528200955695" style="zoom:67%;" />

将其带入上式

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528201033549.png" alt="image-20210528201033549" style="zoom:67%;" />

通常而言，有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528201057543.png" alt="image-20210528201057543" style="zoom:67%;" />

故

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528201109191.png" alt="image-20210528201109191" style="zoom:67%;" />

因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528201125070.png" alt="image-20210528201125070" style="zoom:67%;" />

对于同相电路这个分析是类似的

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528201209093.png" alt="image-20210528201209093" style="zoom:67%;" />

最后得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528201223551.png" alt="image-20210528201223551" style="zoom:67%;" />

### 2.8 Large-Signal Operation of Op Amps

##### 2.8.1 Output Voltage Saturation

与所有其他放大器相似，运算放大器在有限的输出电压范围内线性工作。具体来说，运算放大器的输出以图1.14所示的方式饱和，其中L +和L-分别在正电源和负电源的1V左右。 因此，当输出电压在正方向上达到约+ 13V，在负方向上达到–13 V时，以±15 V电源工作的运放将饱和。 对于这种特殊的运算放大器，额定输出电压标称为±13V。为避免削波输出波形的峰值和由此产生的波形失真，必须将输入信号保持相对较小。

##### 2.8.2 Output Current Limits

运算放大器工作的另一个限制是它们的输出电流被限制在规定的最大值内。 例如，流行的741运算放大器被指定为具有±20 mA的最大输出电流。 因此，在设计使用741的闭环电路时，设计人员必须确保在任何情况下都不需要运算放大器在任一方向上提供超过20 mA的输出电流。 当然，这必须包括反馈电路中的电流以及提供给负载电阻器的电流。 如果电路需要更大的电流，则运算放大器的输出电压将饱和在对应于最大允许输出电流的电平上

##### 2.8.3 Slew Rate（摆率）

当存在较大的输出信号时，另一个可能导致非线性失真的现象是摆率限制。 该名称指的是这样的事实，即在实际运算放大器的输出端可能存在特定的最大变化率。 该最大值称为运算放大器的压摆率（SR），其定义为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528201609676.png" alt="image-20210528201609676" style="zoom:67%;" />

因此，如果施加到运算放大器电路的输入信号要求输出响应快于SR的指定值，则运算放大器将不符合要求。相反，它的输出将以最大可能的速率变化，这等于它的SR。作为一个例子，考虑在图2.43（a）所示的单位增益电压跟随器配置中连接的运算放大器，并让输入信号为图2.43（b）所示的阶跃电压。运算放大器的输出不能瞬间上升到理想值V；相反，输出将是斜率等于SR的线性斜坡，如图2.43（c）所示。

![image-20210528201711167](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528201711167.png)



为了理解转换率现象的起源，我们需要了解运算放大器的内部电路，我们将在第13章对其进行研究，了解这一现象并注意到它不同于限制闭环放大器频率响应的有限运算放大器带宽（在上一节中研究过）。有限带宽是线性现象，不会导致输入正弦曲线形状的变化；也就是说，它不会导致非线性失真。另一方面，当输入正弦信号的频率和振幅使得相应的理想输出需要vO以大于SR的速率变化时，转换速率限制会导致输入正弦信号的非线性失真。这是另一个相关运算放大器规范的起源，其全功率带宽将在后面解释。

## CHAPTER 3 Semiconductors（半导体类）

### 3.3 Current Flow in Semiconductors

##### 3.3.1 Drift Current（漂移电流）

在半导体中给定电场，其中的空穴和自由电子将会朝相反方向相互运动，假设空穴的速度是$v_{p-drift}$,有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530101302082.png" alt="image-20210530101302082" style="zoom:67%;" />

其中 $μ_p$ 是一个常数，称为空穴迁移率：它表示空穴响应电场 $E$ 穿过硅晶体的容易程度。 因为速度的单位是厘米每秒，而 $E$ 的单位是伏特每厘米 ，我们从方程中看到。迁移率$μ_p$ 的单位必须是厘米平方每伏秒（$cm^2$/$V$·$s$）。 对于本征硅, $μ_p$ $= 480 cm^2/V·s。$

![image-20210530101518206](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530101518206.png)

对于电子则同理

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530101543112.png" alt="image-20210530101543112" style="zoom:67%;" />

其计算结果为负，因为电子在与 $E$ 相反的方向移动。这里 $μ_n$ 是电子迁移率，对于本征硅来说，它大约为 $1350 cm^2/V·s。$ 请注意，$μ_n$ 大约是 $μ_p$ 的 2.5 倍，这表明电子比空穴更容易穿过硅晶体。

现在让我们回到图 3.5 所示的单晶硅棒。 设空穴浓度为 p，自由电子浓度为 n。 由于孔的流动，我们希望计算电流分量。 考虑一个垂直于 x 方向的平面。 在一秒钟内，穿过该平面的空穴电荷将为 ($Aqpν_{p-drift}$) 库仑，其中 A 是硅棒的横截面积，q 是电子电荷的大小。 那么这一定是流过棒的漂移电流的空穴分量

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530101838861.png" alt="image-20210530101838861" style="zoom:67%;" />

代入空穴漂移的速度，有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530101935924.png" alt="image-20210530101935924" style="zoom:67%;" />

我们通常对电流密度更感兴趣，记为$J_p$，有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530102035975.png" alt="image-20210530102035975" style="zoom:67%;" />

可以用类似的方式找到由于自由电子漂移引起的电流分量。 但是请注意，从右到左漂移的电子会导致从左到右的电流分量。 这是因为将电流流动方向作为正电荷流动方向而与负电荷流动方向相反的惯例。 因此，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530102121706.png" alt="image-20210530102121706" style="zoom:67%;" />

同理可以找到其电流密度

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530102226895.png" alt="image-20210530102226895" style="zoom:67%;" />

因此总电流密度为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530102244364.png" alt="image-20210530102244364" style="zoom:67%;" />

或者写作

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530102259297.png" alt="image-20210530102259297" style="zoom:67%;" />

或

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530102421341.png" alt="image-20210530102421341" style="zoom:67%;" />

其中电导率$σ$由下式给出

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530102445123.png" alt="image-20210530102445123" style="zoom:67%;" />

电阻率$ρ$由下式给出

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530102612539.png" alt="image-20210530102612539" style="zoom:67%;" />

##### 3.3.2 Diffusion Current（扩散电流）

当一块半导体中的载流子密度不均匀时，就会发生载流子扩散。 例如，如果通过某种机制使一块硅的一部分中的空穴浓度高于另一部分中的空穴浓度，则空穴将从高浓度区域扩散到低浓度区域。 这种扩散过程就像在装满水的水箱中滴几滴墨滴所观察到的一样。 电荷载流子的扩散产生净电荷流或扩散电流。

例如，考虑图 3.6(a) 中所示的硅棒：通过一些未指定的过程，我们已经安排在其左侧注入空穴。 这种连续的空穴注入产生并保持了如图 3.6(b) 所示的空穴浓度分布。该分布反过来导致空穴沿着硅棒从左到右扩散，从而在 x 方向产生空穴电流。 任何一点的电流大小都与浓度分布的斜率或该点的浓度梯度成正比，

![image-20210530102756650](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530102756650.png)



空穴电流密度为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530102839652.png" alt="image-20210530102839652" style="zoom:67%;" />

其中 $J_p$ 是空穴电流密度 $(A/cm^2)$，$q$ 是电子电荷的大小，$D_p$ 是称为扩散常数或空穴扩散率的常数；$p(x)$ 是点 x 的空穴浓度。 请注意，梯度 $(dp/dx)$ 为负，导致 x 方向上的电流为正，正如预期的那样

类似的

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530103153094.png" alt="image-20210530103153094" style="zoom:67%;" />

其中 $D_n$ 是电子的扩散常数或扩散率。 观察到负值 $(dn/dx)$ 产生负电流，这是电流的正方向被视为正电荷流动的惯例的结果

对于在本征硅中扩散的空穴和电子，扩散常数的典型值为 $D_p = 12 cm^2/s 和 D_n = 35 cm^2/s$。

##### 3.3.3 Relationship between $D$ and $μ$

一个简单但强大的关系将扩散常数与迁移率联系起来，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530103734343.png" alt="image-20210530103734343" style="zoom:67%;" />

其中 $V_T = kT/q$。 参数 $V_T$ 称为热电压。 在室温下$，T\sime$Q_3$00 K$ 和 $V_T = 25.9 mV$。 

### 3.4 The pn Junction

##### 3.4.2 Operation with Open-Circuit Terminals

图3.9显示了开路条件下的pn结-也就是说，外部端子保持开路。  p 型材料中的“+”号表示多数空穴。 这些空穴的电荷被与受体原子相关的等量束缚负电荷中和。 为简单起见，这些绑定电荷未在图中显示。 也未显示通过热电离在 p 型材料中产生的少数电子。在 n 型材料中，多数电子用“-”符号表示。 此处也未显示中和多数电子电荷的束缚正电荷，以保持图表简单。  n 型材料还包含由热电离产生的少数空穴，但图中未显示。

![image-20210530104200405](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530104200405.png)

扩散电流 $I_D$:由于空穴浓度在 p 区高而在 n 区低，空穴从 p 侧向 n 侧扩散穿过结。 类似地，电子从 n 侧向 p 侧扩散穿过结。 这两个电流分量加在一起形成扩散电流 $I_D$，其方向是从 p 侧到 n 侧，如图 3.9 所示。

耗尽层：扩散入对应极区的载流子会迅速与对应载流子中和。因此，一些束缚正电荷将不再被自由电子中和。 由于复合发生在结附近，因此在结附近会有一个区域，该区域耗尽了自由电子并包含未覆盖的束缚正电荷，如图 3.9 所示。

穿过结扩散到 p 区的电子迅速与那里的一些多数空穴复合，从而从场景中消失。 这也会导致一些多数空穴消失，导致一些束缚负电荷被发现（即不再被空穴中和）。 因此，在靠近结的 p 材料中，将有一个耗尽空穴并包含未覆盖的束缚负电荷的区域，如图 3.9 所示。

由上可知，结的两侧将存在载流子耗尽层，该区域的 n 侧带正电，p 侧带负电。这个载流子耗尽层——或者简单地说，耗尽层——也被称为空间电荷区。 耗尽层两侧的电荷导致电场 E 沿图 3.9 所示方向穿过该区域。 因此，耗尽层两端产生电位差，n 侧相对于 p 侧处于正电压，如图 3.9(b) 所示。 因此，产生的电场阻止空穴扩散到 n 区和电子扩散到 p 区。 事实上，耗尽层两端的电压降充当势垒，空穴扩散到 n 区和电子扩散到 p 区必须克服它。 势垒电压越大，能够克服势垒的载流子数量越少，因此扩散电流的幅度越低。 因此，势垒电压 $V_0$ 的出现限制了载流子扩散过程。 因此，扩散电流 $I_D$ 强烈依赖于耗尽层两端的电压降 $V_0$。

漂移电流 $I_S$ 和平衡:除了多数载流子扩散引起的电流分量 $I_D$ 外，结中还存在少数载流子漂移引起的分量。具体而言，n 材料中一些热产生的空穴向结移动并到达耗尽层的边缘。 在那里，他们经历耗尽层中的电场，这使他们穿过该区域进入 p 侧。 类似地，p 材料中一些少数热产生的电子移动到耗尽层的边缘，并被耗尽层中的电场扫过该区域进入 n 侧。 这两个电流分量——电子从 p 漂移到 n 和空穴从 n 漂移移动到 p——加在一起形成漂移电流 $I_S$，其方向是从结的 n 侧到 p 侧，如 图 3.9。 由于电流 $I_S$ 由热产生的少数载流子携带，因此其值强烈依赖于温度； 然而，它与耗尽层电压 $V_0$ 的值无关。 这是因为漂移电流由到达耗尽层边缘的少数载流子数量决定； 任何设法到达耗尽层边缘的少数载流子都将被 E 扫过，而不管 E 的值或相应的 $V_0$ 的值。

在开路条件下（图 3.9）不存在外部电流； 因此，通过结的两个相反的电流大小必须相等

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530105033501.png" alt="image-20210530105033501" style="zoom:67%;" />

这种平衡条件由势垒电压$V_0$ 维持。 因此，如果由于某种原因$I_D$ 超过 IS，则结的两侧将暴露出更多的束缚电荷，耗尽层将变宽，其两端的电压 (V0) 将增加。 这反过来导致 $I_D$ 减小，直到达到 $I_D$ = $I_S$ 的平衡。 另一方面，如果 $I_S$ 超过 $I_D$，则未覆盖电荷量将减少，耗尽层将变窄，其两端的电压 ($V_0$) 将下降。 这导致 $I_D$ 增加，直到达到平衡 $I_D$ = $I_S$

结内置电压:在没有施加外部电压的情况下，pn 结上的势垒电压 $V_0$ 可以表示为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530105459770.png" alt="image-20210530105459770" style="zoom:67%;" />

其中 $N_A$ 和 $N_D$ 分别是结的 p 侧和 n 侧的掺杂浓度。 因此 $V_0$ 取决于掺杂浓度和温度。 称为结点内置电压。 通常，对于室温下的硅，$V_0$ 在 0.6 V 到 0.9 V 的范围内。

当 pn 结端子保持开路时，它们之间测得的电压将为零。 即，耗尽区两端的电压$V_0$不会出现在结端子之间。 这是因为端子处的金属-半导体结处存在接触电压，它抵消并精确地平衡了势垒电压。 如果不是这种情况，我们就可以从孤立的 pn 结中汲取能量，这显然违反了能量守恒定律。

耗尽区的宽度和存储的电荷:图 3.10 进一步说明了当结处于平衡状态时在 pn 结中的情况

![image-20210530105714957](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530105714957.png)

![image-20210530105728154](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530105728154.png)

![image-20210530105739683](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530105739683.png)

![image-20210530105754818](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530105754818.png)

在图 3.10(a) 中，我们展示了一个 NA > ND 的连接点，这是实践中的典型情况。 这由结两侧的载流子浓度证实，如图 3.10(b) 所示。请注意，我们已用 $np_0$ 和 $pn_0$ 表示两侧的少数载流子浓度，附加下标“0”表示平衡（即，在施加外部电压之前，将在下一节中看到）。 观察耗尽区在 p 和 n 材料中延伸，并且两侧存在等量的电荷（图 3.10c 中的 $Q_+$ 和 $Q_-$）。 然而，由于通常使用不等的掺杂 $N_A$ 和 $N_D$，如图 3.10 所示的情况，耗尽层的宽度在两侧将不相同。 相反，为了产生相同数量的电荷，耗尽层将更深地延伸到更低掺杂的材料中。 具体来说，如果我们用 $x_p$ 表示 p 侧耗尽区的宽度，$x_n$ 表示 n 侧耗尽区的宽度，我们可以将结的 n 侧电荷的大小表示为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530115041818.png" alt="image-20210530115041818" style="zoom:67%;" />

同理p侧电荷量大小为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530115117238.png" alt="image-20210530115117238" style="zoom:67%;" />

显然两侧的电荷量要平衡

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530115153739.png" alt="image-20210530115153739" style="zoom:67%;" />

或写为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530115219693.png" alt="image-20210530115219693" style="zoom:67%;" />

在实际实践中，结的一侧通常比另一侧掺杂得更重，结果耗尽区几乎完全存在于一侧（轻掺杂侧）。

耗尽层的宽度 W 可以表示为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530115308253.png" alt="image-20210530115308253" style="zoom:67%;" />

其中 $\epsilon_ s$ 是硅的介电常数 =11.7$\epsilon_0$ =$11.7×8.85×10^{−14} F/cm$ $= 1.04× 10^{−12} F/cm$。 通常 W 在 0.1 μm 到 1 μm 的范围内。 方程式 (3.25) 和 (3.26) 可用于根据 W 获得 $x_n$ 和 $x_p$ 为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530115620782.png" alt="image-20210530115620782" style="zoom:67%;" />

存储在耗尽区任一侧的电荷可以通过利用上式以 W 表示。  

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530115717591.png" alt="image-20210530115717591" style="zoom:67%;" />

### 3.5 The pn Junction with an Applied Voltage

##### 3.5.1 Qualitative Description of Junction Operation

在施加反向偏置电压时，耗尽层会因此变大，从而使势垒从$V_0\rightarrow V_0+V_R$而使漂移电流的大小迅速下降，在实际分析时，如此小数量级的漂移电流$I_D$可以被忽略，因此我们认为此时电路中仅存在扩散电流$I_s$

![image-20210530120324925](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530120324925.png)

而正偏时，情况相反，势垒大小$V_0\rightarrow V_0-V_R$，漂移电流的大小会比扩散电流的大小高出几个数量级

反偏时，耗尽层宽度上升

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530120552101.png" alt="image-20210530120552101" style="zoom:67%;" />

相应的，耗尽层中存储的电荷量也会上升

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530120701669.png" alt="image-20210530120701669" style="zoom:67%;" />

正偏时同理。

pn结的输出电流大小为漂移电流和扩散电流之差

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530120820911.png" alt="image-20210530120820911" style="zoom:67%;" />

##### 3.5.2 The Current–Voltage Relationship of the Junction

为了找到其伏安特性关系，我们首先考虑正偏情况。我么知道，正偏会使更多的空穴到达n的耗尽层边缘，耗尽层边缘的稳态浓度为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530121046253.png" alt="image-20210530121046253" style="zoom:67%;" />

即该空穴（n中的少子）会从平衡浓度$p_n$上升到一个由正偏电压V决定的值，我们因此定义过量浓度为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530121217521.png" alt="image-20210530121217521" style="zoom:67%;" />

而随着少子的注入，扩散远离的少子会与多子复合，从而少子的浓度会随扩散距离增加而呈指数衰减（我们以n型半导体为例），其在距离x处的浓度如下式所示

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530121619461.png" alt="image-20210530121619461" style="zoom:67%;" />

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530121626331.png" alt="image-20210530121626331" style="zoom:67%;" />

常数$L_p$为n型材料中的空穴扩散长度，$L_p$越小，空穴与电子的符合越快，衰减速度越快

![image-20210530121815569](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530121815569.png)

我们假定$N_D<<N_A$,根据我们此前得出扩散电流密度公式，有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530121955434.png" alt="image-20210530121955434" style="zoom:67%;" />

如我们所预料的一样，在空穴密度最大的$x_n$处，其扩散电流密度大小最大

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530122055664.png" alt="image-20210530122055664" style="zoom:67%;" />

同理我们还可以得出电子扩散电流的大小

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530122141797.png" alt="image-20210530122141797" style="zoom:67%;" />

尽管我们所计算出来的扩散电流的值是在耗尽层的边缘计算出来的，但这个电流的值在耗尽层中并不会改变，从而我们可以得出交界处的电流大小为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530122353421.png" alt="image-20210530122353421" style="zoom:67%;" />

将$p_{n0}=n_i^2/N_D$和$n_{p0}=n_i^2/N_A$代入，有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530122548228.png" alt="image-20210530122548228" style="zoom:67%;" />

此外我们从上式中可以看出，当$V<0$时（也就是外部电压反偏）指数项几乎下降到0，我们知道，此时电流大小即为扩散电流$I_s$，换言之

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530122838352.png" alt="image-20210530122838352" style="zoom:67%;" />

因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530122936057.png" alt="image-20210530122936057" style="zoom:67%;" />

![image-20210530123055340](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530123055340.png)

图 3.13 显示了 pn 结的 I-V 特性。 观察到，在负方向，电流在等于 $–I_S$ 的值处饱和。 因此，$I_S$ 被命名为饱和电流。 从方程。  (3.41) 我们看到$I_S$ 与结的横截面积A 成正比。 因此，我们更喜欢在本书中使用的 $I_S$ 的另一个名称是结标度电流。 对于不同区域的结点，IS 的典型值范围从 $10^{-18} A 到 10^{-12} A$。

除了与连接面积 A 成正比外，上式还表明表明 $I_S$ 与 $n^2_ i$ 成正比，这是一个非常强的温度函数。

##### 3.5.3 Reverse Breakdown（反向击穿）

在反向电压超过一定值以后，可能会发生电流突然增大的情况，如果此时还处于额定功率内，则该现象一般不会产生破坏

![image-20210530123615323](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530123615323.png)



在 $V = V_Z$ 处发生的现象称为结击穿。 这不是一种破坏性的现象。 即，pn结可以在击穿区域中重复操作而对其特性没有永久性影响。但是，这是基于以下假设：反向击穿电流的大小受外部电路限制为“安全”值。  “安全”值是将结中的功耗限制在安全、允许水平的值。

pn 结击穿有两种可能的机制：齐纳击穿和雪崩击穿。 如果 pn 结击穿电压 $V_Z < 5 V$，击穿机制通常是齐纳击穿。 当 VZ 大于大约 7 V 时会发生雪崩击穿。对于在 5 V 和 7 V 之间击穿的结，击穿机制可以是齐纳击穿或雪崩击穿，也可以是两者的组合。

当耗尽层中的电场增加到可以破坏共价键并产生电子 - 空穴对时，就会发生齐纳击穿。 以这种方式产生的电子将被电场扫入 n 侧，空穴扫入 p 侧。因此，这些电子和空穴构成了穿过结的反向电流。 一旦齐纳击穿开始，就会产生大量载流子，结电压的增加可以忽略不计。 因此击穿区的反向电流会很大，其值必须由外部电路决定，而二极管端子之间出现的反向电压将保持接近规定的击穿电压$V_Z$。

另一种击穿机制，雪崩击穿，当少数载流子在电场的影响下穿过耗尽区时获得足够的动能，从而能够破坏与它们碰撞的原子中的共价键。 通过该过程释放的载流子可以具有足够高的能量，以能够使其他载流子在另一次电离碰撞中被释放。该过程一次类推，可以迅速产生大量载流子，因此得名雪崩击穿。

### 3.6 Capacitive Effects in the pn Junction

pn结中存在两种电荷储存机制。一个与存储在耗尽区中的电荷相关，另一个与存储在n和p材料中的少数载流子电荷相关，这是通过载流子注入建立的浓度分布的结果。当pn结反向偏置时，第一种更容易观察到，而第二种仅在结正向偏置时有效

##### 3.6.1 Depletion or Junction Capacitance（势垒电容）

当pn结处于反偏电压$V_R$下时，储存在两侧耗尽层中的电荷量如下式所示

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530162005713.png" alt="image-20210530162005713" style="zoom:67%;" />

因此对于给定的pn结，有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530162106058.png" alt="image-20210530162106058" style="zoom:67%;" />

其中 $\alpha$为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530162139590.png" alt="image-20210530162139590" style="zoom:67%;" />

因此该势垒电容$Q_J$的大小与反偏电压$V_R$并非呈线性关系，如下图所示

![image-20210530162505205](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530162505205.png)

因此当偏置电压变化时，我们很难给出一个稳定的关系来刻画势垒电容的变化，不过，当pn结在给定电压下工作时，我们可以定义势垒电容的大小为曲线的斜率。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530162719077.png" alt="image-20210530162719077" style="zoom:67%;" />

或者说

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530162806107.png" alt="image-20210530162806107" style="zoom:67%;" />

因此当零偏时，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530162828349.png" alt="image-20210530162828349" style="zoom:67%;" />

从而我们可以将势垒电容大小表示为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530162852909.png" alt="image-20210530162852909" style="zoom:67%;" />

不过要注意的是，我们现在研究的pn结，其掺杂浓度会在两类半导体的交界处发生突变，这类pn结被称作突变结；而另外一类pn结，这种掺杂浓度的变化则是渐变式的，因此我们可以将上面的式子写作更为一般的形式。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530163229246.png" alt="image-20210530163229246" style="zoom:67%;" />

其中m（梯度系数 grading coefficient）的大小随其掺杂方式的变化而变化。

##### 3.6.2 Diffusion Capacitance（扩散电容）

此前我们给出了非平衡少子的扩散方程，该方程给出了非平衡少子的分布函数，因此通过计算该曲线与横轴围成的面积，可以计算出其数量（积分）

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530163709465.png" alt="image-20210530163709465" style="zoom:67%;" />

将我们此前得出的方程代入上式，有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530163747823.png" alt="image-20210530163747823" style="zoom:67%;" />

其中($L_p^2/D_p$)是一个有用的时域参数，记为$\tau_p$

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530163950298.png" alt="image-20210530163950298" style="zoom:67%;" />

换言之可以写作

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530164003280.png" alt="image-20210530164003280" style="zoom:67%;" />

对于电子来说也是这样

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530174416364.png" alt="image-20210530174416364" style="zoom:67%;" />

因此总电荷量的大小是

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530181253874.png" alt="image-20210530181253874" style="zoom: 67%;" />

对于偏置点附近的微小变化，我们可以将增量扩散电容$C_d$定义为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530182333547.png" alt="image-20210530182333547" style="zoom:67%;" />

并且我们可以证明

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530182403395.png" alt="image-20210530182403395" style="zoom:67%;" />

其中 $I$ 是正向偏置电流。 请注意，$C_d$ 与正向电流 $I$ 成正比，因此在二极管反向偏置时可以忽略不计。 还要注意，为了保持 $C_d$ 小，渡越时间 $τ_T$ 必须小，这是用于高速或高频操作的 pn 结的重要要求

## CHAPTER 5 MOS Field-Effect Transistors (MOSFETs)

在研究了最基本的二端半导体器件结型二极管之后，我们现在将注意力转向三端半导体器件。 三端设备比两端设备有用得多，因为它们可用于多种应用，从信号放大到数字逻辑和存储器。 所涉及的基本原理是**利用两个端子之间的电压来控制流入第三个端子的电流**。 通过这种方式，可以使用三端设备来**实现受控源**，正如我们在第 1 章中学到的，这是放大器设计的基础。 另外，在极端情况下，可以利用控制信号使第三端的电流从零变为一个较大的值，从而使器件起到开关的作用。 正如我们将在第 14 章中看到的，开关是实现逻辑反相器的基础，逻辑反相器是数字电路的基本元素。

三端半导体器件有两种主要类型：本章将研究的金属氧化物半导体场效应晶体管 (MOSFET) 和我们将在第 6 章中研究的双极结型晶体管 (BJT)。 这两种晶体管类型提供独特的功能和应用领域，MOSFET 已成为迄今为止使用最广泛的电子设备，尤其是在集成电路 (IC) 的设计中，集成电路是在单个硅芯片上制造的整个电路。

与 BJT 相比，MOSFET 可以做得非常小（即需要在硅 IC 芯片上占用很小的面积），并且它们的制造工艺相对简单（参见附录 A）。

此外，它们的操作需要相对较小的功率。 此外，电路设计人员已经找到了几乎完全使用MOSFET（即，几乎没有电阻器或没有电阻器）来实现数字和模拟功能的巧妙方法。 所有这些特性使得在单个 IC 芯片上封装大量 MOSFET（多达 40 亿个！）成为可能，以实现非常复杂的超大规模集成 (VLSI) 数字电路，例如用于存储器和 微处理器。 放大器和滤波器等模拟电路也可以在 MOS 技术中实现，尽管是在更小、密度更低的芯片中。 此外，越来越多的模拟和数字功能在同一个 IC 芯片上实现，即所谓的混合信号设计。

本章的目的是让读者高度熟悉 MOSFET：其物理结构和操作、端子特性和直流电路应用。 这将为 MOSFET 在放大器设计（第 7 章）和数字电路设计（第 14 章）中的应用奠定坚实的基础。 尽管存在分立 MOS 晶体管，并且本章中研究的材料将使读者能够设计分立 MOS 电路，但我们对 MOSFET 的研究受到其大部分应用在集成电路设计中这一事实的强烈影响。  IC 模拟和数字 MOS 电路的设计占据了本书其余部分的很大一部分。

### 5.1 Device Structure and Physical Operation

增强型 MOSFET 是应用最广泛的场效应晶体管。 除最后一节外，本章专门研究增强型MOSFET。 在本节中，我们首先了解其结构和物理操作。而由其产生的伏安特性则将在下一节中研究

##### 5.1.1 Device Structure

图 5.1 显示了 n 沟道增强型 MOSFET 的物理结构。  “增强”和“n 沟道”这两个名称的含义很快就会变得显而易见。 该晶体管是在 p 型衬底上制造的，该衬底是一个单晶硅晶片，为器件（以及在集成电路的情况下为整个电路）提供物理支持。 两个重掺杂的 n 型区，在图中表示为 n+ 源极和 n+ 漏区，在衬底中形成。 一层厚度为 $t_{ox}$（通常为 1 nm 至 10 nm）2 的二氧化硅 ($SiO_2$) 薄层是一种极好的电绝缘体，它生长在衬底表面，覆盖源区和漏区之间的区域。 金属沉积在氧化物层的顶部以形成器件的栅极

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604125337283.png" alt="image-20210604125337283" style="zoom:67%;" />

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604125353421.png" alt="image-20210604125353421" style="zoom:67%;" />

在源极、漏极、栅极和衬底上分别各有一个金属接触点，因此，引出四个端子：栅极端子 (G)、源极端子 (S)、漏极端子 (D) 和衬底端子 (B)。

（注：在图 5.1 中，与衬板的接触点显示在设备的底部。 这将在第 5.4 节中证明有助于解释称为“衬底效应”的现象。 然而，重要的是要注意，在实际的 IC 中，与衬板的接触点多数是在器件顶部的某个位置）

在这一点上应该清楚，该器件的名称（金属氧化物半导体 FET）是从其物理结构中衍生出来的。 然而，该名称已成为通用名称，也用于不使用金属作为栅极的 FET。 事实上，大多数现代 MOSFET 都是使用一种称为硅栅技术的工艺制造的，其中使用某种类型的硅（称为多晶硅）来形成栅极（参见附录 A）。 无论栅极的类型如何，我们对 MOSFET 操作和特性的描述都适用。

MOSFET 的另一个名称是绝缘栅 FET 或 IGFET。 该名称也源于器件的物理结构，强调栅极与器件主体（通过氧化层）电绝缘的事实。 正是这种绝缘导致栅极端子中的电流非常小（大约 $10^{-15} A$）。

不难发现，衬底可以与源区和漏区分别形成两个 pn 结。 在正常操作中，这些 pn 结始终保持反向偏置。 正如我们将很快看到的，漏极的电势相对于源极始终处于高电平，因此只需将衬底端子连接到源极端子，就可以有效地切断两个 pn 结。 我们将假设在以下 MOSFET 操作描述中就是这种情况。 因此，在这里，衬底将被视为对器件操作没有影响，而 MOSFET 将被视为三端器件，其端子是栅极 (G)、源极 (S) 和漏极 (D)。 将显示施加到栅极的电压控制源极和漏极之间的电流流动。 该电流将在标有“沟道区”的区域中沿纵向从漏极流向源极。 请注意，该区域具有长度 $L$ 和宽度 $W$，这是 MOSFET 的两个重要参数。 通常，$L$在0.03μm到1μm的范围内，$W$在0.05μm到100μm的范围内。 最后，注意MOSFET是对称器件； 因此它的源极和漏极可以互换，而不会改变器件特性

##### 5.1.2 Operation with Zero Gate Voltage

在栅极施加零电压时，我们可以看到两个“背对背”的二极管串联在漏极和源极之间。 一个二极管由n+漏区和p型衬底之间的pn结形成，另一个二极管由p型衬底和n+源区之间的pn结形成。 当施加电压 $v_{DS}$ 时，这些“背对背”二极管可防止电流从漏极传导至源极。 事实上，漏极和源极之间的路径具有非常高的电阻（大约 $10^{12}\Omega$ ）。

##### 5.1.3 Creating a Channel for Current Flow

接下来考虑图 5.2 中描述的情况。 在这里，我们将源极和漏极接地，并向栅极施加正电压。 由于源极接地，栅极电压出现在栅极和源极之间，因此表示为 $v_{GS}$。 首先，栅极上的正电压导致自由空穴（带正电）被栅极下方的衬底区域（沟道区）排斥。 这些孔被向下推入衬底，留下载流子耗尽区。 耗尽区由与受体原子相关的束缚负电荷填充。 这些电荷“未被覆盖”，因为中和孔已被向下推入衬底中。

同样，正栅极电压将电子从 n+ 源极和漏极区（它们大量存在的地方）吸引到沟道区。 当足够数量的电子在栅极下方的衬底表面附近积累时，实际上会产生 n 区，连接源区和漏区，如图 5.2 所示

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604135300210.png" alt="image-20210604135300210" style="zoom:67%;" />

现在如果在漏极和源极之间施加电压，电流就可以通过在该感应产生的n区中的运动自由电子传递。因此，感应的 n 区形成了电流从漏极到源极的沟道，并由此的命“导电沟道”。 相应地，图 5.2 的 MOSFET 被称为 n 沟道 MOSFET，或者称为 NMOS 晶体管。 请注意，n 沟道 MOSFET 形成在 p 型衬底中：通过将衬底表面从 p 型反转为 n 型（该n型区是由于电压感应形成的）来创建沟道。 因此，感应沟道也称为反转层。

在沟道区中积累足够数量的移动电子以形成导电沟道时的 $v_{GS}$ 值称为阈值电压，用 $V_t$ 表示。显然，n 沟道 FET 的 $V_t$ 为正。  $V_t$ 的值在器件制造过程中受到控制，通常在 0.3 V 到 1.0 V 的范围内。

MOSFET 的栅极和沟道区形成一个平行板电容器，氧化层充当电容器电介质。 正栅极电压导致正电荷积聚在电容器的顶板上（栅极）。 底板上相应的负电荷由感应沟道中的电子形成。 因此在垂直方向上产生电场。 正是这个场控制了沟道中的电荷量，因此它决定了沟道的电导率，进而决定了当施加电压 $v_{DS}$ 时流过沟道的电流。 这就是“场效应晶体管”(FET) 名称的由来。

该平行板电容器两端的电压，即氧化物两端的电压，必须超过 $V_t$ 才能形成沟道。 当 $v_{DS} = 0$ 时，如图 5.2 所示，沿沟道每个点的电压为零，氧化物两端（即栅极和沿沟道的点之间）的电势差是均匀的，等于 $v_{GS}$。  $v_{GS}$ 超过 $V_t$ 被称为有效电压或过驱动电压，是决定沟道中电荷的量。在本书中，我们将 $(v_{GS} −V_t)$ 表示为 $v_{OV}$ ，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604160542186.png" alt="image-20210604160542186" style="zoom:67%;" />

我们可以用下式表示沟道中电子电荷的大小

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604160612299.png" alt="image-20210604160612299" style="zoom:67%;" />

其中 $C_{ox}$ 称为氧化物电容，是每单位栅极面积的平行板电容器的电容（单位为 $F/m^2$），$W$ 是沟道宽度，$L$ 是沟道长度。 氧化物电容 $C_{ox}$ 由下式给出

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604161112221.png" alt="image-20210604161112221" style="zoom:67%;" />

其中 $\epsilon _{ox}$ 是二氧化硅的介电常数，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604161233503.png" alt="image-20210604161233503" style="zoom:67%;" />

氧化物厚度 $t_{ox}$ 由用于制造 MOSFET 的工艺技术决定。例如，对于 $t_{ox} = 4 nm$ 的工艺，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604161326762.png" alt="image-20210604161326762" style="zoom:67%;" />

最后，我们可以看到随着 $v_{OV}$ 的增加，沟道电荷的大小成比例增加。 有时这被描述为沟道深度的增加； 也就是说，过驱动电压越大，沟道越深。

##### 5.1.4 Applying a Small vDS

在通过电磁感应产生导电沟道以后，我们现在在漏极和源极之间施加正电压 $v_{DS}$，如图 5.3 所示。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604161656799.png" alt="image-20210604161656799" style="zoom:67%;" />

我们首先考虑 $v_{DS}$ 很小（即 50 mV 左右）的情况。 电压 $v_{DS}$ 导致电流 $i_D$ 流过感应产生的 n 沟道。 电流由从源极到漏极（因此称为源极和漏极）的自由电子携带。 按照惯例，电流的流动方向与负电荷的流动方向相反。 因此，沟道中的电流 $i_D$ 将从漏极到源极，如图 5.3 所示。

我们现在希望计算 $i_D$ 的值。 为此，我们首先注意到，因为 $v_{DS}$ 很小，我们可以继续假设栅极和沿沟道的各个点之间的电压保持近似恒定并等于源端的值 $v_{GS}$。 因此，栅极和沿沟道各点之间的有效电压保持等于 $v_{OV}$ ，沟道电荷 Q 仍为。 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604161852845.png" alt="image-20210604161852845" style="zoom:67%;" />

电压 $v_{DS}$ 在沟道长度上建立电场 $E$，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604172814347.png" alt="image-20210604172814347" style="zoom:67%;" />

该电场反过来导致沟道电子以由下式给出的速度向漏极漂移

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604173017983.png" alt="image-20210604173017983" style="zoom:67%;" />

其中 $μ_n$ 是沟道表面电子的迁移率。 它是一个物理参数，其值取决于制造工艺技术。 现在可以通过将每单位沟道长度的电荷乘以电子漂移速度来找到 $i_D$ 的值，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604173118754.png" alt="image-20210604173118754" style="zoom:67%;" />

因此，对于小 $v_{DS}$，沟道表现为线性电阻，其值由过驱动电压 $v_{OV}$ 控制，而后者又由 $v_{GS}$ 决定：

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604173230210.png" alt="image-20210604173230210" style="zoom:67%;" />

沟道的电导 $g_{DS}$ 可以从方程中找到。  

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604173307251.png" alt="image-20210604173307251" style="zoom:67%;" />

或

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604173324844.png" alt="image-20210604173324844" style="zoom:67%;" />

观察到电导由三个因素的乘积决定：$(μ_nC_{ox})、(W/L)$ 和 $v_{OV}$（或等效地，$v_{GS} - V_t$）。 为了深入了解 MOSFET 的操作，我们依次考虑三个因素中的每一个。

第一个因素 ($μ_nC_{ox}$) 由用于制造 MOSFET 的工艺技术决定。 它是电子迁移率 $μ_n$ 和氧化物电容 $C_{ox}$ 的乘积。 沟道电导与 $μ_n$ 和 $C_{ox}$ 中的每一个成正比（为什么？）并因此与它们的乘积成正比，这在物理上是有意义的，这被称为工艺跨导参数并给定符号 $k_ n'$，其中下标 n 表示 n 沟道，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604173541361.png" alt="image-20210604173541361" style="zoom:67%;" />

可以证明，$μ_n$ 的单位为米平方/伏秒 ($m^2/V·s$)，$C_{ox}$ 的单位为法拉每平方米 ($F$$/m^2$)，$k_ n'$ 的单位为安培/伏特 平方 ($A/V^2)$。

方程中影响电导 $g_{DS}$ 的第二个因素。是晶体管纵横比 $(W/L)$。 沟道电导与沟道宽度 $W$ 成正比，与沟道长度 $L$ 成反比应该具有完美的物理意义。  $(W/L)$ 比率显然是由设备设计者确定的无量纲量。 实际上，器件设计者可以选择 $W$ 和 $L$ 的值，以赋予器件所需的 $i-v$ 特性。 然而，对于给定的制造工艺，存在最小沟道长度 $L_{min}$。 事实上，给定制造工艺可能的最小沟道长度用于表征工艺，并且随着技术的进步不断减少。 例如，2014 年最先进的商用 MOS 技术是 32 纳米工艺，这意味着对于该工艺，可能的最小沟道长度为 32 纳米。 最后，我们应该注意到氧化物厚度 $t_{ox}$ 随 $L_{min}$ 成比例减小。 因此，对于 0.13-μm 技术，$t_{ox}$ 为 2.7 nm，但对于当前流行的 65-nm 技术，$t_{ox}$ 约为 2.2 nm。

工艺跨导参数 $k_n'$ 与晶体管纵横比 $(W/L)$ 的乘积是 MOSFET 跨导参数 $k_n$，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604174344430.png" alt="image-20210604174344430" style="zoom:67%;" />

或

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604174357565.png" alt="image-20210604174357565" style="zoom:67%;" />

MOSFET 参数 kn 的单位为 $A/V^2。$

沟道电导$g_{DS}$ 表达式中的第三项是过驱动电压$v_{OV}$。 这并不奇怪，因为 $v_{OV}$ 直接决定了沟道中电子电荷的大小。 可以看出，$v_{OV}$ 是一个非常重要的电路设计参数。 在本书中，我们将交替使用 $v_{OV}$ 和 $v_{GS} −V_t$。

我们通过注意到 $v_{DS}$ 保持较小来结束本小节，MOSFET 表现为线性电阻 $r_{DS}$，其值由栅极电压 $v_{GS}$ 控制，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604174611013.png" alt="image-20210604174611013" style="zoom:67%;" />

图 5.4 进一步说明了 MOSFET 作为压控电阻的操作，该图是针对不同 $v_{GS}$ 值的 $i_D$ 与 $v_{DS}$ 的关系图。 观察到当 $v_{GS} ≤ V_t$ 时电阻是无限大的，并且随着 $v_{GS}$ 增加到 $V_t$ 以上而减小。 值得注意的是，尽管 $v_{GS}$ 被用作图 5.4 中图形集的参数，但这些图形实际上仅取决于 $v_{OV}$（当然还有 $k_n$）。

上面的描述表明，为了使 MOSFET 导通，必须感应一个沟道。 然后，将 $v_{GS}$ 增加到阈值电压 $V_t$ 以上会增强沟道的导电性，因此称为增强型操作和增强型 MOSFET。 最后，我们注意到离开源极端子的电流 ($i_S$) 等于进入漏极端子的电流 ($i_D$)，栅极电流 $i_G = 0$。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604174914518.png" alt="image-20210604174914518" style="zoom:67%;" />

##### 5.1.5 Operation as $v_{DS}$ Is Increased

接下来考虑$v_{DS}$增加的情况。 为此，让 $v_{GS}$ 保持在一个大于 $V_t$ 的值上； 也就是说，让 MOSFET 在恒定的过驱动电压 $V_{OV}$ 下工作。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604175049098.png" alt="image-20210604175049098" style="zoom:67%;" />

参阅图 5.5，并注意 $v_{DS}$ 表现为沟道长度上的电压降。也就是说，当我们沿着沟道从源极移动到漏极时，电压（相对于源极测量）从零增加到 $v_{DS}$。 因此，栅极和沿沟道的点之间的电压从源端的 $v_{GS} =V_t +V_{OV}$ 降低到漏极端的 $v_{GD} =v_{GS} -v_{DS} =V_t +V_{OV} -v_{DS}$。 由于沟道深度取决于该电压，特别是该电压超过 $V_t$ 的量，我们发现沟道不再具有均匀的深度； 相反，沟道将采用图 5.5 所示的锥形形状，在源端最深（深度与 $V_{OV}$ 成正比），在漏极端 （深度与 $V_{OV} -v_{DS}$ 成正比）最浅。 图 5.6 进一步说明了这一点。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604175603436.png" alt="image-20210604175603436" style="zoom:67%;" />

![image-20210604175645149](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604175645149.png)

随着 $v_{DS}$ 的增加，沟道变得越来越锥形，其电阻也相应增加。 因此，$i_D -v_{DS}$ 曲线不再是一条直线，而是如图 5.7 所示弯曲。 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604175756827.png" alt="image-20210604175756827" style="zoom:67%;" />

利用图 5.6 中的信息，可以很容易地推导出描述 $i_D -v_{DS}$ 曲线这一部分的方程。 具体来说，请注意锥形沟道中的电荷与图 5.6(b) 中所示的沟道横截面积成正比。 该面积又可以很容易地看作与 $1/ 2 [V_{OV} +(V_{OV} -v_{DS})]$ 或 $V_{OV} -1 /2 v_{DS}$ 成比例。 因此，可以通过将方程中的 $V_{OV}$换成$V_{OV} -1 /2 v_{DS}$ , 来找到 $i_D$ 和 $v_{DS}$ 之间的关系。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604180252574.png" alt="image-20210604180252574" style="zoom:67%;" />

这种关系描述了图 5.7 中 $i_D -v_{DS}$ 曲线的半抛物线部分。 它适用于低至 $v_{DS} =0$ 的整个段。 具体来说，注意随着 $v_{DS}$ 的减少，我们可以忽略括号中因子中相对于 $V_{OV}$ 的 $1 /2 v_{DS}$，表达式还原为之前的形式。后者当然是一个近似值，仅适用于较小的 $v_{DS}$（即靠近原点）。

方程中的表达式还有另一种有用的解释。  从图 5.6(a) 中我们看到沿沟道的平均电压为 $1/ 2 v_{DS}$。 因此，产生沟道电荷并因此产生 $i_D$ 的平均电压不再是 $V_{OV}$ 而是 $V_{OV} -1 /2 v_{DS}$ ，这确实是方程中出现的因素。最后我们指出，上述方程一般来说写成下面的形式

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604180742491.png" alt="image-20210604180742491" style="zoom:67%;" />

此外，对于 $V_{OV}$ 的任意值，我们可以用 $(v_{GS} -V_t)$ 替换 $V_{OV}$ 并重写方程。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604180953368.png" alt="image-20210604180953368" style="zoom:67%;" />

##### 5.1.6 Operation for $v_{DS} ≥V_{OV}:$ Channel Pinch-Off and Current Saturation(沟道夹断和电流饱和)

上面的操作描述假设即使沟道变成锥形，它在漏极端仍然有一个有限的（非零）深度。 这又是通过保持 $v_{DS}$ 足够小以使得栅极和漏极之间的电压 $v_{GD}$ 超过 $V_t$ 来实现的。 这确实是图5.6（a）所示的情况。 请注意，要获得这种情况，$v_{DS}$ 不得超过 $V_{OV}$，因为 $v_{DS} = V_{OV} ，v_{GD} = V_t$ ，并且漏极端的沟道深度减小到零。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604191743428.png" alt="image-20210604191743428" style="zoom:67%;" />

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604191815092.png" alt="image-20210604191815092" style="zoom:67%;" />

图 5.8 显示 $v_{DS}$ 达到 $V_{OV}$ 和 $v_{GD}$ 相应地达到 $V_t$。 漏极端沟道的零深度产生了术语沟道夹断。 将 $v_{DS}$ 增加到超过该值（即 $v_{DS}>V_{OV}$ ）对沟道形状和电荷没有影响，并且通过沟道的电流在 $v_{DS} = V_{OV}$ 达到的值上保持恒定。 因此，漏极电流在通过代入方程中的 $v_{DS} = V_{OV}$ 得到的值处饱和。 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604192113048.png" alt="image-20210604192113048" style="zoom:67%;" />

然后就说 MOSFET 已进入饱和区（或等效地进入饱和工作模式）。 发生饱和的电压 $v_{DS}$ 表示为 $V_{DS_{sat}}$

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604192318765.png" alt="image-20210604192318765" style="zoom:67%;" />

需要注意的是，沟道夹断并不意味着沟道阻塞：电流继续流过夹断沟道，到达沟道漏极端的电子通过存在于那里的耗尽区加速（图中未显示） 图 5.5) 并进入漏极端子。  $v_{DS}$ 高于 $V_{DS_{sat}}$ 的任何增加都表现为**耗尽区两端**(注：沟道末端的耗尽区并不位于沟道中）的电压降。 因此，**通过沟道的电流和跨沟道的电压降**在饱和状态下保持恒定。

正如预期的那样，$i_D -v_{DS}$ 曲线的饱和部分是一条水平直线，如图 5.7 所示。 图 5.7 中还指出了使用连续（非夹断）沟道获得的工作区域的名称，即三极管区域。 这个名字是真空管设备时代的遗留物，其操作类似于 FET。

最后，我们注意到饱和状态下的 $i_D$ 表达式可以通过将恒定过驱动电压 $V_{OV}$ 替换为变量 $v_{OV}$ 来推广

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604193011626.png" alt="image-20210604193011626" style="zoom:67%;" />

此外，$v_{OV}$ 可以替换为 $(v_{GS} -V_t)$ 以获得饱和模式 $i_D$ 的替代表达式

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604193116847.png" alt="image-20210604193116847" style="zoom:67%;" />

##### 5.1.7 The p-Channel MOSFET

图 5.9(a) 显示了 p 沟道增强型 MOSFET 的横截面图。 结构与NMOS器件类似，只是这里衬底为n型，源漏区为p+型； 也就是说，所有半导体区域的极性都与 NMOS 情况下的对应区域相反。PMOS 和 NMOS 晶体管是互补器件

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604193459789.png" alt="image-20210604193459789" style="zoom:67%;" />

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604193710354.png" alt="image-20210604193710354" style="zoom:67%;" />

为了在源极和漏极之间产生一个电流通道，在栅极，即栅极和源极之间施加负电压，如图 5.9(b) 所示。 通过将负 $v_{GS}$ 的幅度增加到超过阈值电压 $V_{tp}$ 的幅度（通常为负），如图 5.9(b) 所示建立了 p 通道。 这种情况可以描述为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604193833543.png" alt="image-20210604193833543" style="zoom:67%;" />

或者，为了避免处理负号，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604193904833.png" alt="image-20210604193904833" style="zoom:67%;" />

现在，为了使电流 $i_D$ 在 p 沟道中流动，向漏极施加负电压 $v_{DS}$。电流 $i_D$ 由空穴携带并从源极流过沟道到漏极。正如我们对 NMOS 晶体管所做的那样，我们将 PMOS 器件的工艺跨导参数定义为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604194004589.png" alt="image-20210604194004589" style="zoom:67%;" />

其中 $μ_p$ 是诱导 p 沟道中空穴的迁移率。 通常，$μ_p = 0.25μ_n$ 到 $0.5μ_n$ 并且取决于工艺技术。 晶体管跨导参数 $k_p$ 由 $k _p'$ 乘以纵横比 $W/L$ 得到，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604194153058.png" alt="image-20210604194153058" style="zoom:67%;" />

p 沟道 MOSFET 物理操作的其余描述遵循 NMOS 器件的描述，当然所有电压的符号反转除外。 我们将在下一节中介绍 NMOS 和 PMOS 晶体管的完整电流-电压特性。PMOS 技术最初主导着 MOS 集成电路制造，最初的微处理器使用 PMOS 晶体管。 随着制造NMOS晶体管的技术难点得到解决，NMOS完全取代了PMOS。 这种变化的主要原因是电子迁移率 $μ_n$ 比空穴迁移率 $μ_p$ 高 2 到 4 倍，导致 NMOS 晶体管比 PMOS 器件具有更高的增益和操作速度。 随后，开发了一种技术，允许在同一芯片上制造 NMOS 和 PMOS 晶体管。 恰当地称为互补 MOS，或 CMOS，这种技术是目前占主导地位的电子技术

##### 5.1.8 Complementary MOS or CMOS

顾名思义，互补 MOS 技术采用两种极性的 MOS 晶体管。 尽管 CMOS 电路比 NMOS 更难制造，但互补器件的可用性使许多强大的电路配置成为可能。

事实上，目前 CMOS 是所有 IC 技术中应用最广泛的。 此声明适用于模拟和数字电路。  CMOS 技术实际上已经取代了仅基于 NMOS 晶体管的设计。 此外，到 2014 年，CMOS 技术已经接管了许多应用，而这些应用在几年前只能通过双极器件实现。

在本书中，我们将学习许多 CMOS 电路技术。图 5.10 显示了 CMOS 芯片的横截面，说明了如何制造 PMOS 和 NMOS 晶体管。 请注意，虽然 NMOS 晶体管是直接在 p 型衬底中实现的，但 PMOS 晶体管是在专门创建的 n 区（称为 n 阱）中制造的。 这两个器件通过用作绝缘体的厚氧化物区域相互隔离。 图中未显示与 p 型体和 n 阱的连接。 后一个连接用作 PMOS 晶体管的体端子。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604194821780.png" alt="image-20210604194821780" style="zoom:67%;" />

##### 5.1.9 Operating the MOS Transistor in the Subthreshold Region(在亚阈值区域操作 MOS 晶体管)

上面对 n 沟道 MOSFET 操作的描述意味着对于 $v_{GS}< V_t$，没有电流流动并且器件被切断。 这并不完全正确，因为已经发现对于小于但接近 $V_t$ 的 $v_{GS}$ 值，存在小的漏电流流动。 在这个亚阈值操作区域，漏极电流与 $v_{GS}$ 呈指数关系，很像 BJT 的 $i_C-v_{BE}$ 关系，这将在下一章中展示。尽管在大多数应用中 MOS 晶体管是在 $v_{GS}>V_t$ 的情况下运行的，但也有一些特殊但越来越多的应用使用了亚阈值操作。 在第 14 章中，我们将简要讨论亚阈值操作。

### 5.2 Current–Voltage Characteristics

在上一节中为增强型 MOS 晶体管的操作建立的物理基础的基础上，在本节中，我们将介绍其完整的电流 - 电压特性。 这些特性可以在直流或低频下测量，因此称为静态特性。 限制 MOSFET 在高频和高开关速度下运行的动态效应将在第 10 章中讨论。

##### 5.2.1 Circuit Symbol

图 5.11(a) 显示了 n 沟道增强型 MOSFET 的电路符号。观察代表栅极和沟道的两条垂直线之间的间距表明栅电极与器件主体绝缘的事实。  p 型衬底（主体）和 n 通道的极性由代表衬底(B) 的线上的箭头表示。 这个箭头还表示晶体管的极性，即它是一个 n 沟道器件

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604195346485.png" alt="image-20210604195346485" style="zoom:67%;" />

虽然 MOSFET 是一种对称器件，但在电路设计中通常将一个端子指定为源极，另一个指定为漏极，这个目标是在图 5.11(b) 所示的修改后的电路符号中实现的。 这里在源极端子上放置了一个箭头，从而将其与漏极端子区分开来。 箭头指向电流的法线方向，因此表示器件的极性（即 n 通道）。 请注意，在修改后的符号中，无需在衬底线上显示箭头。 尽管图 5.11(b) 的电路符号清楚地区分了源极和漏极，但实际上是器件两端施加的电压极性决定了源极和漏极； 在 n 沟道 FET 中，漏极相对于源极始终为正。

在源连接到设备主体的应用中，可以进一步简化电路符号，如图 5.11(c) 所示。 当衬底对电路运行的影响不重要时，该符号也用于应用中

##### 5.2.2 The $i_D–v_{DS}$ Characteristics

表 5.1 汇总了 NMOS 晶体管在三个可能区域中的每个区域中的操作条件和公式：截止区域、三极管区域和饱和区域。 如果 MOSFET 用作开关，前两个很有用。另一方面，如果要使用 MOSFET 来设计放大器，则它必须工作在饱和区。 这些选择的基本原理将在第 7 章中讨论。

在表 5.1 的顶部，我们展示了一个由 NMOS 晶体管和两个提供 $v_{GS}$ 和 $v_{DS}$ 的直流电源组成的电路。 该概念电路可用于测量 NMOS 晶体管的 $i_D-v_{DS}$ 特性曲线。 通过将 $v_{GS}$ 设置为所需的恒定值、改变 $v_{DS}$ 并测量相应的 $i_D$ 来测量每条曲线。 附图中显示了这些特性曲线中的两条：一条针对 $v_{GS}<V_{tn}$，另一条针对 $v_{GS} =V_{tn} +v_{OV}$。  （注意我们现在用 $V_{tn}$ 来表示 NMOS 管的阈值电压，以区别于 PMOS 管的阈值电压，用 $V_{tp}$ 表示。）如表 5.1 所示，三极管区和饱和区的边界取决于 $v_{DS}$ 小于或大于晶体管工作时的过驱动电压 $v_{OV}$。 检查工作区域的一种等效方法是检查漏极和栅极电压的相对值。 要在三极管区工作，栅极电压必须超过漏极电压至少 $V_{tn}$ 伏，以确保通道保持连续（未夹断）。

![image-20210604200447435](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604200447435.png)

另一方面，想要在饱和区工作，那么沟道必须要在漏极处不被夹断；在此通过保持 $v_D$ 高于 $v_G -V_{tn}$ 来实现夹断。 图 5.12 的图形结构应有助于提醒读者注意这些条件。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604201246899.png" alt="image-20210604201246899" style="zoom:67%;" />

NMOS 晶体管的一组 $i_D -v_{DS}$ 特性如图 5.13 所示。 观察每个图形是通过将 $v_{GS}$ 设置为高于 $V_{tn}$ 的特定过驱动电压值而获得的，表示为 $V_{OV1}、V_{OV2}、V_{OV3}$ 和 $V_{OV4}$。 这又是对应图形饱和时的 $v_{DS}$ 值，所得饱和电流的值直接由 $v_{OV}$ 的值决定，即 $1/ 2 k_nV^2_ {OV1}, 1 /2 k_nV^2_{ OV2}$,...。  .  . 建议读者记住这些图的结构和饱和点的坐标。

最后，观察三极管与饱和区的边界，即饱和点的轨迹，是一条抛物线描述的曲线

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604201301349.png" alt="image-20210604201301349" style="zoom:67%;" />

##### 5.2.3 The $i_D–v_{GS}$ Characteristic

当使用 MOSFET 设计放大器时，它工作在饱和区。如图 5.13 所示，在饱和状态下，漏极电流是由 $v_{GS}$（或 $v_{OV}$）决定的常数，并且与 $v_{DS}$ 无关。 也就是说，MOSFET 作为恒流源运行，其中电流值由 $v_{GS}$ 决定。 实际上，MOSFET 作为电压控制的电流源工作，其控制关系为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604201840344.png" alt="image-20210604201840344" style="zoom:67%;" />

或就 $v_{OV}$ 而言，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604201907818.png" alt="image-20210604201907818" style="zoom:67%;" />

这是将 MOSFET 用作放大器的基础关系。 那些对设计线性放大器感兴趣的人应该关注它是非线性的。 尽管如此，在第 7 章中，我们将看到如何从这种非线性控制或传递特性中获得线性放大。

图 5.14 显示了运行在饱和状态的 NMOS 晶体管的 $i_D-v_{GS}$ 特性。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604202019015.png" alt="image-20210604202019015" style="zoom:67%;" />

请注意，如果我们对 $i_D$ 与 $v_{OV}$ 的关系图感兴趣，我们只需将原点移动到点 $v_{GS} = V_{tn}$。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604202128606.png" alt="image-20210604202128606" style="zoom:67%;" />

图 5.15 中的等效电路表示法说明了饱和区中 MOSFET 作为电压控制的电流源的视图。 出于很快就会明白的原因，图 5.15 中的电路被称为大信号等效电路。 请注意，电流源是理想的，无限输出电阻代表 $i_D$ 与 $v_{DS}$ 的饱和独立性。 当然，这已经在迄今为止使用的设备操作的理想化模型中得到了假设。 我们即将纠正这个模型的一个重要缺点。 然而，首先我们举一个例子。

##### Example 5.2

考虑在 $L = 0.18 μm$ 和 $W = 2 μm$ 的 $0.18-μm$ 工艺中制造的 NMOS 晶体管。 工艺技术规定为 $C_{ox} = 8.6 fF/μm^2$，$μ_n = 450 cm^2/V·s，V_{tn} = 0.5 V$。
   (a) 找出使 MOSFET 在 $I_D = 100 μA$ 的饱和边缘运行的 $V_{GS}$ 和 $V_{DS}$。
   (b) 如果 $V_{GS}$ 保持恒定，找出使 $I_D = 50 μA$ 的 $V_{DS}$。
   (c) 为了研究将 MOSFET 用作线性放大器，让它在 $V_{DS} = 0.3 V$ 的饱和状态下工作。找出 $v_{GS}$ 从 $0.7 V$ 变化 $+0.01 V$ 和 $-0.01 V$ 导致的 $i_D$ 变化。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604202653427.png" alt="image-20210604202653427" style="zoom:67%;" />

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604202748172.png" alt="image-20210604202748172" style="zoom:67%;" />



<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604202850333.png" alt="image-20210604202850333" style="zoom:67%;" />

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604202933130.png" alt="image-20210604202933130" style="zoom:67%;" />

我们得出结论，这两个变化几乎相等，这表明当 $v_{GS}$ 的变化保持较小时，几乎是线性操作。 这只是第 7 章研究的 MOSFET 的“小信号操作”的预览

##### 5.2.4 Finite Output Resistance in Saturation

方程（5.21）和图 5.15 中相应的大信号等效电路，以及图 5.13 中的曲线图表明，在饱和状态下，$i_D$ 与 $v_{DS}$ 无关。 因此，漏源电压的变化 $v_{DS}$ 导致 $i_D$ 的零变化，这意味着进入饱和 MOSFET 漏极的增量电阻是无限的。 然而，这是一种理想化的假设，即一旦沟道在漏极端被夹断，$v_{DS}$ 的进一步增加对沟道的形状没有影响。 但是，在实践中，将 $v_{DS}$ 增加到 $v_{OV}$ 之外确实会在某种程度上影响沟道。 具体来说，随着 $v_{DS}$ 的增加，沟道夹断点稍微远离漏极，朝向源极移动。 这在图 5.16 中进行了说明，从中我们注意到通道两端的电压保持恒定在 $v_{OV}$ ，并且施加到漏极的额外电压表现为通道末端和漏极之间的狭窄耗尽区两端的电压降区域。 该电压加速到达沟道漏极端的电子，并将它们扫过耗尽区进入漏极。 但是请注意，（随着耗尽层加宽）沟道长度实际上减少了，从 $L$ 到 $L - \Delta L$，这种现象称为**沟道长度调制**。现在，由于 $i_D$ 与沟道长度成反比（方程 5.21），因此 $i_D$ 随 $v_{DS}$ 增加。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604203610352.png" alt="image-20210604203610352" style="zoom:67%;" />

这种影响可以通过包含因子 $1+λ(v_{DS} -v_{OV} )$ 或 $(1+λv_{DS})$ 来解释 $i_D$ 的表达式，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604203748915.png" alt="image-20210604203748915" style="zoom:67%;" />

这里$λ$是$V^{-1}$单位的器件参数。$λ$ 的值取决于用于制造器件的工艺技术和电路设计者选择的通道长度 $L$。 具体来说，新亚微米技术的 $λ$ 值比旧技术大得多。 这很直观：较新的技术具有非常短的通道，因此受通道长度调制效应的影响要大得多。 此外，对于给定的工艺技术，$λ$ 与 $L$ 成反比。

图 5.17 显示了一组典型的 $i_D-v_{DS}$ 特性，显示了通道长度调制的影响。 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604203949531.png" alt="image-20210604203949531" style="zoom:67%;" />

观察到的 $i_D$ 对饱和区中 vDS 的线性依赖性表示在等式中。通过因子 $(1 + λv_{DS})$。 从图 5.17 中我们观察到，当外推直线 $i_D-v_{DS}$ 特性时，它们在点 $v_{DS} =-V_A$ 处截取 $v_{DS}$ 轴，其中 $V_A$ 是正电压。 然而，方程（5.23）表明在 $v_{DS} =-1/λ$ 时 $i_D = 0$。 它遵循

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604204230636.png" alt="image-20210604204230636" style="zoom:67%;" />

因此，$V_A$ 是单位为$V$的器件参数。对于给定的工艺，$V_A$ 与设计人员为 MOSFET 选择的沟道长度 $L$ 成正比。 我们可以将 $V_A$ 对 $L$ 的依赖表示为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604204340250.png" alt="image-20210604204340250" style="zoom:67%;" />

其中 $V_ A'$ 完全取决于工艺技术，单位为每微米伏特。通常，$V_ A'$ 落在 $5 V/μm$ 到 $50V/μm$ 的范围内。 电压 $V_A$ 通常被称为厄利电压，以 J. M. Early 命名，他发现了 BJT 的类似现象（第 6 章）。

方程（5.23）表明，当考虑通道长度调制时，$i_D$ 的饱和值取决于 $v_{DS}$。 因此，对于给定的 $v_{GS}$，$v_{DS}$ 的变化会导致漏极电流 $i_D$ 的相应变化 $\Delta i_D$。 因此，代表 $i_D$ 饱和的电流源的输出电阻不再是无穷大。 定义输出电阻 $r_o$ 为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604204659753.png" alt="image-20210604204659753" style="zoom:67%;" />

代入公式，有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604204731139.png" alt="image-20210604204731139" style="zoom:67%;" />

可以写作

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604204814306.png" alt="image-20210604204814306" style="zoom:67%;" />

或者

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604204833291.png" alt="image-20210604204833291" style="zoom:67%;" />

其中 $I _D'$ 是不考虑通道长度调制的漏极电流

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604204954957.png" alt="image-20210604204954957" style="zoom:67%;" />

因此，输出电阻与漏极电流成反比。最后，我们在图 5.18 中显示了包含 $r_o$ 的大信号等效电路模型。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604205100731.png" alt="image-20210604205100731" style="zoom:67%;" />

##### 5.2.5 Characteristics of the p-Channel MOSFET

p沟道增强型MOSFET的电路符号如图5.19(a)所示。图 5.19(b) 显示了修改后的电路符号，其中在源极端子上包含一个指向电流法线方向的箭头。 对于源连接到基板的情况，通常使用图 5.19(c) 的简化符号 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604205232199.png" alt="image-20210604205232199" style="zoom:67%;" />

PMOS 晶体管的工作区域以及 $i_D$ 的相应条件和表达式如表 5.2 所示。 请注意，方程的编写方式强调了物理直觉并避免了负号的混淆。 因此，虽然 $V_{tp}$ 按照惯例为负，但我们使用 $|V_{tp}|$ ，并且电压 $v_{SG}$ 和 $v_{SD}$ 为正。 此外，在我们所有的电路图中，我们总是将源极在顶部绘制 p 沟道器件，以便电流从顶部流向底部。 最后，我们注意到 PMOS 器件也受到沟道长度调制效应的影响。 这可以通过在 $i_D$ 的饱和区表达式中包含一个因子 $(1+|λ|v_{SD})$ 来考虑，如下所示

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604205446088.png" alt="image-20210604205446088" style="zoom:67%;" />

![image-20210604205541071](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604205541071.png)

或等价的

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604205601511.png" alt="image-20210604205601511" style="zoom:67%;" />

最后，我们应该注意到，对于给定的 CMOS 制造工艺，$λ_n$ 和 $λ_p$ 通常不相等，对于 $V_{An}$ 和 $V_{Ap}$ 也是如此。

概括地说，要打开 PMOS 晶体管，必须使栅极电压比源极电压低至少 $V_{tp}$。 要在三极管区工作，漏极电压必须至少超过栅极电压 $V_{tp}$ ； 否则，PMOS 工作在饱和状态。 最后，图 5.20 提供了这些操作条件的图示

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604205801102.png" alt="image-20210604205801102" style="zoom:67%;" />

### 5.3 MOSFET Circuits at DC

研究了 MOSFET 的电流-电压特性后，我们现在考虑只关心直流电压和电流的电路。 具体来说，我们将介绍一系列直流 MOSFET 电路的设计和分析示例。

在下面的例子中，为了简单起见，从而将注意力集中在 MOSFET 电路操作的本质上，我们通常会忽略通道长度调制； 也就是说，我们将假设 $λ = 0$。我们会发现在过驱动电压方面工作很方便；  $V_{OV} = V_{GS} –V_{tn}$  和 $|V_{OV} |  = V_{SG} -V_{tp}$ 。

##### Example 5.3

如图 5.21 ，确定 $R_D$ 和 $R_S$ 的值，使晶体管工作在 $I_D = 0.4 mA$ 和 $V_D =+0.5 V$。NMOS 晶体管的 $V_t = 0.7 V，μ_nC_{ox} = 100 μA/V2  ，L = 1 μm，W = 32 μm$。 忽略通道长度调制效应（即假设 $λ = 0$）。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604211239764.png" alt="image-20210604211239764" style="zoom:67%;" />

解：

首先确定$R_D$的值，由于我们事先已经知道漏极电流和漏极电压的大小，因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604211338409.png" alt="image-20210604211338409" style="zoom:67%;" />

要确定 $R_S$ 所需的值，我们需要知道源极处的电压，如果我们知道 $V_{GS}$ 就很容易找到。 这又可以从 $V_{OV}$ 确定。 为此，我们注意到由于 $V_D = 0.5 V$ 大于 $V_G$(栅极接地，其电压大小为0），NMOS 晶体管工作在饱和区，我们可以使用 $i_D$ 的饱和区表达式来确定所需的 $V_{OV}$ 值，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604211604814.png" alt="image-20210604211604814" style="zoom:67%;" />

接着代入给定的数值

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604211628016.png" alt="image-20210604211628016" style="zoom:67%;" />

从而解得

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604211646305.png" alt="image-20210604211646305" style="zoom:67%;" />

因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604211703605.png" alt="image-20210604211703605" style="zoom:67%;" />

参考图 5.21，我们注意到栅极处于地电位。 因此，源电压必须为 $–1.2 V$，所需的 $R_S$ 值可通过以下公式确定：

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604211740779.png" alt="image-20210604211740779" style="zoom:67%;" />

##### Example 5.4

图 5.22 显示了一个 NMOS 晶体管，其漏极和栅极端子连接在一起。 根据 MOSFET 参数 $k_n = k_ n'(W/L)$ 和 $V_{tn}$，找出所得两端器件的 $i-v$ 关系。 忽略通道长度调制（即，$λ = 0$）。 请注意，这种两端器件称为二极管连接的晶体管

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604211921895.png" alt="image-20210604211921895" style="zoom:67%;" />

由于 $v_D = v_G$ ,晶体管在饱和模式下运行，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604212543573.png" alt="image-20210604212543573" style="zoom:67%;" />

有$i = i_D$ 和 $v = v_{GS}$，因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604212637012.png" alt="image-20210604212637012" style="zoom:67%;" />

或者写为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604212749596.png" alt="image-20210604212749596" style="zoom:67%;" />

##### Example 5.6

分析图 5.24(a) 所示电路，确定所有节点的电压和通过所有支路的电流。 设 $V_{tn} = 1 V$ 且 $k_ n'(W/L) = 1mA/V^2$。 忽略通道长度调制效应（即假设 $λ = 0$）。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604213151800.png" alt="image-20210604213151800" style="zoom:67%;" />



首先由于栅极的基本性质，流入栅极的电流大小为0，因此栅极处的电压大小即为左侧分压电路中下方电阻所分得的电压大小

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604213302693.png" alt="image-20210604213302693" style="zoom:67%;" />

有了栅极上的这个正电压，NMOS 晶体管将开启。 然而，我们不知道晶体管是在饱和区还是在三极管区工作。 我们将先假设晶体管在饱和区工作，解决问题，然后检查我们假设的有效性。 显然，如果我们的假设被证明是无效的，我们将不得不再次解决三极管区域工作的问题。

参见图 5.24(b)。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604213438464.png" alt="image-20210604213438464" style="zoom:67%;" />

 由于栅极电压为 5 V，源极电压为 $I_D ( mA) × 6 (k\Omega ) = 6I_D (V)$，我们有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604213505087.png" alt="image-20210604213505087" style="zoom:67%;" />

因此可以计算出漏极电流大小为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604213557884.png" alt="image-20210604213557884" style="zoom:67%;" />

即

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604213631549.png" alt="image-20210604213631549" style="zoom:67%;" />

该等式产生两个 $I_D$ 值：$0.89 mA$ 和 $0.5 mA$。 第一个值导致 $6×0.89 = 5.34 V$ 的源极电压，该电压大于栅极电压并且没有物理意义，因为它暗示 NMOS 晶体管被切断。 因此，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604213744561.png" alt="image-20210604213744561" style="zoom:67%;" />

由于 $V_D > V_G -V_{tn}$，晶体管工作在饱和状态，正如最初假设的那样。

#####  Example 5.8

图 5.26(a) 电路中的 NMOS 和 PMOS 晶体管匹配，$k _n' W_n/L_n = k_ p' W_p/L_p =1mA/V^2$ 且 $V_{tn} =−V_{tp} =1 V$。 假设对于两个器件，有 $v_I =0 V、+2.5 V$ 和 $-2.5 V$，$λ=0$，求漏电流 $i_{DN}$ 和 $i_{DP}$，以及电压 $v_O$。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604214258283.png" alt="image-20210604214258283" style="zoom:67%;" />



解：

图 5.26(b) 显示了 $v_I = 0 V$ 情况下的电路。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606101856197.png" alt="image-20210606101856197" style="zoom:67%;" />

我们注意到，由于 $Q_N$ 和 $Q_P$ 完全匹配并且在 $V_{GS} = 2.5 V$ 的相等值下运行，电路是对称的，这表明 $V_O = 0 V$。因此 $Q_N$ 和 $Q_P$ 都在 $V_{DG} = 0$ 下工作，因此处于饱和状态。 漏电流现在可以从 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606102252355.png" alt="image-20210606102252355" style="zoom:67%;" />

得到

接下来，我们考虑 $v_I =+2.5 V$ 的电路。晶体管 $Q_P$ 的 $V_{SG}$ 为零，因此将被切断，将电路简化为图 5.26(c) 所示的电路。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606102501880.png" alt="image-20210606102501880" style="zoom:67%;" />

我们注意到 $v_O$ 将为负值，因此 $v_{GD}$ 将大于 $V_{tn}$，导致 $Q_N$ 在三极管区域工作。 为简单起见，我们假设 $v_{DS}$ 很小，因此使用

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606102556594.png" alt="image-20210606102556594" style="zoom:67%;" />

从图 5.26(c) 所示的电路图中，我们还可以写出

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606102645725.png" alt="image-20210606102645725" style="zoom:67%;" />

这两个方程可以同时求解得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606103104123.png" alt="image-20210606103104123" style="zoom:67%;" />

请注意，$V_{DS} =-2.44-(-2.5) = 0.06 V$，这与假设的一样小。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606103256822.png" alt="image-20210606103256822" style="zoom:67%;" />

最后，情况 $v_I = -2.5 V$ [图。  5.26(d)] 将是 $v_I = +2.5 V$ 情况的精确补充：晶体管 $Q_N$ 将关闭。 因此，$I_{DN} = 0$，$Q_P$ 将在 $I_{DP} = 0.244 mA$ 和 $v_O =+2.44 V$ 的三极管区域中运行。

结束语： 如果 MOSFET 导通但其工作模式（饱和或三极管）未知，我们假设在饱和区工作，解决问题，并检查是否满足饱和模式工作条件。 如果不是，则 MOSFET 工作在三极管区域，并相应地进行分析。

摩尔定律：半个世纪前，戈登摩尔在 1965 年 4 月 19 日出版的电子杂志上提出了一个惊人的想法，他后来成为仙童半导体公司和英特尔公司的联合创始人。摩尔拥有化学博士学位 , 曾基于 1958 年到 1965 年七年间的五个点预测了集成电路产业的潜在增长。他得出的结论是——每个芯片的晶体管数量一直在增加，并将继续增加一个倍数 每两年左右 2 次——注定会在接下来的几十年里推动集成电路的进步，直到进入 21 世纪。 晶体管数量将翻倍是基于另一个预测：晶体管尺寸的持续缩小。 超大规模集成 (VLSI) 的先驱 Carver Mead 早早认识到这一预测的重要性，很快就开始将这一预测称为“摩尔定律”。  （有关摩尔定律的含义，请参见第 15 章第 15.1 节）。

### 5.4 The Body Effect and Other Topics

在本节中，我们简要考虑一些重要但次要的问题。

##### 5.4.1 The Role of the Substrate—The Body Effect

在许多应用中，源极端子连接到衬底（或主体）端子 B，这导致衬底和感应通道（查看图 5.5）之间的 pn 结具有恒定的零（截止）偏置。 在这种情况下，基板在电路操作中没有任何作用，可以完全忽略它的存在。

然而，在集成电路中，衬底通常为许多 MOS 晶体管所共有。为了保持所有衬底到沟道结的截止条件，衬底通常连接到 NMOS 电路中最负的电源（PMOS 电路中最正的）。 由此产生的源极和衬底之间的反向偏置电压（n 沟道器件中的 $V_{SB}$）将对器件操作产生影响。 要了解这一事实，请考虑一个 NMOS 晶体管，并使其衬底相对于源极为负。 反向偏置电压会加宽耗尽区（参见图 5.2）。 这反过来又减少了通道深度。 要将通道恢复到以前的状态，必须增加 $v_{GS}$。

$V_{SB}$ 对通道的影响可以最方便地表示为阈值电压 $V_t$ 的变化。 具体来说，已经表明，根据以下关系，增加反向衬底偏置电压 $V_{SB}$ 会导致 $V_t$ 增加

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606103849728.png" alt="image-20210606103849728" style="zoom:67%;" />

其中 $V_{t0}$ 是 $V_{SB} = 0$ 的阈值电压；  $φ_f$ 是一个物理参数，$(2φ_f )$ 通常为 $0.6 V$；  $γ$ 是由下式给出的制造工艺参数

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606104009305.png" alt="image-20210606104009305" style="zoom:67%;" />

其中 $q$ 是电子电荷的大小 $(1.6×10^{−19} C)$，$N_A$ 是 p 型衬底的掺杂浓度，$\epsilon _s$ 是硅的介电常数 ($11.7\epsilon_0 = 11.7 × 8.854 × 10^{−14} = 1.04  × 10^{−12} F/cm)$。 参数 $γ$ 的单位为 $ V^{\frac12}，$通常为 $0.4 V^{1/2}$。上式对于PMOS也成立，通常而言PMOS的 $γ$ 在-$0.5V^{1/2}$左右。

上面的式子表明 $V_{SB}$ 的增量变化引起 $V_t$ 的增量变化，这反过来导致 $i_D$ 的增量变化，即使 $v_{GS}$ 可能保持不变。 由此可知体电压控制$i_D$； 因此，衬底充当 MOSFET 的另一个栅极，这种现象称为衬底效应。 这里我们注意到参数 $γ$ 被称为衬底效应参数。

##### 5.4.2 Temperature Effects

$V_t$ 和 $k'$ 都是温度敏感的。 温度每升高 1°C，$V_t$ 的幅度就会降低约 2 mV。  $|V_t |$ 的这种减少使得随着温度的升高，漏极电流会相应增加。 然而，因为 $k'$ 随温度降低并且其影响占主导地位，所以观察到的温度升高的总体影响是漏极电流的降低。 这个非常有趣的结果被用于在功率电路中应用 MOSFET（第 12 章）。

##### 5.4.3 Breakdown and Input Protection

随着漏极电压的增加，漏极区和衬底之间的 pn 结达到一个值，在该值处发生雪崩击穿（参见第 3.5.3 节）。 这种击穿通常发生在 20 V 到 150 V 的电压下，并导致电流稍微快速增加（称为弱雪崩）。

在现代设备中，在较低电压（约 20 V）下发生的另一种击穿效应称为穿通。 当漏极电压增加到漏极区周围的耗尽区通过沟道延伸到源极时， 漏极电流迅速增加。它发生在具有相对较短沟道的器件中。 通常，穿通不会对设备造成永久性损坏。

当栅源电压超过约 30 V 时，会发生另一种击穿。这是栅氧化层击穿并导致器件永久性损坏。尽管 30 V 可能看起来很高，但必须记住，MOSFET 具有非常高的输入电阻和非常小的输入电容，因此在栅极电容器上积累的少量静电荷会导致其击穿电压被超过。

为了防止静电荷积聚在 MOSFET 的栅极电容器上，通常在 MOS 集成电路的输入端包含栅极保护器件。一般来说，保护机制是使用钳位二极管

##### 5.4.4 Velocity Saturation

在高纵向电场下，沟道中电荷载流子的漂移速度达到上限（硅中的电子和空穴约为 107 cm/s）。 这种效应在现代超短沟道器件中可能发生在 $v_{DS}$ 低于 1 V 的情况下，称为速度饱和。 可以看出，当发生速度饱和时，当前 $i_D$ 将不再与 $v_{GS}$ 存在平方律关系。 相反，$i_D$ 变得线性依赖于 $v_{GS}$，并且跨导 $g_m$ 变得恒定且独立于 $v_{GS}$。 在第 15 章中，我们将在研究深亚微米（即 L < 0.25 μm）CMOS 数字电路时考虑速度饱和

##### 5.4.5 The Depletion-Type MOSFET

我们通过对另一种类型的 MOSFET，耗尽型 MOSFET 的简要讨论来结束本节。 它的结构与增强型 MOSFET 的结构相似，但有一个重要区别：耗尽型 MOSFET 具有物理注入的沟道(即该沟道并非通过感生电荷的移动产生）。

因此，n 沟道耗尽型 MOSFET 具有连接 p 型衬底顶部的 n+ 源极和 n+ 漏极区的 n 型硅区。 因此，如果在漏极和源极之间施加电压 $v_{DS}$，则即使$v_{GS} = 0$ 时，电流 $i_D$ 仍然会产生。换句话说，与增强型 MOSFET 的情况不同，不需要感应通道。

沟道深度及其电导率可以由 $v_{GS}$ 以与增强型器件完全相同的方式进行控制。 应用正 $v_{GS}$ 通过吸引更多电子进入通道来增强通道。 然而，在这里，我们也可以应用负的 $v_{GS}$，这会导致电子从通道中被排斥，因此通道变浅，其电导率降低。 负的 $v_{GS}$ 会耗尽其电荷载流子的通道，这种操作模式（负 $v_{GS}$）称为耗尽模式。 随着 $v_{GS}$ 的幅度在负方向上增加，达到一个值，该值使通道完全耗尽电荷载流子，并且即使仍然可以应用 $v_{DS}$，$i_D$ 也会减少到零。

$v_{GS}$ 的这个负值是 n 沟道耗尽型 MOSFET 的阈值电压。上面的描述（正确地）表明，耗尽型 MOSFET 可以通过施加正 $v_{GS}$ 在增强模式下工作，而在耗尽模式下通过施加负 $v_{GS}$ 工作。 这在图 5.27 中进行了说明，其中显示了耗尽型 NMOS 晶体管（图 5.27a）的电路符号及其 $i_D-v_{GS}$ 特性。 请注意，此处阈值电压 $V_{tn}$ 为负。 除了负 $V_{tn}$ 之外，$i_D-v_{DS}$ 特性（未显示）与增强型 MOSFET 的特性相似。 最后，请注意设备符号通过垂直线旁边的阴影区域表示现有通道。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606105855264.png" alt="image-20210606105855264" style="zoom:67%;" />

耗尽型 MOSFET 可以与增强型器件在同一 IC 芯片上制造，从而产生具有改进特性的电路，这将在后面的章节中说明。然而，耗尽型 MOSFET 是一种特殊器件，并不常用。

## CHAPTER 6 Bipolar Junction Transistors (BJTs)

### 6.1 Device Structure and Physical Operation

##### 6.1.1 Simplified Structure and Modes of Operation

该晶体管由两个pn结构成，分别是发射极-基极结（EBJ）和集电极—基极结（CBJ),这也是其被称为双极性晶体管的原因

![image-20210531113737014](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531113737014.png)

![image-20210531114141068](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531114141068.png)

##### 6.1.2 Operation of the npn Transistor in the Active Mode

首先我们列出BJT的工作模式和其对应的结工作情况

![image-20210531114318799](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531114318799.png)

在这三种模式中，active mode（也就是放大状态）是最重要的，如下图所示

![image-20210531114508940](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531114508940.png)

两个外部电源用于建立放大状态所需的偏置条件，$V_{BE}$使EBJ正偏而$V_{CE}$使CBJ反偏

电流流动：

发射极-基极结上的正向偏压将导致电流流过该结。 电流由两部分组成：从发射极注入基极的电子和从基极注入发射极的空穴。 很快就会明白，我们非常希望第一个分量（从发射极到基极的电子）比第二个分量（从基极到发射极的空穴）大得多。 而这可以通过用重掺杂的发射极和轻掺杂的基极制造该器件来实现。 也就是说，该器件被设计为在发射极中具有高密度的电子而在基极中具有低密度的空穴。

流过发射极-基极结的电流将构成发射极电流 $i_E$，如图 6.3 所示。  $i_E$ 的方向是“离开”发射极引线， 发射极电流 iE 等于这两个分量的总和。 但是，由于电子成分比空穴成分大得多，因此发射极电流将由电子成分控制。

根据我们在第 3.5 节对正向偏置 pn 结的电流的研究，我们知道 $i_E$ 的电子分量和空穴分量的大小将与 $e^{v_{BE} /V_T}$ 成正比，其中 $v_{BE}$ 是EBJ的正偏电压，$V_T$则是热电压（室温下约为25mV）

现在我们关注电子电流这个分量，这些p区 的非平衡少子在基极会形成一个由基极的发射结侧到集电结侧的逐渐减小的浓度梯度，从而形成扩散运动，尽管基极中的空穴会与它们复合，但仍会有部分电子在反偏电压$V_{CB}$的作用下穿过CBJ的耗尽层进入集电极，这部分电子电流被称作集电极电流$I_c$

The Collector Current：由于集电极处于反偏状态，因此其内部电流大小几乎完全受控于饱和电流（扩散电流）的大小，该扩散电流是来自于EBJ的扩散电流，因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531121357443.png" alt="image-20210531121357443" style="zoom:67%;" />

需要注意的是，$i_c$与$V_{CB}$的大小无关，即只要CBJ反偏，那么到达基区CBJ处的电子u就会被被电场扫掠到E中从而构成集电极电流。

The Base Current：基极电流由两个分量构成，第一个分量$I_{B1}$来自于从基极注入到发射极的空穴电流，而第二个分量则是外部用于补充在基极中与来自发射极的电子复合的空穴构成的空穴电流，记为$I_{B2}$,而由于$I_{B2}$与注入基极的电子数成正比，因此其也与$e^{v_{BE} /V_T}$成正比。因此基极电流和集电极电流之间就存在比例关系

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531122115085.png" alt="image-20210531122115085" style="zoom:67%;" />

从上面的描述中，我们可以看到共射极电流增益$β$受到两个因素影响，一是基极区的宽度（这影响到进入集电极的扩散电流大小），二是B区与E区的相对掺杂浓度

The Emitter Current：根据基尔霍夫电流定律，进入晶体管的电流最后都会离开

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531122515063.png" alt="image-20210531122515063" style="zoom:67%;" />

代入我们之前的式子，可以得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531122549825.png" alt="image-20210531122549825" style="zoom:67%;" />

或者

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531122605021.png" alt="image-20210531122605021" style="zoom:67%;" />

换言之，我们也可以将式子写成

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531122643907.png" alt="image-20210531122643907" style="zoom:67%;" />

或者

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531122701714.png" alt="image-20210531122701714" style="zoom:67%;" />

因此$α$和$β$之间的关系是

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531122736715.png" alt="image-20210531122736715" style="zoom:67%;" />

或者

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531122745264.png" alt="image-20210531122745264" style="zoom:67%;" />

从上面的式子中我们可以看到，对于特定的晶体管而言，$α$是一个常数，小于但接近于1，此外也表明对$α$的微小扰动可能导致$β$发生巨大变化，实际上，相同类型的晶体管的$β$值可能 相差很大。

Minority-Carrier Distribution（少数载流子分布）：通过考虑基极和发射极中的非平衡少子分布可以让我们对BJT内部所发生的事有更深刻的理解，如下图

![image-20210531123207218](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531123207218.png)

观察到，由于发射极的掺杂浓度 $N_D$ 远高于基极的掺杂浓度 $N_A$，从发射极注入到基极的电子浓度 $n_p(0)$ 远高于从基极注入到发射极的空穴浓度$p_n(0)$。 这两个量都与 $e^{v_{BE} /V_T}$ 成正比，因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531123649413.png" alt="image-20210531123649413" style="zoom:67%;" />

此外，由于反偏电压的存在，基极中靠近集电极的电子均会被扫入集电极中，导致基极区最右侧的电子浓度为0.此前我们说过，扩散电流的大小于该处浓度曲线的斜率成正比。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531123923871.png" alt="image-20210531123923871" style="zoom:67%;" />

其中$A_E$是发射结的截面积，$D_n$是基极中的电子扩散率，少子产生的浓度梯度引起了扩散电流$I_n$。而集中的复合运动虽然比较小，但仍会对浓度曲线的分布造成一定影响，因此实际曲线相较于理想值会稍稍下凹。

该电流最后扩散流入集电极，因此在集电极中，其饱和电流大小为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531124620249.png" alt="image-20210531124620249" style="zoom: 67%;" />

或者

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531124640179.png" alt="image-20210531124640179" style="zoom:67%;" />

从上式中可以看出，$I_s$与截面积$A_E$成正比而与宽度$W$成反比，此外，由于其也与$n_i^2$有关，因此其温度依赖性也很强。大小通常在$10^{-12}A$到$10^{-18}A$之间

Recapitulation and Equivalent-Circuit Models：

我们为放大状态下的npn晶体管提供了一个一阶（first-order）等效模型，如下

![image-20210531134852002](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531134852002.png)

由前面的推导可知，只要三极管处于active mode，$i_c$大小就与$V_{CB}$大小无关，因而在模型中集电极表现为一个受控恒流源，同时，由于$i_B$相对较小，我们可以近似认为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531135200825.png" alt="image-20210531135200825" style="zoom:67%;" />

$α$越接近1，误差越小。在这个模型中，电流源变化并非线性（因为变量是$V_{BE}$），而假如我们将变量设置为$i_E$，则有

![image-20210531135422833](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531135422833.png)

根据相同的原理我们还可以得到下面两个模型

![image-20210531135621772](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531135621772.png)

##### 6.1.4 Operation in the Saturation Mode

事实上处于active mode下的CBJ反偏电压并非严格要求大于等于0，因为pn结中势垒（耗尽层电场）的存在，$V_{CB}$只要不越过势垒即可

![image-20210531140140224](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531140140224.png)

通常而言，势垒的大小在0.4v左右。可以从下面的模型中看到为什么$i_c$在CBJ导通时减小

![image-20210531141119667](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531141119667.png)

在CBJ导通时，会产生由基极流向集电极的而空穴电流，其方向恰好与扩散电流（电子电流）的方向相反，因此此时

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531141344030.png" alt="image-20210531141344030" style="zoom:67%;" />

同理，基极电流的大小会因此增大

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531141510991.png" alt="image-20210531141510991" style="zoom:67%;" />

此时对应的$β$值将会响应减小

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531141613112.png" alt="image-20210531141613112" style="zoom:67%;" />

我们将看到，在分析电路时，我们可以通过以下两个测试之一来确定 BJT 是否处于饱和模式： 

1.CBJ 正向偏置是否超过 0.4 V？

2.$i_C/i_B$ 的比值是否低于 β？

一般而言，我们假设能使CBJ正偏的临界电压大小为$V_{CE_{sat}}=0.3V$.

### 6.2 Current–Voltage Characteristics

##### 6.2.1 Circuit Symbols and Conventions

在这本书中，我们规定绘制电路图时，电势从上至下降低，比如

![image-20210531142109806](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531142109806.png)

![image-20210531143954357](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531143954357.png)

The Collector–Base Reverse Current ($I_{CBO}$)：该电流是来自热激发的漂移电流，由于CBJ处于反偏状态，因此该电流的大小非常小，通常在nA级，并且对温度变化非常敏感，每升高10°C变大约一倍

![image-20210531144331765](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531144331765.png)

![image-20210531144347016](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531144347016.png)



##### 6.2.2 Graphical Representation of Transistor Characteristics

有时以伏安特性曲线来描述BJT比较直观，比如$i_c$与$V_{BE}$的关系

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531144542361.png" alt="image-20210531144542361" style="zoom:67%;" />

就与二极管的伏安特性曲线相同，其他极电流与EBJ偏置电压之间的关系也是指数形式的，由于其指数的系数较大，使其曲线十分陡峭。在$V_{BE}<0.5V$时我们一般认为其中没有电流；在正常电流范围内，$V_{BE}$一般处于[0.6,0.8]的区间中，计算时取平均值0.7V

![image-20210531144909970](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531144909970.png)

![image-20210531144920268](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531144920268.png)

与硅二极管一样，如果温度每升高 1°C，发射极 - 基极结上的电压就会降低约 2 mV，前提是该结以恒定电流运行。图 6.17 通过描绘 npn 晶体管在三种不同温度下的 $i_C-v_{BE}$ 曲线来说明这种温度依赖性

##### 6.2.3 Dependence of iC on the Collector Voltage—The Early Effect(厄利效应)

实际上BJT中的集电极电流大小并非完全与$V_{CB}$不相关

![image-20210531145147969](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531145147969.png)

考虑如上图所示的共射电路，其中$V_{BE}$和$V_{CE}$可调节，我们在给定的$V_{BE}$处调节$V_{CE}$并测量此时的集电极电流$i_c$，可得到如下图像

![image-20210531145754476](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531145754476.png)

可以看到，虽然在放大区段，$i_c$的图像仍然是直线，但此时其斜率不为0；此外还可以看到各曲线的延长线交于一点$V_A$，该点被称作厄利电压。

出现这种现象的原因是，在给定$V_{BE}$的情况下，增大$V_{CE}$会使得CBJ上的反偏电压$V_{CB}$大小上升，从而使其耗尽层宽度变小，而饱和电流的大小与耗尽层宽度$W$成反比，故集电极电流大小上升

该效应被称作厄利效应。为了计算方便，我们假设$I_s$大小不变，而将其变化体现在系数上，根据图像我们可以看到该变化近似于线性。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531150459811.png" alt="image-20210531150459811" style="zoom:67%;" />

由于此时$V_{CE}$相对于$i_c$出现变化，这意味着对于集电极而言，集电极到发射极之间的电阻并非无穷大

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531150702196.png" alt="image-20210531150702196" style="zoom:67%;" />

代入可以得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531150739282.png" alt="image-20210531150739282" style="zoom:67%;" />

或者写作

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531152733767.png" alt="image-20210531152733767" style="zoom:67%;" />

其中

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531152800349.png" alt="image-20210531152800349" style="zoom:67%;" />

在实际的电路设计中我们一般可以忽略$i_c$对$V_{CE}$，不过有限的$r_o$可能会对放大器的性能产生影响，我们下面给出带有$r_o$的三极管模型

![image-20210531153025947](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531153025947.png)



##### 6.2.4 An Alternative Form of the Common-Emitter Characteristics

表示晶体管特性的另一种方式如下所示

![image-20210531153151661](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531153151661.png)

我们仍然采用之前的共射电路模型，但这次我们不采用恒定的$V_{BE}$而是采用恒定的$i_B$来做参考。

The Common-Emitter Current Gain β：一般而言确定工作点Q的方法是在这一点上，有
$$
i_C=\beta_Qi_B
$$
但这次我们采用了不大一样的方法，在上图中，我们确定的工作点Q为
$$
\Delta i_c/\Delta i_B=\beta_Q
$$
这两个$β$分别代表了在交流与直流条件下的$β$值，虽然这两个$β$略有不同，但在本书中，我们暂且认为无论是交流电流还是直流电流，$β$值都是一样的。

The Saturation Voltage $V_{CE_{sat}}$ and Saturation Resistance $R_{CE_{sat}}$：

下图是饱和区伏安曲线图

![image-20210531154145103](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531154145103.png)

其斜率表示集电极与发射极之间的等效电阻的倒数，在饱和电压处有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531154539009.png" alt="image-20210531154539009" style="zoom:67%;" />

![image-20210531154601893](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531154601893.png)

### 6.3 BJT Circuits at DC

我们现在准备分析只施加直流电压的 BJT 电路。 在以下示例中，我们将使用简单模型，其中 导通晶体管的$|V_{BE} |$ 为 0.7 V 和 饱和晶体管的 $|V_{CE} |$为 0.2 V，我们将忽略厄利效应。 这些模型如表 6.3 所示。 当然，更好的模型可以用来获得更准确的结果。 然而，这通常是以牺牲分析速度为代价的。 更重要的是，随之而来的复杂性可能会阻碍电路设计人员深入了解电路行为的能力。 使用带有 SPICE 的电路仿真可以获得使用精细模型的准确结果。 这几乎总是在设计的最后阶段完成，当然在电路制造之前。 然而，计算机模拟并不能替代快速的纸笔电路分析，这是有抱负的电路设计师必须掌握的一项基本能力。 以下一系列示例是朝这个方向迈出的一步。

正如将要看到的，在分析电路时，必须回答的第一个问题是：晶体管在哪种模式下工作？ 在某些情况下，答案是显而易见的。 例如，快速检查端电压将指示晶体管是截止还是导通。 如果它正在导通，我们必须确定它是在活动模式下还是在饱和模式下运行。 然而，在某些情况下，这可能并不明显。 不用说，随着读者在晶体管电路分析和设计方面获得实践和经验，答案将在更大比例的问题中显而易见。 但是，始终可以通过使用以下程序来确定答案。

![image-20210531155147112](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531155147112.png)

![image-20210531155251030](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531155251030.png)

![image-20210531155338972](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531155338972.png)

![image-20210531155523700](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531155523700.png)

![image-20210531155810194](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531155810194.png)

![image-20210531155913984](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531155913984.png)

![image-20210531155945706](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531155945706.png)

![image-20210531160041619](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531160041619.png)



戴维南等效电路示例，如上图

![image-20210531160625467](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531160625467.png)

上面的例子要采用迭代法解（先假设$Q_1$的集电极电流完全由$I_{C1}$提供）

![image-20210531161006849](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531161006849.png)

在电路图中我们可以看到，$Q_1$与$Q_2$的基极电势相同，因此其中有一个必然没有导通。假设$Q_1$未导通，则$Q_2$的发射极电流必然来自于接地端，但这意味着其发射极电势为负，显然不成立，因此$Q_1$导通。通过建立方程，我们最终可以得到上图所示的数据

##### 6.4.2 Dependence of β on IC and Temperature

在本章中，我们假设晶体管共发射极直流电流增益 $β$ 或 $h_{FE}$ 对于给定的晶体管是恒定的。 事实上，$β$的大小取决于晶体管工作时的直流电流，如图 6.34 所示。 引起这种依赖性的物理过程超出了本书的范围。 但是请注意，存在一个 $β$ 最高的电流范围。 通常，人们安排在此范围内的电流下操作晶体管。

图 6.34 还显示了 $β$ 对温度的依赖性。  $β$ 随温度增加的事实会导致晶体管在大功率水平下运行时出现严重问题（参见第 12 章）。

![image-20210601130839668](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601130839668.png)

## CHAPTER 7 Transistor Amplifiers

简介

在研究了两种主要的晶体管类型，MOSFET（第 5 章）和 BJT（第 6 章）之后，我们现在开始研究它们的应用。 有两种截然不同的晶体管应用：在数字电路设计中作为开关（第 14-16 章）和在模拟电路放大器设计中作为受控源。 本章和随后的六章重点讨论后者的应用，即晶体管在各种放大器类型设计中的使用。

由于在放大器设计中使用 MOSFET 和 BJT 的基本原理是相同的，因此本章将同时研究这两种器件。 除了在介绍中提供一些经济性之外，这种统一的研究使我们能够对 MOS 和双极放大器进行重要的比较。

本章的大部分内容涉及晶体管在放大器设计中的应用基础的基本原理和概念：我们详细研究了在小信号线性分析和设计中用于表示两种晶体管类型的模型。 放大器。 我们还研究了三种基本配置，其中两种晶体管类型中的每一种都可以连接以实现放大器。

本章以分立电路放大器的示例结束。 这些电路可以使用印刷电路板 (PCB) 上的分立晶体管、电阻器和电容器进行组装。 它们主要使用 BJT，它们的设计与集成电路 (IC) 放大器的设计有很大不同。 后者主要使用 MOSFET，它们的研究从第 8 章开始。 然而，本章介绍的基本原理和概念同样适用于分立放大器和集成放大器

### 7.1 Basic Principles

##### 7.1.1 The Basis for Amplifier Operation

晶体管在放大器设计中的应用挤出式，当期间在active mode下工作时，可以实现作为受控电流源使用。比如对于BJT而言，基极-发射极电压$V_{BE}$根据指数关系控制集电极电流$i_c$，对于$npn$晶体管而言，可以表示为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601131537243.png" alt="image-20210601131537243" style="zoom:67%;" />

该一阶模型表明集电极电流大小与$V_{CE}$无关，从而我们在工作时隔离了集电极，如下面的电路图所示

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601131731332.png" alt="image-20210601131731332" style="zoom:67%;" />

我们通过使$V_{CE}\ge0.3V$来确保CBJ反偏，而$V_{BE}$则一般在$0.7V$左右

##### 7.1.2 Obtaining a Voltage Amplifier

从上面的描述中可以看出，晶体管一般是跨导放大器，即输入电压而输出电流，不过国人们普遍对电压放大器更感兴趣，一个普遍的方法是使用电阻并将电阻两端的电压作为输出，如下

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601133009872.png" alt="image-20210601133009872" style="zoom:67%;" />

有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601133032862.png" alt="image-20210601133032862" style="zoom:67%;" />

并且我们给出了其输出电压随EBJ偏置电压变化而变化的图像

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601133213600.png" alt="image-20210601133213600" style="zoom:67%;" />

##### 7.1.3 The Voltage-Transfer Characteristic (VTC)

电压传输特性指的是输出电压与输入电压之间的关系，比如在上图中，有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601133439286.png" alt="image-20210601133439286" style="zoom:67%;" />

关系固然是 正确的，但存在一个问题，即这样的关系并非线性，导致在实际中难以应用

##### 7.1.4 Obtaining Linear Amplification by Biasing the Transistor

对晶体管的合理偏置（即设置工作点）可以让我们从晶体管中获得几乎与线性无异的放大。让我们回到之前所描述过的电压放大器的VTC图上，不过这次以场效应管为例

![image-20210601134204529](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601134204529.png)

在右图中，我们选定一个偏置电压 $V_{GS}$，在图上它对应一点$Q$，该点被称为直流工作点，如下图

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601134332565.png" alt="image-20210601134332565" style="zoom:67%;" />

接下来我们在偏置电压$V_{GS}$的基础上施加信号电压$v_{gs}$，该信号是一时变函数

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601134449473.png" alt="image-20210601134449473" style="zoom:67%;" />

具体来说，$v_{gs}$ 的幅度足够小，可以将瞬时工作点的偏移限制在 VTC 偏置点 $Q$ 附近的一个短的、几乎线性的段。该段越短，其对线性的近似程度越好。 这就是从非线性 MOSFET 获得线性放大的本质，如下图

![image-20210601134635781](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601134635781.png)

对于BJT，我们也可以进行同样的操作来得到线性放大倍数

##### 7.1.5 The Small-Signal Voltage Gain

依据上一节的结论，我们可以认为在工作点处的电压收益大小即为其VTC图像在工作点$Q$处的斜率

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601135846599.png" alt="image-20210601135846599" style="zoom:67%;" />

我们得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601135935429.png" alt="image-20210601135935429" style="zoom:67%;" />

我们对电压增益的这个表达式进行以下观察：

1. 增益为负，表示放大器正在反相； 也就是说，输入和输出之间存在 180° 相移。 这种反转应该是从方程中预料到的。  

   2. 增益与集电极偏置电流 $I_C$ 和负载电阻 $R_C$ 成正比。

该式子也可写成

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601140124211.png" alt="image-20210601140124211" style="zoom:67%;" />

理论上我们规定$V_{CE}$的最小值为$0.3V$，因此其增益的理论最大值为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601140249668.png" alt="image-20210601140249668" style="zoom:67%;" />

不过这仅仅是理论值而已，考虑到失真问题，采用这种电压输出信号的负值没有留下摆幅

##### 7.1.6 Determining the VTC by Graphical Analysis

尽管在实践中很少使用晶体管电路的图形分析，但在此阶段对我们更深入地了解电路操作很有用，尤其是在回答偏置点 Q 的位置问题时。

如下

![image-20210601140540282](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601140540282.png)

图形分析基于以下观察结果：对于$V_{GS}$的每个值，电路将在该曲线与$i_D-v_{DS}$曲线的交点处运行，表示式（7.3）的直线，可重写为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601141205195.png" alt="image-20210601141205195" style="zoom:67%;" />

表示此关系的直线叠加在$i_D−v_{DS}$特性如图7.7所示。它在$v_{DS}=V_{DD}$处与水平轴相交，斜率为$−1/R_D$。由于这条直线实际上代表负载电阻$R_D$，因此称为负载线。然后逐点确定VTC。请注意，我们已经标记了四个重要点：点A，$v_{GS}=V_t$;点Q，在点Q，MOSFET可以被偏置用于放大器操作（$v_{GS}=V_{GS}$和$v_{DS}=V_{DS}$）;点B，在点B，MOSFET离开饱和并进入三极管区域，点C，深入三极管区域，并且$v_{GS}=V_{DD}$。如果将MOSFET用作开关，则操作点A和C适用：在A处，晶体管关闭（打开开关），在C处，晶体管作为低值电阻$r_{DS}$工作，电压降很小（关闭开关）。

上述图形分析方法可用于确定图7.2（c）中BJT放大器的VTC。图7.2（d）中的A点对应于刚刚开启的BJT（$v_{BE} \simeq 0.5 V$），B点对应于离开有源区进入饱和区的BJT。如果将BJT作为开关操作，则两种操作模式为切断（打开开关）和饱和（关闭开关）。如第6.2节所述，在饱和状态下，BJT具有较小的闭合电阻$R_{CE_{sat}}$和偏置电压。

##### 7.1.7 Deciding on a Location for the Bias Point Q

![image-20210601143903800](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601143903800.png)

在决定$R_D$的值时，参考$i_D−v_{DS}$平面很有用。图7.9显示了导致两个极端偏置点的两条负载线：$Q_1$点太接近$V_{DD}$，导致$v_{ds}$的正信号摆动受到严重限制。超过允许的正最大值会导致信号的正峰值被截断。同样，$Q_2$点太接近三极管区域的边界，从而严重限制了$v_{ds}$允许的负信号摆动。超过这一限制将导致晶体管进入三极管区域的一部分，每个周期接近负峰值，导致输出信号失真。最后，我们注意到类似的考虑也适用于BJT放大器的情况。

### 7.2 Small-Signal Operation and Models

##### 7.2.1 The MOSFET Case

考虑图 7.10 所示的概念放大器电路。 此处通过施加直流电压 $V_{GS}$ 对 MOS 晶体管进行偏置，要放大的输入信号 $v_{gs}$ 叠加在直流偏置电压 $V_{GS}$ 上。 输出电压取自漏极。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606131523132.png" alt="image-20210606131523132" style="zoom:67%;" />

The DC Bias Point:

可以通过将信号 $v_{gs}$ 设置为零来找到直流偏置电流 $I_D$； 因此，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606131624256.png" alt="image-20210606131624256" style="zoom:67%;" />

我们忽略了通道长度调制对漏极电流的影响（即，我们假设 $λ = 0$）。 这里 $V_{OV} = V_{GS} -V_t$ 是 MOSFET 偏置工作时的过驱动电压。 漏极的直流电压 $V_{DS}$ 将为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606131732867.png" alt="image-20210606131732867" style="zoom:67%;" />

为了确保饱和区操作，我们必须有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606131817848.png" alt="image-20210606131817848" style="zoom:67%;" />

此外，由于漏极上的总电压将有一个信号分量叠加在 $V_{DS}$ 上，因此 $V_{DS}$ 必须足够大于 $V_{OV}$ 以允许所需的负信号摆幅。

The Signal Current in the Drain Terminal

接下来，考虑应用输入信号 $v_{gs}$ 的情况。 总瞬时栅源电压为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606132508960.png" alt="image-20210606132508960" style="zoom:67%;" />

导致总瞬时漏极电流 $i_D$，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606132542418.png" alt="image-20210606132542418" style="zoom:67%;" />

等式右侧的第一项。可以识别为直流偏置电流 $I_D$（方程 7.25）。 第二项表示与输入信号 $v_{gs}$ 成正比的电流分量。 第三项是与输入信号的平方成正比的电流分量。 最后一个分量是不受欢迎的，因为它代表非线性失真。 为了减少 MOSFET 引入的非线性失真，输入信号应保持较小，以便

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606132857792.png" alt="image-20210606132857792" style="zoom:67%;" />

这导致

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606132915121.png" alt="image-20210606132915121" style="zoom:67%;" />

或等同于

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606132939551.png" alt="image-20210606132939551" style="zoom:67%;" />

如果满足这个小信号条件，我们可以忽略方程中的最后一项。 并将 $i_D$ 表示为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606133013558.png" alt="image-20210606133013558" style="zoom:67%;" />

其中

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606133046784.png" alt="image-20210606133046784" style="zoom:67%;" />

与 $i_d$ 和 $v_{gs}$ 相关的参数是 MOSFET 跨导 $g_m$，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606133144192.png" alt="image-20210606133144192" style="zoom:67%;" />

或在过驱动电压 $V_{OV}$ 方面，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606133233197.png" alt="image-20210606133233197" style="zoom:67%;" />

图 7.11 给出了 MOSFET 放大器小信号操作的图形解释。 请注意，$g_m$ 等于偏置点处 $i_D-v_{GS}$ 特性的斜率，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606133403089.png" alt="image-20210606133403089" style="zoom:67%;" />

这是 $g_m$ 的正式定义，可以证明它给出了方程中给出的表达式。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606133445928.png" alt="image-20210606133445928" style="zoom:67%;" />

The Voltage Gain

回到图 7.10 的电路，我们可以表示总瞬时漏极电压 $v_{DS}$ 如下：

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606133649560.png" alt="image-20210606133649560" style="zoom:67%;" />

在小信号条件下，我们有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606133719396.png" alt="image-20210606133719396" style="zoom:67%;" />

可以改写为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606133754996.png" alt="image-20210606133754996" style="zoom:67%;" />

因此，漏极电压的信号分量为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606133829740.png" alt="image-20210606133829740" style="zoom:67%;" />

这表明电压增益由下式给出

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606133912282.png" alt="image-20210606133912282" style="zoom:67%;" />

等式中的减号。 表明输出信号 $v_{ds}$ 与输入信号 $v_{gs}$ 相差 $180°$。 这在图 7.12 中进行了说明，其中显示了 $v_{GS}$ 和 $v_{DS}$。 假设输入信号具有幅度远小于 $2(V_{GS} – V_t )$ 的三角波形，即等式中的小信号条件以确保线性运行。 为了始终在饱和（有源）区域运行，$v_{DS}$ 的最小值不应比$v_{GS}$ 的相应值小 $V_t$。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606134357972.png" alt="image-20210606134357972" style="zoom:67%;" />

此外，$v_{DS}$的最大值也不应大于偏置电压$V_{DD}$的大小，否则 FET 将进入截止区域，输出信号波形的峰值将被削掉。

Separating the DC Analysis and the Signal Analysis

由前面的分析可知，在小信号近似下，信号量叠加在直流量上。 例如，总漏极电流 $i_D$ 等于直流电流 $I_D$ 加上信号电流 $i_d$ ，总漏极电压 $v_DS = V_{DS} +v_{ds}$，依此类推。 因此，通过将直流或偏置计算与小信号计算分开，可以大大简化分析和设计。

也就是说，一旦建立了稳定的直流工作点并计算了所有直流量，我们就可以执行信号分析而忽略直流量。

Small-Signal Equivalent-Circuit Models

从信号的角度来看，FET 充当电压控制的电流源。 它接受栅极和源极之间的信号 $v_{gs}$ 并在漏极端子提供电流 $g_mv_{gs}$。 这个受控源的输入电阻非常高——理想情况下是无穷大。其输出电阻——从输出端看入电路的电阻——同样也非常高，到目前为止——我们假设它是无限的。 把所有这些放在一起，我们得到了图 7.13(a) 中的电路，它代表了 MOSFET 的小信号操作，因此是一个小信号模型或小信号等效电路

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606135637847.png" alt="image-20210606135637847" style="zoom:67%;" />

在分析 MOSFET 放大器电路时，晶体管可以用图 7.13（a）所示的等效电路模型代替。 电路的其余部分保持不变，只是理想的恒定直流电压源被短路取代。 这是因为理想恒定直流电压源两端的电压不会改变，因此恒定直流电压源两端始终存在零电压信号。 双重声明适用于恒定直流电流源； 即理想恒流源的信号电流始终为零，因此在放大器的小信号等效电路中，理想恒流源可以用开路代替。 生成的电路随后可用于执行任何所需的信号分析，例如计算电压增益。

图 7.13(a) 的小信号模型最严重的缺点是它假设饱和漏极电流与漏极电压无关。 从我们对饱和状态下的 MOSFET 特性的研究中，我们知道漏极电流实际上以线性方式依赖于 $v_{DS}$。 这种依赖性由漏极和源极之间的有限电阻 $r_o$ 建模，其值为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606140147307.png" alt="image-20210606140147307" style="zoom:67%;" />

其中 $V_A =1/λ$ 是指定或可测量的 MOSFET 参数。 应该记住，对于给定的工艺技术，$V_A$ 与 MOSFET 沟道长度成正比。 电流 $I_D$ 是不考虑通道长度调制的直流漏极电流值； 那是，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606140519534.png" alt="image-20210606140519534" style="zoom:67%;" />

通常，$r_o$ 在 $10 k$ 到 $1000 k$ 的范围内。 因此，通过将 $r_o$ 与受控源并联，可以提高小信号模型的精度，如图 7.13（b）所示。

需要注意的是，小信号模型参数 $g_m$ 和 $r_o$ 取决于 MOSFET 的直流偏置点。回到图 7.10 的放大器，我们发现用图 7.13(b) 的小信号模型替换 MOSFET 导致电压增益表达式

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606141039213.png" alt="image-20210606141039213" style="zoom:67%;" />

因此，有限的输出电阻 $r_o$ 导致电压增益幅度的减小。虽然上面的分析是在 NMOS 晶体管上进行的，但结果和图 7.13 的等效电路模型同样适用于 PMOS 器件，除了使用 $|V_{GS} |、|V_t |、|V_{OV} |$ 和 $|V_A  |$ 并用 $k_p$ 替换 $k_n$。

The Transconductance $g_m$

我们现在将仔细研究由方程给出的 MOSFET 跨导。  (7.32)，我们用 $k_n = k _n'(W/L)$ 重写如下

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606141505058.png" alt="image-20210606141505058" style="zoom:67%;" />

这种关系表明 $g_m$ 与工艺跨导参数 $k_ n' = μ_nC_{ox}$ 和 MOS 晶体管的 $W/L$ 比成正比； 因此，为了获得相对较大的跨导，器件必须短而宽。 我们还观察到，对于给定的器件，跨导与过驱动电压 $V_{OV} = V_{GS} -V_t$ 成正比，即偏置电压 $V_{GS}$ 超过阈值电压 $V_t$ 的量。 但是请注意，通过在更大的 $V_{GS}$ 偏置器件来增加 $g_m$ 的缺点是降低了漏极上的允许电压信号摆幅。

另一个有用的 $g_m$ 表达式可以通过替换方程中的 $V_{OV}$ 获得。乘以 $\sqrt{2I_D/(k_ n' (W/L))}$ 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606142046478.png" alt="image-20210606142046478" style="zoom:67%;" />

这个表达式说明了两件事

1. 对于给定的 MOSFET，$g_m$ 与直流偏置电流的平方根成正比。
2. 在给定的偏置电流下，$g_m$ 与 $\sqrt{W/L}$ 成正比。

总之，确定 $g_m$ 有三种不同的关系——并且有三个设计参数——$(W/L)、V_{OV}$和$I_D$，其中任意两个可以独立选择。 也就是说，设计者可以选择在特定的过驱动电压 $V_{OV}$ 和特定的电流 $I_D$ 下操作 MOSFET； 然后可以找到所需的 $W/L$ 比并确定结果 $g_m$

##### Example 7.3

图 7.15(a) 显示了一个分立式 MOSFET 放大器，它利用一个漏栅电阻 $R_G$ 来进行偏置。 这种偏置安排将在第 7.4 节中研究。 输入信号$v_i$通过一个大电容耦合到栅极，漏极的输出信号通过另一个大电容耦合到负载电阻$R_L$。 我们希望分析该放大器电路以确定其小信号电压增益、输入电阻和最大允许输入信号。 晶体管的 $V_t = 1.5 V，k _n' (W/L) = 0.25 mA/V^2，V_A = 50 V$。假设耦合电容足够大，以便在感兴趣的信号频率下充当短路。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606142951618.png" alt="image-20210606142951618" style="zoom:67%;" />

Solution

我们首先确定直流工作点。 为此，我们消除了输入信号 $v_i$，并使两个耦合电容器开路（因为它们会阻止直流电流）。 结果是图 7.14(b) 所示的电路。我们注意到，由于 $I_G = 0，R_G$ 上的直流电压降为零，并且

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606143343032.png" alt="image-20210606143343032" style="zoom:67%;" />

当 $V_{DS} = V_{GS}$ 时，NMOS 晶体管将工作在饱和状态。 因此，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606143511468.png" alt="image-20210606143511468" style="zoom:67%;" />

其中，为简单起见，我们忽略了通道长度调制对直流工作点的影响。代入方程中的 $V_{DD} = 15 V、R_D = 10 k、k_n = 0.25 mA/V^2$ 和 $V_t = 1.5 V$。并代替 $V_{GS}$。 有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606144139155.png" alt="image-20210606144139155" style="zoom:67%;" />

对应于

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606144205370.png" alt="image-20210606144205370" style="zoom:67%;" />

和

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606144304893.png" alt="image-20210606144304893" style="zoom:67%;" />

接下来我们继续放大器的小信号分析。 为此，我们用其小信号模型替换 MOSFET，以获得放大器的小信号等效电路，如图 7.15(c) 所示。 观察到我们已经用短路替换了耦合电容器。 直流电压电源 $V_{DD}$ 也被对地短路所取代。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606144437970.png" alt="image-20210606144437970" style="zoom:67%;" />

晶体管小信号参数 $g_m$ 和 $r_o$ 的值可以通过使用上面找到的直流偏置量来确定，如下所示

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606144813543.png" alt="image-20210606144813543" style="zoom:67%;" />

接下来我们使用图 7.15(c) 的等效电路来确定输入电阻 $R_{in} ≡v_i/i_i$ 和电压增益 $A_v =v_o/v_i$。 为此，我们通过将三个并联电阻 $r_o、R_D$ 和 $R_L$ 组合在一个电阻 $R_ L'$ 中来简化电路，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606145241863.png" alt="image-20210606145241863" style="zoom:67%;" />

如图 7.15(d) 所示。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606145317688.png" alt="image-20210606145317688" style="zoom:67%;" />

 对于后一个电路，我们可以写出两个方程

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606145344123.png" alt="image-20210606145344123" style="zoom:67%;" />

代入式中的 $i_i$。 得出电压增益 $A_v ≡ v_o/v_i = v_o/v_{gs}$ 的以下表达式：

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606145609668.png" alt="image-20210606145609668" style="zoom:67%;" />

由于 $R_G$ 非常大，所以$g_mR_G>> 1$ 和 $R_ L'/R_G<<1$ （读者可以很容易地验证这一点），增益表达式可以近似为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606145738187.png" alt="image-20210606145738187" style="zoom:67%;" />

代入数据可以获得

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606145822410.png" alt="image-20210606145822410" style="zoom:67%;" />

同理可以得到输入电阻的阻值

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606150216585.png" alt="image-20210606150216585" style="zoom:67%;" />

这是一个有趣的关系：输入电阻随着增益 $g_mR_ L'$ 的增加而减小。 现在可以确定 $R_{in}$ 的值； 这是

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606150320882.png" alt="image-20210606150320882" style="zoom:67%;" />



允许的最大输入信号 $\hat{v_i}$ 受到晶体管始终保持饱和的需要的约束

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606150454690.png" alt="image-20210606150454690" style="zoom:67%;" />

因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606150607642.png" alt="image-20210606150607642" style="zoom:67%;" />

由于 $V_{DS} = V_{GS}$，我们得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606150700658.png" alt="image-20210606150700658" style="zoom:67%;" />

这是一个适用于该电路的一般关系，与元件值无关。 请注意，它只是说明最大信号摆幅取决于偏置布置使 $V_D = V_G$ 的事实，因此，为了使 MOSFET 远离三极管区域，D 和 G 之间的信号被限制为等于 Vt。 对于我们的特殊设计

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606150820689.png" alt="image-20210606150820689" style="zoom:67%;" />

The T Equivalent-Circuit Model

通过简单的电路转换，可以为 MOSFET 开发替代等效电路模型。 这种被称为 T 模型的模型的发展如图 7.16 所示。 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606150942539.png" alt="image-20210606150942539" style="zoom:67%;" />

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606150956807.png" alt="image-20210606150956807" style="zoom:67%;" />

图 7.16(a) 显示了上面研究的没有 $r_o$ 的等效电路。 在图 7.16(b) 中，我们添加了与原始受控源串联的第二个 $g_mv_{gs}$ 电流源。 这种增加显然不会改变终端电流，因此是允许的。 新创建的电路节点，标记为 $X$，连接到图 7.16(c) 中的栅极端子 $G$。 观察到栅极电流没有改变——也就是说，它保持为零——因此这种连接不会改变端子特性。 我们现在注意到我们有一个受控电流源 $g_mv_{gs}$ 连接在其控制电压 $v_{gs}$ 上。

我们可以用电阻代替这个受控源，只要该电阻吸收与源相同的电流。  （参见附录 D 中的源吸收定理。）,我们不难从图中得到该节点两侧的电势差和电流大小，因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606151410276.png" alt="image-20210606151410276" style="zoom:67%;" />

图 7.16(d) 的模型表明，从源极看的栅极和源极之间的电阻为 $1/g_m$。 这一观察结果和 T 模型在许多应用中证明是有用的。 请注意，从栅极看，栅极和源极之间的电阻是无穷大的。

在开发 T 模型时，我们没有包括 $r_o$。 如果需要，这可以通过在图 7.16(d) 的电路中加入漏极和源极之间的电阻 $r_o$ 来完成，如图 7.17(a) 所示。  T 模型的另一种表示，其中电压控制电流源被电流控制电流源代替，如图 7.17（b）所示。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606151602127.png" alt="image-20210606151602127" style="zoom:67%;" />

最后，我们应该注意，为了将图 7.13(b) 的模型与等效的 T 模型区分开来，前者有时被称为混合 π 模型，这是双极晶体管文献的结转。 稍后将解释这个名称的由来。

##### 7.2.2 The BJT Case

我们现在考虑BJT的在小信号下的计算模型，如下

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601144354764.png" alt="image-20210601144354764" style="zoom:67%;" />

首先考虑其直流工作点，有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601144438166.png" alt="image-20210601144438166" style="zoom:67%;" />

其中，当BJT处于active mode 时，$V_{CE}$应当比其极限值稍小以保证输出信号有足够的摆幅，接入时频信号$v_{be}$后，EBJ正偏电压变为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601144742318.png" alt="image-20210601144742318" style="zoom:67%;" />

相应的，集电极电流变为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601144811484.png" alt="image-20210601144811484" style="zoom:67%;" />

我们假设$v_{be}<<V_T$,利用泰勒级数展开，我们得到一个线性近似

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601144912765.png" alt="image-20210601144912765" style="zoom:67%;" />

上式可以展开为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601145007471.png" alt="image-20210601145007471" style="zoom:67%;" />

因此我们可以将接入信号以后的集电极电流分为直流分量和信号分量，其信号分量为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601145108217.png" alt="image-20210601145108217" style="zoom:67%;" />

简写为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601145137724.png" alt="image-20210601145137724" style="zoom:67%;" />

$g_m$称为跨导

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601145205778.png" alt="image-20210601145205778" style="zoom:67%;" />

该值由上式可以看出与$I_C$成正比，因此为了确定$g_m$的值，我们需要一个可确定的集电极电流$I_C$，这也是确定工作点的意义所在。

严格意义上来说（不使用估算），$g_m$是$i_c-v_{BE}$图像在（偏置电压，偏置直流集电极电流）点处的斜率，即

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601145546511.png" alt="image-20210601145546511" style="zoom:67%;" />

根据曲线方程，结合上式，我们做图示如下

![image-20210601145645324](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601145645324.png)

对于该偏置条件下的基极电流，不难计算得出，有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601145759722.png" alt="image-20210601145759722" style="zoom:67%;" />

因此基极电流也可以被拆分成直流分量和信号分量两个电流

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601145930884.png" alt="image-20210601145930884" style="zoom:67%;" />

类似的，有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601145950537.png" alt="image-20210601145950537" style="zoom:67%;" />

因此我们定义小信号（微变信号）情况下，从基极看入的基极与发射极之间的等效电阻$r_{\pi}$为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601150044771.png" alt="image-20210601150044771" style="zoom:67%;" />

此外根据之前得到代数关系该式子也可以变形成

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601150123942.png" alt="image-20210601150123942" style="zoom:67%;" />

或

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601150137863.png" alt="image-20210601150137863" style="zoom:67%;" />

同理，对于发射极电流，有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601150212157.png" alt="image-20210601150212157" style="zoom:67%;" />

因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601150231488.png" alt="image-20210601150231488" style="zoom:67%;" />

从而我们定义在小信号（微变信号）情况下，从发射级看入的基极与发射极之间的等效电阻$r_e$为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601150810305.png" alt="image-20210601150810305" style="zoom:67%;" />

同理，该式可以写作

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601150839307.png" alt="image-20210601150839307" style="zoom:67%;" />

或

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601150851794.png" alt="image-20210601150851794" style="zoom:67%;" />

此外，有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601150909196.png" alt="image-20210601150909196" style="zoom:67%;" />

因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601150928272.png" alt="image-20210601150928272" style="zoom:67%;" />

从而

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601150942224.png" alt="image-20210601150942224" style="zoom:67%;" />

同时我们还可以得出电压增益大小

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601151136264.png" alt="image-20210601151136264" style="zoom:67%;" />

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601151217899.png" alt="image-20210601151217899" style="zoom:67%;" />

因此，放大器的电压增益为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601151324867.png" alt="image-20210601151324867" style="zoom:67%;" />

接下来为了模型的简单起见，我们暂时忽略直流偏置电压，对于之前计算出的两个不同方向的等效电阻，我们分别建立两类等效模型：Hybrid-$\pi$模型和T模型

The Hybrid-π Model：

该模型将BJT表示为受控电流源，我们在该模型中给出的电阻是$r_{\pi}$

![image-20210601151750994](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601151750994.png)

有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601151913819.png" alt="image-20210601151913819" style="zoom:67%;" />

如果考虑厄利效应，那么模型修正为

![image-20210601152037895](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601152037895.png)

需要注意的是，图 7.25 的小信号等效电路模拟了 BJT 在给定偏置点的操作。 模型参数 $g_m$、$r_π$ 和 $r_o$ 取决于直流偏置电流 $I_C$ 的值这一事实应该是显而易见的，如图 7.25 所示。 也就是说，这些等效电路模拟了 BJT 在偏置点附近的增量操作。但同时，包含$r_o$会使电压增益变为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601152402586.png" alt="image-20210601152402586" style="zoom:67%;" />

The T Model

除了Hybrid-π Model外，还有一类模型，在这类模型中我们给出了$r_e$，如下图

![image-20210601152615357](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601152615357.png)

一个使用T-model的例子

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601153335934.png" alt="image-20210601153335934" style="zoom:67%;" />

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601153346166.png" alt="image-20210601153346166" style="zoom:50%;" />

##### 7.2.3 Summary Tables

![image-20210601153530147](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601153530147.png)

![image-20210601153620479](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601153620479.png)

### 7.3 Basic Configurations

在第 7.1 节中，我们研究了 MOSFET 和 BJT 作为放大器的应用的基本原理。 在那里，我们发现通过在晶体管工作的有效区域的适当点对晶体管施加直流偏置，并保持输入信号（$v_{gs}$ 或 $v_{be}$）较小，可以获得几乎线性的放大。然后，在第 7.2 节中，我们开发了电路模型 代表两种晶体管类型（表 7.2 和 7.3）中每一种的小信号操作，从而为晶体管放大器的分析提供了系统程序（表 7.1）。

我们现在准备考虑 MOSFET 和 BJT 放大器的各种可能配置，我们将在本节中进行。 为了将注意力集中在各种配置的显著特征上，我们将以最简单或“精简”的版本呈现它们。 因此，我们不会展示直流偏置安排，将偏置设计的研究留到下一节。 最后，在第 7.5 节中，我们将把所有内容放在一起并介绍实用的分立电路放大器，即可以使用分立元件构建的放大器电路。 集成电路放大器的研究从第 8 章开始。

##### 7.3.1 The Three Basic Configurations

连接MOSFET或BJT作为放大器有三种基本配置。这些配置中的每一个都是通过将其中一个设备端子连接到接地来获得的，从而创建一个双端口网络，其中接地端子与输入和输出端口共用。图7.33（a–c）显示了MOSFET的配置，图7.33（d–f）显示了BJT的配置。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606152347187.png" alt="image-20210606152347187" style="zoom:67%;" />

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606152409459.png" alt="image-20210606152409459" style="zoom:67%;" />

在图7.33（a）的电路中，源端接地，输入电压信号$v_i$施加在栅极和接地之间，输出电压信号$v_o$在漏极和接地之间，穿过电阻$R_D$。因此，这种配置称为接地源或共源（CS）放大器。它是目前最流行的MOS放大器配置，我们在第7.1节和第7.2节中使用它来研究MOS放大器的操作。一组平行的注释适用于BJT对应物，图7.33（d）中的接地发射极或共发射极（CE）放大器。

共栅（CG）或接地栅放大器如图7.33（b）所示，其BJT对应物，共基极（CB）或接地基极放大器如图7.33（e）所示。在这里，栅极（基极）接地，输入信号$v_i$施加到源极（发射极），输出信号$v_o$在穿过电阻$R_D$（$R_C$）的漏极（集电极）处获取。我们在例7.4中遇到了一个CG放大器，在例7.7中遇到了一个CB放大器。

最后，图7.33（c）显示了公共漏极（CD）或接地漏极放大器，图7.31（f）显示了其BJT对应物，公共集电极（CC）或接地集电极放大器。在这里，漏极（集电极）端子接地，输入信号$v_i$施加在栅极（基极）和接地之间，输出电压$v_o$在源极（发射极）和接地之间通过电阻$R_L$。由于很快就会变得明显的原因，这对配置通常被称为源极跟随器和发射极跟随器。

我们对MOSFET和BJT的三种基本放大器结构的研究将揭示，每种结构都有明显不同的特性，因此具有不同的应用领域。同样，将显示，尽管每对配置（例如，CS和CE）具有许多共同的属性，但是重要的差异仍然存在

我们的下一步是用适当的等效电路模型（见表7.2和7.3）替换图7.33中六个电路中的每个电路中的晶体管，并分析得到的电路，以确定特定放大器配置的重要特性参数。为了简化问题，我们在初步分析中不包括$r_o$。在本节的最后，我们将提供一些关于何时将$r_o$纳入分析的意见，以及其影响的预期程度。

##### 7.3.2 Characterizing Amplifiers

在我们开始研究不同的晶体管放大器配置之前，我们先考虑如何表征作为电路构建块的放大器的性能。 第 1.5 节介绍了该主题。

图 7.34(a) 显示了一个放大器，其信号源具有开路电压 $v_{sig}$ 和内阻 $R_{sig}$。 这些可以是实际信号源的参数，或者在级联放大器中，是所研究的放大器之前的另一个放大器级的输出电路的 Th´evenin 等效值。 放大器显示为负载电阻 $R_L$ 连接到输出端子。 这里，RL 可以是实际负载电阻或级联放大器中后续放大器级的输入电阻

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601190931978.png" alt="image-20210601190931978" style="zoom:67%;" />

图7.34（b）展示了当放大器被其等效电路替代以后的电路图，其中输入电阻$R_{in}$代表放大器之于信号源可被视作的等效电阻

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601191145570.png" alt="image-20210601191145570" style="zoom:67%;" />

定义为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601191207668.png" alt="image-20210601191207668" style="zoom:67%;" />

将信号源内阻$R_{sig}$也考虑进去，那么输入电压$v_i$的大小为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601191316608.png" alt="image-20210601191316608" style="zoom:67%;" />

而放大器的放大倍数，正如我们此前所提到的，是在其负载开路的情况下测得的（开路电压增益）

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601191412264.png" alt="image-20210601191412264" style="zoom:67%;" />

同理我们也可以测出放大器的输出电阻

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601191447887.png" alt="image-20210601191447887" style="zoom:67%;" />

因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601191540126.png" alt="image-20210601191540126" style="zoom:67%;" />

从而放大器的实际放大倍数为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601191648835.png" alt="image-20210601191648835" style="zoom:67%;" />

从信号源到负载的整体放大倍数定义为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601191739614.png" alt="image-20210601191739614" style="zoom:67%;" />

不难得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601191808605.png" alt="image-20210601191808605" style="zoom:67%;" />

##### 7.3.3 The Common-Source (CS) and Common-Emitter (CE) Amplifiers

在三种BJT配置中，最为广泛使用的是共射接法，下面我们简单介绍一下共射放大器的基本参数。

Characteristic Parameters of the CS Amplifie

图7.35（a）所示为共源放大器（省略偏置布置），该放大器由具有源极电阻$R_{sig}$的信号源$v_{sig}$馈电。我们希望分析这个电路来确定$R_{in}、A_{vo}$和$R_o$。为此，我们假设RD是放大器的一部分；因此，如果负载电阻$R_L$连接到放大器输出，则$R_L$与$R_D$平行出现。在这种情况下，我们还希望确定$A_v$和$G_v$。
用hybrid-$\pi$模型代替MOSFET（没有$r_o$），我们得到图7.35（b）中的CS放大器等效电路

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606153027349.png" alt="image-20210606153027349" style="zoom:67%;" />

对于该等效电路，我们可以跟踪信号从输入到输出，通过检查，我们可以得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606153100569.png" alt="image-20210606153100569" style="zoom:67%;" />

从而

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606153152330.png" alt="image-20210606153152330" style="zoom:67%;" />

对于负载电阻和漏极电阻串联和并联的情况，我们可以分别得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606153415805.png" alt="image-20210606153415805" style="zoom:67%;" />

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606153429956.png" alt="image-20210606153429956" style="zoom:67%;" />

Characteristic Parameters of the CE Amplifier：

下图为基本的共射放大电路（注：我们在其中忽略了偏置电阻和偏置电源，仅保留了最重要的部分）

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601192335425.png" alt="image-20210601192335425" style="zoom:67%;" />

以npn晶体管为例，由于其CBJ反偏，因此基极到集电极的电路无法导通，换言之，三极管的内部路径仅有基极到发射极一条，因此其输入电阻不难得到，即为从基极看向发射极的等效电阻$r_{\pi}$，其等效电路如下图所示

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601192550447.png" alt="image-20210601192550447" style="zoom:67%;" />

因此有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601193830374.png" alt="image-20210601193830374" style="zoom:67%;" />

从而

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601193853000.png" alt="image-20210601193853000" style="zoom: 67%;" />

由于负载电阻与集电极电阻并联，因此有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601194003681.png" alt="image-20210601194003681" style="zoom:67%;" />

从而整体电压增益为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601194028554.png" alt="image-20210601194028554" style="zoom:67%;" />

Final Remarks

1.CS和CE放大器是所有晶体管放大器配置中最有用的。它们表现出中等至高的输入电阻（CS 无穷大）、中等至高的输出电阻和合理的高电压增益。

2.CE 放大器的输入电阻 $R_{in} = r_π = β/g_m$，与直流偏置电流 $I_C$ 成反比。 增加 $R_{in}$ 的目的是降低偏置电流 $I_C$； 然而，这也会降低 $g_m$，从而降低电压增益。 这是一个重要的设计权衡。 如果需要更高的输入电阻，则可以应用对 CE 配置的修改（将在第 7.3.4 节中讨论），或者可以在信号源和 CE 放大器之间插入一个射极跟随器级（参见第 7.3.4 节）  。

3.分别降低 $R_D$ 或 $R_C$ 以降低 CS 或 CE 放大器的输出电阻通常不是可行的建议，因为电压增益也会降低。 或者，如果需要非常低的输出电阻（在欧姆或几十欧姆范围内），可以在 CS 或 CE 放大器的输出与负载电阻之间使用源极跟随器或射极跟随器级（ 见第 7.3.6 节）。

4.虽然 CS 和 CE 配置是晶体管放大器的主力，但两者都受到高频响应的限制。 如第 10 章所示，将 CS (CE) 放大器与 CG (CB) 放大器结合可以显著扩展带宽。  CG 和 CB 放大器在第 7.3.5 节中研究。

##### 7.3.4 The Common-Source (Common-Emitter) Amplifier with a Source (Emitter) Resistance

通常来讲，在发射极有电阻串联的情况下，我们一般采用T模型来表征电路，比如对于如下图的电路

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601194941812.png" alt="image-20210601194941812" style="zoom:67%;" />

我们通常采用下面的等效电路图

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601195014033.png" alt="image-20210601195014033" style="zoom:67%;" />

对于输入电阻，我们仍然将其定义为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601195123654.png" alt="image-20210601195123654" style="zoom:67%;" />

不难得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601195138762.png" alt="image-20210601195138762" style="zoom:67%;" />

而发射极电流为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601195207041.png" alt="image-20210601195207041" style="zoom:67%;" />

因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601195221131.png" alt="image-20210601195221131" style="zoom:67%;" />

这是一个非常重要的结果。 它指出，从基极看的输入电阻是发射极总电阻的 $(β +1)$ 倍，这被称为电阻反射规则。 因子 $(β +1)$ 的出现是因为基极电流是发射极电流的 $1/(β +1)$ 倍。  $R_{in}$ 在方程中的表达式。上式清楚地表明，在发射极中包含电阻 $R_e$ 可以显著增加 $R_{in}$，这是一个非常理想的结果。 事实上，$R_{in}$ 的值是按比例增加的

假如我们对不加发射极电阻的电路的输出电阻进行前后对比，我们可以得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601195320131.png" alt="image-20210601195320131" style="zoom:67%;" />

从而电路的设计者可以依靠$R_e$的值来控制输入电阻的大小

其开路电压增益$A_{v0}$可以计算得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601195759968.png" alt="image-20210601195759968" style="zoom:67%;" />

因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601195817803.png" alt="image-20210601195817803" style="zoom:67%;" />

上面的式子可以简化为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601195853518.png" alt="image-20210601195853518" style="zoom:67%;" />

因此，包括 $R_e$ 会使电压增益降低因子 $(1+g_mR_e)$，这与 $R_{in}$ 增加的因子相同。 这指出了增益和输入电阻之间的一个有趣的权衡，设计人员可以通过为 $R_e$ 选择适当的值来进行权衡。输出电阻 $R_o$ 可以从图 7.38(b) 的电路中通过检查得到 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601200022685.png" alt="image-20210601200022685" style="zoom:67%;" />

因此放大器两端的电压增益为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601200054843.png" alt="image-20210601200054843" style="zoom:67%;" />

依据之前的计算经验

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601200129355.png" alt="image-20210601200129355" style="zoom:67%;" />

因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601200143345.png" alt="image-20210601200143345" style="zoom:67%;" />

虽然现在放大器的整体增益大小比在装有射级电阻以前小，但对应的，其对于$β$的变化更加不敏感了

在发射极中包含电阻 $R_e$ 的另一个重要结果是，它使放大器能够处理更大的输入信号，而不会产生非线性失真。这是因为只有一部分基极输入信号 $v_i$ 出现在基极和发射极之间。 具体来说，从图 7.38(b) 的电路中，我们看到 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601200456392.png" alt="image-20210601200456392" style="zoom:67%;" />

也就是说实际进入放大器的信号电压变小了（有一部分被射级电阻分走），因此输入信号的上限提高了$(1+g_mR_e)$倍

总而言之，在 CE 放大器的发射极中包含一个电阻 Re 会导致以下特性

1.输入电阻 $R_{in}$ 增加了因子 $(1+g_mR_e)$。

2.从基极到集电极的电压增益 $A_v$ 减少了因子 $(1+g_mR_e)$。

3.对于相同的非线性失真，输入信号$v_i$可以增加因子$(1+g_mR_e)$。

4.总电压增益较少依赖于 $β$ 的值。

5.高频响应得到显著改善（我们将在第 10 章中看到）。

除了增益降低之外，这些特性代表了性能的提高。实际上，增益的减少是为获得其他性能改进而付出的代价。 在许多情况下，这是一笔划算的交易。 这是使用负反馈的基本理念。 电阻 $R_e$ 在放大器电路中引入负反馈可以通过使用类似于我们在上面用于 MOSFET 情况的程序来验证。 在第11章正式研究负反馈，我们会发现反复出现的因子$(1+g_mR_e)$就是$R_e$引入的“负反馈量”。 最后，我们注意到 $R_e$ 的负反馈作用，并称其为射级衰减电阻

##### 7.3.5 The Common-Gate (CG) and the Common-Base (CB) Amplifiers

图 7.39(a) 显示了一个省略偏置电路的共栅放大器。 放大器由一个以 $v_{sig}$ 和 $R_{sig}$ 为特征的信号源馈送。 由于 $R_{sig}$ 与源极串联出现，因此用 T 模型表示晶体管比用 π 模型更方便。 这样做，我们得到了图 7.39(b) 所示的放大器等效电路。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606153708119.png" alt="image-20210606153708119" style="zoom:67%;" />

通过检查图 7.39(b) 的等效电路，我们看到输入电阻

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606153720845.png" alt="image-20210606153720845" style="zoom:67%;" />

这应该在意料之中，因为我们正在查看源极并且栅极接地。通常 $1/g_m$ 是几百欧姆； 因此CG放大器具有低输入电阻。

为了确定电压增益$A_{vo}$ ，我们在漏极节点写出节点方程

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606154003802.png" alt="image-20210606154003802" style="zoom:67%;" />

并将其中的$i$代入为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606154041493.png" alt="image-20210606154041493" style="zoom:67%;" />

因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606154112988.png" alt="image-20210606154112988" style="zoom:67%;" />

除了正号外，它与 CS 放大器的 $A_{v o}$ 表达式相同。CG 电路的输出电阻可以通过检查图 7.39(b) 中的电路得到：

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606154205368.png" alt="image-20210606154205368" style="zoom:67%;" />

这与 CS 放大器的情况相同。

尽管 CG 放大器本身的增益与 CS 放大器的增益幅度相同，但就整体电压增益而言，情况通常并非如此。  CG放大器的低输入电阻会导致输入信号严重衰减。具体来说

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606154244430.png" alt="image-20210606154244430" style="zoom:67%;" />

从中我们看到，除了$R_{sig}$在$1/g_m$左右的情况外，信号传输因子$v_i/v_{sig}$可以非常小，整体电压增益$G_v$也可以相应的小。 具体来说，在输出端连接一个电阻 $R_L$

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606154406082.png" alt="image-20210606154406082" style="zoom:67%;" />

请注意，总电压增益只是漏极电路中的总电阻与源极电路中的总电阻之比。 如果 $R_{sig}$ 与 $R_D$ 和 $R_L$ 的数量级相同，则 $G_v$ 将非常小。

由于其低输入电阻，CG 放大器本身的应用非常有限。其中一种应用是放大来自电阻相对较低的信号源的高频信号。 其中包括电缆，通常需要放大器的输入电阻与电缆的特性电阻相匹配。 如第 10 章所示，CG 放大器具有出色的高频响应。 因此，它可以以一种非常有益的方式与 CS 放大器结合，充分利用两种配置中每一种的最佳特性。 此类非常重要的电路将在第 8 章中研究。

下图显示共基配置的BJT电路及其等效T模型

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602102905586.png" alt="image-20210602102905586" style="zoom:67%;" />

我们不难计算出该电路的各项参数

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602103018979.png" alt="image-20210602103018979" style="zoom:67%;" />

以及其总体电压增益

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602103119353.png" alt="image-20210602103119353" style="zoom:67%;" />

由于$α\simeq 1$，所以总增益可以近似看作集电极总电阻和发射级总电阻之比，并且我们注意到，总增益大小几乎与BJT的$β$值无关，电路的输入电阻也很低（$1/g_m$)，以及类似于共射放大器的放大倍数和较高的输出电阻。共基配置的放大器由于其较低的输入电阻，因而其作为电压放大器的价值较低，不过由于其有出色的高频响应，因此被广泛应用于高频放大器中

##### 7.3.6 The Source and Emitter Followers

The Need for Voltage Buffers：

正如我们之前所提到的级联放大器的例子一样，通常一个放大器不能完成所有任务，一般而言，我们会把一个放大电路分成输入，放大和输出三级，输入端需要具有较大的输入电阻以保证输入信号能够大部分进入放大电路，并且放大倍数尽可能接近1，而射级跟随器恰好能满足上述特性

Characteristic Parameters of the Source Follower

图 7.42(a) 显示了一个省略偏置电路的源极跟随器。 源极跟随器由信号发生器 ($v_{sig}, R_{sig}$) 馈送，并具有连接在源极端子和地之间的负载电阻 $R_L$。

我们假设 $R_L$ 包括实际负载和可能存在于源极端子和地之间的任何其他电阻（例如，用于偏置目的）。 通常，实际负载电阻的值将远低于此类其他电阻，因此将占主导地位。

由于 MOSFET 在其源极端子上连接了一个电阻 $R_L$，因此使用 T 模型最为方便，如图 7.40(b) 所示。 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606154930910.png" alt="image-20210606154930910" style="zoom:67%;" />

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606154949153.png" alt="image-20210606154949153" style="zoom:67%;" />

我们可以通过检查从后面的电路写出

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606155107407.png" alt="image-20210606155107407" style="zoom:67%;" />

并由源极处的分压电路，我们可以得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606155207927.png" alt="image-20210606155207927" style="zoom:67%;" />

而假如我们假定负载电阻大小为无穷大（开路），有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606155301331.png" alt="image-20210606155301331" style="zoom:67%;" />

而从输出端往输入端看，我们也可以轻易得到输出电阻的大小

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606155342835.png" alt="image-20210606155342835" style="zoom:67%;" />

由于输入电阻为无穷大（信号电压不会有损失）

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606155421534.png" alt="image-20210606155421534" style="zoom:67%;" />

因此 $G_v$ 将低于 1。 然而，因为 $1/g_m$ 通常很低，所以电压增益可以接近于 1。 等式中的单位开路电压增益。  (7.126) 表示源极端子的电压将跟随输入端的电压，因此得名源极跟随器。

总之，源极跟随器具有非常高的输入电阻（理想情况下为无穷大）、相对较低的输出电阻 $(1/g_m)$ 和接近1的开路电压增益（理想情况下为1）。 因此，源极跟随器非常适合实现单位增益电压缓冲器。 源极跟随器也用作多级放大器中的输出（即最后）级，其功能是为整个放大器配备低输出电阻，从而使其能够提供相对较大的负载电流而不会损失增益（即 ，输出信号电平几乎没有降低）。 第 12 章研究了输出级的设计

Characteristic Parameters of the Emitter Follower

下图是射级跟随器的基本电路图及其等效模型（采用了T模型）

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602105544550.png" alt="image-20210602105544550" style="zoom:67%;" />

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602105619605.png" alt="image-20210602105619605" style="zoom:67%;" />



其输入电阻定义为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602111352141.png" alt="image-20210602111352141" style="zoom:67%;" />

而其基极电流可以表示为
$$
i_b=i_e/(\beta+1)
$$
不难算出其射级电流大小为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602111434748.png" alt="image-20210602111434748" style="zoom: 67%;" />

因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602111555884.png" alt="image-20210602111555884" style="zoom:67%;" />

而其电压增益大小为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602111704118.png" alt="image-20210602111704118" style="zoom:67%;" />

当负载电阻趋向于无穷大（开路时），我们得到其开路电压增益

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602111741903.png" alt="image-20210602111741903" style="zoom:67%;" />

并且不难发现其输出电阻为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602111855507.png" alt="image-20210602111855507" style="zoom:67%;" />

因此我们得到放大器的总体电压增益为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602111954880.png" alt="image-20210602111954880" style="zoom:67%;" />

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602112004738.png" alt="image-20210602112004738" style="zoom:67%;" />

该等式表明，如果 $(β +1)R_L$ 大于或与 $R_{sig}$ 值相当，则总体增益虽然低于 1，但可以接近于 1。 这再次证实了射极跟随器将大部分 $v_{sig}$ 传递给低值负载电阻 $R_L$ 的作用，即使 $R_{sig}$ 可能远大于 $R_L$。 关键是$R_L$在“呈现给源”之前乘以$（β+1）$。 图 7.44(a) 显示了通过简单地将 $r_e$ 和 $R_L$ 反射到基极侧获得的射极跟随器的等效电路。 总电压增益 $G_v ≡v_o/v_{sig}$ 可以通过使用分压器规则直接且非常简单地从该电路确定。结果是方程中已经给出的 $G_v$ 表达式。  (7.133)。

将图 7.44(a) 电路中的所有电阻除以 $β +1$ 不会改变电压比 $v_o/v_{sig}$。 因此，我们获得了另一个等效电路，如图 7.44(b) 所示，可用于确定射极跟随器的 $G_v ≡ v_o/v_{sig}$。 看一眼这个电路就会发现它只是将 $v_{sig}$ 和 $R_{sig}$ 从基极侧反射到发射极侧得到的等效电路。 在这个反射中，$v_{sig}$ 没有变化，但 $R_{sig}$ 除以 $β +1$。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602112400819.png" alt="image-20210602112400819" style="zoom:67%;" />

因此，无论我们是将电阻反射到基极得到7.44（a）还是反射到射级得到7.44（b），我们最终都能得到以下的表达式

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602113101754.png" alt="image-20210602113101754" style="zoom:67%;" />

观察到这个表达式除了分子和分母都除以 $β +1$以外，都与此前的表达式相同。

这个等式有一个有趣的解释：射极跟随器在“将 $R_{sig}$ 呈现给负载电阻 $R_L$”之前将 $R_{sig}$ 减小了因子 $(β+1)$,使其具有相同缓冲效果的阻抗变换。在这一点上，重要的是要注意，虽然射极跟随器不提供电压增益，但它的电流增益为 $β +1$。

Thévenin Representation of the Emitter-Follower Output

通过上面的两幅等效电路图，我们可以得到其戴维南等效电路，这也是其更一般的表示方法，如下图所示

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602113613105.png" alt="image-20210602113613105" style="zoom:67%;" />



这里 $G_{v o}$ 是总开路电压增益，可以通过在图 7.44(b) 的电路中设置 $R_L = ∞$ 来获得，如图 7.45(b) 所示。 结果是$G_{v o} =1$。 输出电阻 $R_{out}$ 与 $R_o$ 不同。 为了确定 $R_{out}$，我们将 $v_{sig}$ 设置为零（而不是将 $v_i$ 设置为零）。 同样，我们可以使用图 7.44(b) 中的等效电路来做到这一点，如图 7.45(c) 所示。 我们看到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602113934833.png" alt="image-20210602113934833" style="zoom:67%;" />

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602113954371.png" alt="image-20210602113954371" style="zoom:67%;" />

最后，我们在图 7.45(d) 中展示了射极跟随器电路及其 $R_{in}$ 和 $R_{out}$。观察到 $R_{in}$ 是通过将 $r_e$ 和 $R_L$ 反射到基侧（通过将它们的值乘以 $β+1$）来确定的。 要确定 $R_{out}$ ，请抓住发射器并在 $v_{sig}$ =0 时向后走（或只是看！）。 您将看到 $r_e$ 与 $R_{sig}$ 串联，因为它在基数中必须除以 $(β +1)$(这个“串联”电路的两部分电流不同）。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602114436821.png" alt="image-20210602114436821" style="zoom:67%;" />

##### 7.3.7 Summary Tables and Comparisons

为了便于参考和进行比较，我们在表 7.4 和 7.5 中分别列出了确定 MOSFET 和 BJT 放大器各种配置的特征参数的公式。 除了在本节中对各种配置的特征和适用领域所做的评论之外，我们还提出以下结论：

1.MOS 放大器提供更高的、理想情况下无限的输入电阻（当然，CG 配置除外）。 与 BJT 放大器相比，这是一个明显的优势。

2.BJT 表现出比 MOSFET 更高的 $g_m$ 值，从而导致更高的增益。

3.对于分立电路放大器——即由印刷电路板 (PCB) 上的分立元件组装而成的放大器——BJT 仍然是首选器件。这是因为分立 BJT 在物理上比分立 MOSFET 更容易处理，更重要的是，商业上可以买到种类繁多的分立 BJT。 本章的其余部分涉及分立电路放大器。

4.集成电路 (IC) 放大器主要使用 MOSFET，尽管 BJT 用于某些特定领域。 第 8 章到第 13 章主要涉及 IC 放大器。

5.CS 和 CE 配置最适合实现放大器所需的大部分增益。 根据所需增益的大小，可以使用单级或两级或三级级联。

6.在 CS 放大器的源极中包含一个电阻 $R_s$（在 CE 放大器的发射极中包含一个电阻 Re）以降低增益为代价提供了许多性能改进。

![image-20210602115313395](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602115313395.png)

7.CG 和 CB 放大器的低输入电阻使其仅在特定应用中有用。 正如我们将在第 10 章中看到的，这两种配置表现出比 CS 和 CE 放大器提供的更好的高频响应。 这使得它们可用作高频放大器，尤其是与 CS 或 CE 电路结合使用时。 我们将在第 8 章研究这样一种组合。

8.源极跟随器（发射极跟随器）用作将高阻源连接到低阻负载的电压缓冲器，以及多级放大器中的输出级，其目的是为放大器配备低阻输出电阻。

##### 7.3.8 When and How to Include the Output Resistance $r_o$

到目前为止，我们一直忽略 MOSFET 和 BJT 的输出电阻 ro。 我们这样做有两个原因：

1.为简单起见，将注意力集中在每个基本配置的重要特征上.

2.因为本章的主要兴趣是分立电路设计，其中电路电阻（例如$R_C$、$R_D$ 和 $R_L$) 通常比 ro 小得多。

然而，在某些情况下，将 $r_o$ 包括在分析中相对容易。 具体来说：

1.在CS和CE放大器中，可以看出晶体管的$r_o$分别与$R_D$和$R_C$并联出现，可以简单地将$R_D$替换为($R_D|| r_o$)和 RC 与 ($R_C|| r_o$)。效果将是增益幅度的降低，可能降低 5% 到 10%。

2.在源极跟随器和射极跟随器中，可以看出晶体管$r_o$与$R_L$并联出现，可以通过将相应公式中的$R_L$替换为$(R_L|| r_o)$来考虑。 因此，这里也考虑到 $r_o$ 的影响是增益的小幅降低。 然而，更重要的是，考虑 $r_o$ 会降低开路电压增益 $A_{v o}$ 从 1 到 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602115910805.png" alt="image-20210602115910805" style="zoom:67%;" />

在某些配置中，将 ro 考虑在内会使分析变得相当复杂。 这些是带有源（发射极）电阻的 CS (CE) 放大器和 CG (CB) 放大器。 幸运的是，对于这些配置的离散实现，忽略 ro 的影响通常很小（可以通过计算机模拟来验证）。

最后，非常重要的一点：在IC放大器的分析和设计中，必须始终考虑$r_o$。 这是因为，正如将在下一章中看到的，所有电路电阻都与 $r_o$ 具有相同的数量级； 因此，忽略 $r_o$ 可能会导致完全错误的结果

### 7.4 Biasing

如第 7.1 节所述，晶体管放大器设计的一个重要步骤是为晶体管建立适当的直流工作点。 这是称为偏置或偏置设计的步骤。 在本节中，我们将研究分立电路放大器中常用的偏置方法。 集成电路放大器的偏置将在第 8 章中研究。

偏置设计旨在在漏极（集电极）中建立一个直流电流，该电流是可预测的，并且对温度变化和相同类型器件之间参数值的巨大变化不敏感。 例如，属于同一制造商零件编号的离散 BJT 可以显示 β 值，范围从 50 到 150。不过一般来讲，我们也允许其集电极直流偏置电流有10%左右的差异。关于直流漏极电流对分立 MOSFET 的 $V_t$ 中遇到的广泛变化的期望不敏感，可以做出类似的陈述。

偏置设计中的第二个考虑是将直流工作点定位在晶体管的有源工作区，以便获得高电压增益，同时允许所需的输出信号摆幅，而无需晶体管随时离开有源区（以避免非线性失真）。 我们在 7.1.7 节讨论了这一点。

尽管我们将分别考虑 MOSFET 和 BJT 放大器的偏置，但结果电路非常相似。 此外，还可以看到良好的偏置设计包含反馈机制，该机制可以使直流偏置点尽可能保持恒定。

为了使事情简单化，从而将注意力集中在重大问题上，我们将忽略厄利效应； 即假设 $λ = 0$ 或 $V_A =∞$。 这在分立电路的初始设计中当然是允许的。 当然，稍后可以借助诸如 SPICE 之类的电路仿真程序对设计进行微调。

##### 7.4.1 The MOSFET Case

Biasing by Fixing $V_{GS}$

偏置 MOSFET 的最直接方法是将其栅极至源极电压 $V_{GS}$ 固定为所需的值，以提供所需的 $I_D$。 该电压值可以通过使用适当的分压电路从电源电压 $V_{DD}$ 得出，如图 7.47(a) 所示。 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606191104857.png" alt="image-20210606191104857" style="zoom:67%;" />

或者，它可以来自系统中可能可用的另一个合适的参考电压。 无论电压 $V_{GS}$ 是如何产生的，这都不是偏置 MOSFET 的好方法。 要理解此声明的原因，请回想一下

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606191132880.png" alt="image-20210606191132880" style="zoom:67%;" />

并注意阈值电压 $V_t$ 、氧化物电容 $C_{ox}$ 和（在较小程度上）晶体管纵横比 $W/$L 的值在假定相同尺寸和类型的器件之间变化很大。 对于分立设备而言，情况确实如此，其中这些参数值在同一制造商部件号的设备之间出现很大差异。

在集成电路中，特别是在不同晶圆上制造的器件之间，当然在不同批次的晶圆之间，这种差异也可能很大。 此外，$V_t$ 和 $μ_n$ 都取决于温度，因此如果我们固定 $V_{GS}$ 的值，漏极电流 $I_D$ 变得非常依赖于温度。

为了强调通过固定 $V_{GS}$ 进行偏置不是一种好的技术，我们在图 7.47 中显示了两条 $i_D-v_{GS}$ 特性曲线，它们代表了一批相同类型的 MOSFET 中的极值。 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606191527670.png" alt="image-20210606191527670" style="zoom:67%;" />

Biasing by Fixing $V_G$ and Connecting a Resistance in the Source

用于分立 MOSFET 电路的出色偏置技术包括在栅极固定直流电压 $V_G$ 并在源极引线中连接一个电阻，如图 7.48(a) 所示。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606191641072.png" alt="image-20210606191641072" style="zoom:67%;" />

对于这个电路，我们可以写出

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606191733762.png" alt="image-20210606191733762" style="zoom:67%;" />

现在，如果 $V_G$ 远大于 $V_{GS}$，$I_D$ 将主要由 $V_G$ 和 $R_S$ 的值决定。然而，即使 $V_G$ 不比 $V_{GS}$ 大多少，电阻器 $R_S$ 也会提供负反馈，其作用是稳定偏置电流 $I_D$ 的值。 要了解这是如何发生的，请考虑当 $I_D$ 因任何原因增加时会发生什么。 方程（7.137）表明由于 VG 是常数，$V_{GS}$ 将不得不减小。 这反过来又会导致 $I_D$ 减小，这种变化与最初假设的变化相反。 因此，$R_S$ 的作用是使 $I_D$ 尽可能保持恒定。图 7.48(b) 提供了这种偏置方案有效性的图形说明。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606192037066.png" alt="image-20210606192037066" style="zoom:67%;" />

在这里，我们也展示了代表一批 MOSFET 极端情况的两个器件的 $i_D-v_{GS}$ 特性。 叠加在器件特性上的是一条直线，表示偏置电路施加的约束——即方程。  (7.137)。 这条直线与 $i_D-v_{GS}$ 特性曲线的交点提供了偏置点的坐标（$I_D$ 和 $V_{GS}$）。 观察到与固定 $V_{GS}$ 的情况相比，这里在 $I_D$ 中获得的可变性要小得多。 另外，请注意，随着 $V_G$ 和 $R_S$ 变大，可变性会降低（因此提供的偏置线不太陡峭）。

图 7.48(c) 和 (e) 显示了这种偏置方案的两种可能的实际分立电路实现方式。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606192447285.png" alt="image-20210606192447285" style="zoom:80%;" />

在左图的电路中，我们在左侧通过一个分压电路来使栅极电压保持恒定。由于$I_G=0，R_{G1}$和$R_{G2}$的可选范围很大（在兆欧范围内），允许MOSFET对可能通过耦合电容连接到栅极的信号源呈现较大的输入电阻，如图 7.48(d)。

此处电容器 $C_{C1}$ 用于阻止直流电流分量进入电路，因此允许我们将信号 $v_{sig}$ 耦合到放大器输入，而不会干扰 MOSFET 直流偏置点。  $C_{C1}$ 的值应选择得足够大，以便在所有感兴趣的信号频率下近似短路。 我们将在第 7.5 节中研究仅适用于分立电路设计的电容耦合 MOSFET 放大器。 最后，请注意，在图 7.48(c) 的电路中，电阻 $R_D$ 选择得尽可能大以获得高增益，但又足够小以允许漏极处的所需信号摆动，同时完全保持 MOSFET 处于饱和状态 。

当有两个电源可用时，通常情况下，可以使用图 7.48(e) 中稍微简单的偏置布置。 该电路(7.137)是等式的实现。 $V_G$ 被 $V_{SS}$ 取代。 $R_G$ 在栅极建立直流接地，并为信号源提供高输入电阻，该信号源可通过耦合电容器连接到栅极

Biasing Using a Drain-to-Gate Feedback Resistor

图 7.50 显示了使用连接在漏极和栅极之间的反馈电阻器的简单有效的分立电路偏置装置。 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606193227951.png" alt="image-20210606193227951" style="zoom:67%;" />

这里的大反馈电阻 $R_G$（通常在兆欧范围内）迫使栅极的直流电压等于漏极的直流电压（因为 $I_G$ = 0）。 这样我们就可以写

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606193246745.png" alt="image-20210606193246745" style="zoom:67%;" />

可以改写为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606193313274.png" alt="image-20210606193313274" style="zoom:67%;" />

在形式上与等式(7.137)相同。它描述了上面讨论的偏置方案的电路工作方式[图 7.48(a)]。 因此，这里也是，如果 $I_D$ 由于某种原因发生变化，比如增加，那么方程。  (7.140) 表明 $V_{GS}$ 必须减少。  $V_{GS}$ 的减少反过来导致 $I_D$ 的减少，这种变化与最初假设的方向相反。因此，$R_G$ 提供的负反馈或退化可以使 ID 的值尽可能保持恒定。

图 7.50 的电路可以用作放大器，通过耦合电容器将输入电压信号施加到栅极，以免干扰已经建立的直流偏置条件。漏极处的放大输出信号可以再次通过电容器耦合到电路的另一部分。 我们在第 7.2 节（例 7.3）中考虑了这样的放大器电路。





















##### 7.4.2 The BJT Case

在介绍“好的”偏置方案之前，我们应该指出为什么两个明显的安排不好。 首先，尝试通过固定电压 $V_{BE}$ 来偏置 BJT，例如，在电源 $V_{CC}$ 上使用分压电路，如图 7.51(a) 所示，这不是一种可行的方法：非常尖锐的指数关系 $i_C -  v_{BE}$ 意味着 $V_{BE}$ 与所需值的任何微小且不可避免的差异都会导致 $I_C$ 和 $V_{CE}$ 的巨大差异。 其次，通过在基极中建立恒定电流来偏置 BJT，如图 7.51(b) 所示，其中 $I_B\simeq (V_{CC} -0.7)/R_B$ 也不是推荐的方法。 在这里，相同器件类型的单元之间 $β$ 值的典型大变化将导致 $I_C$ 和 $V_{CE}$ 的相应大变化。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602123010999.png" alt="image-20210602123010999" style="zoom:67%;" />

###### The Classical Discrete-Circuit Bias Arrangement：

图 7.52(a) 显示了在只有一个电源可用的情况下最常用于偏置分立电路晶体管放大器的布置。 该技术包括通过分压器 $R_1$、$R_2$ 向晶体管的基极提供电源电压 $V_{CC}$ 的一小部分。 此外，电阻器$R_E$连接到发射极。 该电路与我们用于 MOSFET 的电路非常相似 [图7.48(c)]。 然而，这里的设计必须考虑到有限的基极电流。图 7.52(b) 显示了相同的电路，其中分压器网络被其 Th´evenin 等效电路取代，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602123237649.png" alt="image-20210602123237649" style="zoom:67%;" />

有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602123349771.png" alt="image-20210602123349771" style="zoom:67%;" />

电流 $I_E$ 可以通过为基极-发射极-接地环路编写基尔霍夫环路方程来确定，该环路标记为 $L$，并代入 $I_B = I_E/(β +1)$：

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602123533283.png" alt="image-20210602123533283" style="zoom:67%;" />

此外我们最好将$β$对集电极电流大小的影响降到最低，因此在设计电路时，我们一般都会取这样的电路参数

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602123659103.png" alt="image-20210602123659103" style="zoom:67%;" />

条件1 确保 $V_{BE}$ (0.7 V) 的微小变化将被更大的 $V_{BB}$ 淡化。 然而，对于 $V_{BB}$ 的大小有一个限制：对于给定的电源电压 $V_{CC}$ 值，我们用于 $V_{BB}$ 的值越高，$R_C$ 和集电极-基极结上的电压总和就越低（$V_{CB}$)(我们不难从电路中看出，要使$V_{BB}$到$V_{CC}$的总体电压降为0，就必须有$V_{BB}+V_{CB}+I_CR_C=V_{CC}$）。 另一方面，我们希望 $R_C$ 两端的电压大，以获得高电压增益和大信号摆幅（在晶体管截止之前）。 我们还希望 $V_{CB}$（或 $V_{CE}$）大，以提供大的信号摆幅（在晶体管饱和之前）。

因此，与任何设计的情况一样，我们有一组相互冲突的需求，解决方案必须是一种权衡。 根据经验，一个较合理的设计的 $V_{BB}$ 约为 $1 /3V_{CC}$，$V_{CB}$（或 $V_{CE}$）约为 $1/ 3V_{CC}$，$I_C R_C$ 约为 $1/ 3V_{CC}$。

条件2使 $I_E$ 对 $β$ 的变化不敏感，这可以通过选择小 $R_B$ 来满足。 这反过来又是通过对 $R_1$ 和 $R_2$ 使用低值来实现的。 然而，$R_1$ 和 $R_2$ 的较低值将意味着从电源中消耗更高的电流，并且会导致放大器的输入电阻降低（如果输入信号耦合到基极），这是设计这一部分涉及的权衡。应该注意的是，条件2意味着我们要使基极电压与 $β$ 的值无关，并且仅由分压器决定。 如果分压器中的电流比基极电流大得多，这显然会得到满足。 通常选择 $R_1$ 和 $R_2$ 使其电流在 $I_E$ 到 $0.1I_E$ 的范围内。

进一步了解图 7.52(a) 的偏置布置以稳定直流发射极（以及集电极）电流的机制的关键在于考虑由电阻$R_E$所带来的反馈机制。考虑到由于某种原因发射极电流增加。  $R_E$ 两端的电压降会变大，因此 $V_E$将相应增加。 现在，如果基极电压主要由分压器 $R_1、R_2$ 决定，如果 $R_B$ 很小，则它会保持不变，而 $V_E$ 的增加将导致 $V_{BE}$ 相应降低。 这反过来又降低了集电极（和发射极）电流，这与最初假设的变化相反。

因此，$R_E$ 提供了稳定偏置电流的负反馈作用。 这应该提醒读者我们在第 7.3.4 节中包含在 CE 放大器的发射极引线中的电阻 $R_e$的作用也是类似的。 此外，图 7.52(a) 电路中 $R_E$ 的反馈作用类似于图 7.48(c) 电路中 $R_S$ 的反馈作用。 我们将在第 11 章正式研究负反馈。

###### A Two-Power-Supply Version of the Classical Bias Arrangement：

如图7.53所示，如果有两个电源可用，则可以有更简单的偏置布置。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602144751049.png" alt="image-20210602144751049" style="zoom:67%;" />

为标记为$L$的回路编写回路方程

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602145101180.png" alt="image-20210602145101180" style="zoom:67%;" />

该方程与式（7.143）相同，但以$V_{EE}$代替$V_{BB}$。因此，等式的两个约束条件1和2在此也适用。注意，如果晶体管要与基极接地一起使用（即，在共基极配置中），那么$R_B$可以完全消除。另一方面，如果输入信号要耦合到基极，则需要$R_B$。我们将在第7.5节中研究各种BJT放大器配置的完整电路。

###### Biasing Using a Collector-to-Base Feedback Resistor

图7.54（a）显示了这样一种简单但有效的偏置布置，适用于共射放大器。该电路采用连接在集电极和基极之间的电阻$R_B$来提供负反馈，有助于稳定BJT的偏置点。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602145934896.png" alt="image-20210602145934896" style="zoom:67%;" />

不难得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602150105179.png" alt="image-20210602150105179" style="zoom:67%;" />

因此其射级偏置电流为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602150131674.png" alt="image-20210602150131674" style="zoom:67%;" />

值得注意的是，这个公式与等式（7.143）相同，后者控制着传统偏置电路的操作，只是$V_{CC}$取代了$V_{BB}$，$R_C$取代了$R_E$。因此，要获得对温度变化不敏感的$I_E$值, 我们选择$R_B/(β +1)<<R_C$。但是，请注意，$R_B$的值决定了采集器处允许的负信号摆幅，因为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602150430705.png" alt="image-20210602150430705" style="zoom:67%;" />

### 7.5 Discrete-Circuit Amplifiers

随着我们对晶体管放大器基础知识的学习完成，我们现在通过介绍分立电路放大器的实用电路，把所有的东西放在一起。这些电路利用第7.3节中研究的放大器配置和第7.4节中的偏置方法，可以使用现成的分立晶体管、电阻器和电容器进行组装。虽然本节介绍的电路实用且经过精心挑选，以说明一些要点，但应将其视为分立电路晶体管放大器的示例。事实上，这样的电路有很多种，在本章的最后，我们将探讨其中的一些电路。

如前所述，绝大多数的分立电路放大器都使用BJT。这反映在本节中，除一个电路外，所有电路都使用BJT。当然，如果需要的话，可以在这里介绍的相同放大器配置中使用场效应管。此外，MOSFET是集成电路（IC）放大器设计中的首选器件。我们从第八章开始研究集成电路放大器。

很快就会看到，本节中介绍的电路使用大电容器（在$μF$范围）将信号源耦合到放大器的输入端，并将放大器输出信号耦合到负载电阻或另一个放大器级的输入端。同样，采用大电容器在晶体管的期望端子（例如，在CE放大器的发射极处）建立信号接地。为这些目的使用电容器大大简化了设计：由于电容器阻挡直流电，人们能够首先进行直流偏压设计，然后将信号源和负载连接到放大器而不干扰直流电设计。这些放大器因此被称为电容耦合放大器

##### 7.5.1 A Common-Source (CS) Amplifier

如第 7.3 节所述，共源极 (CS) 配置是所有 MOSFET 放大器电路中使用最广泛的。 使用图 7.48(c) 的偏置电路实现的共源放大器如图 7.55(a) 所示。 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606193724843.png" alt="image-20210606193724843" style="zoom:67%;" />

请注意，为了在源端建立信号接地或交流接地（有时称为交流接地），我们在源极和接地之间连接了一个大电容器 CS。 该电容器通常在微法拉范围内，需要在所有感兴趣的信号频率下提供非常小的阻抗（理想情况下为零阻抗，即实际上是短路）。 这样，信号电流通过CS到地，从而绕过电阻RS； 因此，CS 称为旁路电容器。 显然，信号频率越低，旁路电容的效率就越低。 这个问题将在第 10.1 节中研究。 出于我们的目的，我们将假设 CS 充当完美短路，因此在 MOSFET 源极处建立零信号电压。

为了防止对直流偏置电流和电压的干扰，要放大的信号（显示为具有内部电阻 $R_{sig}$ 的电压源 $v_{sig}$）通过一个大电容器 $C_{C1}$ 连接到栅极。 电容器 $C_{C1}$，称为耦合电容器，需要在所有感兴趣的信号频率下充当完美短路，同时阻止直流。 在这里，我们再次注意到，随着信号频率的降低，$C_{C1}$ 的阻抗（即 $1/jωC_{C1}$）将增加，其作为耦合电容器的有效性将相应降低。这个问题我们同样将在第十章中考虑。出于我们的目的，我们将假设 $C_{C1}$ 就信号而言充当完美的短路。

在漏极产生的电压信号通过另一个耦合电容器$C_{C2}$耦合到负载电阻$R_L$。 我们将假设 $C_{C2}$ 在所有感兴趣的信号频率下充当完美短路，因此输出电压 $v_o = v_d$ 。 请注意，$R_L$ 可以是实际负载电阻器，需要放大器向其提供其输出电压信号，或者在需要多级放大的情况下，它可以是另一级放大器的输入电阻。  （我们将在第 9 章研究多级放大器）。

由于电容器在直流时表现为开路，执行直流偏置设计和分析的电路是通过开路所有电容器获得的。 由此产生的电路如图 7.55(b) 所示，可以按照第 7.4.1 节中的讨论进行设计。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606194300468.png" alt="image-20210606194300468" style="zoom:67%;" />

为了确定图 7.55(a) 中 CS 放大器的终端特性——即其输入电阻、电压增益和输出电阻——我们将 MOSFET 替换为其混合 π 小信号模型，将 $V_{DD}$ 替换为信号 接地，并用短路更换所有耦合和旁路电容器。 结果是图 7.55(c) 中的电路。，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606194412795.png" alt="image-20210606194412795" style="zoom:67%;" />

不难得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606194444913.png" alt="image-20210606194444913" style="zoom:67%;" />

这表明要保持 $R_{in}$ 高，$R_{G1}$ 和 $R_{G2}$ 应使用较大的值，通常在兆欧范围内。 总电压增益 $G_v$ 为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606194541180.png" alt="image-20210606194541180" style="zoom:67%;" />

请注意，我们已将 $r_o$ 考虑在内，仅仅是因为这样做很容易。 然而，它的影响通常很小（IC 放大器不是这种情况，这将在第 8 章中解释）。 最后，为了鼓励读者直接对原始电路图进行小信号分析，隐式使用 MOSFET 模型，我们展示了对图 7.55(a) 电路的一些分析。

##### 7.5.2 A Common-Emitter Amplifier

共发射极 (CE) 放大器是所有 BJT 放大器配置中使用最广泛的。 图 7.56(a) 显示了使用7.48(c) 的经典偏置布置的 CE 放大器，其设计参数已在第 7.4 节中考虑。 图 7.54(a) 中的 CE 电路是图 7.55(a) 中 CS 放大器的 BJT 对应电路。 它使用耦合电容 $C_{C1}$ 和 $C_{C2}$ 以及旁路电容 $C_E$。 在这里，我们假设这些电容器在阻止直流的同时，在所有感兴趣的信号频率下都表现为完美的短路。

为了确定CE放大器的特性参数，我们用它的Hybrid-π模型代替BJT，用对地短路代替$V_{CC}$，用短路代替耦合和旁路电容。  CE放大器的小信号等效电路如图7.56(b)所示

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602151119757.png" alt="image-20210602151119757" style="zoom:67%;" />



<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602151134079.png" alt="image-20210602151134079" style="zoom:67%;" />

对于上图的电路，计算方法与之前如出一辙

首先我们计算输入电阻，不难得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602153201360.png" alt="image-20210602153201360" style="zoom:67%;" />

这表明为了保持 $R_{in}$ 相对较高，$R_{B1}$ 和 $R_{B2}$ 应该选择较大的数值（通常在几十或几百千欧的范围内）。 该要求与将 $R_{B1}$ 和 $R_{B2}$ 保持在低电平以最小化直流电流 $I_C$ 对晶体管 $β$ 的依赖性的需要相冲突。 我们在 7.4 节讨论了这种设计权衡。

电压增益 $G_v$ 由下式给出 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602153346043.png" alt="image-20210602153346043" style="zoom:67%;" />

##### 7.5.3 A Common-Emitter Amplifier with an Emitter Resistance $R_e$

如第 7.3.4 节所述，在晶体管发射极引线中包含一个小电阻是有益的。 这可以在图 7.56(a) 的电路中实现，方法是将发射极偏置电阻 $R_E$ 分成两个分量：未连接旁路的电阻 $R_e$ 和连接旁路电容器 $C_E$ 的电阻 $(R_E -R_e)$。 结果电路如图 7.57(a) 所示，其小信号模型如图 7.57(b) 所示。 在后者中，我们使用 BJT 的 T 模型，因为它会导致更简单的分析（回想一下，当电阻与发射极串联时，情况总是如此）。 另请注意，我们没有包括 $r_o$，因为这样做会使分析显著复杂化。 考虑到 $r_o$ 对分立电路放大器的性能影响很小，这种负担是不合理的。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602153656109.png" alt="image-20210602153656109" style="zoom:67%;" />

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602153711514.png" alt="image-20210602153711514" style="zoom:67%;" />

首先计算输入电阻

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602153850330.png" alt="image-20210602153850330" style="zoom:67%;" />

从中我们注意到，在电路中包含 $R_e$ 会增加 $R_{in}$，因为它通过向 $r_π$ 添加分量 $(β + 1)R_e$ 来增加看向基极的输入电阻。 总电压增益 $G_v$ 为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602154007933.png" alt="image-20210602154007933" style="zoom:67%;" />

##### 7.5.4 A Common-Base (CB) Amplifier

图 7.58(a) 显示了使用图 7.53 的偏置装置设计的 CB 放大器。请注意，$V_{CC}$ 和 $-V_{EE}$ 两个电源的可用性使我们能够将基极直接接地，从而无需使用大型旁路电容器在基极建立信号接地。

CB 放大器的小信号等效电路如图 7.58(b) 所示。 正如预期的那样，我们使用了 BJT 的 T 模型并且没有包括 $r_o$。 在分立电路放大器的情况下，包括 $r_o$ 会使分析显著复杂化，而不会对结果产生太大影响。 从图 7.58(b) 中的电路我们发现

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602154157680.png" alt="image-20210602154157680" style="zoom:67%;" />

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602154236368.png" alt="image-20210602154236368" style="zoom:67%;" />

因此其输入电阻为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602154610807.png" alt="image-20210602154610807" style="zoom:67%;" />

从而三极管的输入电压不难得到，为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602154652346.png" alt="image-20210602154652346" style="zoom:67%;" />

因此发射极电流大小为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602154724324.png" alt="image-20210602154724324" style="zoom:67%;" />

而输出电阻为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602154749311.png" alt="image-20210602154749311" style="zoom:67%;" />

因此我们可以得到总体电压增益为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602154815439.png" alt="image-20210602154815439" style="zoom:67%;" />

##### 7.5.5 An Emitter Follower

图 7.59(a) 显示了使用图 7.53 的偏置布置和两个电源 $V_{CC}$ 和 -$V_{EE}$ 设计的射极跟随器。 偏置电阻 $R_B$ 影响跟随器的输入电阻，应选择尽可能大的值，同时将其两端的直流电压降限制为 $V_{EE}$ 的一小部分； 否则偏置电流 $I_C$ 对 $β$ 的依赖性会变得不可接受。

图 7.59(b) 显示了射极跟随器的小信号等效电路。 在这里，正如预期的那样，我们用其 T 模型替换了 BJT 并包含了 $r_o$（因为这可以非常简单地完成）。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602155017186.png" alt="image-20210602155017186" style="zoom:67%;" />

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602155031867.png" alt="image-20210602155031867" style="zoom:67%;" />

可以看到输入电阻为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602155315680.png" alt="image-20210602155315680" style="zoom:67%;" />

其中 $R_{ib}$ 是从基极看的输入电阻，可以通过使用电阻-反射规则获得。 为此，请注意 $r_o$ 与 $R_E$ 和 $R_L$ 并行出现（这就是为什么它很容易被考虑在内）。 因此，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602155443810.png" alt="image-20210602155443810" style="zoom:67%;" />

总电压增益可以通过跟踪从源到负载的信号传输来确定，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602155604193.png" alt="image-20210602155604193" style="zoom:67%;" />

最后，输出电阻 $R_{out}$ 可以通过将 $v_{sig}$ 短路并回看输出端得到，不包括 $R_L$，为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602155746397.png" alt="image-20210602155746397" style="zoom:67%;" />

在研究了 MOSFET 和 BJT 并熟悉了它们的基本电路应用之后，我们现在准备考虑它们在可以以集成电路 (IC) 形式制造的实际放大器电路的设计中的应用。 第二部分专门讨论这个丰富的主题。 它的六章构成了对 IC 放大器设计的连贯处理，因此可以作为电子电路的第二门课程。

从简要介绍 IC 设计原理开始，第 8 章介绍了 IC 放大器设计中使用的基本电路构建块。 然而，最重要的构建块，差分对配置，推迟到第 9 章，它是主要主题。 第 9 章还考虑了需要多个级联级的放大器的设计。

正如第一部分中的不同点所提到的，放大器的带宽是有限的。 第 10 章专门讨论放大器的频率响应分析； 它全面研究了限制带宽的机制以及用于估计各种放大器电路配置的工具和方法。 虽然第 10 章前半部分的学习是必不可少的，但其中一些后面的部分可以推迟到课程的稍后部分，甚至可以推迟到后续课程中。

放大器设计中的一个重要工具是明智地使用反馈。 第 11 章处理这个极其重要的主题。 对反馈概念的透彻理解、对反馈配置的洞察以及对反馈分析方法使用的熟练程度对于认真的电路设计人员来说是无价的。

在第 12 章中，我们从主要处理小信号放大器转向研究那些需要处理大信号和大功率的放大器。

最后，第 13 章将第二部分的所有主题集中在一个重要应用中：即运算放大器电路的设计。 然后，我们将回到原点，从在第 2 章中将运算放大器视为一个黑匣子，到在第 13 章中理解盒子内部的内容。

在第二部分中，MOSFET 和 BJT 电路并列处理。 由于当今超过 90% 的 IC 采用 MOSFET，因此首先介绍其电路。 尽管如此，BJT 电路的呈现深度相同，但有时会更简短一些。

在这方面，我们提请读者注意附录 G（在网站上），它提供了两种类型晶体管特性的宝贵汇编，可以进行有趣的比较。 此外，附录 K 中提供了许多 CMOS 和双极制造工艺技术的典型器件参数值

## CHAPTER 8 Building Blocks of Integrated-Circuit Amplifiers

研究了两种主要晶体管类型 MOSFET 和 BJT 及其基本分立电路放大器配置后，我们现在准备开始研究集成电路 (IC) 放大器。 本章专门介绍 IC 放大器的基本构建块的设计。

我们首先简要介绍集成电路的设计理念以及它与分立电路的设计理念有何不同。 接下来是第 8.2 节中 IC 偏置的研究，重点介绍了电流源和电流镜的设计。 电流镜是模拟集成电路最重要的构建块之一。 更高级的镜像电路在第 8.6 节中介绍。

本章的核心是第 8.3 至 8.5 节中的材料。 在第 8.3 节中，我们介绍了 IC 放大器的基本增益单元，即电流源负载共源（共发射极）放大器。之后我们为了确定如何提升其增益，我们发现了使用电流放大器的必要性。能够实现电流缓冲器的两种放大器配置，即共栅极放大器和共基极放大器，在第 8.4 节中进行了研究。 这项研究与第 7 章中的研究不同，因为它包括了晶体管的 $r_o$，在集成电路中必须始终如此。 对 CG 和 CB 的研究自然而然地引出了共源共栅原理及其在放大器设计中的应用：即共源共栅放大器和共源共栅电流源，它们是 IC 放大器非常重要的构建块。

本章最后在第 8.7 节中介绍了一组有趣且有用的放大器配置，每个配置都使用一对晶体管。 在本章中，MOS 和双极电路并排呈现，这使得呈现方式具有一定的经济性，更重要的是，提供了比较和对比两种电路类型的机会。

### 8.1 IC Design Philosophy

集成电路制造技术（附录 A）对电路设计者施加了限制并为其提供了机会。 为了应对限制和利用机遇，IC 设计人员多年来发明（现在仍然在继续发明）了许多巧妙的技术，并且出现了独特的集成电路设计理念。 在下文中，我们简要总结了 IC 设计理念的重要约束以及主要特征。
      1. 电阻器： 为了最小化芯片面积，应避免使用大甚至中等尺寸的电阻器。 同样，出于经济考虑，不鼓励使用精确值的电阻器。 另一方面，晶体管可以做得小而便宜，并且鼓励设计人员尽可能优先使用晶体管而不是电阻器。结果，在分立电路放大器设计中流行的经典偏置布置在 IC 放大器中被摒弃，转而使用在有源模式下工作的晶体管实现的**恒流源**进行偏置。 同样，放大器中的集电极和漏极电阻被具有**更高增量电阻的恒流源**取代，从而提供更大的增益。
      2. 电容器: 芯片面积的考虑也使得无法制造大容量电容器，例如用于分立电路放大器中的信号耦合和旁路的电容器。 因此，IC 放大器都是**直接耦合**的，并且使用了巧妙的技术，我们将在本章和下一章中进行研究。皮法和几分之一皮法范围内的小尺寸电容器很容易用 IC MOS 技术制造。 此类电容器可与 MOS 放大器和 MOS 开关组合以实现各种信号处理功能，包括模拟（第 17 章）和数字（第 15 章）。
      3. 电源 :为了将大量器件封装在同一个IC芯片上，从而降低系统成本并提高可靠性，减小器件尺寸的趋势一直存在。  （有关摩尔定律和器件缩放的讨论，请参见第 14.5 节。）到 2014 年，能够生产具有 14 纳米沟道长度的器件的 CMOS 工艺技术已投入使用。 为避免破坏这些器件中使用的薄氧化层（小于 1 nm），电源电压限制在 1 V 左右。 低电源电压有助于解决另一个主要的设计挑战； 即，将芯片中的功耗保持在可接受的范围内。 然而，使用如此低的直流电源电压给电路设计人员带来了许多挑战。例如在场效应管电路中，晶体管必须在仅 0.1 V 至 0.2 V 的过驱动电压下工作。 在我们对 MOS 放大器的研究中，我们会经常对此类问题发表评论

4. 设备种类： 与分立电路的设计者受限于可用的现成晶体管不同，IC 设计者可以自由地指定器件尺寸并利用具有指定比率的尺寸的器件匹配和器件阵列。 例如，可以利用一组双极晶体管，其发射极-基极-结区域具有二进制加权比。  CMOS 技术提供了更大的灵活性，选择了 MOS 晶体管的 W 和 L 值以适应非常广泛的设计要求。
5. 双极技术。： BJT 仍在特殊模拟应用中使用，例如用于组装在印刷电路 (PC) 板上的高质量通用运算放大器封装（而不是作为片上系统的一部分）  . 双极电路也可以通过所谓的 BiCMOS 技术以创新和令人兴奋的方式与 CMOS 电路相结合。
6. CMOS 技术：目前绝大多数模拟集成电路都是采用CMOS技术设计的。 这种做法最初是出于与数字电路兼容的需要，数字电路已成为主要的 CMOS。 然而，现在，CMOS 为模拟设计师提供的丰富性和多功能性是其主导地位的更强有力的原因。 我们希望读者会在第 8 章和第 9 章中认识到这一点。

### 8.2 IC Biasing—Current Sources, Current Mirrors, and Current-Steering Circuits

集成电路设计中的偏置基于恒流源的使用。 在具有多个放大器级的 IC 芯片上，在一个位置生成恒定的直流电流（称为参考电流），然后在其他各个位置复制，通过称为电流控制的过程为各个放大器级提供偏置。这种方法的优点是可以生成可预测且稳定的参考电流。该装置通常使用芯片外部的精密电阻或芯片上的特殊电路，不需要对每个放大器级重复。 此外，在电源电压或温度发生变化的情况下，各个级的偏置电流会相互跟踪。

在本节中，我们将研究 IC 放大器偏置设计中采用的电路构建块和技术。 这些电流源电路也用作放大器负载元件，如第 8.3 和 8.4 节所述。

##### 8.2.1 The Basic MOSFET Current Source

简单的MOS恒流源电路如图8.1所示。 该电路的核心是晶体管 $Q_1$，其漏极与其栅极短路，从而迫使其工作在饱和模式

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606195003860.png" alt="image-20210606195003860" style="zoom:67%;" />

不难得到$Q_1$的漏电流大小为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606194945345.png" alt="image-20210606194945345" style="zoom:67%;" />

我们忽略了通道长度调制效应。  $Q_1$ 的漏极电流由 $V_{DD}$ 通过电阻 $R$ 提供，该电阻在大多数情况下位于 IC 芯片外部。 由于栅极电流为零

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606195146326.png" alt="image-20210606195146326" style="zoom:67%;" />

其中通过 $R$ 的电流被认为是电流源的参考电流，用 $I_{REF}$ 表示。 等式 (8.1) 和 (8.2) 可用于确定 $R$ 所需的值。

现在考虑晶体管$Q_2$：它具有与$Q_1$相同的$V_{GS}$； 因此，如果我们假设它工作在饱和状态，它的漏极电流，即电流源的输出电流 $I_O$，将是 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606195305033.png" alt="image-20210606195305033" style="zoom:67%;" />

因此输入（参考电流）与输出电流的关系如下

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606195424518.png" alt="image-20210606195424518" style="zoom:67%;" />

这是一个简单而有吸引力的关系：$Q_1$ 和 $Q_2$ 的特殊连接提供了一个输出电流 $I_O$，它与参考电流 $I_{REF}$ 相关，由晶体管的纵横比决定。 换句话说，$I_O$ 和 $I_{REF}$ 之间的关系完全由晶体管的几何形状决定。 在相同晶体管的特殊情况下，$I_O = I_{REF}$，并且电路只是复制或镜像输出端子中的参考电流。 这给了由 $Q_1$ 和 $Q_2$ 组成的电路命名为电流镜，该名称的使用与器件尺寸比例无关。

图 8.2 描述了电流镜电路，为了简单和通用，输入参考电流显示为由电流源提供。 电流镜的电流增益或电流传输比由等式给出。 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606195614188.png" alt="image-20210606195614188" style="zoom:67%;" />



Effect of $V_O$ on $I_O$

在上面对图 8.1 电流源操作的描述中，我们假设 $Q_2$ 工作在饱和状态。 如果 $Q_2$ 要提供恒定电流输出，这很重要。 为确保$Q_2$饱和，$Q_2$的漏极所连接的电路必须建立满足以下关系式的漏极电压$V_O$

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606200009780.png" alt="image-20210606200009780" style="zoom:67%;" />

或等价的

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606200030111.png" alt="image-20210606200030111" style="zoom:67%;" />

换句话说，电流源将在输出电压$V_O$ 低至$V_OV$ 时正常工作。

尽管迄今为止被忽略，但通道长度调制会对电流源的操作产生重大影响。 为简单起见，考虑互相匹配的 $Q_1$ 和 $Q_2$ 的情况。  $Q_2$ 的漏极电流 $I_O$ 将等于 $Q_1$ 中的电流 $I_{REF}$，处于 $V_O$ 值时，这会导致两个器件具有相同的 $V_{DS}$，即 $V_O = V_{GS}$。 随着 $V_O$ 增加到这个值以上，$I_O$ 将根据 $Q_2$ 的增量输出电阻 $r_{o2}$ 增加。 这在图 8.3 中进行了说明，其中显示了 $I_O$ 与 $V_O$。 观察到，由于 $Q_2$ 在恒定 $V_{GS}$ 下运行（由 $I_{REF}$ 通过匹配器件 $Q_1$ 确定），图 8.3 中的曲线只是 $Q_2$ 的 $i_D -v_{DS}$ 特性曲线，$v_{GS}$ 等于特定值 $V_{GS}$。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606200543228.png" alt="image-20210606200543228" style="zoom:67%;" />

总之，图 8.1 的电流源和图 8.2 的电流镜具有有限的输出电阻 $R_o$，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606200600169.png" alt="image-20210606200600169" style="zoom:67%;" />

此外，请记住，对于给定的工艺技术，$V_A$ 与晶体管沟道长度成正比； 因此，为了获得高输出电阻值，电流源通常使用沟道相对较长的晶体管来设计。 最后，请注意，我们可以将$I_O$ 表示为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606200927829.png" alt="image-20210606200927829" style="zoom:67%;" />

##### 8.2.2 MOS Current-Steering Circuits

如前所述，一旦产生恒定电流，就可以复制它，为 IC 中的各个放大器级提供直流偏置或负载电流。 显然可以使用电流镜来实现这种电流控制功能。 图 8.4 显示了一个简单的电流控制电路。 这里 $Q_1$ 与 $R$ 一起确定参考电流 $I_{REF}$。 晶体管 $Q_1$、$Q_2$ 和 $Q_3$ 形成一个双输出电流镜

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606201057215.png" alt="image-20210606201057215" style="zoom:67%;" />

不难得出

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606201155773.png" alt="image-20210606201155773" style="zoom:67%;" />

为确保在饱和区工作，$Q_2$ 和 $Q_3$ 的漏极电压限制如下：

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606201244826.png" alt="image-20210606201244826" style="zoom:67%;" />

或等价的

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606201302010.png" alt="image-20210606201302010" style="zoom:67%;" />

其中 $V_{OV1}$ 是 $Q_1$、$Q_2$ 和 $Q_3$ 工作时的过驱动电压。 换句话说，$Q_2$ 和 $Q_3$ 的漏极必须至少保持高于 $-V_{SS}$ 的过驱动电压，该电压通常为十分之几伏。继续讨论图 8.4 中的电路，我们看到电流 $I_3$ 被馈送到由 PMOS 晶体管 $Q_4$ 和 $Q_5$ 形成的电流镜的输入侧。 这面镜子提供

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606201635967.png" alt="image-20210606201635967" style="zoom:67%;" />

其中 $I_4 = I_3$。 为了保持 $Q_5$ 处于饱和状态，其漏极电压应为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606201714506.png" alt="image-20210606201714506" style="zoom:67%;" />

其中 $V_{OV5}$ 是 $Q_5$ 工作时的过驱动电压。

图 8.4 电路中产生的恒定电流 $I_2$ 可用于偏置源极跟随器放大器，例如由图 8.5(a) 中的晶体管 $Q_6$ 实现的放大器。 类似地，恒流 $I_5$ 可以用作共源放大器的负载，例如用图 8.5(b) 中的晶体管 $Q_7$ 实现的放大器。 我们将在第 8.3 节中讨论使用电流源作为 CS 放大器的负载元件。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606202019564.png" alt="image-20210606202019564" style="zoom:67%;" />

最后，需要注意的重要一点是，在图 8.4 的电路中，当 $Q_2$ 从电路（图 8.4 中未显示）拉出其电流 $I_2$ 时，$Q_5$ 将其电流 $I_5$ 推入电路（图 8.4 中未显示）。 因此，$Q_5$ 被恰当地称为电流源，而 $Q_2$ 更恰当地称为电流吸收器。 在 IC 中，通常需要电流源和电流吸收器。

图 8.6 进一步说明了电流源和电流吸收器之间的区别，其中 $V_{CS_{min}}$ 表示电流源（或电流吸收器）两端为其正常工作所需的最小电压。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606202203861.png" alt="image-20210606202203861" style="zoom:67%;" />

##### 8.2.3 BJT Circuits

基本的 BJT 电流镜如图 8.7 所示。 它的工作方式与 MOS 镜非常相似。 但是，有两个重要的区别：首先，BJT 的非零基极电流（或等效地，有限的 $β$）会导致双极镜的电流传输比出现误差。 其次，电流传输比由 $Q_1$ 和 $Q_2$ 的发射极-基极结的相对面积决定。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603105929667.png" alt="image-20210603105929667" style="zoom:67%;" />

让我们首先考虑 $β$ 足够高以至于我们可以忽略基极电流的情况。 参考电流 $I_{REF}$ 通过二极管连接的晶体管 $Q_1$，从而建立相应的电压 $V_{BE}$，该电压又施加在 $Q_2$ 的基极和发射极之间。 现在，如果 $Q_2$ 与 $Q_1$ 匹配，或者更具体地说，如果 $Q_2$ 的 EBJ 面积与 $Q_1$ 相同，因此 $Q_2$ 具有与 $Q_1$ 相同的标度电流 IS，那么 $Q_2$ 的集电极电流将等于$Q_1$,即

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603110117311.png" alt="image-20210603110117311" style="zoom:67%;" />

然而，要实现这一点，$Q_2$ 必须工作在有源模式下，只要集电极电压 VO 比发射极电压高 0.3 V 左右，就可以实现。

为了获得除 1 以外的电流传输比，例如 $m$，我们只需将 $Q_2$ 的 EBJ 的面积安排为 $Q_1$ 的 $m$ 倍。 在这种情况下， 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603110310797.png" alt="image-20210603110310797" style="zoom:67%;" />

通常，电流传输比由下式给出

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603110345138.png" alt="image-20210603110345138" style="zoom:67%;" />

或者，如果面积比为整数，则可以将 $Q_2$等效为 $m$ 个与$Q_1$匹配且并联连接的晶体管。

接下来我们考虑有限晶体管β对电流传输比的影响。 图 8.8 说明了对电流传输比名义上为 1 的情况（即 $Q_2$与 $Q_1$ 匹配的情况）的分析。 这里的关键是，由于 $Q_1$ 和 $Q_2$匹配且具有相同的 VBE，因此它们的集电极电流将相等。 其余的分析很简单。  $Q_1$ 集电极处的节点方程产生

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603110615019.png" alt="image-20210603110615019" style="zoom:67%;" />

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603110643863.png" alt="image-20210603110643863" style="zoom:67%;" />

因此其电流传输比大小为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603110814610.png" alt="image-20210603110814610" style="zoom:67%;" />

请注意，随着 $β$ 接近$∞$，IO /IREF 接近统一的标称值。 然而，对于典型的 $β$ 值，电流传输比的误差可能很大。 例如，$β = 100$ 导致电流传输率有 2% 的误差。 此外，随着额定电流传输比的增加，由有限 β 引起的误差也会增加。 不难证明，对于具有标称电流传输比 $m$（即 $I_{S2} = mI_{S1}$ 的反射镜）的实际电流传输比由下式给出

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603110935353.png" alt="image-20210603110935353" style="zoom:67%;" />

与 MOS 电流镜一样，BJT 镜具有有限的输出电阻 $R_o$，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603111620564.png" alt="image-20210603111620564" style="zoom:67%;" />

其中 $V_{A2}$ 和 $r_{o2}$ 分别是 $Q_2$的厄利电压和输出电阻。 因此，即使我们忽略由有限 $β$ 引起的误差，仅当 $Q_2$具有与 $Q_1$ 相同的 $V_{CE}$，即 $V_O = V_{BE}$ 时，输出电流 $I_O$ 才会处于其标称值。 随着$V_O$增加，$I_O$也会相应增加。 考虑到有限$β$和有限$R_o$，我们可以将标称电流传输比为$m$的BJT镜的输出电流表示为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603111815369.png" alt="image-20210603111815369" style="zoom:67%;" />

注：回路的判定：我们判定一个复杂电路的回路如何，一般是以接地作为分界线

A Simple Current Source

以与 MOS 情况类似的方式，基本 BJT 电流镜可用于实现简单的电流源

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603112555018.png" alt="image-20210603112555018" style="zoom:67%;" />

如图 8.9 所示。 这里的参考电流是

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603112642583.png" alt="image-20210603112642583" style="zoom:67%;" />

其中 $V_{BE}$ 是对应于所需 $I_{REF}$ 值的基极-发射极电压。 输出电流 $I_O$ 由下式给出

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603112740385.png" alt="image-20210603112740385" style="zoom:67%;" />

其输出电阻是$Q_2$的输出电阻$r_o$

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603113113991.png" alt="image-20210603113113991" style="zoom:67%;" />

Current Steering

为了为 IC 中的不同放大器级生成偏置电流，可以在双极情况下应用为 MOS 电路描述的电流控制方法。例如，考虑图 8.10 所示的电路。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603113431854.png" alt="image-20210603113431854" style="zoom:67%;" />

直流参考电流 $I_{REF}$ 在由二极管接法晶体管 $Q_1$、电阻器 $R$ 和二极管接法晶体管 $Q_2$ 组成的支路中产生： 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603113706632.png" alt="image-20210603113706632" style="zoom:67%;" />

现在，为简单起见，假设所有晶体管都具有高 $β$，因此基极电流小到可以忽略不计。 我们还将忽略厄利效应。 二极管接法的三极管$Q_1$与$Q_3$形成电流镜； 因此 $Q_3$ 将提供一个等于 $I_{REF}$ 的恒定电流 $I_1$。

只要集电极上产生的电压不超过 ($V_{CC} -0.3 V$)，晶体管 $Q_3$ 就可以向任何负载提供此电流； 否则 $Q_3$ 将进入饱和区。

为了产生两倍于 $I_{REF}$ 值的直流电流，两个晶体管 $Q_5$ 和 $Q_6$（每个都与 $Q_1$ 匹配）并联连接，该组合与 $Q_1$ 形成一个镜像。 因此 $I_3 = 2I_{REF}$。 请注意，$Q_5$ 和 $Q_6$ 的并联组合相当于一个 EBJ 面积是 $Q_1$ 面积两倍的晶体管，这正是该电路以 IC 形式制造时所做的。

三极管$Q_4$与$Q_2$形成镜像； 因此 $Q_4$ 提供等于 $I_{REF}$ 的恒定电流 $I_2$。请注意，虽然 $Q_3$ 将其电流提供给电压不应超过 ($V_{CC} -0.3 V$) 的电路部分，但 $Q_4$ 从电压不应低于 ($-V_{EE} +0.3 V$) 的电路部分汲取电流。 最后，为了产生三倍于 $I_{REF}$ 的电流，三个晶体管 $Q_7$、$Q_8$ 和 $Q_9$（每个都与 $Q_2$ 匹配）并联连接，并且该组合与 $Q_2$ 形成镜像配置。 同样，在 IC 实现中，$Q_7$、$Q_8$ 和 $Q_9$ 将替换为结面积是 $Q_2$ 的三倍的晶体管。

A Bipolar Mirror with Base-Current Compensation

图 8.11 显示了双极电流镜，其电流传输比对 $β$ 的依赖性比简单电流镜要小得多。 减少对 $β$ 的依赖是通过包括晶体管 $Q_3$ 实现的，其发射极提供 $Q_1$ 和 $Q_2$ 的基极电流。 然后将基极电流之和除以 $(β_3 +1)$，从而导致必须由 $I_{REF}$ 提供的误差电流小得多。 详细分析见电路图； 它基于 $Q_1$ 和 $Q_2$ 匹配并因此具有相等的集电极电流 $I_C$ 的假设。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603115516055.png" alt="image-20210603115516055" style="zoom:67%;" />

 标记为 x 的节点处的节点方程给出

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603115542276.png" alt="image-20210603115542276" style="zoom:67%;" />

因为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603115605163.png" alt="image-20210603115605163" style="zoom:67%;" />

因此其电流传输比将

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603115640733.png" alt="image-20210603115640733" style="zoom:67%;" />

这意味着有限 $β$ 引起的误差已从简单镜像中的 $2/β$ 减少到 $2/β ^2$，这是一个巨大的改进。 然而不幸的是，输出电阻仍然大约等于简单反射镜的电阻，即 $r_o$。 最后，请注意，如果参考电流 $I_{REF}$ 不可用，我们只需通过电阻 $R$ 将节点 $x$ 连接到电源 $V_{CC}$。结果是参考电流由下式给出

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603115924435.png" alt="image-20210603115924435" style="zoom:67%;" />

##### 8.2.4 Small-Signal Operation of Current Mirrors

除了用于偏置之外，电流镜有时还用作电流放大器。 因此，导出电流镜的小信号参数 $R_{in}$、$A_{is}$ 和 $R_o$ 很有用。

图 8.12(a) 显示了一个用直流输入电流 $I_{D1}$ 偏置并用小信号输入电流 $i_i$ 馈电的 MOS 电流镜。 请注意，$V_{GS}$ 和 $I_{D2}$ 是产生的直流量，而 $v_{gs}$ 和 $i_o$ 是信号量。 虽然我们没有展示输出端所连接的电路，但我们假设 $Q_2$ 的漏极电压超过了保持 $Q_2$ 饱和所需的最小值。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603121340720.png" alt="image-20210603121340720" style="zoom:67%;" />

用小信号模型替换 $Q_1$ 和 $Q_2$ 会产生图 8.12(b) 中的电路。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603121520577.png" alt="image-20210603121520577" style="zoom:67%;" />

观察到受控电流源 $g_{m1} v_{gs}$ 出现在其控制电压 $v_{gs}$ 上，因此可以用电阻 $1/g_{m1}$ 代替，如图 8.12(c) 所示。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603121736299.png" alt="image-20210603121736299" style="zoom:67%;" />

 对于后一个电路，我们可以得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603121753908.png" alt="image-20210603121753908" style="zoom:67%;" />

因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603122002162.png" alt="image-20210603122002162" style="zoom:67%;" />

代入 $g_{m1,2} = μ_nC_{ox}(W/L)_{1,2}V_{OV}$ ，其中 $V_{OV}$ 是 $Q_1$ 和 $Q_2$ 工作时的过驱动电压，产生短路电流增益

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603122140447.png" alt="image-20210603122140447" style="zoom:67%;" />

它等于直流或大信号电流传递函数——清楚地表明电流镜具有出色的线性度。我们得出结论，电流镜是一种出色的电流放大器：它具有相对较低的输入电阻 ($1/g_{m1}$)，相对较高的输出电阻 ($r_{o2}$)，最后，可以使用类似的开发来获得双极镜的小信号参数。

### 8.3 The Basic Gain Cell

##### 8.3.1 The CS and CE Amplifiers with Current-Source Loads

IC 放大器中的基本增益单元是负载恒流源的共源 (CS) 或共发射极 (CE) 晶体管，如图 8.13(a) 和 (b) 所示。 这些电路类似于第 7.3 节中研究的 CS 和 CE 放大器，不同之处在于我们用恒流源替换了电阻 RD 和 RC。 这样做有两个原因：首先，如第 8.1 节所述，IC 技术很难实现具有合理精确值的电阻； 相反，使用使用晶体管实现的电流源要容易得多。 其次，通过使用恒流源，我们实际上以非常高（理想情况下为无限大）负载电阻操作 CS 和 CE 放大器； 因此，与使用有限 RD 或 RC 相比，我们可以获得更高的增益。 情况尤其如此，因为即使有无源电阻可用，它们的值也会非常小，因为直流电源现在仅限于 1 V 至 2 V。但是，这些电压确实允许使用具有以下特性的电流源输出电阻大。 图 8.13(a) 和 (b) 中的电路被称为电流源负载或有源负载。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603123949045.png" alt="image-20210603123949045" style="zoom:67%;" />

在我们考虑有源负载 CS 和 CE 放大器的小信号分析之前，有必要先介绍一下它们的直流偏置。 显然，在每个电路中，$Q_1$ 在 $I_D = I$ 和 $I_C = I$ 处偏置。 但是是什么决定了漏极（集电极）和栅极（基极）的直流电压呢？ 通常，这些增益单元将是较大电路的一部分，其中利用负反馈来固定 $V_{DS}$ 和 $V_{GS}$（$V_{CE}$ 和 $V_{BE}$）的值。 在下一章中，我们将开始看到完整的 IC 放大器，包括其偏置电路，就现在而言，我们暂时假设他们都是被偏置在active mode下的

电流源负载的 CS 和 CE 放大器的小信号分析可以利用它们的等效电路模型进行，分别如图 8.13（c）和（d）所示。请注意，由于假定电流源负载是理想的，因此它在模型中表示成一个阻值无穷大的电阻。 正如我们在上一节中看到的，实际的电流源具有有限的输出电阻。 但是，请注意，图 8.13 中的 CS 和 CE 放大器实际上以开路方式运行。 它们的输出节点和地之间的唯一电阻是晶体管本身的输出电阻 $r_o$。因此，在这些电路中获得的电压增益对于 CS 或 CE 放大器来说是最大可能的。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603124428622.png" alt="image-20210603124428622" style="zoom:67%;" />

从图 8.13（d）我们得到有源负载的 CE 放大器：

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603125759937.png" alt="image-20210603125759937" style="zoom:67%;" />

##### 8.3.2 The Intrinsic Gain(本征收益)

对于 BJT，我们可以使用以下 $g_m$ 和 $r_o$ 公式推导出固有增益 $A_0 = g_mr_o$ 的公式：

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603125904280.png" alt="image-20210603125904280" style="zoom:67%;" />

由此得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603125935575.png" alt="image-20210603125935575" style="zoom:67%;" />

因此，$A_0$ 只是厄利电压 $V_A$ 的比值，它是技术决定的参数，热电压 $V_T$ 是物理参数（室温下约为 0.025 V）。  $V_A$ 的值范围从现代 IC 制造工艺的 5 V 至 35 V 到较旧的所谓高压工艺的 100 V 至 130 V（参见附录 G）。因此，$A_0$ 的值将在 200 V/V 到 5000 V/V 的范围内，具有现代小特征尺寸设备的较低值特征。 需要注意的是，对于给定的双极晶体管制造工艺，$A_0$ 与晶体管结面积及其偏置电流无关。 

##### 8.3.3 Effect of the Output Resistance of the Current-Source Load

图 8.13(a) 中 CS 放大器的电流源负载可以使用在饱和区偏置的 PMOS 晶体管来实现，以提供所需的电流 $I$，如图 8.15(a) 所示。 我们可以使用大信号 MOSFET 模型（第 5.2 节，图 5.18）来建模

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606210956100.png" alt="image-20210606210956100" style="zoom:67%;" />

如右图中的模型

不难计算得到恒流源负载的负载电流是

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606211124504.png" alt="image-20210606211124504" style="zoom:67%;" />

并且

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606211140328.png" alt="image-20210606211140328" style="zoom:67%;" />

因此电流源负载不再具有无穷大的电阻； 相反，它具有有限的输出电阻 $r_{o2}$。 该电阻实际上将与 $r_{o1}$ 并联，如图 8.15(c) 中的放大器等效电路模型所示。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606211307214.png" alt="image-20210606211307214" style="zoom:67%;" />

从中我们可以得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606211325583.png" alt="image-20210606211325583" style="zoom:67%;" />

因此，毫不奇怪，电流源负载的有限输出电阻将电压增益的幅度从 ($g_{m1}r_{o1}$) 降低到 $g_{m1}(r_{o1}|| r_{o2})$。 这种减少可能是巨大的。例如，如果 $Q_2$ 的厄利电压等于 $Q_1$ 的电压，则 $r_{o2}$ = $r_{o1}$ 并且增益减半， 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606211454315.png" alt="image-20210606211454315" style="zoom:67%;" />

最后，我们注意到在三极管的类似电路中电路分析的过程是相似的

##### Example 8.3

共源放大器的实际电路实现如图 8.16(a) 所示。 此处，电流源晶体管 $Q_2$ 是由 $Q_2$ 和 $Q_3$ 形成的电流镜的输出晶体管，并提供参考电流 $I_{REF}$。 在第 8.1 节中研究了该电流源的 NMOS 版本。 假设 $Q_2$ 和 $Q_3$ 匹配。 为了能够清楚地看到电路作为几乎线性放大器工作的 $v_I$ 区域，请确定电压传输特性 (VTC)，即 $v_O$ 与 $v_I$ 的关系。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603131146128.png" alt="image-20210603131146128" style="zoom:67%;" />

首先，我们关注电流镜，目的是确定电流源 $Q_2$ 的 $i-v$ 特性。 为此，我们注意到电流 $I_{REF}$ 流经二极管连接的晶体管 $Q_3$，从而决定 $Q_3$ 的 $V_{SG}$，而 $V_{SG}$ 又施加在 $Q_2$ 的源极和栅极之间。 因此，电流源 $Q_2$ 的 $i$-$v$ 特性将是 $Q_2$ 的 $i_D-v_{SD}$ 特性曲线。 如图 8.16(b) 所示，我们注意到 $i$ 将仅在一点上等于 $I_{REF}$，即在 $v_{SD2} = V_{SG}$ 时，这是两个匹配的晶体管 $Q_2$ 和 $Q_3$ 具有相同工作状态的唯一点。 我们还观察了 $Q_2$ 中沟道长度调制的影响，它由有限输出电阻 $r_{o2}$ 建模

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603131520386.png" alt="image-20210603131520386" style="zoom:67%;" />

这又是在 $v_O ≤ V_{DD} − V_{OV2}$ 时获得的。 这是输出电压 $v_O$ 的最大允许值。

现在，掌握了电流源负载 $Q_2$ 的 $i-v$ 特性，我们可以继续确定 $v_O$ 与 $v_I$ 的关系。 图 8.16(c) 显示了执行此操作的图形结构。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603150230736.png" alt="image-20210603150230736" style="zoom:67%;" />

它基于第 7.1.6 节中使用的图形分析方法，不同之处在于这里的负载线（注：这里的负载实际上是电流源负载）不是一条直线，而是 $Q_2$ 的 $i-v$ 特性曲线沿 $v_O$ 轴偏移 $V_{DD}$ 伏特并“翻转”。 这样做的原因是

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603150303507.png" alt="image-20210603150303507" style="zoom:67%;" />

$V_{DD}$ 需要移位，而 $v$ 的负号会引起负载曲线的“翻转”。

图 8.16(c) 的图形结构可用于逐点确定每个 $v_I$ 值的 $v_O$： $v_I$ 的值决定了工作点所在的 $Q_1$ 的特定特性曲线。工作点将位于此特定图形和负载曲线的交点处。 然后工作点的水平坐标给出了 $v_O$ 的值。按照刚才解释的方式进行，我们得到图 8.16(d) 所示的 VTC。

![image-20210603150530502](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603150530502.png)

如图所示，它有四个不同的部分，分别标记为 I、II、III 和 IV。 每个段是针对 $Q_1$ 和 $Q_2$ 的四种操作模式组合中的一种获得的，图中也指出了这些组合。 请注意，我们在图 8.16（c）中标记了与交点（A 和 B）相对应的传递特性曲线（A 和 B）上的两个重要断点。 我们敦促读者仔细研究传输特性及其各种细节。

毫不奇怪，第 III 段是放大器操作感兴趣的部分。 观察到在区域 III 中，转移曲线几乎是线性的并且非常陡峭，表明电压增益很大。 在区域III中，放大晶体管$Q_1$和负载晶体管$Q_2$都工作在饱和状态。 区域 III 的端点是 A 和 B：在 A 处，有 $v_O = V_{DD} − V_{OV2}$ ，并且Q 2 恰好进入三极管区；在 B 处，有 $v_O = v_I − V_{tn}$ ，$Q_1$ 恰好进入三极管区 . 当放大器偏置在区域 III 中的某个点时，小信号电压增益可以按照我们在图 8.15(c) 中所做的来确定。 问题仍然是我们将如何保证 $v_I$ 的直流分量将具有这样的值，从而导致在区域 III 中运行。 这就是为什么需要整体负反馈的原因，稍后将说明。

在离开这个例子之前，重申一下放大器区域的上限（即 A 点）由 $V_{OA} =V_{DD} − |V_{OV2}|$ 定义，而下限（即 B 点）由 $V_{OB} = V_{OV1}$定义 ，其中 $V_{OV1}$ 可以通过假设 $I_{D1} \simeq I_{REF}$ 来近似确定。 通过考虑 $Q_1$ 和 $Q_2$ 中的衬底效应，可以获得更精确的 $V_{OB}$ 值，这将在下一个示例中展示

##### Example 8.4

在 $V_{DD} = 3 V、V_{tn} = |V_{tp}| = 0.6 V、μ_nC_{ox} = 200 μA/V^2$ 和 $μ_pC_{ox} = 65 μA/V^2$ 的情况下，考虑图 8.16(a) 中的 CMOS 共源放大器。 对于所有晶体管，$L = 0.4 μm$ 和 $W = 4 μm$。 此外，$V_{An} = 20 V$，$V_{Ap} = 10 V$，并且 $I_{REF} =100 μA$。 求小信号电压增益。 此外，找到传输特性的放大器区域的末端坐标——即 A 点和 B 点。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603131146128.png" alt="image-20210603131146128" style="zoom:67%;" />

首先计算电路的小信号模型参数

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606213042600.png" alt="image-20210606213042600" style="zoom:67%;" />

因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606213252366.png" alt="image-20210606213252366" style="zoom:67%;" />

传输特性 [图 8.16(d) 中的区域 III] 的放大器区域末端的近似值可以确定如下： 忽略衬底效应，所有三个晶体管都承载相等的电流 $I_{REF}$，因此我们可以确定 它们工作时的过驱动电压。晶体管 $Q_2$ 和 $Q_3$ 将具有相等的过驱动电压 $V_{OV3}$，由下式确定

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606213543371.png" alt="image-20210606213543371" style="zoom:67%;" />

代入数据可得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606213612754.png" alt="image-20210606213612754" style="zoom:67%;" />

因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606213625783.png" alt="image-20210606213625783" style="zoom:67%;" />

接着我们用同样的方法定义放大器晶体管的过驱动电压

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606213708140.png" alt="image-20210606213708140" style="zoom:67%;" />

同理

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606213723016.png" alt="image-20210606213723016" style="zoom:67%;" />

因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606213741162.png" alt="image-20210606213741162" style="zoom:67%;" />

而假如我们想要更为精确的数据，我们可以将衬底效应考虑在内

首先我们通过$I_{D3}= I_{REF}= 100 μA$来定义电流镜中两个晶体管的源栅电压

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606214013502.png" alt="image-20210606214013502" style="zoom:67%;" />

因此有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606214031139.png" alt="image-20210606214031139" style="zoom:67%;" />

化简得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606214132361.png" alt="image-20210606214132361" style="zoom:67%;" />

因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606214157972.png" alt="image-20210606214157972" style="zoom:67%;" />

利用$Q_1$和$Q_2$的漏极电流大小相等这一事实

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606214309650.png" alt="image-20210606214309650" style="zoom:67%;" />

代入数据我们可以得到输入电压和输出电压之间的关系

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606214343197.png" alt="image-20210606214343197" style="zoom:67%;" />

这就是传递特性段 III 的方程。 虽然它包括 $v^2_ I$ ，但读者不必惊慌：由于区域 III 很窄，所以 $v_I$ 变化很小，特征曲线 几乎是线性的。 代入 $v_O = 2.47 V$ 得到对应的 $v_I$ 值； 即 $V_{IA} = 0.89 V$。为了确定 B 的坐标，我们注意到它们与 $V_{OB} =V_{IB} -V_{tn}$ 相关。 代入方程。  通过试错法求解得出 $V_{IB} = 0.935 V$ 和 $V_{OB} = 0.335 V$。因此放大器区域的宽度为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606214640820.png" alt="image-20210606214640820" style="zoom:67%;" />

对应的输出电压的范围在

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606214735926.png" alt="image-20210606214735926" style="zoom:67%;" />

因此其对应的“大信号”增益为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606214942451.png" alt="image-20210606214942451" style="zoom:67%;" />

可以看到忽略衬底效应计算出的电压增益大小（-42）误差并不大

##### 8.3.4 Increasing the Gain of the Basic Cell

我们通过考虑一个问题来结束本节：我们如何增加从基本增益单元获得的电压增益？ 答案在于找到一种方法来提高放大晶体管和负载晶体管的输出电阻水平。 也就是说，我们寻求一种电路，可以让放大晶体管提供的电流 $g_mv_i$ 直接通过，但将电阻从 $r_o$ 增加到更大的值。 该要求如图 8.17 所示。 图 8.17(a) 显示了 CS 放大晶体管 $Q_1$ 及其输出等效电路。 请注意，目前我们没有显示负载设备。 在图 8.17(b) 中，我们在 $Q_1$ 的漏极和标有 $d_2$ 的新输出端子之间插入了一个阴影框。 在这里，我们再次没有显示 $d_2$ 将连接到的负载。 我们的“黑匣子”接收 $Q_1$ 的输出电流并将其传递给输出； 因此，在它的输出端，我们有所示的等效电路，由相同的受控源 $g_{m1}v_i$ 组成，但输出电阻增加了 $K$ 倍。

![image-20210603155232683](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603155232683.png)

那么，黑匣子到底有什么作用呢？ 由于它通过电流但提高了电阻水平，因此它是一个电流缓冲器。 它是电压缓冲器（源极跟随器和射极跟随器）的双重作用，它通过电压但降低电阻水平。

现在搜索我们在第 7.3 节中研究的晶体管放大器配置库，实现这种电流缓冲作用的唯一候选者是公共栅极（或双极中的公共基极）放大器。 事实上，回想一下 CG 和 CB 电路具有单位电流增益。 然而，我们尚未研究的是它们的电阻转换特性。 我们将在下一节中这样做。

### 8.4 The Common-Gate and Common-Base Amplifiers

在本节中，我们研究 CG 和 CB 放大器配置的 IC 版本。 这项研究与分立电路版本（第 7.3.5 节）的研究有很大不同，因为在这里我们必须考虑晶体管的输出电阻 $r_o$。 在下文中，我们将展示 CG 和 CB 配置都提供了上一节中讨论的电流缓冲区的出色实现

##### 8.4.1 The CG Circuit

图 8.18(a) 显示了一个 CG 放大器，其中只显示了部分偏置装置。 放大器由具有电阻 $R_s$ 的信号源 $v_{sig}$ 馈送，并且具有负载电阻 $R_L$。 后者通常使用 PMOS 电流源实现，如前所述。

为了表征 CG 放大器的信号性能，我们在图 8.18(b) 中显示了消除直流电压的电路。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606215432753.png" alt="image-20210606215432753" style="zoom:67%;" />

可以看到源极处的信号电流 $i$ 直接加载到漏极处的负载上——这也是电流缓冲器的基本要求

**Input Resistance**

输入电阻 $R_{in}$ 可以使用图 8.19 的电路找到。 这里我们采用了 MOSFET 的 T 模型，并将测试电压 $v_x$ 施加到输入端。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606215836153.png" alt="image-20210606215836153" style="zoom:67%;" />

输入电阻由下式给出 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606215911180.png" alt="image-20210606215911180" style="zoom:67%;" />

我们在源极到负载的接地处这条回路上建立回路方程，并利用基尔霍夫电流定律，不难得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606220029478.png" alt="image-20210606220029478" style="zoom:67%;" />

因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606220044820.png" alt="image-20210606220044820" style="zoom:67%;" />

对于$g_mr_o>>1$的情况，有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210606220121337.png" alt="image-20210606220121337" style="zoom:67%;" />

这是一个非常有趣的结果。 首先，它表明如果 $r_o$ 是无限的，就像我们在第 7.3.5 节中分析离散 CG 放大器的情况一样，那么 $R_{in}$ 减小到 $1/g_m$，验证了我们在那里找到的结果。 如果 $r_o$ 不能忽略，就像 IC 放大器的情况一样，我们会看到输入电阻以一种有趣的方式取决于 $R_L$：通过将负载电阻 $R_L$ 除以固有增益 $A_0 = g_mr_o$，将其转换为输入。 因此，即使 $R_L$ 增加，这种阻抗变换特性也确保 $R_{in}$ 保持相对较低，这是电流缓冲器的一个重要特性。

**Output Resistance**

为了获得输出电阻 $R_{out}$，我们使用图 8.20 所示的电路。 在这里，我们将 $v_{sig}$ 短路，但留下源电阻 $R_s$，并将测试电压 $v_x$ 施加到输出。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607135026924.png" alt="image-20210607135026924" style="zoom:67%;" />

 输出电阻由下式给出

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607135039385.png" alt="image-20210607135039385" style="zoom:67%;" />

通过同样的方法，我们可以建立一条回路方程

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607135118794.png" alt="image-20210607135118794" style="zoom:67%;" />

因此输出电阻是

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607135139123.png" alt="image-20210607135139123" style="zoom:67%;" />

或可写为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607135202187.png" alt="image-20210607135202187" style="zoom:67%;" />

对于$g_mR_o>>1$的情况，有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607135243356.png" alt="image-20210607135243356" style="zoom:67%;" />

加入我们同样有$g_mR_O>>1$,那么

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607135353564.png" alt="image-20210607135353564" style="zoom:67%;" />

上式表明，除了晶体管的 $r_o$ 之外，CG 放大器的输出电阻还包括与源负载 $R_s$ 中的电阻相关的分量。 重要的一点是 CG 放大器通过将源电阻 $R_s$ 乘以固有增益 $A_0 =g_mr_o$ 将其转换为输出电阻。 这种阻抗变换与从输出到输入观察到的阻抗变换相反。 现在，如果 $R_s$ 很大，那么 CG 电路的输出电阻会很大； 这也是电流缓冲器的一个重要特性。

总结一下：CG 电路具有单位电流增益； 通过将 $R_L$ 除以 $g_mr_o$ 获得的低输入电阻； 以及通过将 $R_s$ 乘以 $g_mr_o$ 获得的高输出电阻。 因此，它是一个极好的电流缓冲器，可用于实现图 8.17 中的阴影功能框。 作为有用的总结，图 8.21 说明了共栅放大器的阻抗变换特性。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607135658179.png" alt="image-20210607135658179" style="zoom:67%;" />

##### 8.4.2 Output Resistance of a CS Amplifier with a Source Resistance

在第 7.3.4 节中，我们讨论了在 CS 放大器的源极引线中包含电阻 $R_s$ 时获得的一些好处，如图 8.22 所示。 这种电阻被称为源极衰减电阻，因为它的作用是将 CS 级的有效跨导降低到 $g_m/(1+g_mR_s)$，即减少因子 $(1+g_mR_s)$。 这也是许多性能参数增加的因素，例如线性度和带宽（将在第 10 章中看到）。 在这一点上，我们只想指出，我们上面推导出的 CG 放大器输出电阻表达式直接适用于包含源衰减电阻的 CS 放大器的情况。 这是因为当我们确定 $R_o$ 时，我们将输入端接地，使晶体管 $Q$ 表现为 CG 晶体管。 因此 $R_o$ 由方程(8.56) 给出，即

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607140250491.png" alt="image-20210607140250491" style="zoom:67%;" />

同理，可以得到大约的估计值

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607140342735.png" alt="image-20210607140342735" style="zoom:67%;" />

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607140404290.png" alt="image-20210607140404290" style="zoom:67%;" />

因此，源衰减电阻将 CS 放大器的输出电阻从 $r_o$ 增加到 $(1+g_mR_s)r_o$，同样增加了相同的因子 $(1+g_mR_s)$。 在第 11 章中，我们将发现 $R_s$ 引入了数量为 $(1+g_mR_s)$ 的负（退化）反馈。

##### 8.4.4 The CB Circuit

CB 放大器的分析与 CG 放大器的分析相似，只是由于基极电流有限，因此涉及更多一些。图 8.24(a) 显示了一个 CB 放大器，其中仅部分显示了偏置细节，并且负载电阻 $R_L$ 通常使用 pnp 电流源实现。 为小信号分析准备的电路如图 8.24(b) 所示。 请注意，由于 $α\simeq 1$ , 电流增益接近于 1，这是电流缓冲器的一个重要特性。

![image-20210603155824269](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603155824269.png)

输入电阻:确定输入电阻 Rin 的电路如图 8.25 所示，其中还显示了所有支路中的电流，通过编写三个节点的节点方程获得。 特别值得注意的是使用等式 $g_m + \frac1 {r_π} = \frac1 {r_e}$ 来获得基极中的电流 $v_π /r_π$ 。 为包含 $v_x$ 、 $r_o$ 和 $R_L$ 的循环编写循环方程，并将 $v_π$ 替换为 -$v_x$ ，得到 $R_{in} ≡ v_x/i_x$ 的以下表达式，

![image-20210603160141171](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603160141171.png)

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603160856606.png" alt="image-20210603160856606" style="zoom:67%;" />

其中我们利用了关系 $r_π = (β +1)r_e$。 因为$r_o>>r_e$，所以

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603161143242.png" alt="image-20210603161143242" style="zoom:67%;" />

请注意，设置 $r_o =∞$会导致$R_{in}$ $=r_e$，这与第 7.3.5 节中研究的分立电路 CB 放大器的情况一致。 此外，对于 $R_L = 0，R_{in} = r_e。  R_{in}$ 的值随着 $R_L$ 的增加而增加，达到最大值

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603161512664.png" alt="image-20210603161512664" style="zoom:67%;" />

Output Resistance

CB 放大器输出电阻 $R_{out}$ 的确定如图 8.26 所示。 结果是

![image-20210603161749557](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603161749557.png)

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603161942370.png" alt="image-20210603161942370" style="zoom:67%;" />

或者

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603162036304.png" alt="image-20210603162036304" style="zoom:67%;" />

由于$g_mr_o>>1$，有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603162110654.png" alt="image-20210603162110654" style="zoom:67%;" />

在$R_e\rightarrow\infin$时，该式的结果趋向最大

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603162236418.png" alt="image-20210603162236418" style="zoom:67%;" />

我们得出结论，CB 电路具有接近一的电流增益、低输入电阻和高输出电阻； 因此它是一个很好的电流缓冲器。  CB 电路的阻抗转换特性总结在图 8.27 中。

![image-20210603162347661](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603162347661.png)

##### 8.4.5 Output Resistance of an Emitter-Degenerated CE Amplifier

正如我们在MOS情况下所做的那样，我们将对CB放大器的$R_o$表达式进行调整，以适用于发射极中电阻重新连接的CE放大器，如图8.28（a）所示，

![image-20210603162923559](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603162923559.png)

### 8.5 The Cascode Amplifier

级联是指使用以共栅极（或共基极）配置连接的晶体管为共源极（或共发射极）放大晶体管的输出提供电流缓冲。 图 8.29 说明了 MOS 情况下的技术。 这里 CS 晶体管 Q1 是放大晶体管，$Q_2$的CG结连接到直流偏置电压$V_{G2}$，类似的安排适用于双极情况，稍后将予以考虑。

从我们对 CG 放大器特性的研究中，我们可以看到共源共栅晶体管将电流 $g_{m1}v_i$ 传递到输出节点，同时将其源极（$Q_1$ 的 $r_{o1}$）中的电阻乘以因子 $K$。结果是图 1 的等效电路。  图8.29可用于确定不同负载电阻的共源共栅放大器的电压增益。 接下来我们将详细讨论 MOS 级联放大器。

![image-20210603183039570](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603183039570.png)

##### 8.5.2 The MOS Cascode Amplifier

**理想情况**

图 8.30(a) 显示了一个加载了理想恒流源的 MOS 共源共栅放大器。 实现的电压增益可以从图 8.30(b) 中的等效电路中找到。 由于负载是理想的恒流源，负载电阻无穷大。也就是说，放大器在开路负载下工作，增益为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604121801379.png" alt="image-20210604121801379" style="zoom:67%;" />

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604121819151.png" alt="image-20210604121819151" style="zoom:67%;" />

现在，由于 $Q_2$ 的 $R_s$ 为 $r_{o1}$，输出电阻 $R_o$ 由近似表达式给出

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604122526137.png" alt="image-20210604122526137" style="zoom:67%;" />

代入得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604122547541.png" alt="image-20210604122547541" style="zoom:67%;" />

对于 $g_{m1} = g_{m2} = g_m$ 和 $r_{o1} = r_{o2} = r_o$ 的情况，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604122721197.png" alt="image-20210604122721197" style="zoom:67%;" />

因此，级联将增益幅度从 $A_0$ 增加到 $A^2_0$ 。

**恒流源负载的实现**

如果电流源负载由 PMOS 晶体管（可以是 PMOS 电流镜的一部分）实现，如图 8.31(a) 所示，负载电阻 $R_L$ 将等于 $Q_3$ 的输出电阻 $r_{o3}$，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604122949820.png" alt="image-20210604122949820" style="zoom:67%;" />

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604123309655.png" alt="image-20210604123309655" style="zoom:67%;" />

并且共源共栅放大器的电压增益将为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604123330691.png" alt="image-20210604123330691" style="zoom:67%;" />

从中我们可以很容易地看出，由于 $R_L<< R_o$，总电阻将近似等于 $r_{o3}$，增益将为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604123442221.png" alt="image-20210604123442221" style="zoom:67%;" />

因此，增益幅度将回到 $A_0$，与 CS 放大器实现的数量级相同。换句话说，使用具有相对较低输出电阻的简单电流源负载实际上破坏了增加输出电阻的级联优势。 然而，事实证明，这种增益与 CS 放大器相同数量级的共源共栅放大器实际上比 CS 电路具有主要优势：它具有更宽的带宽。我们将在第 10 章证明这一点。

**级联电流源的使用**

为了实现 $A^2_ 0$ 数量级的增益，负载电阻 $R_L$ 必须与共源共栅放大器的 $R_o$ 数量级相同。 这可以通过使用如图 8.32 所示的共源共栅电流源来实现。 这里 $Q_4$ 是电流源晶体管，$Q_3$ 是 CG 级联晶体管。 电压 $V_{G3}$ 和 $V_{G4}$ 是直流偏置电压。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604123737038.png" alt="image-20210604123737038" style="zoom:67%;" />

最终得到的电路图如下

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604123820538.png" alt="image-20210604123820538" style="zoom:67%;" />

因为级联晶体管$Q_3$的存在，电流源负载的输出电阻变为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604124001949.png" alt="image-20210604124001949" style="zoom:67%;" />

将共源共栅放大器与共源共栅电流源相结合，形成图 8.33(a) 的电路。 输出侧的等效电路如图 8.33(b)所示，从中可以很容易地得出电压增益为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604124041256.png" alt="image-20210604124041256" style="zoom:67%;" />

因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604124055708.png" alt="image-20210604124055708" style="zoom:67%;" />

假设所有晶体管之间都是匹配的，那么就有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607132008464.png" alt="image-20210607132008464" style="zoom:67%;" />

通过与等式中的增益表达式进行比较。我们看到对放大晶体管和电流源负载晶体管都使用共源共栅配置会导致增益幅度增加一个等于 $A_0$ 的因子。

##### 8.5.3 Distribution of Voltage Gain in a Cascode Amplifier

了解共源共栅放大器的总电压增益在其两级（CS 级 $Q_1$ 和 CG 级 $Q_2$）中的每一级中实现的程度通常很有用。 为此，考虑图 8.34(a) 所示的共源共栅放大器

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607132159501.png" alt="image-20210607132159501" style="zoom:67%;" />

在这里为了一般起见我们加入了一个负载电阻$R_L$，它代表电流源负载的输出电阻加上可能连接到输出节点的任何附加电阻。 放大器的电压增益 $A_v$ 可表示为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607132350747.png" alt="image-20210607132350747" style="zoom:67%;" />

因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607143116677.png" alt="image-20210607143116677" style="zoom:67%;" />

总增益 $A_v$ 可以表示为 $Q_1$ 和 $Q_2$ 电压增益的乘积为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607143234614.png" alt="image-20210607143234614" style="zoom:67%;" />

为了获得 $A_{v1} ≡v_{o1}/v_i$，我们需要找到 $Q_1$ 的漏极和地之间的总电阻。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607145645376.png" alt="image-20210607145645376" style="zoom:67%;" />

参考图 8.34(b) 并表示该电阻 $R_{d1}$，我们可以将 $A_{v1}$ 表示为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607143403817.png" alt="image-20210607143403817" style="zoom:67%;" />

观察 $R_{d1}$ 是 $r_{o1}$ 和 $R_{in2}$ 的并联等效项，其中 $R_{in2}$ 是 CG 晶体管 $Q_2$ 的输入电阻。 我们可以写

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607143541928.png" alt="image-20210607143541928" style="zoom:67%;" />

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607145052972.png" alt="image-20210607145052972" style="zoom:67%;" />

因此我们得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607150006390.png" alt="image-20210607150006390" style="zoom:67%;" />

第一级增益为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607150031924.png" alt="image-20210607150031924" style="zoom:67%;" />

最后，我们可以通过除以等式给出的总增益 $A_v$ 来获得 $A_{v2}$。  为了深入了解 $R_L$ 值对共源共栅整体增益的影响以及该增益如何在共源共栅放大器的两个级之间分配，我们在表 8.1 中提供了 $r_{o1} = r_{o2} =  r_o$情况的近似值和四个不同的 $R_L$ 值： (1) $R_L =∞$，用理想的电流源负载获得；  (2) $R_L = (g_mr_o)r_o$，用共源共栅电流源负载获得；  (3) $R_L = r_o$，通过简单的电流源负载获得；  (4) 为了完整性，$R_L = 0$，即输出端信号短路。

请注意，虽然情况 1 代表了一种理想化的情况，但它的有用之处在于它提供了 MOS 共源共栅放大器可实现的理论最大电压增益。 情况 2 假设共源共栅电流源负载的输出电阻等于共源共栅放大器的输出电阻，如果旨在最大化实现的增益，则提供对实现的增益的实际估计。 然而，在某些情况下，这不是我们的目标。 这一点很重要，因为我们将在第 10 章中看到，共源共栅放大器有一个完全不同的应用：即通过扩展高 $3dB$ 频率 $f_H$ 来获得宽带放大。 正如将要看到的，对于这样的应用，选择情况 3 表示的情况，其中 CS 放大器中实现的增益仅为 $-2 V/V$，当然现在总增益仅为 $-(g_mr_o)$。 然而，正如在第 10 章中所看到的，在某些情况下，为了获得扩展带宽而对整体增益进行权衡是很划算的！

##### 8.5.4 Double Cascoding

如果需要更高的输出电阻和相应更高的增益，则可以添加另一级级联，如图 8.35 所示。 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607150651104.png" alt="image-20210607150651104" style="zoom: 67%;" />

观察到 $Q_3$ 是第二个共源共栅晶体管，它将输出电阻提高了 $(g_{m3}r_{o3})$。 对于相同晶体管的情况，输出电阻将为 $(g_mr_o) ^2r_o$ 并且电压增益，假设一个理想的电流源负载，将是 $(g_mr_o)^ 3$ or $A^3_ 0$。当然，我们必须布置另一个直流偏置电压和第二个共源共栅晶体管，$Q_3$。

双级联的一个缺点是现在在电流源之间堆叠了一个额外的晶体管。 此外，要实现双级联的优势，电流源负载也需要使用双级联和额外的晶体管。由于每个晶体管的正常运行需要一定的最小 $v_{DS}$（至少等于 $V_{OV}$），回顾现代 MOS 技术使用 1V 到 2V 范围内的电源，我们看到晶体管的数量是有限制的。

##### 8.5.5 The Folded Cascode

为了避免在低压电源上堆叠大量晶体管的问题，可以将 PMOS 晶体管用于共源共栅器件，如图 8.36 所示。 这里，和以前一样，NMOS 晶体管 $Q_1$ 以 CS 配置运行，但 CG 级是使用 PMOS 晶体管 $Q_2$ 实现的。 需要一个额外的电流源 $I_2$ 来偏置 $Q_2$ 并为其提供有源负载。 请注意，$Q_1$ 现在以 $(I_1 -I_2)$ 的偏置电流运行。 最后，需要直流电压 $V_{G2}$ 为共源共栅晶体管 $Q_2$ 的栅极提供适当的直流电平。 必须选择其值，以便 $Q_2$ 和 $Q_1$ 工作在饱和区。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607153338719.png" alt="image-20210607153338719" style="zoom:50%;" />

##### 8.5.6 The BJT Cascode

图 8.37(a) 显示了具有理想电流源负载的 BJT 共射共基放大器。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607153507000.png" alt="image-20210607153507000" style="zoom:67%;" />

 电压$V_{B2}$是CB级联晶体管$Q_2$的直流偏置电压。 该电路与 MOS 共源共栅非常相似，小信号分析将以并行方式进行。 首先，注意双极共源共栅放大器的输入电阻是有限的，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603183432801.png" alt="image-20210603183432801" style="zoom:67%;" />

其次，回想一下 $Q_2$ 集电极中的电流信号将大约等于 $g_{m1} v_i$。 因此，共源共栅放大器输出的等效电路如图 8.37(b) 所示。 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607153547280.png" alt="image-20210607153547280" style="zoom:67%;" />

为了获得 $R_o$，我们使用等式中的公式。并注意到 $Q_2$ 发射极的电阻 $R_e$ 为 $r_{o1}$，因此(再次声明，分析电路时接地端两侧是不同的回路)

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607154648675.png" alt="image-20210607154648675" style="zoom:67%;" />

因为$g_{m2}( r_{o1}|| r_{π2})>> 1$，所以

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607154849144.png" alt="image-20210607154849144" style="zoom:67%;" />

这个结果与 MOS 共源共栅的结果相似但肯定不完全相同。 在这里，由于 BJT 的 $β$ 有限，我们有 $r_{π2}$ 与 $r_{o1}$ 并行出现。 这对 BJT 共源共栅的 $R_o$ 构成了非常重要的限制。 具体来说，因为 $r_{o1}|| r_{π2}$ 总是小于 $r_{π2}$，所以 $R_o$ 的最大可能值是

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607155033254.png" alt="image-20210607155033254" style="zoom:67%;" />

这意味着对BJT进行共基共射的级联连接用处不大

### 8.6 Current-Mirror Circuits with Improved Performance

正如我们在本章中看到的，电流源在 IC 放大器的设计中起着重要作用：恒流源既用于偏置又用作有源负载。  8.2 节研究了 MOS 和双极电流源的简单形式，以及更一般的电流镜。 已经证明需要改进简单源和反射镜的特性。具体来说，需要解决三个性能参数

1.反射镜电流传输比的精度。 对于双极镜，该参数主要受晶体管 $β$ 影响。 对于双极镜和 MOS 镜，厄利效应都会影响电流传输比。

2.输出电阻，$R_o$。 需要增加电流源的输出电阻是因为需要增加放大器级可实现的电压增益。虽然简单的双极和 MOS 反射镜的输出电阻等于 $r_o$，但可以使用共源共栅来增加输出电阻。

3.电流源所需的最小直流电压。 保持该电压尽可能小的需要源于现代 IC 技术中采用的低直流电压电源。 简单的 BJT 和 MOS 源可以在 0.2 V 至 0.3 V 范围内的直流电压下工作。更复杂的镜像电路通常需要更高的电压。

在本节中，我们将研究在这些特性中的一个或多个方面有所改进的 MOS 和双极电流镜

##### 8.6.1 Cascode MOS Mirrors

8.5 节介绍了级联在电流源设计中的使用。 图 8.39 显示了基本的共源共栅电流镜。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607160044994.png" alt="image-20210607160044994" style="zoom:67%;" />

观察到，除了形成基本镜像 $Q_1-Q_2$ 的二极管接法晶体管 $Q_1$ 之外，另一个二极管接法晶体管 $Q_4$ 用于为共源共栅晶体管 $Q_3$ 的栅极提供合适的偏置电压。 要确定 $Q_3$ 漏极处共源共栅镜的输出电阻，我们首先假设$Q_1$和$Q_4$处的电压大小相等，因此$Q_2$和$Q_3$栅极处的信号电压大小相等（0）。因此 $R_ o$ 将是由 $Q_2$ 和 $Q_3$ 形成的共源共栅电流源的输出电阻

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607160716037.png" alt="image-20210607160716037" style="zoom:67%;" />

因此，正如预期的那样，共源共栅将电流源的输出电阻提高了因子 $(g_{m3}r_{o3})$，这是共源共栅晶体管的固有增益。

共源共栅电流镜的缺点是它消耗了稳定缩小的电源电压 $V_{DD}$ 的较大部分。 虽然简单的 MOS 镜在其输出晶体管两端的电压低至 $V_{OV}$ 的情况下正常工作，但图 8.39 的共源共栅电路需要 $V_t +2V_{OV}$ 的最小电压。 这是因为 $Q_3$ 的栅极在 $2V_{GS} =2V_t +2V_{OV}$ 处。 因此，共源共栅镜输出端所需的最小电压为 1 V 左右。 这显然限制了反射镜输出端的信号摆幅（即，在使用该电流源作为负载的放大器的输出端）。 在第 13 章中，我们将研究宽摆幅共源共栅镜

##### 8.6.2 The Wilson Current Mirror

对基本双极镜进行简单但巧妙的修改，既减少了 $β$ 依赖性又增加了输出电阻。 由此产生的电路，以其发明者乔治·威尔逊（一位为泰克工作的 IC 设计工程师）命名的威尔逊镜如图 8.40(a) 所示

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607161941469.png" alt="image-20210607161941469" style="zoom:67%;" />

其电路分析已经显示在图上，我们可以据此写出

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607162115562.png" alt="image-20210607162115562" style="zoom:67%;" />

与简单电流镜的情况相比，它对 $β$ 的依赖性要小得多。

该分析假设 $Q_1$ 和 $Q_2$ 传导相等的集电极电流。 然而，这种假设存在一个小问题：$Q_1$ 和 $Q_2$ 的集电极至发射极电压不相等，这会引入电流偏移或系统误差。 这个问题可以通过添加一个与 $Q_2$ 的集电极串联的二极管连接的晶体管来解决，我们将在 MOS 版本中简要介绍。

为了确定威尔逊镜的输出电阻，我们设置 $I_{REF} = 0$ 并向输出节点施加测试电压 vx，如图 8.40(b) 所示。 我们的目的是确定当前的 $i_x$ 和 $R_o$ 为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607162347823.png" alt="image-20210607162347823" style="zoom:67%;" />

我们将直接在电路图上进行分析，而不是用其混合 π 模型替换每个晶体管。 为此，我们将每个晶体管“拉出”并单独显示。

观察晶体管 $Q_3$，首先我们将其视为一个超级节点（以颜色突出显示），有一个电流 $i_x$ 进入它，两个电流 $i_1$ 和 $i_2$ 离开它； 因此， 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607162448792.png" alt="image-20210607162448792" style="zoom:67%;" />

接下来注意电流镜 $Q_1-Q_2$ 的作用迫使 $i_2$ 近似等于 $i_1$； 因此，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607162533790.png" alt="image-20210607162533790" style="zoom:67%;" />

电流 $i_2$ 流入 $Q_3$ 的基极，从而在所示方向上产生集电极电流 $β_3i_2$。 我们现在可以在 $Q_3$ 的集电极处写一个节点方程，从而确定通过 $r_{o3}$ 的电流为 $i_x +β_3i_2 = i_x +β_3(i_x/2) = i_x(β_3/2+1)$。 最后，我们可以将 $Q_3$ 的集电极和地之间的电压表示为 $r_{o3}$ 两端的电压降和 $Q_1$ 两端的电压 $v$ 之和，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607163112986.png" alt="image-20210607163112986" style="zoom:67%;" />

由于 $r_o>> r_e$ 和 $β_3>> 2$

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607163231092.png" alt="image-20210607163231092" style="zoom:67%;" />

因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607163306298.png" alt="image-20210607163306298" style="zoom:67%;" />

因此，威尔逊电流镜的输出电阻比单独的 $Q_3$ 高 $(1/ 2β_3)$ 倍。 这是通过将 $Q_2 (i_2)$ 的集电极电流反馈回 $Q_3$ 的基极而获得的负反馈的结果。 从上面的分析中可以看出，这种反馈导致通过 $r_{o3}$ 的电流增加到大约 $1/ 2β_3i_x$ ，因此 $r_{o3}$ 两端的电压和输出电阻增加了相同的因子，$1/ 2β_3$。 最后，请注意因子 $1/ 2$ 是因为只有 $i_x$ 的一半被镜像回 $Q_3$ 的原因。

威尔逊反射镜优于共基共射电路，因为后者与简单反射镜一样，对 $β$ 具有相同的依赖性。 但是，与共基共射反射镜一样，威尔逊反射镜需要额外的 $V_{BE}$ 降压才能运行； 也就是说，为了正常运行，我们必须在威尔逊镜输出端允许 1 V 左右的电压。

##### 8.6.3 The Wilson MOS Mirror

图 8.41(a) 显示了威尔逊镜的 MOS 版本。 显然这里没有$β$，因此误差会降低，MOS Wilson的优势在于其输出电阻变大。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607174235626.png" alt="image-20210607174235626" style="zoom:67%;" />

为了确定威尔逊 MOS 镜的输出电阻，我们设置 $I_{REF}$ = 0，并在输出节点上施加测试电压 $v_x$，如图 8.41（b）所示。 我们的目的是确定当前的 $i_x$ 和 $R_o$ 的关系

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607174342129.png" alt="image-20210607174342129" style="zoom:67%;" />

我们将直接对电路进行分析，而不是用其混合 π 等效电路模型替换每个晶体管。 为此，我们将每个晶体管“拉出”并分别展示

观察到进入 $Q_3$ 漏极的电流 $i_x$ 必须在其源极处流出。 因此，馈入 $Q_1–Q_2$ 镜像输入侧的电流等于 $i_x$ 。 大部分电流将流入 $Q_1$ 的漏极本身（即只有很小一部分流经 $r_{o1}$）并产生电压 $v\simeq  i_x /g_{m1}$，其中 $1/g_{m1}$ 是二极管连接的 晶体管$Q_1$的近似电阻。  ($Q_1$, $Q_2$) 的电流镜作用迫使等于 $i_x$ 的电流流过 $Q_2$ 的漏极。 现在，由于 $Q_2$ 漏极中的电流（通过与 $Q_3$ 栅极的连接）被迫为零，所有 $i_x$ 都必须流过 $r_{o2}$，从而产生电压 $-i_xr_{o2}$。 这是反馈到 $Q_3$ 栅极的电压。 现在可以找到 $Q_3$ 的漏极电流

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607185059138.png" alt="image-20210607185059138" style="zoom:67%;" />

$Q_3$ 漏极处的节点方程给出通过 $r_{o3}$ 的电流为 $(i_x −i_{d3}) = i_x +g_{m3}r_{o2}i_x g_{m3}r_{o2}i_x$ 。 最后，我们可以将 $v_x$ 表示为 $r_{o3}$ 上的电压降和 $Q_1$ 上的电压 $v$ 之和，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607185419861.png" alt="image-20210607185419861" style="zoom:67%;" />

并且得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607185455675.png" alt="image-20210607185455675" style="zoom:67%;" />



因此，Wilson MOS 镜的输出电阻增加了一个因子 ($g_{m3}r_{o3}$)，这与在共源共栅镜中获得的结果相同。 这里 $R_o$ 的增加，如上面的分析所示，是通过将 $Q_2$ 的漏极连接到 $Q_3$ 的栅极获得的负反馈的结果。 最后，为了平衡反射镜的两个分支，从而避免 $Q_1$ 和 $Q_2$ 之间 $V_{DS}$ 差异导致的系统电流误差，可以修改电路，如图 8.41(c) 所示。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607185707096.png" alt="image-20210607185707096" style="zoom:67%;" />

##### 8.6.4 The Widlar Current Source(微电流源)

我们的最终电流源电路，称为 Widlar 电流源，如图 8.42 所示。它与基本的电流镜电路有一个重要区别：$Q_2$的发射极引线中包含一个电阻器 $R_E$。 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607190120441.png" alt="image-20210607190120441" style="zoom:67%;" />

忽略基极电流 ,可以写出

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607190212484.png" alt="image-20210607190212484" style="zoom:67%;" />

和

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607190235117.png" alt="image-20210607190235117" style="zoom:67%;" />

我们假设两个晶体管匹配（即它们的饱和电流相等），有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607190350604.png" alt="image-20210607190350604" style="zoom:67%;" />

但从电路中我们也能看到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607190430747.png" alt="image-20210607190430747" style="zoom:67%;" />

因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607190446935.png" alt="image-20210607190446935" style="zoom:67%;" />

以下示例说明了 Widlar 电流源的设计和优势。

##### Example 8.6

图 8.43 中显示的用于产生恒定电流 $I_O = 10 μA$ 的两个电路由 $10-V$ 电源供电。 确定所需电阻器的值，假设电流为 $1 mA$ 时 $V_{BE}$ 为 $0.7 V$，并忽略有限 $β$ 的影响。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607190607819.png" alt="image-20210607190607819" style="zoom:67%;" />

对于图 8.43(a) 中的基本电流源电路，我们为 $R_1$ 选择一个值，使 $I_{REF}$ $= 10 μA$。 在此电流下，$Q_1$ 两端的电压降为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607191015253.png" alt="image-20210607191015253" style="zoom:67%;" />

因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607191047383.png" alt="image-20210607191047383" style="zoom:67%;" />

对于图 8.43(b) 中的 Widlar 电路，我们必须首先确定一个合适的 $I_{REF}$ 值。 如果我们选择 $I_{REF} = 1 mA$，则 $V_{BE1} = 0.7 V$ 且 $R_2$ 由下式给出

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607191244808.png" alt="image-20210607191244808" style="zoom:67%;" />

$R_3$ 的值可以使用等式来确定。如下

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607191422373.png" alt="image-20210607191422373" style="zoom:67%;" />

从上面的例子中，我们观察到使用 Widlar 电路可以使用相对较小的电阻器产生小的恒定电流。 这是一个重要的优势，可显著节省芯片面积。 事实上，图 8.43(a) 的电路需要 $942k$ 的电阻，因为电阻器 $R_1$ 的值非常高，所以在 IC 形式中实现是完全不切实际的。

Widlar 电流源的另一个重要特性是其输出电阻高。 输出电阻的增加高于基本电流源的增加，这是由于发射极衰减电阻 $R_E$。 为了确定 $Q_2$ 的输出电阻，我们假设由于 $Q_2$ 的基极通过 $Q_1$ 的小电阻 $r_e$ 接地，因此基极的增量电压将很小。 因此我们可以使用公式(8.70)中的公式。并根据我们的目的对其进行如下调整：

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607191735656.png" alt="image-20210607191735656" style="zoom:67%;" />

### 8.7 Some Useful Transistor Pairings

第 8.5 节中研究的共源共栅配置结合了 CS 和 CG MOS 晶体管（CE 和 CB 双极晶体管），具有很大的优势。 最终组合的卓越性能的关键在于，晶体管配对是以最大化优势并最小化两种单独配置中的每一种配置的缺点的方式完成的。 在本节中，我们将介绍许多其他此类晶体管配对。 在每种情况下，晶体管对都可以被认为是一个复合器件； 因此，由此产生的放大器可以被视为单级。

##### 8.7.1 The CC–CE, CD–CS, and CD–CE Configurations

图 8.44(a) 显示了通过级联共集电极（发射极跟随器）晶体管 $Q_1$ 和共发射极晶体管 $Q_2$ 形成的放大器。 与 CE 放大器相比，该电路有两个主要优点。 首先，射极跟随器以等于 $(β_1 +1)$ 的系数增加输入电阻。 结果，整体电压增益增加，尤其是在信号源的电阻较大的情况下。 其次，第 10 章将说明 CC-CE 放大器的带宽比 CE 放大器的带宽要宽得多。CC-CE 放大器的 MOS 对应物，即 CD-CS 配置，如图 8.44（b）所示。 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607192305288.png" alt="image-20210607192305288" style="zoom:67%;" />



在这里由于共源极放大器本身的输入电阻即为无穷大，因此在这里施加一个源极跟随器的而目的在于拓展放大器的带宽

最后，图 8.44(c) 显示了这种电路类型的 BiCMOS 版本。 与图 8.44(a) 中的双极电路相比，BiCMOS 电路具有无限大的输入电阻。 与图 8.44(b) 中的 MOS 电路相比，BiCMOS 电路通常具有更高的 $g_{m2}$。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607192709053.png" alt="image-20210607192709053" style="zoom:67%;" />

**The IC Source Follower**

由于本节中讨论的许多电路配置都使用输入源极跟随器，我们暂时离题考虑一下 IC 源极跟随器（分立电路源极跟随器在第 7.3.6 节中进行了研究）。 图 8.45(a) 显示了由晶体管 $Q_1$ 形成并由电流镜 $Q_2 -Q_3$ 提供的恒定电流偏置的源极跟随器。 观察到，由于 $Q_1$ 的源极不能连接到衬底（处于信号接地电位），因此在衬底和源极之间产生电压信号 $v_{bs}$ 并产生电流信号 $g_{mb}v_{bs}$，如图 8.45（b)中的等效电路所示。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607193030847.png" alt="image-20210607193030847" style="zoom:67%;" />

等效电路还显示了偏置电流源 $Q_3$ 的输出电阻 $r_{o3}$，它充当跟随器 $Q_1$ 的负载电阻。

从等效电路中进行的一个重要观察是受控源 ($g_{mb}v_{bs}$) 出现在其控制电压 $v_{bs}$ 上。 因此，我们可以使用源吸收定理（附录 G）使用大小为 $1/g_{mb}$ 的电阻来代替受控源。接着我们注意到三个电阻并联出现在源极的地面的回路上，记其等效电阻为$R_L$，有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607193804462.png" alt="image-20210607193804462" style="zoom:67%;" />

其中

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607193828562.png" alt="image-20210607193828562" style="zoom:67%;" />

而在 $\frac1{g_{mb}}<<r_{o1},r_{o2}$的情况下

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607193929717.png" alt="image-20210607193929717" style="zoom:67%;" />

##### Example 8.7

对于图 8.44(a) 中的 CC-CE 放大器，让 $I_1 =I_2 =1 mA$ 并假设晶体管相同，$β =100$。
求输入电阻 $R_{in}$ 和放大器输入具有 $R_{sig}$ $= 4 k\Omega$ 的信号源并且负载电阻 $R_L =4 k\Omega$ 时获得的总电压增益。 将结果与在相同条件下工作的共发射极放大器获得的结果进行比较。 忽略$r_o$。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607201033810.png" alt="image-20210607201033810" style="zoom:67%;" />

解：

根据我们此前对共发射极电路的分析，有
$$
R_{in1}=(\beta_1+1)(r_{e1}+R_{in2})
$$
此外，我们还可以得到三极管在此偏置电流下的小信号模型参数
$$
g_m=\frac{I_C}{V_T}=10mA/V
$$

$$
r_e=\frac{\alpha}{g_m}=25\Omega
$$

$$
r_{\pi}=\frac{\beta}{g_m}=2.5k\Omega
$$

因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607201605323.png" alt="image-20210607201605323" style="zoom:67%;" />

从而其整体电压增益为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607201637094.png" alt="image-20210607201637094" style="zoom:67%;" />

为了比较，在相同条件下运行的 CE 放大器将具有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607201731799.png" alt="image-20210607201731799" style="zoom:67%;" />

##### 8.7.2 The Darlington Configuration

图 8.47(a) 显示了一种流行的 BJT 电路，称为达林顿配置。 它可以被认为是 CC-CE 电路的一种变体，其中 $Q_1$ 的集电极连接到 $Q_2$ 的集电极。 或者，可以将达林顿对视为具有 $β = β_1β_2$ 的复合晶体管。 因此，它可用于实现高性能电压跟随器，如图 8.47(b) 所示。 请注意，在此应用中，电路可被视为两个共集电极晶体管的级联连接（即 CC-CC 配置）。

由于晶体管 $β$ 取决于直流偏置电流，因此 $Q_1$ 可能会在非常低的 $β$ 下运行，从而导致达林顿对的 $β$ 倍增效应相当无效。该问题的一个简单解决方案是为 $Q_1$ 提供偏置电流，如图 8.47(c) 所示。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607200254915.png" alt="image-20210607200254915" style="zoom:67%;" />

不难得到，在图8.47(b)中，其输入电阻大小为
$$
R_{in} = (β_1 +1)[ r_{e1} + (β_2 +1) (r_{e2} + R_E)]
$$
输出电阻大小为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607202058659.png" alt="image-20210607202058659" style="zoom: 67%;" />

整体增益大小为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607202139964.png" alt="image-20210607202139964" style="zoom:67%;" />



##### 8.7.3 The CC–CB and CD–CG Configurations

将射极跟随器与共基放大器级联，如图 8.48(a) 所示，导致电路的低频增益近似等于 CB 的增益，但存在 CB 输入电阻低的问题 通过 CC 阶段的缓冲作用解决。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607202344661.png" alt="image-20210607202344661" style="zoom:67%;" />

第 10 章将说明该电路具有比相同增益的 CE 放大器获得的带宽更宽的带宽。 请注意，图 8.48(a) 中显示的偏置电流源确保 $Q_1$ 和 $Q_2$ 中的每一个都在偏置电流 $I$ 下运行。然而，我们没有显示 $Q_1$ 基极的直流电压是如何设置的， 同理$Q_2$也没有。这两个问题通常在 CC-CB 放大器是其中一部分的较大电路中得到解决。

CC-CB 配置的一个有趣版本如图 8.48(b) 所示。 这里的 CB 级是用 pnp 晶体管实现的。 尽管现在只需要一个电流源，但请注意，我们还需要在 $Q_2$ 的基极建立适当的偏置电压。 该电路是流行的 741 运算放大器内部电路的一部分，将在第 13 章中研究。

图 8.48(a) 中电路的 MOSFET 版本是图 8.48(c) 中所示的 CD-CG 放大器。

##### Example 8.8

对于图 8.48(a) 和 (b) 中的 CC-CB 放大器，当每个放大器都馈入具有电阻 $R_{sig}$ 的信号源并连接负载电阻 $R_L$ 时，求出 $R_{in}、v_o/v_i$ 和 $v_o/v_{sig}$ 。 为简单起见，忽略 $r_o$。

计算过程如下图所示

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607203204856.png" alt="image-20210607203204856" style="zoom:67%;" />

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607203215993.png" alt="image-20210607203215993" style="zoom:67%;" />

## CHAPTER 9 Differential and Multistage Amplifiers

简介 

差分对或差分放大器配置是模拟集成电路设计中使用最广泛的构建模块。 例如，每个运算放大器的输入级都是差分放大器。 此外，BJT 差分放大器是超高速逻辑电路系列的基础，在第 15 章中进行了研究，称为发射极耦合逻辑 (ECL)。

最初是在 1940 年代发明的，用于真空管，基本的差分放大器配置随后用分立的双极晶体管实现。 然而，正是集成电路的出现使得差分对在双极和 MOS 技术中都非常流行。 差分放大器非常适合 IC 制造有两个原因：首先，正如我们将很快看到的，差分对的性能关键取决于电路两侧之间的匹配。 集成电路制造能够提供匹配的设备，其参数跟踪环境条件的广泛变化范围。 其次，就其本质而言，差分放大器比单端电路使用更多的组件（接近两倍）。 在这里，读者会再次回忆起第 8.1 节中的讨论，集成电路技术的一个显著优势是以相对较低的成本提供大量晶体管。

我们假设读者熟悉第 2.1 节中介绍的差分放大器的基本概念。 尽管如此，还是值得回答这个问题：为什么要差异化？基本上，优先使用差分而不是单端放大器有两个原因。第一个原因是差分放大器相较于单端放大器对噪声十分不敏感，为了理解这一点，将携带小差分信号的两根导线视为两根导线之间的电压差。 现在，假设有一个干扰信号以电容或电感方式耦合到两根导线。 由于两根导线在物理上靠得很近，因此两根导线上（即两根导线中的每根导线与地之间）的干扰电压将相等。 因为，在差分系统中，只检测两根导线之间的差分信号，所以不会包含干扰成分！

首选差分放大器的第二个原因是，差分配置使我们能够偏置放大器并将放大器级耦合在一起，而无需旁路和耦合电容器，例如分立电路放大器设计中使用的电容器（第 7.5 节）。 这是差分电路非常适用于无法经济地制造大电容器的 IC 制造的另一个原因。

本章的主要主题是 MOS 和双极实施中的差分放大器。 正如将要看到的，差分放大器的设计和分析大量使用了第 7 章和第 8 章中介绍的有关单级放大器的材料。我们将通过实际多级放大器的示例来跟踪差分放大器的研究，同样对 MOS 和 双极技术适用。

### 9.1 The MOS Differential Pair

图 9.1 显示了基本的 MOS 差分对配置。 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607205240304.png" alt="image-20210607205240304" style="zoom:67%;" />

它由两个匹配的晶体管 $Q_1$ 和 $Q_2$ 组成，其源极连接在一起并由恒流源 $I$ 偏置。后者通常由第 8.2 和 8.5 节中研究的类型的 MOSFET 电路实现。 目前，我们假设电流源是理想的，并且具有无穷大的输出电阻。 虽然每个漏极都显示为通过电阻 $R_D$ 连接到正偏置电源，但在大多数情况下，使用有源（电流源）负载，稍后将看到。 然而，我们暂时将解释利用简单电阻负载的差分对操作的本质。 无论使用何种类型的负载，MOSFET 均不得进入三极管工作区域

##### 9.1.1 Operation with a Common-Mode Input Voltage

要了解差分对如何工作，首先考虑在两个栅极端子上施加相等电压 $V_{CM}$ 的情况。 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607205900402.png" alt="image-20210607205900402" style="zoom:67%;" />

即，如图 9.2 所示，$v_{G1} =v_{G2} =V_{CM}$。 由于 $V_{CM}$ 为两个输入端共用，因此称为共模电压。 由于 $Q_1$ 和 $Q_2$ 匹配，因此电流 $I$ 将在两个晶体管之间平均分配。 因此，$i_{D1}$ $= i_{D2} = I/2$，源极电压 $V_S$ 为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607205813357.png" alt="image-20210607205813357" style="zoom:67%;" />

其中 $V_{GS}$ 是对应于 $I/2$ 漏电流的栅源电压。 忽略通道长度调制，$V_{GS}$ 和 $I/2$ 的关系为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607213645740.png" alt="image-20210607213645740" style="zoom:67%;" />

或者写成过驱动电压的形式

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607213729963.png" alt="image-20210607213729963" style="zoom:67%;" />

因此两侧的漏极电势大小为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607213835525.png" alt="image-20210607213835525" style="zoom:67%;" />

因此，两个漏极之间的电压差将为零。

现在，让我们改变共模电压 $V_{CM}$ 的值。 我们看到，只要 $Q_1$ 和 $Q_2$ 保持在饱和区，电流 $I$ 就会在 $Q_1$ 和 $Q_2$ 之间平均分配，并且漏极电压不会改变。 因此，差分对不响应（即拒绝）共模输入信号

差分放大器的一个重要规格是其输入共模范围。这是差分对正常工作的 $V_{CM}$ 范围。  $V_{CM}$ 的最高值受限于 $Q_1$ 和 $Q_2$ 保持饱和的要求，因此 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607214239888.png" alt="image-20210607214239888" style="zoom:67%;" />

$V_{CM}$ 的最低值取决于允许电流源 $I$ 两端有足够的电压以使其正常运行的需要。 如果电流源两端需要电压 $V_{CS}$，则

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607214433642.png" alt="image-20210607214433642" style="zoom:67%;" />

##### 9.1.2 Operation with a Differential Input Voltage

接下来，我们通过将 $Q_2$ 的栅极接地（即设置 $v_{G2} = 0$）并向 $Q_1$ 的栅极施加信号 $v_{id}$ 来施加差分或差分输入电压，如图 9.4 所示。 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607214623743.png" alt="image-20210607214623743" style="zoom:67%;" />

我们可以看到，由于 $v_{id} = v_{GS1} – v_{GS2}$，如果 $v_{id}$ 为正，则 $v_{GS1}$ 将大于 $v_{GS2}$，因此 $i_{D1}$ 将大于 $i_{D2}$，并且差分输出电压 $(v_{D2} – v_{D1})$ 将为正。 另一方面，当$v_{id}$为负时，$v_{GS1}$会低于$v_{GS2}$，$i_{D1}$会小于$i_{D2}$，相应地$v_{D1}$会高于$v_{D2}$； 换句话说，差分或差分输出电压 $(v_{D2} – v_{D1})$ 将为负值。

从上面可以看出，差分对通过在两个漏极之间提供相应的差分输出信号来响应差模或差分输入信号。 此时，计算使整个偏置电流 $I$ 流入两个晶体管之一的 $v_{id}$ 值是有用的（即此时另外一个晶体管的源极电流大小为零）。 在正方向上，当 $v_{GS1}$ 达到对应于 $i_{D1}$ $= I$ 的值时会发生这种情况，并且 $v_{GS2}$ 减小到等于阈值电压 $V_t$ 的值，此时 $v_S =-V_t$ 。  $v_{GS1}$ 的值可以从

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607215536843.png" alt="image-20210607215536843" style="zoom:67%;" />

计算得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607215558710.png" alt="image-20210607215558710" style="zoom:67%;" />

其中 $V_{OV}$ 是对应于 $I/2$ 漏极电流的过驱动电压（公式 9.5）。 因此，整个偏置电流 $I$ 被引导到 $Q_1$ 时的 $v_{id}$ 值是

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607215721400.png" alt="image-20210607215721400" style="zoom:67%;" />

如果 $v_{id}$ 增加超过 $√ 2V_{OV}$ ，$i_{D1}$ 保持等于 $I$，$v_{GS1}$ 保持等于 $(V_t + √ 2V_{OV} )$，$v_S$ 相应上升，从而保持 $Q_2$ 关闭。 以类似的方式，我们可以证明在负方向上，当 $v_{id}$ 达到 $− √ 2V_{OV}$ 时，$Q_1$ 关断，$Q_2$ 传导整个偏置电流 $I$。因此，可以通过改变 $v_{id}$ 将电流 $I$ 从一个晶体管引导到另一个晶体管,两侧晶体管的源极都有电流的信号电压范围是

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210607220144744.png" alt="image-20210607220144744" style="zoom:67%;" />

它定义了差模信号可以被有效区分出来的范围。 最后，请注意我们已经假设 $Q_1$ 和 $Q_2$ 保持饱和，即使其中一个正在传导整个电流 $I$

为了将差分对用作线性放大器，我们将差分输入信号 $v_{id}$ 保持得很小。 结果，其中一个晶体管（当 $v_{id}$ 为正时为 $Q_1$）中的电流将增加一个增量 $\Delta I$，该增量与 $v_{id}$ 成正比，达到 $(I/2+ \Delta I)$。 同时，另一个晶体管中的电流将减少相同的量，变为 $(I/2 – \Delta I)$。 电压信号 $–\Delta  IR_D$ 在其中一个漏极产生，而相反极性的信号 $\Delta IR_D$ 在另一个漏极产生。因此，两个漏极之间的输出电压将为 $2\Delta I R_D$ ，它与差分输入信号 $v_{id}$ 成正比。 差分对的小信号操作将在第 9.1.4 节中详细研究。

##### 9.1.3 Large-Signal Operation

我们现在将根据输入差分信号 $v_{id} ≡v_{G1} – v_{G2}$ 推导出漏极电流 $i_{D1}$ 和 $i_{D2}$ 的表达式。并且处于简单考虑，我们假设差分对中的两个晶体管是完全匹配的并且忽略通道调制效应。因此，这些表达式不依赖于连接漏极的电路的细节，我们没有在图 9.5 中显示这些连接； 我们简单地假设电路始终将 $Q_1$ 和 $Q_2$ 保持在工作饱和区。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608141106101.png" alt="image-20210608141106101" style="zoom:67%;" />

首先，我们将 $Q_1$ 和 $Q_2$ 的漏极电流表示为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608141211535.png" alt="image-20210608141211535" style="zoom:67%;" />

取每个方程两边的平方根，我们得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608141303354.png" alt="image-20210608141303354" style="zoom:67%;" />

两式相减，并代入下式

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608141354090.png" alt="image-20210608141354090" style="zoom:67%;" />

我们得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608141450251.png" alt="image-20210608141450251" style="zoom:67%;" />

此外，从下方电路的恒流源处，有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608141622594.png" alt="image-20210608141622594" style="zoom:67%;" />

用此关系代换并求解上面的方程，我们可以得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608141714412.png" alt="image-20210608141714412" style="zoom:67%;" />

再次代换

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608141743721.png" alt="image-20210608141743721" style="zoom:67%;" />

对于式子中的正负号，我们可以根据实际情况赋给两个漏极电流，在这里我们假设

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608141836514.png" alt="image-20210608141836514" style="zoom:67%;" />

以及

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608141900647.png" alt="image-20210608141900647" style="zoom:67%;" />

在偏置（静止）点（即没有外部信号电压输入，仅存在偏置电压的情况），$v_{id} = 0$，导致

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608142145249.png" alt="image-20210608142145249" style="zoom:67%;" />

对应的

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608142205685.png" alt="image-20210608142205685" style="zoom:67%;" />

其中

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608142431187.png" alt="image-20210608142431187" style="zoom:67%;" />

这种关系使我们能够替换方程中的 $k_ n'(W/L$)和$I/V^2_{ OV}$ 以另一种形式表达 $i_{D1}$ 和 $i_{D2}$

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608142412626.png" alt="image-20210608142412626" style="zoom:67%;" />

这两个方程描述了对电流 $i_{D1}$ 和 $i_{D2}$ 施加差分输入信号 $v_{id}$ 的影响。 它们可用于获得归一化图，即 $i_{D1}/I 和 i_{D2}/I$ 与 $v_{id} /V_{OV}$ 的关系，如图 9.6 所示。 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608143132334.png" alt="image-20210608143132334" style="zoom:67%;" />

请注意，在 $v_{id} = 0$ 时，两个电流等于 $I/2$。 使 $v_{id}$ 为正值会导致 $i_{D1}$ 增加，$i_{D2}$ 等量减少，以保持总和不变，$i_{D1} + i_{D2} = I$。正如我们之前发现的，当 $v_{id}$ 达到值 $\sqrt{2}V_{OV}$ 时，电流完全进入 $Q_1$。 对于 $v_{id}$ 为负值的情况，可以通过互换 $i_{D1}$ 和 $i_{D2}$ 做出相同的陈述。 在这种情况下，$v_{id} =− \sqrt{2}V_{OV}$ 将电流完全引导到 $Q_2$。 最后，请注意图 9.6 中的图是通用的，因为它们适用于任何 MOS 差分对。

可以看到上述传递方程明显是非线性的，这是由于式子中存在$v_{id}^2$这一项。 由于我们对从差分对获得线性放大感兴趣，我们将努力使该项尽可能小。 对于给定的 $V_{OV}$ 值，我们唯一能做的就是保持 $(v_{id}/2)$ 远小于 $V_{OV}$ ，这是小信号近似的条件。 它导致

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608143743259.png" alt="image-20210608143743259" style="zoom:67%;" />

以及

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608143949405.png" alt="image-20210608143949405" style="zoom:67%;" />

正如预期的那样，这表明 $i_{D1}$ 增加了一个增量 $i_d$ ，而 $i_{D2}$ 减少了相同的数量 $i_d$ ，其中 $i_d$ 与差分输入信号 $v_{id}$ 成正比，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608144107031.png" alt="image-20210608144107031" style="zoom:67%;" />

回顾我们在第 7 章中对 MOSFET 放大器的研究（也可参阅附录 G 中的表 G.3），在电流 $I_D$ 偏置的 MOSFET 具有跨导 $g_m = 2I_D/V_{OV}$ ，我们可以将方程中的 $(I/V_{OV}$ ) 认为是 $Q_1$ 和 $Q_2$ 在 $I_D = I/2$ 处偏置所产生的跨导参数。 那为什么后一项是 $v_{id}/2$？ 仅仅是因为 $v_{id}$ 在 $v_{gs1} =v_{id}/2$ 和 $v_{gs2} =−v_{id}/2$ 的两个设备之间平均分配，使$Q_1$具有电流增量$i_d$，而$Q_2$具有电流减量$i_d$

然而，此时我们希望回到原来的表达式（精确的）并注意到，对于给定的 $v_{id}$，线性度可以通过增加 $Q_1$ 和 $Q_2$ 中的每一个工作的过驱动电压 $V_{OV}$ 来增加。 这可以通过使用较小的 $W/L$ 比来实现。 其代价是 $g_m$ 的降低，因此在电压增益大小上有所降低。 在这方面，我们观察到图 9.6 的归一化图虽然紧凑，但掩盖了这种设计自由度。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608144954286.png" alt="image-20210608144954286" style="zoom:67%;" />

图 9.7 显示了不同 $V_{OV}$ 值下 $i_{D_{1,2}}/I$ 与 $v_{id}$ 的关系图。这些图清楚地说明了通过改变 $V_{OV}$ 值获得的线性-跨导折衷：可以通过以更高的 $V_{OV}$（通过使用较小的 $W/L$ 比）操作 MOSFET 来扩展线性操作范围，但代价是降低 $g_m$ 。

这种权衡基于偏置电流 $I$ 保持恒定的假设。 当然，可以增加偏置电流以获得更高的 $g_m$。 然而，这样做的代价是增加了功耗，这是 IC 设计的一个严重限制。

##### 9.1.4 Small-Signal Operation

在本节中，我们基于对差分对基本操作的理解，并详细考虑其作为线性放大器的操作

**Differential Gain**

图 9.8(a) 显示了具有以下输入电压的 MOS 差分放大器

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608145423408.png" alt="image-20210608145423408" style="zoom:67%;" />

此处，$V_{CM}$ 表示差分放大器输入共模范围内的共模直流电压。 需要它来设置 MOSFET 栅极的直流电压

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608145505398.png" alt="image-20210608145505398" style="zoom:67%;" />

一般来说，共模电压是电源电压的中值，在我们的情况中，其值为零

差分输入信号$v_{id}$以互补（或平衡）方式施加； 也就是说，假如$v_{G1}$ 增加了 $v_{id}/2$，$v_{G2}$ 就会减少 $v_{id}$$/2$。 例如，如果一个差分放大器的输入电压是从另一个差分放大器级的输出馈入的，就会出现这种情况。 然而，有时差分输入以单端方式应用，正如我们之前在图 9.4 中看到的那样。 由此产生的性能差异对于我们当前的需求来说太微妙了。

如图 9.8(a) 所示，放大器输出可以在一个漏极和地之间或两个漏极之间进行。 在第一种情况下，由此产生的单端输出 $v_{o1}$ 和 $v_{o2}$ 将被驼载于漏极所处的直流偏置电压 $V_{DD} −\frac  I 2R_D$ 之上。当输出取自两个漏极之间的电势差时，情况并非如此； 产生的差分输出 $v_{od}$（具有 0-V 直流分量）将完全是一个信号分量。

我们很快就会看到，以差分方式获取输出电压还有其他显著优势。我们现在的目标是分析图 9.8(a) 中差分放大器的小信号操作，以确定其响应差分输入信号 $v_{id}$ 的电压增益。为此，我们在图 9.8(b) 中展示了电源接地、偏置电流源 I 被移除、VCM 被移除的电路； 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608150459562.png" alt="image-20210608150459562" style="zoom:67%;" />

即，仅指示信号量。 暂时我们将忽略 MOSFET $r_o$ 的影响。 最后请注意，$Q_1$ 和 $Q_2$ 均以 $I/2$ 的直流电流偏置，并在过驱动电压 $V_{OV}$ 下工作。

从电路的对称性以及由于 $v_{id}$ 的馈入方式，我们观察到联合源连接处的信号电压必须为零，充当一种虚拟接地。 因此，$Q_1$ 具有栅极到源极电压信号 $v_{gs1} = v_{id}/2$，而 $Q_2$ 为 $v_{gs2} =-v_{id}/2$。 假设 $v_{id}/2<< V_{OV}$ ，因此满足小信号近似的条件，导致 $Q_1$ 和 $Q_2$ 漏极电流的变化将分别与 $v_{gs}1$ 和 $v_{gs}2$ 成正比。 因此，$Q_1$ 的漏极电流增量为 $g_m(v_{id}/2)$，$Q_2$ 的漏极电流增量为 $g_m(v_{id}/2)$，其中 $g_m$ 表示两个器件的跨导相等，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608151118101.png" alt="image-20210608151118101" style="zoom:67%;" />

这些结果对应于之前使用大信号传输特性和施加小信号条件获得的结果。 为了进一步说明差分放大器的小信号操作，我们在图 9.8(c) 中显示了通过用相应的 T 模型替换每个 MOSFET 获得的等效电路。 同时我们也敦促读者研究图 9.8(b) 和 9.8(c) 中各元件和参数之间的对应关系。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608151420655.png" alt="image-20210608151420655" style="zoom:67%;" />

在这一点上再次观察到在晶体管的源极端子上建立信号接地很有用，而无需使用大旁路电容器，这显然是差分对配置的主要优点。

差分对操作的本质是在漏极提供互补电流信号； 我们如何处理由此产生的一对互补电流信号，从某种意义上说，是一个另一个的问题。 当然，这里我们只是简单地将两个电流信号通过一对匹配电阻 $R_D$，从而获得漏极电压信号

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608151510738.png" alt="image-20210608151510738" style="zoom:67%;" />

和

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608151526756.png" alt="image-20210608151526756" style="zoom:67%;" />

如果以单端方式获取输出，则所得增益变为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608151559697.png" alt="image-20210608151559697" style="zoom:67%;" />

或者

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608151619541.png" alt="image-20210608151619541" style="zoom:67%;" />

或者，如果以差分方式获取输出，则增益变为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608151656964.png" alt="image-20210608151656964" style="zoom:67%;" />

因此，差分输出的另一个优点是增益增加了 2 倍 (6 dB)。 然而，应该注意的是，虽然差分输出是首选，但在某些应用中需要单端输出。 稍后我们将对此有更多要说的。

图 9.9 说明了查看差分对响应差分输入信号 $v_{id}$ 的操作的另一种有用方式。 在这里，我们利用这样一个事实，即从源极看，MOSFET 的栅极和源极之间的电阻为 $1/g_m$。 因此，在 $G_1$ 和 $G_2$ 之间，源电路中的总电阻为 $2/g_m$。 因此，我们只需将 $v_{id}$ 除以 $2/g_m$ 即可获得当前 $i_d$，如图所示。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608151737892.png" alt="image-20210608151737892" style="zoom:67%;" />

**The Differential Half-Circuit**

当对称差分放大器以平衡方式馈入差分信号时，如图 9.8 所示，性能可以通过仅考虑一半电路来确定。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608160253965.png" alt="image-20210608160253965" style="zoom:67%;" />

等效差分半电路如图 9.10 所示。它有一个接地源，这是差分对中 MOSFET 的公共源极端子上出现的虚拟接地的结果。 请注意，$Q_1$ 在 $(I/2)$ 的漏极偏置电流和过驱动电压 $V_{OV}$ 下运行。不难得出

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608160958631.png" alt="image-20210608160958631" style="zoom:67%;" />

更重要的是，差分增益的频率响应可以通过分析半电路来确定，我们将在第 10 章中进行。

##### Example 9.2

给出图9.11(a)所示的差分放大器的差分半电路。 假设 $Q_1$ 和 $Q_2$ 完全匹配。 忽略 $r_o$，确定差分电压增益 $A_d ≡ v_{od} /v_{id}$ 。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608161133045.png" alt="image-20210608161133045" style="zoom:67%;" />

解：

由于该电路是对称的并且以互补方式馈入 $v_{id}$，所以差分半电路将如图 9.11(b) 所示。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608161313560.png" alt="image-20210608161313560" style="zoom:67%;" />

观察到，因为对称线穿过 $R_L$ 的中间，所以半电路有一个电阻 $R_L/2$ 连接在漏极和地之间。 另请注意，虚拟接地出现在两个电阻 $R_s$ 之间的节点上。其结果会导致半电路具有源极负反馈电阻$R_s$。

现在，忽略半电路晶体管 $Q_1$ 的 $r_o$，我们可以得到增益为漏极总电阻与源极总电阻之比为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608161609283.png" alt="image-20210608161609283" style="zoom:67%;" />

换言之

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608161623729.png" alt="image-20210608161623729" style="zoom:67%;" />

##### 9.1.5 The Differential Amplifier with Current-Source Loads

为了获得更高的增益，无源电阻 $R_D$ 可以用电流源代替，如图 9.12（a）所示。 这里的电流源是通过 PMOS 晶体管 $Q_3$ 和 $Q_4$ 实现的，$V_G$ 是直流偏置电压，可确保 $Q_3$ 和 $Q_4$ 各自传导等于 $I/2$ 的电流。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608162722678.png" alt="image-20210608162722678" style="zoom:67%;" />

 差分电压增益 $A_d$ 可以从图 9.12(b) 所示的差分半电路中找到：

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608162815570.png" alt="image-20210608162815570" style="zoom:67%;" />

长尾对（长尾式差分电路）：B. C. P. Matthews 于 1934 年在《物理学会学报》中首次记录了使用真空管的想法，并在 1930 年代后期由其他人进一步发展。 拓扑只是差分对的拓扑，其中术语“长尾”指的是偏置电流源，它最初使用大值（因此很长）电阻。 有趣的是，在电噪声环境中测量生物电位的第一个应用仍然是使用 MOS 器件的现代医疗仪器中的重要应用。

##### 9.1.6 Cascode Differential Amplifier

利用 8.5 节中研究的共源共栅配置可以增加差分放大器的增益。 图 9.13(a) 显示了一个 CMOS 差分放大器，通过晶体管 $Q_3$ 和 $Q_4$ 将共源共栅应用于放大晶体管 $Q_1$ 和 $Q_2$，并通过晶体管 $Q_5$ 和 $Q_6$ 应用于电流源晶体管 $Q_7$ 和 $Q_8$。 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608184803198.png" alt="image-20210608184803198" style="zoom:67%;" />

差分电压增益可以从图 9.13(b) 所示的差分半电路中找到：

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608184823111.png" alt="image-20210608184823111" style="zoom:67%;" />

其中

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608185210274.png" alt="image-20210608185210274" style="zoom:67%;" />

并且

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608185251452.png" alt="image-20210608185251452" style="zoom:67%;" />

### 9.2 The BJT Differential Pair

图 9.14 显示了基本的 BJT 差分对配置。 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608185605764.png" alt="image-20210608185605764" style="zoom:67%;" />

它与 MOSFET 电路非常相似，由两个匹配的晶体管 Q1 和 $Q_2$ 组成，它们的发射极连接在一起并由恒流源 $I$ 偏置。后者通常由第 8.2 和 8.6节中研究的晶体管电路实现 。 虽然每个集电极都显示为通过电阻 $R_C$ 连接到正电源电压 $ V_{CC}$，但这种连接对于差分对的操作不是必需的——也就是说，在某些应用中，两个集电极可能连接到电流源而不是电阻负载。 但是，集电极电路必须使 $Q_1$ 和 $Q_2$ 永远不会进入饱和状态。

##### 9.2.1 Basic Operation

要了解 BJT 差分对的工作原理，首先考虑施加到两个输入端子的共模电压 $V_{CM}$ 的情况。 即，如图 9.15(a) 所示，$v_{B1} = v_{B2} = V_{CM}$。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608185631233.png" alt="image-20210608185631233" style="zoom:67%;" />

由于 $Q_1$ 和 $Q_2$ 匹配，并假设理想偏置电流源 $I$ 具有无限输出电阻，因此电流 $I$ 将保持恒定，并且根据对称性，$I$ 将在两个器件之间平均分配。 因此，$i_{E1} = i_{E2} = I/2$，发射极电压将为 $V_{CM} - V_{BE}$，其中 $V_{BE}$ 是基极-发射极电压 [假设在图 9.15(a) 中约为 0.7 V]，对应于的发射极电流为 $I/2$。 每个集电极的电压为 $V_{CC} − 1 /2αIR_C$，两个集电极之间的电压差为零。

现在让我们改变共模输入电压 $V_{CM}$ 的值。 显然，只要 $Q_1$ 和 $Q_2$ 保持在有源区，并且电流源 $I$ 两端有足够的电压来正常工作，电流 $I$ 仍然会在 $Q_1$ 和 $Q_2$ 之间平均分配，集电极上的电压不会改变。 因此，差分对不会响应共模输入电压的变化。

作为另一个实验，让电压 $v_{B2}$ 设置为一个恒定值，比如零（通过将 $B_2$ 接地），并让 $v_{B1} =+1 V$ [见图 9.15(b)]。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608190145880.png" alt="image-20210608190145880" style="zoom:67%;" />

发射极必须在大约 $+0.3 V$，这使 $Q_2$ 的 EBJ 保持反向偏置。 集电极电压将为 $v_{C1} = V_{CC} -αIR_C$ 和 $v_{C2} = V_{CC}$。

现在让我们将 $v_{B1}$ 更改为 $–1 V$ [图。  9.15(c)]。 再次通过推理可以看出 $Q_1$ 将关闭，$Q_2$ 将承载所有电流 $I$。公共发射极将处于 $–0.7 V$，这意味着 $Q_1$ 的 EBJ 将反向偏置 0.3 V。集电极电压将为 $v_{C1} = V_{CC}$ 和 $v_{C2} = V_{CC} -αIR_C$。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608190604869.png" alt="image-20210608190604869" style="zoom:67%;" />

从上文中，我们看到差分对肯定会响应差模（或差分）信号。 事实上，通过相对较小的电压差，我们能够将整个偏置电流从对的一侧引导到另一侧。 差分对的这种电流控制特性使其可用于逻辑电路，这将在第 15 章中进行演示。

为了将 BJT 差分对用作线性放大器，我们施加一个非常小的差分信号（几毫伏），这将导致其中一个晶体管传导 $I/2+ \Delta I$ 的电流； 另一个晶体管中的电流将为 $I/2− \Delta I$，其中 $I$ 与输入电压差成正比（见图 9.15(d)）。 两个集电极之间的输出电压为 $2α \Delta IR_C$，与差分输入信号 $v_i$ 成正比。 稍后将研究差分对的小信号操作。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608190819634.png" alt="image-20210608190819634" style="zoom:67%;" />

##### 9.2.2 Input Common-Mode Range

共模输入信号的大小必须被限制在可以使晶体管稳定在工作态的电压范围内，因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608191430120.png" alt="image-20210608191430120" style="zoom:67%;" />

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608191542627.png" alt="image-20210608191542627" style="zoom:67%;" />

##### 9.2.3 Large-Signal Operation

我们现在对图 9.14 的 BJT 差分对进行一般分析。 如果我们用 $v_E$ 表示共发射极的电压并忽略厄尔效应，则应用到两个晶体管中的每一个的指数关系可以写成

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608191920308.png" alt="image-20210608191920308" style="zoom:67%;" />

合并这两个式子，可以得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608192313932.png" alt="image-20210608192313932" style="zoom:67%;" />

因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608192435677.png" alt="image-20210608192435677" style="zoom:67%;" />

此外在该电路中我们也能写出

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608192502496.png" alt="image-20210608192502496" style="zoom:67%;" />

因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608192530755.png" alt="image-20210608192530755" style="zoom:67%;" />

集电极电流 $i_{C1}$ 和 $i_{C2}$ 可以简单地通过将方程中的发射极电流乘以$α$来获得。差分放大器的基本运行方式已经由上面两式表明。首先，请注意放大器仅对差分电压 $v_{id}$ 做出响应。 也就是说，如果 $v_{B1} = v_{B2} = V_{CM}$，则无论共模电压 $V_{CM}$ 的值如何，电流 $I$ 都只会在两个晶体管之间均分。 这就是差分放大器操作的本质，也因此而得名。

另一个重要的观察结果是，相对较小的电压差 $v_{id}$ 将导致电流 $I$ 几乎完全在两个晶体管中的一个中流动。 图 9.16 显示了两个集电极电流（假设 $α\simeq 1$）作为差分输入信号的函数图。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608193430205.png" alt="image-20210608193430205" style="zoom:67%;" />

这是一个可以普遍使用的归一化图。 观察到大约 $4V_T ($$100 mV$) 的电压差足以将电流几乎完全切换到 BJT 对的一侧。 请注意，这远小于 MOS 对的相应电压 $\sqrt{2} V_{OV}$ 。如此小的信号可以将电流从 BJT 差分对的一侧切换到另一侧，这意味着 BJT 差分对可以用作快速电流开关（第 15 章）。

差分对的非线性传输特性，如图 9.16 所示，本章将不再进一步使用。 相反，在下文中，我们将特别关注差分对作为小信号放大器的应用。 为此，差分输入信号被限制为小于大约 $V_T /2$，以便我们可以在中点 $x$ 附近的特性的线性段上进行操作（图 9.16）。

在离开差分 BJT 对的大信号操作之前，我们希望指出一种经常用于扩展线性操作范围的有效技术。 它包括与 $Q_1$ 和 $Q_2$ 的发射极串联的两个相等的电阻 $R_e$。如下图所示

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608193743326.png" alt="image-20210608193743326" style="zoom:67%;" />

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608193822724.png" alt="image-20210608193822724" style="zoom:67%;" />

图 9.17(b) 中描绘了三种不同 $R_e$ 值的最终传递特性。 观察到线性范围的扩展是以降低 $G_m$（即 $v_{id} = 0$ 处的传递曲线的斜率）并因此降低增益为代价的。这个结果应该不足为奇。 此处 $R_e$ 的表现与发射极退化的 CE 放大器中发射极电阻 $R_e$ 的表现完全相同（参见第 7.3.4 节）。

最后，我们还注意到，这种线性化技术实际上是 MOS 差分对采用的技术的双极对应物（图 9.7）。 然而，在后一种情况下，$V_{OV}$ 是通过改变晶体管的 $W/L$ 比来改变的，这是一种在 BJT 中没有对应的设计工具。

##### 9.2.4 Small-Signal Operation

本节我们研究 BJT 差分对在小信号放大中的应用。 图 9.18 显示了 BJT 差分对，在两个基极之间施加了差分电压信号 $v_{id}$。 这意味着输入端的直流电平——即共模输入电压——已经以某种方式建立起来。 例如，两个输入端子中的一个可以接地，并将 $v_{id}$ 施加到另一个输入端子。 或者，差分放大器可以从另一个差分放大器的输出馈电。 在后一种情况下，其中一个输入端的电压为 $V_{CM} + v_{id}/2$，而另一个输入端的电压为 $V_{CM} - v_{id}/2$。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608194159835.png" alt="image-20210608194159835" style="zoom:67%;" />

**The Collector Currents When $v_{id}$ Is Applied**

对应于上面的电路图，我们结合上节得到的发射极电流计算式，有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608194323865.png" alt="image-20210608194323865" style="zoom:67%;" />

我们在分子和分母两侧同时乘以 $e^{v_{id}/2V_T}$，得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608194441444.png" alt="image-20210608194441444" style="zoom:67%;" />

假如输入差分电压远远小于热平衡电压，我们可以直接展开泰勒级数并保留前两项，得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608194555271.png" alt="image-20210608194555271" style="zoom:67%;" />

因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608194635400.png" alt="image-20210608194635400" style="zoom:67%;" />

同理我们也可以得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608194702502.png" alt="image-20210608194702502" style="zoom:67%;" />

上面两式告诉我们，当 $v_{id}$ $=0$ 时，偏置电流 $I$ 在该对的两个晶体管之间平均分配。 因此，每个晶体管以 $I/2$ 的发射极电流偏置。 当“小信号”$v_{id}$ 被差分应用时（即，在两个基极之间），$Q_1$ 的集电极电流增加 $i_c$，$Q_2$ 的集电极电流等量减少。 这可确保 $Q_1$ 和 $Q_2$ 中的总电流之和保持恒定(因为它们都受电流源偏置的约束)。 增量（或信号）电流分量 $i_c$ 由下式给出

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608194941875.png" alt="image-20210608194941875" style="zoom:67%;" />

上式有一个简单的解释。 首先，请注意电路的对称性（图 9.18），差分信号 $v_{id}$ 应该在两个晶体管的基极 - 发射极结之间平均分配。 因此总的基极-发射极电压将为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608195034340.png" alt="image-20210608195034340" style="zoom:67%;" />

其中 $V_{BE}$ 是对应于 $I/2$ 发射极电流的直流 $BE$ 电压。 因此，$Q_1$ 的集电极电流将增加 $g_mv_{id}/2$，而 $Q_2$ 的集电极电流将减少 $g_mv_{id}/2$。 这里 $g_m$ 表示 $Q_1$ 和 $Q_2$ 的跨导，它们相等并由下式给出

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608195217686.png" alt="image-20210608195217686" style="zoom:67%;" />

**An Alternative Viewpoint**

上面的结果有一个非常有用的替代解释。 假设电流源 $I$ 是理想的。 那么它的电阻将为无穷大。 因此电压 $v_{id}$ 出现在总电阻为 $2r_e$ 的两端，其中

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608201349703.png" alt="image-20210608201349703" style="zoom:67%;" />

因此，如下图所示，我们可以借此得到发射极电流的大小

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608201445284.png" alt="image-20210608201445284" style="zoom:67%;" />

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608201459092.png" alt="image-20210608201459092" style="zoom:67%;" />

因此，$Q_1$ 的集电极将表现出电流增量 $i_c$，而 $Q_2$ 的集电极将表现出电流减量 $i_c$：

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608201551977.png" alt="image-20210608201551977" style="zoom:67%;" />

请注意，在图 9.19(a) 中，我们仅显示了信号量。 当然，这意味着每个晶体管都以 $I/2$ 的发射极电流偏置。 为了更加强调，我们在图 9.19(b) 中显示了通过用其 T 模型替换每个 BJT 获得的等效电路。当发射极中包含电阻时，这种分析方法特别有用，如图 9.20 所示。 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608201739524.png" alt="image-20210608201739524" style="zoom:67%;" />

对于这个电路，我们有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608201818482.png" alt="image-20210608201818482" style="zoom:67%;" />

**Input Differential Resistance**

与具有无限输入电阻的 MOS 差分放大器不同，双极差分对表现出有限输入电阻，这是 BJT 有限 $β$ 的结果。输入差分电阻是两个基极之间的电阻； 也就是说，它是差分输入信号 $v_{id}$ 看到的电阻。 对于图中的差分放大器,可以看出当$Q_1$基极电流增加$i_b$时，$Q_2$基极电流会等量减少 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608202019838.png" alt="image-20210608202019838" style="zoom:67%;" />

因此我们也可以借此得出差分输入的输入电阻

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608202104344.png" alt="image-20210608202104344" style="zoom:67%;" />

这个结果只是对熟悉的电阻反射规则的重申：即，两个基极之间看到的电阻等于发射极电路中的总电阻乘以 $(β +1)$。 我们可以使用这个规则来找到图 9.20 中电路的输入差分电阻为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608202155100.png" alt="image-20210608202155100" style="zoom:67%;" />

**Differential Voltage Gain**

我们已经确定，对于小差异输入电压（$v_{id} <<2 V_T$ ；即 $v_{id}$ 小于约 20 mV），集电极电流由下式给出

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608202254771.png" alt="image-20210608202254771" style="zoom:67%;" />

其中

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608202307866.png" alt="image-20210608202307866" style="zoom:67%;" />

因此集电极处的电压大小应该为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608202342385.png" alt="image-20210608202342385" style="zoom:67%;" />

与 MOS 情况一样，双极差分放大器的输出电压信号可以采用差分方式（即，在两个集电极之间，$v_{od} = v_{c2} – v_{c1}$）。 差分放大器的差分增益将为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608202501695.png" alt="image-20210608202501695" style="zoom:67%;" />

对于发射极引线中带有电阻的差分放大器（图 9.20），差分增益由下式给出

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608202626185.png" alt="image-20210608202626185" style="zoom:67%;" />

这个公式很熟悉：它表明电压增益等于集电极电路中的总电阻 ($2R_C$) 与发射极电路中的总电阻 ($2r_e +2R_e$) 之比。

**The Differential Half-Circuit**

与MOS情况一样，BJT差分放大器的差分增益可以通过考虑其差分半电路来获得。 图9.21(a) 显示了由以互补（推挽或平衡）方式应用的差分信号 $v_{id}$ 馈送的差分放大器。 也就是说，当 $Q_1$ 的基电极电压升高 $v_{id}/2$ 时，$Q_2$ 的基电极电压就会相应降低 $v_{id}/2$。 我们还包括偏置电流源的输出电阻 $R_{EE}$。 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608203028740.png" alt="image-20210608203028740" style="zoom:67%;" />

根据对称性，发射极的信号电压为零。 因此，该电路等效于图 9.21(b) 中所示的两个共发射极放大器，其中两个晶体管中的每一个都以 $I/2$ 的发射极电流偏置。 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608203046425.png" alt="image-20210608203046425" style="zoom:67%;" />

请注意，电流源的有限输出电阻 $R_{EE}$ 不会影响电路的工作状态。 图 9.21(b) 中的等效电路仅适用于差分操作。在许多应用中，差分放大器不是以互补方式馈电的。在一些应用中，差分对采用的是单端馈电的形式，即只有一个晶体管的基极处有信号电压，而另一处则接地，如下图所示

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608203447444.png" alt="image-20210608203447444" style="zoom:67%;" />

在这种情况下，发射极的信号电压不会为零，因此电阻 $R_{EE}$ 将对电路的工作状态产生影响。 然而，如果 $R_{EE}$ 很大 $(R_{EE}>> r_e$)，通常情况下，$v_{id}$ 仍将在两个结之间等分（大约），如图 9.22 所示。 因此，在这种情况下差分放大器的工作状态将几乎与对称馈电情况下的工作状态相同，并且仍然可以采用共发射极的等效电路模型。

由于在图 9.21 中，$v_{o2} =-v_{o1} =v_{od}/2$，图 9.21(b) 中的两个共发射极晶体管产生了关于差分放大器性能的相似结果。 因此，只需分析差分放大器的差分小信号操作即可，称为差分半电路。 如果我们将输入$+v_{id}/2$ 的共发射极晶体管作为差分半电路，并用其低频混合π 等效电路模型替换晶体管，则得到图9.23 中的电路。 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608204114344.png" alt="image-20210608204114344" style="zoom:67%;" />

在评估模型参数 $r_π、g_m$ 和 $r_o$ 时，我们必须记住半电路偏置在 $I/2$。 差分放大器的电压增益等于半电路的电压增益——即$v_{o1}/(v_{id}/2)$。

在这里，我们注意到包括 $r_o$ 将修改方程中的增益表达式，可以得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608204224272.png" alt="image-20210608204224272" style="zoom:67%;" />

差分放大器的输入差分电阻是半电路的两倍，即 $2r_π$ 。 最后，我们注意到图 9.20 放大器的差分半电路是一个共发射极晶体管，发射极引线中有一个电阻 $R_e$。

##### Example 9.3

图 9.24 中的差分放大器使用 $β = 100$ 的晶体管。请计算

(a) 输入差分电阻 $R_{id}$ 。

(b) 整体差分电压增益 $v_{od} /v_{sig}$（忽略 $r_o$ 的影响）。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608204529261.png" alt="image-20210608204529261" style="zoom:67%;" />

(a).

使用差分半电路进行电路分析，不难得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608204738783.png" alt="image-20210608204738783" style="zoom:67%;" />

由于发射极和基极之间的电流大小存在差异，而信号是从基极馈入的，因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608204905160.png" alt="image-20210608204905160" style="zoom:67%;" />

(b).

首先是信号端到输入级的电压损失

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608204956911.png" alt="image-20210608204956911" style="zoom:67%;" />

接着利用之前得到的公式，有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608205034553.png" alt="image-20210608205034553" style="zoom:67%;" />

因此整体电压增益大小为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608205100971.png" alt="image-20210608205100971" style="zoom:67%;" />

### 9.3 Common-Mode Rejection

到目前为止，我们已经看到差分放大器响应差分输入信号并完全抑制共模信号。 后一点在我们讨论差分放大器的开始时就非常清楚地说明了，并在示例 9.1 中进行了说明，其中我们看到 $V_{CM}$ 即使在很宽的范围内变化也不会使两个漏极中任何一个电压产生变化。 在第 9.2.1 节中对 BJT 差分放大器演示了相同的现象。 然而，这个非常理想的结果是我们假设提供偏置电流 $I$ 的电流源是理想的结果。就像我们现在要展示的一样，电流源的有限电阻（现实情况）会导致共模电压增益并不为零

##### 9.3.1 The MOS Case

图 9.25(a) 显示了一个 MOS 差分放大器，它被一个具有输出电阻 $R_{SS}$ 的电流源偏置。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608205813089.png" alt="image-20210608205813089" style="zoom:67%;" />

和以前一样，输入端的直流电压由 $V_{CM}$ 定义。 然而，在这里，我们也有一个应用于两个输入端子的增量信号 $v_{icm}$。 这种共模输入信号可以代表一个干扰信号或噪声，它被两个输入端拾取，显然是不受欢迎的。 我们现在的目标是找出有多少 $v_{icm}$ 进入放大器的输出。

在确定放大器的共模增益之前，我们希望解决 $R_{SS}$ 对 $Q_1$ 和 $Q_2$ 偏置电流的影响问题。 也就是说，当 $v_{icm}$ 设置为零时，$Q_1$ 和 $Q_2$ 中的每一个中的偏置电流将不再是 $I/2$，而是大于 $I/2$，其量由 $V_{CM}$ 和 $R_{SS}$ 决定。 然而，由于 $R_{SS}$ 通常非常大，$Q_1$ 和 $Q_2$ 中的额外直流电流通常很小，我们将忽略它，因此假设 $Q_1$ 和 $Q_2$ 继续以 $I/2$ 的偏置电流工作。 读者可能还想知道 $R_{SS}$ 对差分增益的影响。 这里的答案很简单：当施加差分输入信号时，共源极端子上形成的虚拟接地导致通过 $R_{SS}$ 的信号电流为零； 因此 $R_{SS}$ 对 $A_d$ 的值没有影响。

要确定差分放大器对共模输入信号 $v_{icm}$ 的响应，请考虑图 9.25(b) 中的电路，其中我们用短路代替了 $V_{DD}$ 和 $V_{SS}$，用开路代替了 $I$。 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608210307389.png" alt="image-20210608210307389" style="zoom:67%;" />

该电路显然是对称的，因此两个晶体管将承载相等的信号电流，表示为 $i$。 我们用其 T 模型替换 $Q_1$ 和 $Q_2$ 中的每一个，并且为了简单起见，忽略 $r_o$，可以很容易地确定 $i$ 的值。 由此产生的等效电路如图 9.25(c) 所示。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608210450009.png" alt="image-20210608210450009" style="zoom:67%;" />

我们可以从中写出

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608210504416.png" alt="image-20210608210504416" style="zoom:67%;" />

因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608210600105.png" alt="image-20210608210600105" style="zoom:67%;" />

而两个漏极处的电压不难得到是

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608213802674.png" alt="image-20210608213802674" style="zoom:67%;" />

因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608213842270.png" alt="image-20210608213842270" style="zoom:67%;" />

因此，$v_{o1}$ 和 $v_{o2}$ 都将被共模信号 $v_{icm}$ 破坏，并且近似为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608213923422.png" alt="image-20210608213923422" style="zoom:67%;" />

其中我们假设 $2R_{SS}>> 1/g_m$。 尽管如此，由于 $v_{o1} = v_{o2}$，差分输出电压 $v_{od}$ 将保持不受共模干扰的影响：

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608214107472.png" alt="image-20210608214107472" style="zoom:67%;" />

因此电路仍然拒绝共模信号！ 然而不幸的是，如果电路不是完全对称的，情况就不会如此，正如我们现在将展示的那样。

在进一步进行之前，观察到仅考虑一半的差分放大器即可获得上述所有结果是有用的。 图 9.25(d) 显示了适用于共模分析的差分放大器的两个半电路。 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608214225970.png" alt="image-20210608214225970" style="zoom:67%;" />

要查看等效性，请观察两个半电路中的每一个确实承载由方程给出的电流 $i$。由于源极端子的电压相等 ($v_s = 2iR_{SS}$)。 因此可以将两个源连接起来，使电路恢复到图 9.25(b) 中的原始形式。 图 9.25(d) 中的每个电路都称为共模半电路。 请注意 CM 半电路和差分半电路之间的区别。

**Effect of $R_D$ Mismatch**

当两个漏极电阻出现失配 $\Delta R_D$ 时(这是不可避免地)，两个漏极的共模电压将不再相等。 相反，如果 $Q_1$ 的负载为 $R_D$，$Q_2$ 的负载为 $(R_D + \Delta R_D)$，则来自 $v_{icm}$ 的漏极信号电压将为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608214613496.png" alt="image-20210608214613496" style="zoom:67%;" />

并且

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608214633315.png" alt="image-20210608214633315" style="zoom:67%;" />

因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608214658402.png" alt="image-20210608214658402" style="zoom:67%;" />

因此我们也可以借此找到其共模增益

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608214740390.png" alt="image-20210608214740390" style="zoom:67%;" />

或者也可以写成以下的形式

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608214923309.png" alt="image-20210608214923309" style="zoom:67%;" />

因此，漏极电阻的失配会导致差分放大器具有有限的共模增益。 从而干扰或噪声信号 $v_{icm}$ 的一部分将作为 $v_{od}$ 的一个分量出现。 差分放大器在放大差模信号和抑制共模干扰方面的有效性的衡量标准是其差分增益幅度$|A_d |$ 和其共模增益的幅度$|A_{cm} |$的比值。该比值称为共模抑制比 (CMRR)。 因此，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608215202472.png" alt="image-20210608215202472" style="zoom:67%;" />

而我们通常以对数标度来计算这一比值

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608215240047.png" alt="image-20210608215240047" style="zoom:67%;" />

对于漏极电阻为 $R_D$ 且呈现失配 $\Delta R_D$ 的 MOS 差分放大器的情况，CMRR 可以通过直接代入此前得出的公式来得出

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608215433721.png" alt="image-20210608215433721" style="zoom:67%;" />

因此，为了获得高 CMRR，我们应该使用具有高输出电阻 $R_{SS}$ 的偏置电流源，并且我们应该努力在漏极电阻之间获得高度匹配（即，保持 $\Delta R_D/R_D$ 小）。

**Effect of $g_m$ Mismatch on CMRR**

MOS 差分对的两半之间的另一种可能失配是两个晶体管的 $g_m$ 失配。 为了找到 $g_m$ 不匹配对 CMRR 的影响，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608215627414.png" alt="image-20210608215627414" style="zoom:67%;" />

也就是

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608215642916.png" alt="image-20210608215642916" style="zoom:67%;" />

由于电路不再对称，我们不能使用共模半电路。相反，我们需要返回到图 9.25(a) 的原始电路并用其 T 等效电路模型替换 $Q_1$ 和 $Q_2$ 中的每一个。 我们将跳过分析并简单地呈现结果， 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608215754715.png" alt="image-20210608215754715" style="zoom:67%;" />

对应的共模抑制比为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608215827199.png" alt="image-20210608215827199" style="zoom:67%;" />

请注意，这两个表达式与 $R_D$ 不匹配情况下的相应表达式具有完全相同的形式。因此，在这种情况下，为了保持高 CMRR，我们必须使用具有高输出电阻 $R_{SS}$ 的偏置电流源，当然，还要努力保持 $Q_1$ 和 $Q_2$ 之间的高度匹配。

##### Example 9.4

在本例中，我们考虑为 MOS 差分放大器提供偏置电流的电流源设计。 假设要求实现 100 dB 的 CMRR，并假设 $Q_1$ 和 $Q_2$ 之间的唯一失配来源是其 $W/L$ 比的 2% 失配。 假设 $I = 200 μA$，并假设所有晶体管都在 $V_{OV} = 0.2 V$ 下运行。对于可用的 0.18-μm CMOS 制造工艺，$V_ A' = 5 V/μm$。 如果对 $I$ 使用简单的电流源，则需要多长的通道？ 如果使用共源共栅电流源，共源共栅中的两个晶体管需要多大的沟道长度？

解：

$W/L$ 中的不匹配会导致 $g_m$ 不匹配，这可以从 $g_m$ 的表达式中找到：

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608220216667.png" alt="image-20210608220216667" style="zoom:67%;" />

可以看出，$W/L$ 2% 的误差会导致 $g_m$ 的误差为 1%。 也就是说，$Q_1$ 和 $Q_2$ 的 $W/L$ 比率的 2% 不匹配将导致其 $g_m$ 值的 1% 不匹配。 由此产生的 CMRR 为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608220340703.png" alt="image-20210608220340703" style="zoom:67%;" />

因此我们可以得到一个方程

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608220412835.png" alt="image-20210608220412835" style="zoom:67%;" />

并且根据已经给出的参数，我们可以得出

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608220449106.png" alt="image-20210608220449106" style="zoom:67%;" />

从而

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608220513635.png" alt="image-20210608220513635" style="zoom:67%;" />

现在如果电流源是用单个晶体管实现的，它的 $r_o$ 必须是

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608220603583.png" alt="image-20210608220603583" style="zoom:67%;" />

因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608220624301.png" alt="image-20210608220624301" style="zoom:67%;" />



带入偏置电流的大小

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210608220655421.png" alt="image-20210608220655421" style="zoom:67%;" />

**Differential versus Single-Ended Output**

上述对共模抑制的研究是基于差分放大器的输出是差分获取的假设，即输出出现在在 $Q_1$ 和 $Q_2$ 的漏极之间。 在某些情况下，人们可能会决定使用单端输出； 也就是说取其中一个漏极和地面之间的电势差作为输出。 如果这样做，CMRR 会显着降低。 这可以从上面的分析中看出，如果输出采用差分方式，则在没有失配的情况下共模增益为零，如果输出采用单端方式，则共模增益是有限的。 当考虑晶体管之间本身存在的失配时，差分输出情况的 CM 增益偏离零，但仍远低于单端输出获得的值。

我们得出结论，要获得大的 CMRR，必须以差分方式获取差分放大器的输出。 第 9.5 节将研究在不损失 CMRR 的情况下将输出信号从差分信号转换为单端信号的主题。

##### 9.3.2 The BJT Case

我们可以以类似的方法来计算BJT电路构成的差分对的共模增益大小。 图 9.26 显示了具有输入共模信号 $v_{icm}$ 的双极差分放大器。 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609095813810.png" alt="image-20210609095813810" style="zoom:67%;" />

这里 $R_{EE}$ 是偏置电流源 $I$ 的输出电阻。我们希望找到由 $Q_1$ 和 $Q_2$ 的集电极 $v_{o1}$ 和 $v_{o2}$ 以及两个集电极 $v_{od}$ 之间的 $v_{icm}$ 产生的电压。 为此，我们使用图 9.26(b) 中所示的共模半电路(注：由于偏置电流大小仅是电流源电流大小的一半，因此假如我们要使偏置电压的大小不变，差分半电路中的$R_{EE}$大小应该变为原来的两倍）。 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609095936981.png" alt="image-20210609095936981" style="zoom:67%;" />

出现在 $Q_1$ 集电极响应 $v_{icm}$ 的信号 $v_{o1}$ 将是

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609100208843.png" alt="image-20210609100208843" style="zoom:67%;" />

同理

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609100318950.png" alt="image-20210609100318950" style="zoom:67%;" />

其中我们忽略了厄利效应带来的影响。因此共模信号带来的输出是

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609100347120.png" alt="image-20210609100347120" style="zoom:67%;" />

因此，虽然两个集电极上的电压将包含共模噪声或干扰成分，但输出差分电压将不受此类干扰。 然而，这种情况是基于差分放大器两侧完美匹配的假设。 任何不匹配都会导致 $v_{od}$ 获取与 $v_{icm}$ 成比例的分量。 例如，两个集电极电阻之间的不匹配 $\Delta R_C$ 导致

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609100527518.png" alt="image-20210609100527518" style="zoom:67%;" />

参考场效应管电路中的分析，我们得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609100601020.png" alt="image-20210609100601020" style="zoom:67%;" />

而其共模抑制比也同样定义为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609100632497.png" alt="image-20210609100632497" style="zoom:67%;" />

因此我们得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609100657292.png" alt="image-20210609100657292" style="zoom:67%;" />

这在形式上类似于 MOS 对 [Eq.  (9.83)]。 因此，为了获得高 CMRR，我们将电流源设计为具有大输出电阻 $R_{EE}$ 并努力实现集电极电阻的紧密匹配

**Common-Mode Input Resistance**

共模输入电阻 $R_{icm}$ 的定义如图 9.27(a) 所示。 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609100808731.png" alt="image-20210609100808731" style="zoom:67%;" />

图 9.27(b) 显示了等效的共模半电路； 其输入电阻为$2R_{icm}$。  $2R_{icm}$ 的值可以通过分析图 9.27(b) 的电路并考虑 $r_o$ 来确定（因为 $R_{EE}$ 和 $R_C$ 可以等于或大于 $r_o$）。 分析简单但乏味，不难得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609101046595.png" alt="image-20210609101046595" style="zoom:67%;" />

### 9.4 DC Offset

由于差分放大器直接耦合并且在直流时具有有限增益，因此它们会遇到许多直流问题。 在本节中，我们研究其中的一些。

##### 9.4.1 Input Offset Voltage of the MOS Differential Amplifier

考虑两个输入都接地的基本 MOS 差分放大器，如图 9.28(a) 所示。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609101249424.png" alt="image-20210609101249424" style="zoom:67%;" />

 如果差分对的两侧完全匹配（即 $Q_1$ 和 $Q_2$ 相同且 $R_{D1} = R_{D2} = R_D$），则电流 $I$ 将在 $Q_1$ 和 $Q_2$ 之间平均分配，$V_O$ 将为零。 但实际电路表现出不匹配，即使两个输入都接地，也会导致产生直流输出电压 $V_O$。 我们称 $V_O$ 为输出直流偏移电压。 更常见的是，我们将 $V_O$ 除以放大器的差分增益 $A_d$ ，以获得称为输入失调电压 $V_{OS}$ 的量

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609101436884.png" alt="image-20210609101436884" style="zoom:67%;" />

我们可以看到，如果我们在差分放大器的输入端之间施加一个电压 -VOS，那么输出电压将降低到零 [见图 9.28(b)]。 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609101510525.png" alt="image-20210609101510525" style="zoom:67%;" />

这一观察结果产生了输入失调电压的通常定义。 然而，应该注意的是，由于偏移电压是器件不匹配的结果，因此它的极性不是先验的(即我们并不事先知道其极性如何）。

三个因素会影响 MOS 差分对的直流偏移电压：负载电阻不匹配、$W/L$ 不匹配和 $V_t$ 不匹配。 我们将一次考虑三个影响因素

对于图 9.28(a) 所示的差分对，首先考虑 $Q_1$ 和 $Q_2$ 完全匹配但 $R_{D1}$ 和 $R_{D2}$ 显示失配 $\Delta R_D$ 的情况； 那是，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609102438720.png" alt="image-20210609102438720" style="zoom:67%;" />

因为两侧的晶体管是匹配的，所以偏置电流仍然在两侧的晶体管处平衡分配，因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609102557224.png" alt="image-20210609102557224" style="zoom:67%;" />

因此其差分输出电压大小是

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609102624675.png" alt="image-20210609102624675" style="zoom:67%;" />

将该值除以差分放大器的增益$g_mR_{D}$，得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609102740074.png" alt="image-20210609102740074" style="zoom:67%;" />



因此，偏移电压与 $V_{OV}$ 成正比，当然也与 $\Delta R_D/R_D$ 成正比。 例如，考虑一个差分对，其中两个晶体管在 0.2 V 的过驱动电压下工作，每个漏极电阻的精度都在 ±1% 以内。 因此，最坏情况下的电阻失配将是

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609102928795.png" alt="image-20210609102928795" style="zoom:67%;" />

并且由此产生的输入失调电压将为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609102955410.png" alt="image-20210609102955410" style="zoom:67%;" />

接下来，考虑 $Q_1$ 和 $Q_2$ 的 $W/L$ 比失配的影响，表示为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609103032266.png" alt="image-20210609103032266" style="zoom:67%;" />

由于漏极电流大小和晶体管纵横比成正比，因此纵横比之间的失配会导致

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609103146316.png" alt="image-20210609103146316" style="zoom:67%;" />

从而有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609103215251.png" alt="image-20210609103215251" style="zoom:67%;" />

并将该值除以跨导的值得到（注：我们跳过了推导中的一个步骤：我们不是将电流差乘以 $R_C$ 并将结果输出偏移除以 $A_d = g_mR_C$，而是简单地将电流差除以 $g_m$。）

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609103500200.png" alt="image-20210609103500200" style="zoom:67%;" />

在这里，我们再次注意到由 $(W/L)$ 不匹配导致的 $V_{OS}$ 与 $V_{OV}$ 成正比，正如预期的那样，是$\Delta (W/L)$。

最后，我们考虑两个阈值电压之间不匹配 $V_t$ 的影响，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609103713469.png" alt="image-20210609103713469" style="zoom:67%;" />

从而漏极电流发生变化

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609103807220.png" alt="image-20210609103807220" style="zoom:67%;" />

对于 $\Delta V_{t}<<2(V_{GS}-V_{t})$的情况，我们可以得到以下近似

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609103952847.png" alt="image-20210609103952847" style="zoom:67%;" />

类似的

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609104016426.png" alt="image-20210609104016426" style="zoom:67%;" />

此外，在原来的电路中

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609104618765.png" alt="image-20210609104618765" style="zoom:67%;" />

而两侧晶体管中增量电流的大小为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609104729571.png" alt="image-20210609104729571" style="zoom:67%;" />

除以跨导，可以得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609104806313.png" alt="image-20210609104806313" style="zoom:67%;" />

一个非常合乎逻辑的结果！ 对于现代 MOS 技术，$V_t$ 可以高达几个 mV。 最后，我们注意到，由于偏移电压的三个来源不相关，因此总输入偏移电压的估计值可以计算为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609104852258.png" alt="image-20210609104852258" style="zoom:67%;" />

##### 9.4.2 Input Offset Voltage of the Bipolar Differential Amplifier

图 9.29(a) 中所示的双极差分对的偏移电压可以通过类似于上面用于 MOS 对的方式来确定。 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609105006287.png" alt="image-20210609105006287" style="zoom:67%;" />

但是请注意，在双极情况下，没有模拟 MOSFET 对的 $V_t$ 失配。 这里的输出偏移是由负载电阻 $R_{C1}$ 和 $R_{C2}$ 的不匹配以及结区 $β$ 和 $Q_1$ 和 $Q_2$ 中的其他不匹配引起的。 首先考虑负载失配的影响。 让

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609105127157.png" alt="image-20210609105127157" style="zoom:67%;" />

并假设 $Q_1$ 和 $Q_2$ 完全匹配。 因此电流 $I$ 将在 $Q_1$ 和 $Q_2$ 之间平均分配，因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609105212835.png" alt="image-20210609105212835" style="zoom:67%;" />

因此输出电压是

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609105233818.png" alt="image-20210609105233818" style="zoom:67%;" />

不难得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609105313982.png" alt="image-20210609105313982" style="zoom:67%;" />

需要指出的是，由于三极管的热电压在同等偏置电压条件下要小于场效应管的临界电压，因此三极管构成的差分对对这类负载电阻失配要不敏感的多

接下来考虑晶体管 $Q_1$ 和 $Q_2$ 中失配的影响。 特别是，让晶体管的发射极-基极结区域不匹配。 这种面积失配会导致比例电流 $I_S$ 中的比例失配，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609105616305.png" alt="image-20210609105616305" style="zoom:67%;" />

因此可以得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609105655158.png" alt="image-20210609105655158" style="zoom:67%;" />

其对应产生的输出电压是

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609105759418.png" alt="image-20210609105759418" style="zoom:67%;" />

因此对应的输入失调电压为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609105826938.png" alt="image-20210609105826938" style="zoom:67%;" />

例如，4% 的面积失配导致 $\Delta I_S/I_S = 0.04$ 和 1 mV 的输入失调电压。 在这里，我们再次注意到偏移电压与 $V_T$ 成正比，而不是与大得多的 $V_{OV}$ 成正比，后者决定了由于 $(W/L)$ 失配而导致的 MOS 对偏移。

由于这两个对输入失调电压的贡献通常不相关，因此总输入失调电压的估计值可计算为 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609112640266.png" alt="image-20210609112640266" style="zoom:67%;" />

还有其他可能的输入失调电压来源，例如 $β$ 和 $r_o$ 值的不匹配。 其中一些在章末问题中进行了研究。 最后，应该注意的是，有一种流行的偏移电压补偿方案。 它涉及故意在两个集电极电阻的值中引入不匹配，这样当两个输入端子都接地时，差分输出电压会降低到零。 在习题 9.81 中探讨了这种偏移归零方案

##### 9.4.3 Input Bias and Offset Currents of the Bipolar Differential Amplifier

在完美对称的双极差分对中，两个输入端子承载相等的直流电流； 那是，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609112849844.png" alt="image-20210609112849844" style="zoom:67%;" />

这是差分放大器的输入偏置电流。放大器电路中的失配以及最重要的 $β$ 失配使两个输入直流电流不相等。 由此产生的差异是输入偏移电流 $I_{OS}$，给定为 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609112932893.png" alt="image-20210609112932893" style="zoom:67%;" />

记

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609112954846.png" alt="image-20210609112954846" style="zoom:67%;" />

因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609113015501.png" alt="image-20210609113015501" style="zoom:67%;" />

通常我们如下定义输入基极电流

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609115913421.png" alt="image-20210609115913421" style="zoom:67%;" />

因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609115934690.png" alt="image-20210609115934690" style="zoom:67%;" />

例如，10% β 失配会导致偏移电流为输入偏置电流值的十分之一。最后请注意，MOS 差分对的一大优点是它不会受到有限输入偏置电流或其不匹配的影响！

##### 9.4.4 A Concluding Remark

我们在结束本节时指出，此处介绍的定义与第 2 章中介绍的运算放大器定义相同。 事实上，正如将在第 13 章中看到的，运算放大器电路中的输入差分级主要决定了运算放大器直流失调电压、输入偏置和失调电流以及输入共模范围

### 9.5 The Differential Amplifier with a Current-Mirror Load

迄今为止，我们研究的差分放大器属于差分输出类型； 也就是说，输出取自两个漏极（或两个集电极）之间，而不是在其中一个漏极（集电极）和地之间。 差分取输出有三大优势

1.它降低了共模增益，从而提高了共模抑制比 (CMRR)。 回想一下，虽然漏极（集电极）电压响应共模输入信号而有所变化，但漏极（集电极）电压之间的差异基本上保持为零，除了由于电路中不可避免地存在不匹配而导致的微小变化。

2.降低输入失调电压。

3.它使差分增益增加了 2 倍 (6 dB)，因为输出是大小相等但符号相反的两个电压之间的差值。

这些优势足以令人信服，至少 IC 放大器（例如运算放大器）中的第一级是差分输入、差分输出。 芯片上信号的差分传输也最大限度地降低了其对噪声和干扰破坏的敏感性，这通常以共模方式发生。 然而，通常需要在某些时候将信号从差分信号转换为单端信号； 例如，将其连接到片外负载。 图 9.30 显示了一个三级放大器的框图，其中前两级为差分输入差分输出类型，第三级为单端输出，即以地为参考的输出 . 我们现在解决从差分到单端的转换问题。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609124947348.png" alt="image-20210609124947348" style="zoom:67%;" />

##### 9.5.1 Differential-to-Single-Ended Conversion

图 9.31 说明了差分到单端转换的最简单、最基本的方法。 它包括简单地忽略 $Q_1$ 的漏极电流信号并完全消除其漏极电阻，并在 $Q_2$ 的漏极和地之间取输出

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609125148989.png" alt="image-20210609125148989" style="zoom:67%;" />

这种方案的明显缺点是，由于“浪费”了 $Q_1$ 的漏极信号电流，我们损失了 2 倍（或 6 dB）的增益。 更好的方法是找到一种利用 $Q_1$ 漏极电流信号的方法，而这正是我们将要讨论的电路实现的目标。

##### 9.5.2 The Current-Mirror-Loaded MOS Differential Pair

图 9.32(a) 显示了由晶体管 $Q_1$ 和 $Q_2$ 形成的 MOS 差分对，由晶体管 $Q_3$ 和 $Q_4$ 形成的电流镜负载。 要了解该电路如何工作，首先考虑两个输入端子连接到直流电压的静态或平衡状态，该直流电压等于共模平衡值，在这种情况下为 0 V，如图 9.32(b) 所示。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609125416410.png" alt="image-20210609125416410" style="zoom:67%;" />

假设完美匹配，偏置电流 $I$ 在 $Q_1$ 和 $Q_2$ 之间平均分配。  $Q_1$ 的漏极电流 $I/2$ 被馈送到反射镜的输入晶体管 $Q_3$。 因此，该电流的副本由反射镜的输出晶体管 $Q_4$ 提供。 观察到在输出节点，两个电流 $I/2$ 相互平衡，留下零电流流出到下一级或负载（未显示）。 这显然是想要的结果！ 此外，如果 $Q_4$ 与 $Q_3$ 完美匹配，其漏极电压将跟踪 $Q_3$ 的漏极电压； 因此在平衡状态下，输出电压将为 $V_{DD} -V_{SG3}$。 然而，应该注意的是，在实际实施中，总是会出现失配现象，从而导致输出端出现净直流电流。 在没有负载电阻的情况下，该电流将流入 $Q_2$ 和 $Q_4$ 的输出电阻，因此会导致输出电压与理想值出现较大偏差。 因此，该电路的设计始终使输出节点的直流偏置电压由反馈电路定义，而不是简单地依赖 $Q_4$ 和 $Q_3$ 的匹配。 稍后我们将看到这是如何完成的。

接下来，考虑将差分输入信号 $v_{id}$ 施加到输入端的电路，如图 9.32(c) 所示。

 <img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609125844095.png" alt="image-20210609125844095" style="zoom:67%;" />

由于我们现在正在研究电路的小信号操作，因此我们移除了直流电源（包括电流源 $I$）。 另外，暂时让我们忽略所有晶体管的 $r_o$ 。 如图 9.32(c) 所示，电流 $i$ 流过 $Q_1$ 和 $Q_2$，大小由 $i = v_{id}/( \frac 2 {g_m})$ 给出。 因此，晶体管 $Q_1$ 将传导漏极信号电流 $i = g_{m1}v_{id}/2$，晶体管 $Q_2$将传导相等但相反的电流 $i$ ,此外，$Q_1$的漏极信号电流将馈入电流镜负载中作为参考电流。

现在，在输出节点，我们有两个电流，每个都等于 $i$，它们相加得到输出电流 $2i$。 正是这个因数 2（电流镜作用的结果）使得可以将信号转换为单端形式（即，在输出节点和地之间）而不会损失增益！ 如果负载电阻连接到输出节点，则电流 $2i$ 流过它，从而确定输出电压 $v_o$。 在没有负载电阻的情况下，输出电压由输出电流 $2i$ 和电路的输出电阻决定，我们很快就会看到。

在深入研究电路的详细分析之前，了解其运行的本质很重要：对于直流量和共模输入，电流镜负载在 $Q_4$ 的漏极中产生一个输出电流，抵消了 $Q_2$ 的电流 . 另一方面，对于差分输入信号，反射镜的输出电流加到 $Q_2$ 的电流上。

##### 9.5.3 Differential Gain of the Current-Mirror-Loaded MOS Pair

正如我们在第 8 章中了解到的，晶体管的输出电阻 $r_o$ 在有源负载放大器的运行中起着重要作用。 因此，我们现在将考虑 $r_o$ 并推导出电流镜负载 MOS 差分对的差分增益 $v_o/v_{id}$ 的表达式。 为此，我们首先观察到电路不对称：虽然 $Q_1$ 的漏极看到二极管连接的晶体管 $Q_3$ 的小电阻（约等于 $1/g_{m3}$），但 $Q_2$ 的漏极看到更大的输出电阻 $Q_4$ ($r_{o4}$)。 因此，在公共源上不会形成虚拟接地，我们不能使用差分半电路技术。

我们的方法是用图 9.33 中所示的一般等效电路来表示图 9.32(c) 中电路的输出。 这里 $G_m$ 是短路跨导，$R_o$ 是输出电阻。 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609151308748.png" alt="image-20210609151308748" style="zoom:67%;" />

下面，我们将证明

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609151320087.png" alt="image-20210609151320087" style="zoom:67%;" />

其中 $g_{m1,2}$ 是 $Q_1$ 和 $Q_2$ 的跨导。 我们还将证明

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609151409817.png" alt="image-20210609151409817" style="zoom:67%;" />

换句话说，我们会得到两个直观的结果：电路的短路跨导等于差分对的两个晶体管中每一个的 $g_m$，输出电阻是 $Q_2$ 和 $Q_4$ 的输出电阻的并联等效值。因此，开路差分电压增益可表示为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609151526618.png" alt="image-20210609151526618" style="zoom:67%;" />

将 $g_{m1,2}$ 简单地写为 $g_m$，对于 $r_{o2} = r_{o4} = r_o$的情况，我们有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609151645631.png" alt="image-20210609151645631" style="zoom:67%;" />

其中 $A_0$ 是 MOS 晶体管的固有增益。

**Derivation of the Short-Circuit Transconductance, $G_m$**

图 9.34(a) 显示了负载电流镜的 MOS 放大器，其输出端子对地短路。 我们的目的是确定短路跨导

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609151759000.png" alt="image-20210609151759000" style="zoom:67%;" />

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609151824154.png" alt="image-20210609151824154" style="zoom:67%;" />

我们注意到，将输出端子短路会使电路接近平衡。 这是因为$Q_1$的漏极看到了二极管接法的晶体管$Q_3$的小电阻，现在$Q_2$的漏极看到了短路。 因此，MOSFET 源极的电压将接近于零。 现在，用它的混合π模型替换四个晶体管中的每一个，并注意到对于二极管连接的晶体管 $Q_3$，模型减少到一个电阻$（1/g_{m3}|| r_{o3}）$，我们得到图 9.34（b）所示的等效电路 ）

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609152219429.png" alt="image-20210609152219429" style="zoom:67%;" />

短路输出电流 $i_o$ 可以通过在输出处写一个节点方程并注意到 $r_{o2}$ 和 $r_{o4}$ 中的电流为(两侧的电势差为零）零来找到； 因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609152425172.png" alt="image-20210609152425172" style="zoom:67%;" />

接下来，我们注意到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609152502337.png" alt="image-20210609152502337" style="zoom:67%;" />

和 $v_{gs3}$ 可以从 $d_1$ 处的节点方程获得为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609152639045.png" alt="image-20210609152639045" style="zoom:67%;" />

对于 $\frac{1}{ g_{m3}}<< r_{o3}、r_{o1}$ 的通常情况，它减少到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609152919799.png" alt="image-20210609152919799" style="zoom:67%;" />

并代入 $g_{m3} = g_{m4}$ 和 $g_{m1} = g_{m2} = g_m$ ，给出

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609153206772.png" alt="image-20210609153206772" style="zoom:67%;" />

从中发现 $G_m$

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609153250294.png" alt="image-20210609153250294" style="zoom:67%;" />

正如预期的那样

**Derivation of the Output Resistance $R_o$**

图 9.35 显示了用于确定输出电阻 $R_o$ 的电路 。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609153615242.png" alt="image-20210609153615242" style="zoom:67%;" />

观察我们已经将 $v_{id}$ 设置为零，因此导致$Q_1$和$Q_2$的栅极接地。我们施加了一个测试电压 $v_x$ 以确定 $R_o$

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609155411189.png" alt="image-20210609155411189" style="zoom:67%;" />

通过简单地遵循带圆圈的数字观察电路周围的电流传输，可以大大简化对该电路的分析。 进入 $Q_2$ 的电流 $i$ 必须在其源极离开。 然后它进入 $Q_1$，从漏极退出以馈送 $Q_3 -Q_4$ 反射镜。 由于对于二极管连接的晶体管 $Q_3$，$1/g_{m3}$ 远小于 $r_{o3}$，因此大部分电流 $i$ 流入 $Q_3$ 的漏极本身。 反射镜通过在 $Q_4$ 的漏极中提供相等的电流 $i$ 来做出响应。  $i$ 和 $v_x$ 之间的关系可以通过观察输出节点处的

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609155938402.png" alt="image-20210609155938402" style="zoom:67%;" />

得到。其中 $R_{o2}$ 是 $Q_2$ 的输出电阻。 现在，$Q_2$ 是一个 CG 晶体管，其源极引线处串有 CG 晶体管 $Q_1$ 的输入电阻 $R_{in1}$。 注意到 $Q_1$ 的负载电阻为 $[ (1/g_{m3}) ||r_{o3}]$，约为 $1/g_{m3}$，我们可以通过使用 CG 晶体管的输入电阻表达式获得 $R_{in1}$，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609162843184.png" alt="image-20210609162843184" style="zoom:67%;" />

然后我们使用 $R_{in1}$ 的这个值来确定 $R_{o2}$(我们此前在计算CG放大器的输出电阻时使用过这个公式)，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609163152664.png" alt="image-20210609163152664" style="zoom:67%;" />

其中，对于 $g_{m1} = g_{m2} = g_m$ 和 $g_{m2}r_{o2}>> 1$，有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609163803171.png" alt="image-20210609163803171" style="zoom:67%;" />

回到输出节点，我们写

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609163831776.png" alt="image-20210609163831776" style="zoom:67%;" />

最后我们得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609164042615.png" alt="image-20210609164042615" style="zoom:67%;" />

因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609164148540.png" alt="image-20210609164148540" style="zoom:67%;" />

这正如我们之前所提到过的那样。

##### 9.5.4 The Bipolar Differential Pair with a Current-Mirror Load

有源负载差分对的双极版本如图 9.36(a) 所示。 电路结构和操作与其对应的 MOS 非常相似，除了在这里我们必须应对有限 $β$ 的影响以及由此产生的基极有限输入电阻 $r_π$ 。 然而，暂时，我们将忽略有限 $β$ 对四个晶体管的直流偏置的影响，并假设在平衡状态下所有晶体管都在直流电流 $I/2$下偏置

**Differential Gain**

为了获得差分增益的表达式，我们使用与上面针对 MOS 情况采用的方法相同的方法。 也就是说，我们用图 9.36(b) 所示的等效电路表示放大器的输出，并表明短路跨导 $G_m$ 由下式给出

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609180104895.png" alt="image-20210609180104895" style="zoom:67%;" />

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609180125463.png" alt="image-20210609180125463" style="zoom:67%;" />

其中 $g_{m1,2}$ 表示 $Q_1$ 和 $Q_2$ 的 $g_m$，输出电阻 $R_o$ 由下式给出

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609180234405.png" alt="image-20210609180234405" style="zoom:67%;" />

这两个结果都与 MOS 情况下的结果相同，并且可以类似地推导出来。因此我们现在可以写出差分对的电压增益为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609180348029.png" alt="image-20210609180348029" style="zoom:67%;" />

其中 $g_m=g_{m1}=g_{m2}\simeq \frac{V_T}{I/2}$，而因为我们假设这些晶体管之间都是完全匹配的

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609180532198.png" alt="image-20210609180532198" style="zoom:67%;" />

尽管该表达式与 MOS 电路的表达式相同，但此处的增益要大得多，因为 BJT 的 $g_{m}r_o$ 比 MOSFET 的 $g_mr_o$ 大一个数量级以上。 然而，缺点在于 BJT 放大器的低输入电阻。 事实上，从图 9.36(a) 中的电路，我们可以看到差分输入电阻等于 $2r_π$，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609180640059.png" alt="image-20210609180640059" style="zoom:67%;" />

与 MOS 放大器无穷大的输入电阻形成鲜明对比。 因此，虽然电流镜负载 BJT 放大器级实现的电压增益很大，但当后续 BJT 级连接到输出时，其不可避免的低输入电阻将大大降低整体电压增益。

**Systematic Input Offset Voltage**

除了由差分放大器中不可避免地存在的失配导致的随机偏移电压之外，电流镜加载的双极差分对还受到系统偏移电压的影响，而这在 MOS 版本中是没有对应的。 这是由于构成反射镜的 pnp 晶体管的有限 $β$ 引起的电流镜负载的电流传输比误差。 要了解这是如何发生的，请参阅图 9.37。 这里输入端接地，假设晶体管完美匹配。 因此，偏置电流 $I$ 将在 $Q_1$ 和 $Q_2$ 之间平均分配，结果它们的两个集电极传导 $αI/2$ 的相等电流。  $Q_1$ 的集电极电流馈送到电流镜的输入端。 从 8.2 节我们知道镜像的电流传输比为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609180937818.png" alt="image-20210609180937818" style="zoom:67%;" />

其中 $β_P$ 是 pnp 晶体管 $Q_3$ 和 $Q4$ 的 $β$ 值。 因此 $Q_4$ 的集电极电流将为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609181025198.png" alt="image-20210609181025198" style="zoom:67%;" />

这不能完全平衡 $Q_2$ 的集电极电流。 因此电流差 $\Delta i$ 将流入放大器的输出端

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609181107475.png" alt="image-20210609181107475" style="zoom:67%;" />

为了将此输出电流降低到零，必须施加一个输入电压 $V_{OS}$，其值为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609181235729.png" alt="image-20210609181235729" style="zoom:67%;" />

代入式中的 $i$。对于 $G_m = g_m = (αI/2)/V_T$ ，我们得到输入失调电压的表达式

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609181413467.png" alt="image-20210609181413467" style="zoom:67%;" />

例如，对于 $β_P = 50$，$V_{OS} =-1 mV$。 为降低 $V_{OS}$，应使用改进的电流镜，如第 8.6.2 节中研究的威尔逊电路。 这种电路提供了增加输出电阻和电压增益的附加优势。 但是，要充分发挥有源负载较高输出电阻的优势，应利用共源共栅级提高差分对的输出电阻。 图 9.38 显示了这样的安排：

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609181643042.png" alt="image-20210609181643042" style="zoom:67%;" />

由晶体管 $Q_5$、$Q_6$ 和 $Q_7$ 形成的威尔逊镜用于实现有源负载。 从 8.6.2 节我们知道威尔逊镜的输出电阻（即，从 $Q_5$ 的集电极看入）是 $β_5(r_{o5}/2)$。 因此放大器的输出电阻由下式给出

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609181904859.png" alt="image-20210609181904859" style="zoom:67%;" />

跨导 $G_m$ 仍然等于 $Q_1$ 和 $Q_2$ 的 $g_m$。 因此差分电压增益变为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609182616259.png" alt="image-20210609182616259" style="zoom:67%;" />

这可能非常大。 第 13 章将研究改进性能的差分放大器的更多示例。

##### 9.5.5 Common-Mode Gain and CMRR

尽管输出是单端的，但电流镜负载差分放大器具有低共模增益（理想情况下为零）和相应的高 CMRR（理想情况下为无穷大）。 这是由于电流镜的作用，对于共模输入，其输出电流抵消了差分对 $Q_2$ 的电流。 事实上，我们在对电路操作的最初定性描述中已经看到了这一点。

然而，镜像的电流传输比永远不会完全一致，因此输出节点的电流抵消永远不会完美。 因此，共模增益将是有限的。 我们希望导出 $A_{cm}$ 的表达式。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609182839345.png" alt="image-20210609182839345" style="zoom:67%;" />

图 9.39(a) 显示了应用 $v_{icm}$ 并去除电源的电路，当然，偏置电流源 $I$ 的输出电阻 $R_{SS}$ 除外。 尽管电路不对称，因此我们不能使用共模 半电路，我们可以在 $Q_1$ 和 $Q_2$ 之间平均分配 RSS，如图 9.39（b）所示。 现在可以看出，$Q_1$和$Q_2$中的每一个都是一个具有较大源极衰减电阻$2R_{SS}$的CS晶体管。

$Q_1$ 和 $Q_2$ 中的每一个以及它们的退化电阻都可以用由受控源 $G_{mcm}v_{icm}$ 和输出电阻 $R_{o1,2}$ 组成的等效电路代替，如图 9.39(c) 所示。 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609183035713.png" alt="image-20210609183035713" style="zoom:67%;" />

为了确定 $G_{mcm}$，我们将漏极对地短路，如图 9.39(d) 所示 $Q_1$。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609183309162.png" alt="image-20210609183309162" style="zoom:67%;" />

观察 $2R_{SS}$ 和 $r_{o1}$ 并行出现。 因此，源极端子的电压可以从由 $1/g_{m1}$ 和 $(2R_{SS} ||r_{o1})$ 组成的分压器中找到：

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609190943357.png" alt="image-20210609190943357" style="zoom:67%;" />

可以看出短路漏电流$i_o$等于通过$2R_{SS}$的电流； 因此，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609191026868.png" alt="image-20210609191026868" style="zoom:67%;" />

这导致

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609191046528.png" alt="image-20210609191046528" style="zoom:67%;" />

输出电阻 $R_{o1}$ 可以使用具有发射极退化电阻的 CS 晶体管的 $R_o$ 表达式来确定

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609191134103.png" alt="image-20210609191134103" style="zoom:67%;" />

对于 $Q_2$ 可以获得类似的结果，即相同的 $G_{mcm}$ 和由下式给出的输出电阻 $R_{o2}$

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609191234196.png" alt="image-20210609191234196" style="zoom:67%;" />

回到图 9.39(c) 中的电路，我们看到电流镜由其输入电阻 $R_{im}$、电流增益 $A_m$ 和输出电阻 $R_{om}$ 表示。 这是适用于任何电流镜的一般表示。 由于电流镜的输入电阻相对较低，$R_{im}$ 将远低于 $R_{o1}$，因此镜面的输入电流$i_i$ 将为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609191429942.png" alt="image-20210609191429942" style="zoom:67%;" />

输出电压可以通过在输出端写一个节点方程来获得，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609191459695.png" alt="image-20210609191459695" style="zoom:67%;" />

这是适用于当前镜像的任何实现的通用表达式。 该表达式清楚地表明 $A_{cm}$ 是由反射镜电流增益的单位偏差引起的。

对于图 9.39(a) 电路中使用的简单电流镜，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609191751203.png" alt="image-20210609191751203" style="zoom:67%;" />

以及

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609191811290.png" alt="image-20210609191811290" style="zoom:67%;" />

电流增益 $A_m$ 可以通过以下方式找到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609191843716.png" alt="image-20210609191843716" style="zoom:67%;" />

但由于

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609191901873.png" alt="image-20210609191901873" style="zoom:67%;" />

因此有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609191921739.png" alt="image-20210609191921739" style="zoom:67%;" />

代入 $R_{im}$ 并使用 $g_{m4} = g_{m3}$ ，我们得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609192051703.png" alt="image-20210609192051703" style="zoom:67%;" />

最后，我们比较两个式子的系数，并指出$r_{o4}<<R_{o2}$和 $r_{o4}=r_{o3},g_mr_{o3}<<1$,从而得到共模增益的表达式

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609192510248.png" alt="image-20210609192510248" style="zoom:67%;" />

借此我们可以修改之前得到的CMRR的表达式，有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609192614422.png" alt="image-20210609192614422" style="zoom:67%;" />

对于$r_{o2}=r_{o4}=r_o$和$g_{m3}=g_m$，上式简化为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609192953844.png" alt="image-20210609192953844" style="zoom:67%;" />

我们观察到，为了获得大的 CMRR，我们选择了具有高输出电阻的偏置电流源 $I$ 。 此类电路包括 8.6 节中研究的共源共栅电流源和威尔逊电流源。

**The Bipolar Case**

为了获得图 9.36(a) 的 BJT 电路的 $A_{cm}$ 和 CMRR，我们可以使用此前计算得到的数据，类似场效应管中的推导

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609193432262.png" alt="image-20210609193432262" style="zoom:67%;" />

不难得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609193515349.png" alt="image-20210609193515349" style="zoom:67%;" />

和

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609193617161.png" alt="image-20210609193617161" style="zoom:67%;" />

假设 $g_{m4}$ $= g_{m3}$ 并利用 $r_{o4} >>R_{o2}$，我们得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609193719283.png" alt="image-20210609193719283" style="zoom:67%;" />

因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609193837567.png" alt="image-20210609193837567" style="zoom:67%;" />

对于晶体管全部匹配的情况

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609193906156.png" alt="image-20210609193906156" style="zoom:67%;" />

从中我们观察到，为了获得大的 CMRR，实现偏置电流源的电路应该具有大的输出电阻 $R_{EE}$。 例如，使用威尔逊电流镜（第 8.6.2 节）可以做到这一点。总之，再次反思有限共模增益的起源是有用的：这仅仅是由于电流镜负载引入的电流传输误差。在MOS电路的情况下，这个误差是由于有限的$r_{o3}$（厄利效应）； 在双极镜的情况下，误差是由有限的 $β$ 引起的。

国际固态电路会议 (ISSCC)：2013 年是国际固态电路会议 (ISSCC) 第 60 届，该会议已成为展示固态电路和系统广泛领域新发展的最重要的全球论坛。 由电气和电子工程师协会赞助，ISSCC 于 1954 年在费城宾夕法尼亚大学开始，并最终迁移到硅谷，自 1990 年以来每年在旧金山举行会议。在 1950 年代初期，晶体管发明后不久，许多依赖真空管的大型电子公司（例如 GE、RCA）意识到这些新型放大设备的潜在重要性。 但是，当他们渴望创建基于晶体管的新设计时，他们很快就因缺乏具有适当背景的合格工程师而受阻。 事实上，贝尔实验室是唯一有经验的团队。 因此，需要一种新颖的解决方案，其中可以在多个感兴趣的研发实体之间共享有限的专业知识。 于是，ISSCC的前身——第一届“晶体管会议”诞生了。 显然，这是一个有效的想法！

### 9.6 Multistage Amplifiers

实用的晶体管放大器通常由级联的多个级组成。 除了提供增益之外，第一（或输入）级通常需要提供高输入电阻，以避免当放大器从高电阻源馈电时信号电平的损失。 在差分放大器中，输入级还必须提供大的共模抑制。 放大器级联中间级的功能是提供大部分电压增益。 此外，中间级还提供其他功能，例如将信号从差分模式转换为单端模式（当然，除非放大器输出也是差分的）以及信号直流电平的偏移，以便允许输出信号正负摆动。 这两个功能和其他功能将在本节后面说明，并在第 13 章中更详细地说明。

最后，放大器最后（或输出）级的主要功能是提供低输出电阻，以避免在将低值负载电阻连接到放大器时损失增益。 此外，输出级应该能够以有效的方式提供负载所需的电流——也就是说，不会在输出晶体管中消耗过多的功率。 我们已经研究了一种适合实现输出级的放大器配置，即源极跟随器和射极跟随器。 第 12 章将说明，从功率效率的角度来看，源极跟随器和射极跟随器不是最佳的，并且对于需要提供大量输出功率的输出级，存在其他更合适的电路配置。 事实上，我们会在第 13 章研究的运算放大器电路示例中遇到一些这样的输出级。

为了说明多级放大器的电路结构和分析方法，我们将提供两个示例：两级 CMOS 运算放大器和四级双极运算放大器。

##### 9.6.1 A Two-Stage CMOS Op Amp

图 9.40 显示了一种流行的 CMOS 运算放大器结构，称为两级配置。该电路使用两个电源，范围从 0.5-μm 技术的 ±2.5V 到 65-nm 技术的 ±0.5V。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609194651962.png" alt="image-20210609194651962" style="zoom:67%;" />

参考偏置电流 $I_{REF}$ 由外部或使用片上电路生成。 第 13 章将讨论这样一种电路。由 $Q_8$ 和 $Q_5$ 形成的电流镜为差分对 $Q_1 -Q_2$ 提供偏置电流。 选择 $Q_5$ 的 $W/L$ 比以产生输入级偏置电流 $I$（或 $Q_1$ 和 $Q_2$ 中的每一个的 $I/2$）的所需值。 输入级差分对使用了由 $Q_3$ 和 $Q_4$ 形成的电流镜负载。 因此输入级与第 9.5 节中研究的相同（除了这里的差分对是用 PMOS 晶体管实现的，电流镜是用 NMOS 实现的）。

第二级由 $Q_6$ 组成，它是一个负载有电流源晶体管 $Q_7$ 的共源放大器。 电容器 $C_C$ 包含在第二级的负反馈路径中。 当我们研究这个放大器的频率响应时，它的功能将在第 13 章中解释。

图 9.40 中电路的一个显着特点是它没有低输出电阻级。 事实上，电路的输出电阻等于（$r_{o6}|| r_{o7}$），因此相当高。 因此，该电路不适合驱动低阻抗负载。 然而，该电路非常流行，经常用于在 $VLSI$ 电路中实现运算放大器，其中运算放大器只需要驱动一个小的容性负载，例如，在开关电容器电路中（第 17 章）。 电路的简单性导致在非常小的芯片面积中实现了质量相当好的运算放大器。

**Voltage Gain**

 第一级的电压增益即为我们此前计算过的电流镜负载的差分放大器的电压增益

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609200003206.png" alt="image-20210609200003206" style="zoom:67%;" />

其中$g_{m1}$是第一级的每个晶体管的跨导，即$Q_1$和$Q_2$。

第二级是以电流源为负载的共源放大器，其电压增益由 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609200258711.png" alt="image-20210609200258711" style="zoom:67%;" />

给出

其直流开环增益的大小即为上述两式的乘积

##### Example 9.6

对于以上电路结构，我们给出各个晶体管的纵横比参数

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609200829950.png" alt="image-20210609200829950" style="zoom:67%;" />

假设 $I_{REF}$ $= 90 μA，V_{tn} = 0.7 V，V_{tp} = −0.8 V，μ_nC_{ox} = 160 μA/V^2，μ_pC_{ox} = 40 μA/V^2，V_A$（对于所有器件）$= 10 V，V_{DD} = V_{SS} = 2.5  V$. 对于所有设备，计算其 $I_D、V_{OV}、V_{GS}、g_m$ 和 $r_o$的值。并计算 $A_1、A_2$、直流开环电压增益、输入共模范围和输出电压范围。 忽略 $V_A$ 对偏置电流的影响。

解

参见图 9.40。 由于 $Q_8$ 和 $Q_5$ 匹配，因此 $I = I_{REF}$。 因此 $Q_1、Q_2、Q_3$ 和 $Q_4$ 各自传导等于 $I/2=45 μA$ 的电流。 由于 $Q_7$ 与 $Q_5$ 和 $Q_8$ 匹配，因此 $Q_7$ 中的电流等于 $I_{REF}$ =$90 μA$。 最后，$Q_6$ 传导 $90 μA$ 的相等电流

因此我们计算出了各个晶体管的漏极电流，由于各个晶体管均被偏置在饱和区中，因此我们可以通过建立方程来计算各个晶体管的过驱动电压，并且借由过驱动电压与跨导之间的数学关系计算跨导和厄利电阻，有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609201810458.png" alt="image-20210609201810458" style="zoom:67%;" />

因此第一级的电压增益是

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609202300447.png" alt="image-20210609202300447" style="zoom:67%;" />

同理

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609202314643.png" alt="image-20210609202314643" style="zoom:67%;" />

因此总体电压增益是

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609202348576.png" alt="image-20210609202348576" style="zoom:67%;" />

或者以对数尺度

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609203012319.png" alt="image-20210609203012319" style="zoom:67%;" />

输入共模范围的下限是 $Q_1$ 和 $Q_2$ 离开饱和区时的输入电压值。 当输入电压低于 $Q_1$ 漏极电压 $V_{tp}$ 伏时，就会发生这种情况。 由于 $Q_1$ 的漏极为 $−2.5+1=−1.5 V$，因此输入共模范围的下限为 $−2.3 V$。

输入共模范围的上限是 $Q_5$ 离开饱和区时的输入电压值。 由于 $Q_5$ 在饱和状态下工作，其两端的电压（即 $V_{SD5}$）应至少等于其工作时的过驱动电压（即 $0.3 V$），因此 $Q_5$ 漏极允许的最高电压应为 $+2.2  V.$ 由此可知，$v_{ICM}$ 的最高值应该是

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609203948079.png" alt="image-20210609203948079" style="zoom:67%;" />

允许的最高输出电压是 $Q_7$ 离开饱和区时的值，即 $V_{DD} − V_{OV7} = 2.5−0.3 = 2.2 V$。允许的最低输出电压是 $Q_6$ 离开饱和时的值，即 $−  V_{SS} + V_{OV6} = −2.5 + 0.3 = −2.2 V$。因此，输出电压范围为 $−2.2 V$ 至 $+2.2 V$。

**Input Offset Voltage**

输入级中不可避免地出现的器件失配会导致输入失调电压。 可以使用第 9.4.1 节中开发的方法计算该输入失调电压的分量。 由于器件失配是随机的，因此产生的偏移电压称为随机偏移。 这是为了将其与另一种类型的输入失调电压区分开来，即使所有合适的器件都完美匹配，这种电压也可能存在。 这种可预测的或系统的偏移可以通过精心设计来最小化。 虽然它也出现在 BJT 运算放大器中，我们在第 9.5.4 节中遇到过，但它通常在 CMOS 运算放大器中更为明显，因为它们的每级增益相当低。

要了解系统偏移如何在图 9.40 的电路中出现，让两个输入端子接地。 如果输入级完全平衡，则出现在 $Q_4$ 漏极的电压将等于 $Q_3$ 漏极的电压，即 $(-V_{SS} +V_{GS4})$。 现在这也是馈送到 $Q_6$ 栅极的电压。 换句话说，等于 $V_{GS4}$ 的电压出现在 $Q_6$ 的栅极和源极之间。 因此，$Q_6$ 的漏极电流 $I_6$ 将与 $Q_4$ 的漏极电流相关，后者等于 $I/2$，通过关系式

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609204612271.png" alt="image-20210609204612271" style="zoom:67%;" />

为了在输出端不出现偏移电压，该电流必须完全等于 $Q_7$ 提供的电流。 后者的电流与并联晶体管 $Q_5$ 的电流 $I$ 的关系为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609204707715.png" alt="image-20210609204707715" style="zoom:67%;" />

因此有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609204727742.png" alt="image-20210609204727742" style="zoom:67%;" />

如果不满足此条件，则会导致系统偏移。

##### 9.6.2 A Bipolar Op Amp

我们的第二个多级放大器示例是图 9.41 中所示的四级双极运算放大器。 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609204933362.png" alt="image-20210609204933362" style="zoom:67%;" />

该电路由四个分级组成。 差分输入、差分输出输入级由晶体管 $Q_1$ 和 $Q_2$ 组成，它们由电流源 $Q_3$ 偏置。 第二级也是一个差分输入放大器，但其输出在 $Q_5$ 的集电极处单端获取。 该级由 $Q_4$ 和 $Q_5$ 形成，由电流源 $Q_6$ 偏置。 请注意，由第二级执行的从差分到单端的转换会导致增益损失 2 倍。在第 9.5 节中研究的完成这种转换的更复杂的方法中，电流镜被用作有源加载。

除了提供一些电压增益之外，由 pnp 晶体管 $Q_7$ 组成的第三级还提供了转换信号直流电平的基本功能。 因此，虽然不允许 $Q_5$ 集电极上的信号摆动低于 $Q_5$ 基极电压 (+10 V)，但 $Q_7$ 集电极上的信号可以负摆动（当然也可以是正摆动）。 通过我们在第 2 章中对运算放大器的研究，我们知道运算放大器的输出端应该能够承受正负电压摆幅。 因此，每个运算放大器电路都包含一个电平转换装置。 虽然互补 pnp 晶体管的使用为电平移位问题提供了一个简单的解决方案，但存在其他形式的电平移位器，其中一个我们将在第13章中谈到，此外，请注意，在我们在 9.6.1 节中研究的 CMOS 运算放大器中，电平转换是通过对两级使用互补器件来实现的：即，第一级为 p 沟道，第二级为 n 沟道。

运算放大器的输出级由射极跟随器 $Q_8$ 组成。 正如我们在第 2 章对运算放大器的研究中所知道的那样，理想情况下，输出工作在零伏附近。  BJT 运算放大器的这一特性和其他特性将在例 9.7 中说明

##### Example 9.7

在本例中，我们分析了图 9.41 中双极运算放大器电路的直流偏置。 为此，图 9.42 显示了两个输入端子接地的电路。

(a) 执行近似直流分析（假设 $β>> 1$，$V_{BE}\simeq 0.7 V$，并忽略厄尔效应）以计算电路中各处的直流电流和电压。 请注意，$Q_6$ 的面积是 $Q_9$ 和 $Q_3$ 的四倍。

(b) 计算该电路中的静态功耗。

(c) 如果晶体管 $Q_1$ 和 $Q_2$ 的 $β = 100$，计算运算放大器的输入偏置电流。

(d) 该运算放大器的输入共模范围是多少？

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609205637269.png" alt="image-20210609205637269" style="zoom:67%;" />

(a) 所有直流电流和电压的值都显示在电路图上。 这些值是通过忽略每个晶体管的基极电流计算得出的——也就是说，假设 $β$ 非常高。 分析首先确定通过二极管连接的晶体管 $Q_9$ 的电流为 $0.5 mA$。 然后我们看到晶体管 $Q_3$ 传导 $0.5 mA$，晶体管 $Q_6$ 传导 $2 mA$。 电流源晶体管 $Q_3$ 为差分对（$Q_1$、$Q_2$）提供 $0.5 mA$ 电流。 因此，$Q_1$ 和 $Q_2$ 中的每一个都将偏置为 $0.25 mA$。$Q_1$ 和 $Q_2$ 的集电极将偏置在 $[+15 – 0.25 × 20] =+10 V$。

继续由 $Q_4$ 和 $Q_5$ 形成的第二个差分级，我们发现它们发射极的电压为 $[+10 – 0.7] = 9.3 V$。该差分对由电流源晶体管 $Q_6$ 偏置，该晶体管提供的电流为 $2 mA;$ 因此 $Q_4$ 和 $Q_5$ 将各自偏置为 $1 mA$。 我们现在可以计算 $Q_5$ 集电极的电压为 $[+15 – 1 × 3] =+12 V$。这将导致 pnp 晶体管 $Q_7$ 的发射极电压为 $+12.7 V，Q_7$ 的发射极电流将是$(+15−12.7)/2.3=1 mA。$$Q_7$ 的集电极电流为 $1 mA$，导致集电极电压为 $[–15 + 1 × 15.7]=+0.7 V$。$Q_8$ 的发射极将低于基极 $0.7 V$； 因此输出端子 3 的电位为 $0 V$。最后，$Q_8$ 的发射极电流可以计算为 $[0 – (–15)]/3=5 mA$。

 (b) 为了计算电路在静态（即零输入信号）中的功耗，我们只需评估电路从两个电源中的每一个汲取的直流电流。 来自 $+15 V$ 电源的直流电流为 $I_+ = 0.25+0.25+1+1+1+5 = 8.5 mA$。 因此，正电源提供的功率为 $P_+ = 15 × 8.5=127.5 mW$。  $–15V$ 电源提供电流 $I_−$，由 $I_− = 0.5+0.5+2 +1+5 = 9 mA$ 给出。 因此，负电源提供的功率为 $P_− = 15 × 9=135 mW$。  $P_+$ 和 $P_−$ 相加得出电路 $P_D$ 的总功耗：$P_D = P_+ +P_− = 262.5 mW。$

(c) 运算放大器的输入偏置电流是流经两个输入端子（即 $Q_1$ 和 $Q_2$_$$ 的基极）的直流电流的平均值。 这两个电流相等（因为我们假设了匹配的设备）； 因此偏置电流由下式给出

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609213858494.png" alt="image-20210609213858494" style="zoom: 67%;" />

(d) 输入共模电压的上限由 $Q_1$ 和 $Q_2$ 离开活动模式并进入饱和时的电压决定。 如果输入电压超过集电极电压$（+10 V）$约 $0.4 V$，就会发生这种情况。因此，共模范围的上限为 $+10.4 V$。

输入共模范围的下限由 $Q_3$ 离开活动模式并因此停止充当恒流源时的电压决定。 如果 $Q_3$ 的集电极电压低于其基极电压$（–14.3 V）0.4 V$ 以上，就会发生这种情况。因此，输入共模电压不应低于 $–14.7 + 0.7 = –14  V$。因此，共模范围为 $–14 V$ 至 $+10.4 V$。

##### Example 9.8

使用例 9.7 中评估的直流偏置量来分析图 9.41 中的电路，以确定输入电阻、电压增益和输出电阻。

输入差分电阻 $R_{id}$ 由下式给出

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609214315357.png" alt="image-20210609214315357" style="zoom:67%;" />

由于 $Q_1$ 和 $Q_2$ 均以 $0.25 mA$ 的发射极电流工作，因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609214346706.png" alt="image-20210609214346706" style="zoom:67%;" />

假设$β=100$，那么有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609214424906.png" alt="image-20210609214424906" style="zoom:67%;" />

因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609214440769.png" alt="image-20210609214440769" style="zoom:67%;" />

为了评估第一级的增益，我们首先求出第二级的输入电阻 $R_{i2}$，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609214510085.png" alt="image-20210609214510085" style="zoom:67%;" />

$Q_4$ 和 $Q_5$ 均以 $1 mA$ 的发射极电流运行； 因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609214544561.png" alt="image-20210609214544561" style="zoom:67%;" />

因此 $R_{i2} = 5.05 k\Omega$ 。 该电阻出现在 $Q_1$ 和 $Q_2$ 的集电极之间，如图 9.43 所示。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609214650199.png" alt="image-20210609214650199" style="zoom:67%;" />

因此，第一阶段的增益将是 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609214715437.png" alt="image-20210609214715437" style="zoom:67%;" />

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609214855387.png" alt="image-20210609214855387" style="zoom:67%;" />

图 9.44 显示了用于计算第二级增益的等效电路。 如图所示，第二级的输入电压是第一级的输出电压 $v_{o1}$。 还显示了电阻 $R_{i3}$，它是由 $Q_7$ 形成的第三级的输入电阻。  $R_{i3}$ 的值可以通过将 $Q_7$ 发射极的总电阻乘以 $(β +1)$ 得出：

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609214904857.png" alt="image-20210609214904857" style="zoom:67%;" />

代入数据得

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609214922110.png" alt="image-20210609214922110" style="zoom:67%;" />

我们现在可以找到第二级的增益 $A_2$，即集电极电路中的总电阻与发射极电路中的总电阻之比

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609215840707.png" alt="image-20210609215840707" style="zoom:67%;" />

为了获得第三级的增益，我们参考图 9.45 所示的等效电路，其中 $R_{i4}$ 是由 $Q_8$ 形成的输出级的输入电阻。 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609220316323.png" alt="image-20210609220316323" style="zoom:67%;" />

使用电阻反射规则，我们计算 $R_{i4}$ 的值如下

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609220201071.png" alt="image-20210609220201071" style="zoom:67%;" />

其中

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609220230472.png" alt="image-20210609220230472" style="zoom:67%;" />

第三阶段的增益由下式给出

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609220251015.png" alt="image-20210609220251015" style="zoom:67%;" />

最后，为了获得输出级的增益 $A_4$，我们参考图 9.46 中的等效电路并写成

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609220407054.png" alt="image-20210609220407054" style="zoom:67%;" />

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609220425079.png" alt="image-20210609220425079" style="zoom:67%;" />

放大器的总电压增益可以通过以下方式获得：

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210609220459864.png" alt="image-20210609220459864" style="zoom:67%;" />

## CHAPTER 10  Frequency Response

章节概要

1.耦合和旁路电容如何导致分立电路放大器的增益在低频时下降，以及如何获得频率fL的估计值，在该频率fL处，增益比其在中频处的值低3 dB。

2.MOSFET和BJT中存在的内部电容效应以及如何通过在混合电路中添加电容来修正这些电路的hybr$I_D$-pi模型以及T-model。

3.CS和CE放大器增益的高频限制，以及增益衰减和3db频率fH的上限主要由漏极和栅极（集电极和基极）之间的小电容决定。

4.分析复杂度不同的放大器电路的高频响应的有力方法。

5.第8章研究的共源共栅放大器如何设计成比CS和CE放大器更宽的带宽。

6.源和发射极跟随器的高频性能。

7.差分放大器的高频性能。

8.用于获得宽带放大的电路配置。

简介

我们在第五章到第九章中对晶体管放大器的研究假设它们的增益是恒定的，与输入信号的频率无关。这就意味着它们的带宽是无限的，当然这并不符合真实情况。为了说明这一点，我们在图10.1中给出了三极管分立放大电路的增益幅度与输入信号频率的关系示意图。虽然我们观察到该电路确实有一个很宽的频率范围，并且在这个范围内增益几乎保持不变。这是特定放大器的有效工作频率范围。到目前为止，我们一直假设我们的放大器工作在这个波段，该波段称为中频波段或中频。放大器的设计使其中频与所需放大信号的频谱一致。因为如果不是这样，放大器会使输入信号的频谱失真，输入信号的不同分量会被不同的量放大。

![image-20210513110800288](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210513110800288.png)

图10.1表明，在较低的频率，放大器增益的幅度下降。电路中的耦合电容和旁路电容在该频段内的阻抗迅速升高。回想一下，我们此前假设它们的阻抗很小，并且足以视为短路。这种假设虽然在中频是正确的，但是当输入信号的频率降低时，其容抗迅速变大（基于容抗的表达式），导致其不再可以被视为短路，如同我们在10.1节所要看到的，这会导致放大器的总电压增益降低。

在第10.1节分立放大电路的低频响应分析中，我们将注意力放在频率fL的确定上，它定义了中频的下限。通常而言，fL被定义为增益大小比电路处在中频的值低3分贝的频率。要注意的是，集成电路放大器不使用耦合和旁路电容器，因此其中频的下限在零频率（dc）处，如图10.2所示。

![image-20210513111412812](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210513111412812.png)

图10.1和10.2表明放大器的增益在高频端下降。这是由于BJT的内部电容效应（扩散电容和势垒电容）。我们将在第10.2节中研究这些效应，并用我们将添加到此前我们所使用的hybr$I_D$-pi model和T-model中。第10.3节将使用高频设备模型分析CS和CE放大器（分立和集成）的高频响应。我们将特别关注频率fH的确定，它定义了中频带的上限。它被定义为增益大小比电路位于中频时的增益值低3 dB的频率。因此，放大器带宽由fL和fH定义（对于IC放大器为0和fH）

放大器的增益带宽积（gain-bandw$I_D$th product）定义如下
$$
GB=|A_M|BW
$$
其中BW指带宽的的长度
$$
BW=f_H-f_L(分立电路)                         BW=f_H(集成电路)
$$
本章的其余部分将关注各种复杂度不同的放大器配置的频率响应分析。我们特别感兴趣的是通过添加特定的电路组件（例如源极和射级衰减电阻（emitter-degenerate resistance）或通过完全改变电路配置来扩展放大器带宽（即，增加fH）的方法。

### 10.1 Low-Frequency Response of Discrete-Circuit Common-Source and Common-Emitter Amplifiers
在本节中，我们考虑耦合电容器和旁路电容器对分立电路共射极（CE）放大器的增益的影响。 如前所述，它们的效果仅在低频处（即，在中频带以下）表现出来。

##### 10.1.2 The Method of Short-Circuit Time Constants

在某些电路中，如不久前讨论的共射放大器的电路中，电容器存在相互作用，很难确定fL频率。然而，幸运的是，有一种简单的方法可以获得fL的估计值，而不需要确定极点的频率。尽管该方法是基于其中一个极点占主导地位的假设，虽然该假设的前提并非精确，但其仍然为fL给出了一个良好的近似。方法如下

1.假设输入信号为0

2.每次考虑一个电容器，并且在考虑这个电容器时将其他电容器的电容大小设为无穷大（换言之，将其他电容器短路）

3.对于每一个电容器$C_i$，找到从该电容器看入的电阻$R_i$，这可以通过在电容处设置一个测试电源$V_x$得到，$R_i$被定义为$V_i/I_x$

4.通过下面的式子估算3dB频率$f_L$
$$
f_L\approx\sum_{i=1}^n\frac 1{C_iR_I} 
$$
其中n是电容器的数量

除了简单之外，该方法还有一个非常重要的作用：方程式指出了每个电容器对fL值的相对贡献。具体来说，与特定电容器相关的时间常数值越低，该电容器对fL的贡献就越大。如下文所示，这一观察结果具有重要的设计意义。

短路时间常数法的应用将在下一节中说明，其中它用于确定CE放大器的fL。

## 10.1.3 The CE Amplifier

![image-20210513115023646](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210513115023646.png)

图10.9（a）显示了使用classic偏置的分立电路共射放大器，以及耦合电容器$C_{C1}$和$C_{C2}$以及旁路电容器$C_E$。我们希望能计算出该电路的fL。并且同时，我们需要确定$C_{C1}$、$C_E$和$C_{C2}$的值，以确保fL的大小符合实际应用要求，同时最小化所需的总电容值。

为了分析CE放大器的低频增益，我们使用图10.9（b）所示的等效电路。这种等效电路是通过短接$V_{CC}$，用T-model代替BJT，而忽略$r_o$得到的。忽略$r_o$的原因在于晶体管的输出电阻对分立电路放大器的增益影响很小，并且由于它的存在会导致分析相当复杂。从图10.9（b）中的电路中，我们观察到BJT基极输入电流有限导致$C_{C1}$和$C_{C2}$相互作用。也就是说，与CS放大器的情况不同，这里由$C_{C1}$和$C_{C2}$引起的两极中的每一个都将以一种复杂的方式依赖于这两个电容值，这妨碍了对设计的理解。

![image-20210513120750743](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210513120750743.png)

因此在这里我们不应当尝试去确定极点频率，而是采用短路时间常数法来估算$f_L$的值

##### Applying the Method of Short-Circuit Time Constants

这里插入一段题外话：如何判断从某个电容看入的电阻？

我们以这里的三个电容为例

$C_{C1}$:首先我们记在BJT基极上的偏置电阻的并联等效电阻为$R_B$,换言之，                        $R_B=(R_{B1}||R_{B2})$

此外在$R_B$的左侧有一个信号源的内电阻$R_{sig}$（要注意的是$R_B$并非是三极管的内电阻），接着向右看，有一个三极管，该三极管的输入电阻是$r_\pi$,并且由于$R_B$接地，$R_B$和BJT是并联关系，因此，从$C_{C1}$看入的电阻大小是
$$
(R_B||R_\pi)+R_{sig}
$$
换言之，$C_{C1}$的时间常数为
$$
τ_1=[(R_B||R_\pi)+R_{sig}]C_{C1}
$$
![image-20210513123136273](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210513123136273.png)

$C_{E}$:此时我们视 $C_{C1}$短路，因此$R_B$和$R_{sig}$并联，并且由于发射极电路上的电流和基极电路上的电流有差异，因此在基极上的电阻需要乘以系数$\frac 1{\beta+1}$。总体上看，从$C_{E}$出发的电路分成了两条支路，因此这两条支路上电阻的并联等效电阻即为从$C_{E}$看入的电阻。

故$C_E$的时间常数为
$$
\tau_E=C_E[R_E(r_e+\frac{R_B||R_{sig}}{\beta+1})]
$$
![image-20210513124016266](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210513124016266.png)

(note:由于$r_e$上方是一个受控电流源，因此它不会被算入电阻计算中)

对于$C_{C2}$这个分析过程是类似的，此处略去不表

![image-20210513124254752](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210513124254752.png)

因此我们可以根据短路时间常数来估计其3-dB频率$f_L$
$$
f_L=\frac{\omega_L}{2\pi}=\frac1{2\pi}[\frac1{\tau_1}+\frac1{\tau_E}+\frac1{\tau_2}]
$$
当在这个表达式中代入数值时，很快就会发现三个电容器中哪个对fL的贡献最大。显然，这个贡献最大的电容器是时间常数最小的电容器。在射级放大电路中，通常是$C_E$，这是因为相关的电阻RCE通常很小。知道哪种电容器有可能主导fL具有重要的设计意义，如下所示。

##### Selecting Values for CC1, CE, and CC2

我们现在讨论为$C_{C1}$、$C_E$和$C_{C2}$选择适当值的设计问题。设计目标是将较低的3-dB频率fL放置在指定位置，使电路中的总电容值最小。由于如上所述，$C_E$通常是三个电阻中最低的，因此通过选择$C_E$使总电容最小化，从而使其对fL的贡献占主导地位。也就是说，通过参考上式，我们可以选择某个电容值$C_S$，使得$1/(C_ER_E)$，比方说，是80%的$\omega_L=2\pi f_L$，让其他每个电容器贡献10%的ωL。例10.2应该有助于说明这个过程。

##### Example 10.2

我们希望为共射放大器选择一个合适的$C_{c1}$,$C_{C2}$,$C_E$,其中放大器电路参数为$R_B=100k\Omega$,$R_C=8k\Omega$,$R_L=5k\Omega$,$R_{sig}=5k\Omega,R_E=5k\Omega,\beta=100,g_m=40mA/V$,以及$r_\pi=2.5k\Omega$.设计要求为fL=100Hz

首先我们计算三个电容的时间常数

![image-20210513135315776](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210513135315776.png)

现在我们为$C_E$选择一个合适的值，使其满足其时间常数的倒数是$\omega_L$的80%

![image-20210513135643165](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210513135643165.png)

其他两个电容分别贡献10%

![image-20210513135721790](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210513135721790.png)

### 10.2 Internal Capacitive Effects and the High-Frequency Model of the MOSFET and the BJT

耦合和旁路电容会导致晶体管放大器的增益在低频端下降，而在高频时的增益下降则是由晶体管内部的电容效应引起的。在本节中，我们将简要地考虑这些影响，更重要的是，展示如何修正电路的小信号模型，以考虑这些影响。

##### 10.2.2 The BJT

在我们对BJT物理特性的研究中，我们假设晶体管对输入信号的反应是瞬时性的，因此我们开发的晶体管模型不包括任何会引起时间或频率依赖性的元件（即电容器或电感器）。然而，实际的晶体管表现出电荷存储现象，这会限制它们的运行速度和频率。我们在第三章的pn结研究中已经遇到了这种效应，并且已经知道它们可以用电容来建模。在下面我们研究了发生在BJT中的电荷存储效应，并通过在hybr$I_D$—$\pi$ model和T-model中添加电容来考虑它们对整体电路的影响。由此产生的修正BJT模型将能够预测放大器增益对频率的依赖性，以及晶体管开关和逻辑门所表现出的时间延迟

##### The Base-Charging or Diffusion Capacitance $C_{de}$（扩散电容）

当npn BJT处于放大状态时，其基极中储存的非平衡少子(电子)的数量 $Q_n$的数量可以表示为
$$
Q_n=\tau_Fi_c
$$
其中 $\tau_F$ 是一个随时间变化的常数。称为前向基极渡越时间，表示电荷载流子（电子）穿过基极的平均时间。一般来说，$\tau_F$在10 ps到100 ps的范围内。

上式常应用于振幅较大的信号中，而由于 $i_c$的大小与 $v_{be}$成指数关系，因此 $Q_n$的大小与其关系也类似，此外，对于微变信号，我们根据电容的定义式，可以得到
$$
C_{dc}\equiv\frac{dQ_n}{dv_{BE}}=\tau_F\frac{di_C}{dv_{BE}}
$$
而在小信号模型中，集电极电流大小与EBJ电压大小之间的关系，近似为跨导 $g_m$,故
$$
C_{dc}=\tau_Fg_m=\tau_F\frac{I_C}{V_T}
$$

##### The Base–Emitter Junction Capacitance $C_{je}$

$v_{BE}$的变化不仅改变了存储在基极区的电荷，还改变了存储在基极与发射极耗尽层的电荷。这种独特的电荷存储效应由EBJ耗尽层电容$C_{je}$表示。耗尽层电容近似可以以下式表示
$$
C_{je}\simeq2C_{je0}
$$
其中 $C_{je0}$为EBJ电势差为0时的电容大小

##### The Collector–Base Junction Capacitance $C_\mu$

在放大模式下，CBJ反偏，其结电容（或称势垒电容）通常记为 $C_\mu$，其表达式如下
$$
C_\mu=\frac{C_{\mu0}}{(1+\frac{V_{CB}}{V_{0c}})^m}
$$
其中，$C_{\mu0}$是CBJ零偏时的大小；$V_{CB}$ 是CBJ反向偏置电压的大小，$V_{0c}$是CBJ内置电压（通常为0.75 V），m是其分级系数（通常为0.2–0.5）。

##### The High-Frequency Models

图10.14显示了BJT在高频信号下的hybr$I_D$— $\pi$模型和T模型，其中包括了电容效应。具体来说，有两个电容：发射极-基极电容$C_π = C_{de}+C_{je}$和集电极-基极电容$C_μ$ 通常，$C_π$ 在几微法拉到几十微法之间；而 $C_\mu$的大小则在数皮法之间。注意，我们还在模型中添加了一个电阻$r_x$

![image-20210516135259569](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516135259569.png)

这个电阻是由于BJT本身材料硅晶体所带来的（该电阻由基极区域中的硅材质导致）。一般来说，$r_x$的大小是几十欧姆，并且其大小以一种相当复杂的方式取决于电流水平。通常而言 $r_x<<r_\pi$ , 因此在低频时其影响可以忽略不计。然而，在高频相应中，该电阻的作用就会变得明显，如同我们接下来将要看到的一样。

##### The BJT Unity-Gain Frequency

晶体管数据表通常不会给出 $C_\pi$的值，更不要说地说β (或称 $h_{fe}$）与频率的关系。为了确定$C_π$ 和$C_μ$的大小, 我们将导出$h_{fe}$的表达式，即CE短路电流增益，以作为hybr$I_D$- $\pi$模型中的一个参数。为此，考虑图10.15所示的电路，其中集电极和发射极之间短接。根据C处的节点方程，可算出短路集电极电流Ic的大小为

![image-20210516140511650](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516140511650.png)

（注：其中 $sC_\mu$是电容阻抗的倒数）

![image-20210516141212273](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516141212273.png)

因此 $V_\pi$大小为

![image-20210516141449788](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516141449788.png)

从而

![image-20210516141519838](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516141519838.png)

当 $\omega{C_\mu}<<g_m$时，有

![image-20210516141707338](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516141707338.png)

故

![image-20210516141747478](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516141747478.png)

其3-dB频率为 $\omega=\omega_\beta$,其中

![image-20210516141958048](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516141958048.png)

其波特图为

![image-20210516142051358](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516142051358.png)

在 $\omega=\omega_T$时，增益大小下降到1，此时的频率称作单位增益频率，大约是

![image-20210516142332486](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516142332486.png)

即

![image-20210516142410501](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516142410501.png)

或者

![image-20210516142426980](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516142426980.png)

单位增益带宽$f_T$，也称为跃迁频率，通常会在数据表上指出。在某些情况下，$f_T$是$I_C$和$V_{CE}$的函数。要了解fT如何随$I_C$变化，请回忆一下，$g_m$与 $I_C$的大小成正比，不过在我们上面的表达式中，$C_\pi$只有一部分（扩散电容 $C_{de}$的那部分）与 $I_c$是成正比的。这可以解释 $f_T$在低电流下会变小的原因，如图10.17所示。然而，图10.17所示的高电流下$f_T$的减少不能用这个论点来解释；相反，这是由于同样的现象，导致$β_0$在大电流下减小(其工作点位置发生变化导致其直流增益变小）（第6.4.2节）。
在$f_T$几乎恒定的区域，$C_π$ 的大小主要取决于扩散电容的大小，并且远大于$C_μ$. 也就是说
$$
C_\pi+C\mu\simeq{C_{de}=\tau_Fg_m}
$$
并且基于同样的原因
$$
f_T\simeq\frac{1}{2\pi\tau_F}
$$
![image-20210516151704283](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516151704283.png)

通常，$f_T$的范围是100兆赫到几十兆赫。$f_T$的值套用于此前的公式中，以确定$C_π + C_μ$. 电容$C_μ$的大小通常通过直接测量在反偏电压 $V_{CB}$下基极和集电极之间的电容大小来确定。

从图10.14（a）的高频模型中可以观察到的一个重要现象是，当频率大小介于5到10 $f_\beta$时 , 人们可以忽略电阻$r_π$ . 可以看出，此时$r_x$成为高频输入阻抗中唯一的电阻部分。因此，rx在确定晶体管电路在高频下的频率响应方面起着重要的作用。因此，只有通过高频测量才能准确确定$r_x$的大小。

在离开本节之前，我们应该提到，图10.14中的高频模型相当准确地描述了晶体管在约0.2$f_T$的频率下的运行情况。而对于更高的频率响应，我们需要在模型中添加更多的细节才行

总结

![image-20210516153916804](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516153916804.png)

### 10.3 High-Frequency Response of the CS and CE Amplifiers
在了解了BJT高频响应的等效电路模型后，我们现在讨论CS和CE放大器的高频性能问题。我们的目标是确定限制这些重要放大器在高频信号下性能的机制。同样，我们需要找到一种简单的方法来估计频率$f_H$，在该频率$f_H$处，增益比其在中频频率$| A_M |$的值低3db。

本文的分析同样适用于分立电路、电容耦合放大器和集成电路放大器。前者的频率响应如图10.1所示，后者的频率响应如图10.2所示。在我们感兴趣的频率（高频段），所有耦合和旁路电容器都表现为完美短路，两种类型的放大器都有相同的高频等效电路。

##### 10.3.2 The Common-Emitter Amplifier

图10.19（a）显示了CE放大器的高频等效电路。它是通过用图10.14（a）的高频等效电路模型替换如图10.9（a）所示的电路中的BJT，并像往常一样移除所有直流电源而获得的。注意图10.19（a）中的电路是通用的，适用于分立和集成电路放大器。因此，它包括$R_B$，通常出现在分立放大电路中。$R_C$也可以是电流源负载的无源电阻或输出电阻，对于$R_L$也是如此。

![image-20210516154349227](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516154349227.png)

通过使用戴维南定理，我们可以得到上述电路的等效电路

![image-20210516154830165](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516154830165.png)



上述的戴维南等效电路可以用于计算中频带电压收益 $|A_M|$,正如我们之前所做的一样，我们将电路中的两个电容值设为0，有

![image-20210516155357301](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516155357301.png)

接下来我们把注意力放在输入端，并且尝试在输入端处简化电路以获得一个简单的RC低通电路，为此，我们需要将桥接电容器$C_\mu$转换成从节点B'到地面的等效电容，首先我们看向输出端

在输出端，由节点方程可以看到负载电流的大小为
$$
g_mV_\pi-I_\mu
$$
此时，放大电路处于中频段的分界线处，我们可以合理的认为此时电容效应还不很明显，也就是说，此时我们可以认为$I_\mu$的大小要远远小于$g_mV_\pi$的大小，换言之 ，输出电压可以近似表示为
$$
V_o\simeq-g_mV_\pi{R_L}
$$
此时我们把$C_\mu$等效替代成阻抗，可以得到
$$
I_\mu=sC_\mu(V_{\pi}-V_{o})=sC_\mu{V_\pi}(1+g_mR_L)
$$
接着我们用一个等效电容来代替$C_\mu$,	我们只要保证在等效替代前后流入电容的电流大小相等即可，换言之
$$
C_{eq}=C_\mu(1+g_mR_L)
$$
因此我们最终将电路图简化为如下所示

![image-20210516162134641](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516162134641.png)

这样做的好处是可以将左侧单独拿出来考虑而不用考虑右侧元件对输入端的影响，接着我们对左侧电路即可进行电路分析，电容器并联时，等效电容为并联的每个电容之和
$$
C_{in}=C_\pi+C_{eq}
$$
计算时间常数的过程略去不表，可以算出传递函数为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516160346099.png" alt="image-20210516160346099" style="zoom:150%;" />

因此3-dB频率 $f_H$由下式给出

![image-20210516160450950](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516160450950.png)

并且

![image-20210516160610909](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516160610909.png)

注意$C_{in}$是$C_\pi$和密勒电容$C_\mu(1+g_mR^`_L)$ 的和。从$C_{in}$看到的电阻$R_{sig}^、$可以从上图的电路中很容易的找到，如下所示：将$V_{sig}$减至零，从端口B '和E向左看。你会看到$r_π$ 与$r_x$并联，$r_x$与$R_B||R_{sig}$ 串联。这种寻找“被电容看到”的电阻的方法是非常有用的，而且免去了繁琐的工作！


![image-20210516162241082](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516162241082.png)

##### Example 10.4

找出以下偏置配置CE放大器的 $f_H$大小

![image-20210516162441980](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516162441980.png)



首先计算hybr$I_D$- $\pi$的模型参数，有

![image-20210516162612815](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516162612815.png)

中频带增益为

![image-20210516162654562](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516162654562.png)

其中

![image-20210516162722629](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516162722629.png)

因此

![image-20210516162857426](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516162857426.png)

故

![image-20210516162924446](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516162924446.png)

转换为分贝，有

![image-20210516163041131](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516163041131.png)

为了找到 $f_H$我们首先找到 $C_{in}$

![image-20210516163136241](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516163136241.png)

以及等效源电阻

![image-20210516163307790](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516163307790.png)

从而

![image-20210516163812066](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516163812066.png)

##### 10.3.3 Miller’s Theorem（密勒定理）

在分析共源和共发射极放大器的高频响应时，我们采用了一种替代桥接电容（$C_\mu$)用于等效输入电容。这个非常有用和有效的技术是基于一个我们现在将要介绍的定理，即密勒定理。

考虑图10.20（a）中的情况。作为未显示的更大电路的一部分，我们隔离了两个电路节点，分别标记为1和2，它们之间连接阻抗Z。节点1和节点2也连接到电路的其他部分，如从两个节点发出的虚线所示。此外，假设以某种方式已经确定节点2处的电压与节点1处的电压相关，并且成正比

![image-20210516164558175](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516164558175.png)

即
$$
V_2=KV_1
$$
在通常的情况下，K是一个增益因子，它可以是正的，也可以是负的，其大小通常大于1。不过这并非密勒定理的前提假设。

密勒定理指出阻抗Z可以由两个阻抗代替：$Z_1$连接在节点1和地之间，$Z_2$连接在节点2和地之间，其中
$$
Z_1=Z/(1-K)
$$
以及
$$
Z_2=Z/(1-\frac1K)
$$
以获得下图的等效电路图

![image-20210516165009350](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516165009350.png)

密勒定理的证明如下：在图10.20（a）的原始电路中，节点1“感觉到阻抗Z的存在”的唯一方式是通过Z从节点1获得的电流I。因此，为了使等效电路中的电流保持不变，我们必须选择Z1的值，使其产生相等的电流

![image-20210516165125366](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516165125366.png)

从而我们获得了 $Z_1$的大小，同理，我们也可以借此计算出 $Z_2$的大小

（注：尽管没有明说这一点），但上述密勒等效电路仅在电路其余部分保持不变的情况下有效；否则V2与V1的比值可能会改变。因此，密勒等效电路不能直接用来确定放大器的输出电阻。这是因为在确定输出电阻时，隐含地假设源信号被减少到零，并且测试信号源（电压或电流）被施加到输出端子显然是电路中的一个重大变化，使得密勒等效电路不再有效。）

##### Example 10.5

下图显示了一个放大倍数为-100的反相放大器，其中有一个阻抗Z从输出端作为反馈回路连接到输入端，在第一种情况下，Z是一个100M的电阻；第二种情况下Z是一个1pf大小的电容。请计算这两种情况下的密勒等效电路，并计算其电压收益

![image-20210516170849717](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516170849717.png)

在本例中，显然K=100,故对于第一种情况，有

![image-20210516170632879](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516170632879.png)

因此其电压增益为

![image-20210516171047200](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516171047200.png)

![image-20210516170710832](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516170710832.png)

第二种情况下，我们先计算电容等效的容抗，从而有

![image-20210516170824503](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516170824503.png)

同理可以得到

![image-20210516171117926](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516171117926.png)

这是该放大器的传递函数，由此可算出其3dB频率为

![image-20210516171208715](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516171208715.png)

从本例中我们可以看到，对于当K小于零时，我们对桥接电阻或反馈电阻进行密勒等效替代时，会导致输入端的等效阻抗变小（1-K)倍，若该输入阻抗由电容形成，则等效电容的值会变为（1-K）倍，这被称作密勒效应

### 10.4 Useful Tools for the Analysis of the High-Frequency Response of Amplifiers

在第10.3节中，我们介绍了一种利用密勒效应的近似方法，用于分析CS和CE放大器的高频响应。 该方法可以对$f_H$进行合理准确的估算，同等重要的是，可以对限制高频运行的机制进行深入了解。 然而，不幸的是，这种方法不能应对存在负载电容$C_L$的情况。 同样，该方法不容易扩展到更复杂的放大器电路。 因此，我们将要简要介绍一些计算高频响应的工具，这些工具在分析例如共源共栅放大器等更复杂的电路时将非常有用。 我们稍稍后退几步，更普遍地考虑放大器的高频传递函数。

##### 10.4.1 The High-Frequency Gain Function

考虑到晶体管的内部电容，放大器的增益可以表示为复变函数
$$
A(s)=A_MF_H(s)
$$
其中$A_M$是中频带增益（对于集成放大电路而言，这个也是其低频时的放大增益）可以通过分析放大器等效电路并且忽略晶体管内部电容的影响来确定$A_M$的值(即视其为)。 而当我们将放大器的内部电容纳入考虑范围时，我们可以得到$F_H(s)$，该数值可以用其极点和零频率点（通常是实数）表示，如下所示

![image-20210516185709560](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516185709560.png)

其中$ω_{p1}$，$ω_{p2}$......$ω_{pn}$是指n个极点的频率，$ω_{Z2}$，······$ω_{Zn}$是表示n个零频率点的频率。在高频响应中，零频率点和极点的频率根据定义大于中频率，我们从等式（10.71）中可以看出，当s接近中间带频率时，$F_h(s)$大小将逐渐接近1，也使得放大电路的增益大小逐渐接近$A_M$

##### 10.4.2 Determining the 3-dB Frequency $f_H$

放大器设计人员通常对靠近中频带的高频部分特别感兴趣。 这是因为设计人员需要估计（或者根据需要修改）3 dB上限频率$f_H$（或$ω_H$； $f_H =ω_H/2π$）的值。不过需要指出的时，在许多情况下，零频率点要么是无穷大的，要么是对于确定$ω_H$无关紧要的高频。 如果另外一个极点（例如$ω_{P1}$）的频率比其他任何一个极点的频率低得多，则该极点将对放大器$ω_H$的值产生最大的影响。 换句话说，该极点将主导放大器的高频响应，并且称该放大器具有一个主极点。 在这种情况下，函数$F_H$可以近似为

![image-20210517185357271](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210517185357271.png)

也就是一阶单时间常数网络的传递函数

这是我们在第10.3节分析的共射极放大器的情况。根据经验法则，如果频率最低的极点与最近的极点或零频率点至少有四倍频的距离，则存在主极点。如果主极不存在，则3-dB频率$ω_H$可由$| F_H（jω)|$的图像确定。或采用如下的近似公式，为简单起见，仅考虑在高频带中具有两个极点和两个零频率点的电路的情况

![image-20210517190133876](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210517190133876.png)

将 $s=j\omega$代入并平方，有

![image-20210517190351433](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210517190351433.png)

根据定义，在3-dB频率( $\omega=\omega_H$) 下，放大倍数会下降一半，也就是说

![image-20210517190611463](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210517190611463.png)

由于 $\omega_H$的大小通常要小于极点和零频率点的大小，因此我们可以略去带有 $\omega_H^4$的几项，解方程，有

![image-20210517190839164](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210517190839164.png)

并且可以延伸到任意极点与零点数

![image-20210517190922972](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210517190922972.png)

##### 10.4.3 The Method of Open-Circuit Time Constants（开路时间常数法）

如果可以很容易地确定放大器传递函数的极点和零点，那么我们就可以使用上述方法来确定$f_H$。然而，在许多情况下，计算传递函数并非易事。在这种情况下，可以使用开路时间常数的方法获得$f_H$的近似值，如同我们将在下面介绍的。
该方法与我们在第10.1节中用于估算$f_L$的短路时间常数方法类似。
考虑函数$F_H(s)$（等式10.71），它决定放大器的高频响应。将其分子分母展开化简，有

![image-20210517191612005](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210517191612005.png)

其中系数a、b分别对应零点和极点的频率大小，特别的，系数$b_1$由下式给出。

![image-20210517191745123](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210517191745123.png)

也就是说，$b_1$的值是n个时间常数之和，换言之，假如要得到$b_1$的值，我们可以在电路的高频等效电路中依次计算其时间常数并求和，如同我们在短路时间常数法中所做的一样，我们每考虑一个电容，就将所有其他电容设置为开路，并令信号源电压为0，来计算其时间常数，有

![image-20210517192454136](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210517192454136.png)

最后有

![image-20210517192703928](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210517192703928.png)

需要指出的是，大多数情况下电路系统都不存在主极点，但该方法仍然可以得到一个良好的近似结果

### 10.5 High-Frequency Response of the Common-Gate and Cascode Amplifiers

尽管共射放大电路可以提供较大的电压增益，但其在高频段处的增益下降十分明显，其主要原因在于其由于密勒效应而变大的$C_{in}$电容，因此，假如我们要获得受高频信号输入影响较小的放大电路，应该采用密勒效应小或不受密勒效应的放大电路，即共基共射电路

##### 10.5.3 High-Frequency Response of the Bipolar Cascode Amplifier

此前我们曾提到过，共射共基电路能同时提供高的电压增益（$A^2$）和大的输入电阻，其等效电路如下图所示

![image-20210518113456711](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210518113456711.png)

观察到我们在电路图中又增加了三个电容$C_L、C_{cs1}、C_{cs2}$,其中，$C_L$指共射共基电路电流源负载的电容大小以及后续放大电路（如果有）中的等效电容大小；$C_{cs1}、C_{cs2}$则指集电极与衬底之间的电容大小

确定其3-dB频率最方便的办法是开路时间常数法，我么将从电路的底部到顶部逐层分析

1.首先将下方电路（共射部分）转换为等效小信号模型，在这里我们采用T-model，等效电路图略去不表

2.计算$R_{sig}'$的值，有
$$
R_{sig}'=r_{\pi1}||(r_{x1}+R_{sig})
$$
3.计算由$C_{\pi1}$看入的电阻，有
$$
R_{\pi1}=R_{sig}'
$$
4.计算在$C_1$节点的等效电阻，该等效电阻为$Q_1$的输出电阻与$Q_2$的输入电阻的并联等效值，有
$$
R_{c1}=r_{o1}||[r_{e2}(\frac{r_{o2+R_L}}{r_{o2+R_L/(\beta_2+1)}})]
$$
5.计算从$C_{\mu1}$看入的电阻，这是一个较为复杂的电路，直接“看”是难以得出等效电阻的，因此我们在$C_{\mu1}$处放置一个测试电源，用比值法来定义其电阻，如下图所示

![image-20210518131805837](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210518131805837.png)

注意到
$$
V_{be}=-I_xR_{sig}'
$$
从而得到
$$
R_{\mu1}=R_{sig}'(1+g_{m1}R_{c1})+R_{c1}
$$
6.计算$C_2$节点的电阻，即整个共基共射电路的输出电阻
$$
R_o\simeq\beta_2r_{o2}
$$
7.
$$
\tau_H=C_{\pi_1}R_{\pi1}+C_{\mu1}R_{\mu1}+(C_{cs1}+C_{\pi2})R_{c1}+(C_L+C_{cs2}+C_{\mu2})(R_O||R_L)
$$
从而$f_H\simeq\frac{1}{2\pi\tau_H}$

如果我们展开 $\tau_H$,可以发现 $\tau_H$由三部分组成
$$
\tau_H=R_{sig}(C_{\pi1}+C_{\mu1}(1+g_{m1}R_{c1}))+R_{c1}(C_{\mu1}+C_{cs1}+C_{\pi2})+(R_L||R_O)(C_L+C_{cs2}+C_{\mu2})
$$
这三部分分别对应了共基共射电路的输入端，中间段与输出端,可以看到在输入端（共射放大电路部分）我们依然能看到因为密勒效应而变大的电容 $C_{\mu1}$

当信号源的内阻很大时，显而易见，第一部分将在式子中占据主导地位（特别是当密勒效应的系数很大时）；同时，当负载电阻很大时，会使得 $R_{in2}$变大从而导致 $R_{c1}$变大， 这要求共射电路提供更大的放大倍数。因此为了在高信号源内阻的条件下获得大带宽，我们需要尽量减小负载电阻的大小以减少密勒效应的系数大小

当信号源的内阻小时，第一项内的密勒效应显得无足轻重，此时我们可以利用大的负载电阻来使共基共射电路的放大倍数最大（$A_o^2$），在这种情况，式子的第三部分将占据主导地位，更极端一些，假设信号源无内阻并且中间项可以忽略不计，则有

![image-20210518151405339](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210518151405339.png)

因此其3-dB频率大小为

![image-20210518151434685](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210518151434685.png)

### 10.6 High-Frequency Response of the Source and Emitter Followers

在本节中，我们研究两个重要电路构建模块的高频响应：源极跟随器和射极跟随器。 两者的中频带电压增益均小于但接近于1。 它们的优势在于其高输入电阻和低输出电阻。 因此，它们可用作多级放大器的输出级和电压缓冲器。 不久将看到，这些电压跟随器还具有另一个重要优势，即宽带宽。

## CHAPTER 11 Feedback

### Introduction

大多数物理系统都包含某种形式的反馈。 有趣的是，负反馈理论是由电子工程师开发的。 在寻找用于跨大西洋电话中继器的具有稳定增益的放大器的设计方法时，西方电气公司的电子工程师Harold Black于1928年发明了反馈放大器。此后，该技术得到了如此广泛的应用，以至于如果没有某种形式的隐式或显式反馈，几乎不可能构成电子电路。 此外，反馈的概念及其相关理论目前也会在工程以外的领域中使用，例如在生物系统的建模中。

反馈有两种类型：正反馈与负反馈，在放大器设计中我们一般采用负反馈来完成一以下目的

1.降低增益灵敏度：也就是说，使增益值对电路元件值的变化不那么敏感，例如温度变化可能引起的变化。

2.减少非线性失真：即使输出与输入成比例（换句话说，使增益恒定且与信号电平大小无关）。

3.减少噪音的影响：也就是说，尽量减少电路元件本身或外部干扰产生的不需要的电信号对输出的影响。

4.控制输入和输出电阻：即通过选择适当的反馈结构来提高或降低输入和输出电阻。

5.提高放大器的带宽

上述所有理想特性都是以降低增益为代价获得的。结果表明，称为反馈量的增益折减因子是使电路失敏、增加电压放大器的输入电阻、扩展带宽等的因子。简言之，负反馈的基本思想是用增益来换取其他期望的特性。本章致力于研究负反馈放大器们的分析、设计和特性。

在某些条件下，放大器中的负反馈可以变为正反馈，并且其幅度足以引起振荡。实际上，在第18章我们将研究正反馈在振荡器和双稳态电路设计中的应用。然而，在本章中，我们对稳定放大器的设计感兴趣。因此，我们将研究负反馈放大器的稳定性问题及其振荡的可能性。

然而，这并不意味着正反馈总是导致不稳定。事实上，正反馈在许多非再生应用中非常有用，例如第17章研究的有源滤波器的设计。

在我们开始研究负反馈之前，我们希望提醒读者，我们已经在许多应用中遇到了负反馈。几乎所有的运算放大器电路（第二章）都采用负反馈。负反馈的另一个流行应用是使用发射极电阻RE来稳定双极晶体管的偏置点，并增加BJT放大器的输入电阻、带宽和线性度。另外，源极跟随器和发射极跟随器都采用了大量的负反馈。

接下来的问题是，是否有必要对负反馈进行正式研究。如本章结尾所述，反馈的形式化研究为电子电路的分析和设计提供了宝贵的工具。此外，从反馈的角度思考所获得的洞察力也会非常有益

### 11.1 The General Feedback Structure

##### 11.1.1 Signal-Flow Diagram

图11.1给出了反馈放大器的基本结构。 图11.1是信号流程图，不显示电压和电流，其中x可以表示电压或电流信号。 一般而言，放大器是单向的,其开环增益记为$A$；因此它的输出$x_o$与输入$x_i$的关系为

$$
x_o=Ax_i
$$
![image-20210518153144682](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210518153144682.png)

而反馈网络则使输出信号相反方向提供了一个反馈信号 $x_f$其大小由一个反馈系数（因子）决定
$$
x_f=\beta{x_o}
$$
我们假定将反馈网络连接到放大器输出端不会改变增益$A$或$x_o$的值； 也就是说，反馈网络所产生的信号不会加载到放大器输出上。而且，反馈网络同样是单向的。

从源信号$x_s$中减去反馈信号$x_f$，所得到的信号$x_i$是该基本放大器的输入，注意到正是因为这样的原因导致其得名为“负反馈”。

##### 11.1.2 The Closed-Loop Gain

负反馈放大器的增益称之为闭环增益或反馈增益，记为 $A_f$，定义为
$$
A_o\equiv\frac{x_o}{x_s}
$$
代入上一节中的式子，有
$$
A_f=\frac{A}{1+A\beta}
$$
其中 $A\beta$称为环路增益（loop gain），对负反馈结构而言，其环路增益必然为正，从而可以降低输入放大器的信号振幅。在大部分电路中，$Aβ$的大小往往都远大于一，因此上式也可以写作

![image-20210518154844264](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210518154844264.png)

这指出了一个很有趣的结果：当放大器的环路增益很大时，反馈放大器的增益大小几乎完全由反馈电路决定，而反馈电路中一般不会包含有源器件，因此反馈电路的增益大小可以做到精确控制。换句话说，总增益几乎不依赖于基本放大器的增益$A$，这是一个理想的特性，因为增益$A$通常是许多制造和应用参数的函数，其中一些参数可能具有宽容差。

我们已经在第2章中看到了运算放大器电路中所有这些效应的生动说明，其中闭环增益几乎完全由反馈元件决定。 通常，我们将（1 /β）视为$A_f$的理想值。

我们可以将公式（11.1）至（11.3）组合在一起，以获得反馈信号$x_f$ 的表达式：

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210518155312719.png" alt="image-20210518155312719" style="zoom: 25%;" />

从中我们可以证明在$A_β$>>1时，xi变得非常小。 跟踪运算放大器的两个输入端子。 我们观察到负反馈会减少出现在基本放大器输入端子上的信号，具体地说，降低了（1 $+A_β$）倍。 稍后将看到，正是这种输入信号的减少导致反馈放大器的线性度增加。

##### 11.1.3 The Loop Gain

从上面的讨论中我们可以看到，环路增益$A_β$是反馈放大器的一个非常重要的参数，实际上,它是最重要的特性参数：

$1.A_β$的符号决定了反馈的极性； 环路增益$A_β$必须为正，反馈才能为负。

$2.A_β$的大小决定了闭环增益$A_f$与理想值$1$ /β的接近程度。

$3.A_β$的大小决定了反馈系数（1 $+A_β$）的大小，因此，正如我们将在下一部分中看到的那样，它决定了由负反馈引起的放大器性能的各种改进。

4.正如我们将在后面的部分中看到的那样，$A_β$不可避免地随频率变化的问题会导致$A_β$变为负值，进而使反馈放大器变得不稳定。 因此，稳定反馈放大器的设计可能涉及适当修改其环路增益Aβ的频率特性（第11.10节）。

环路增益的重要性促使我们思考如何才能得到环路增益的数值，上面的流程图告诉我们环路增益的值可以有以下几步得出

1.设输入信号 $x_s=0$

2.在适当的地方打断反馈回路并保证A和β值不会发生改变

3.在被打断的反馈回路节点处施加一个测试电压 $x_t$,然后测量放大器的输出电压 $x_r$，如下图

![image-20210518160723914](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210518160723914.png)

有
$$
x_r=--A\beta{x_t}
$$
从而
$$
A\beta=-\frac{x_r}{x_t}
$$
我们观察到，由于$A_β$为正，因此返回的信号$x_r$将与测试信号$x_t$异相，从而验证反馈确实为负。 实际上，此方法用于定性确定反馈的极性。 在后面的部分中，我们将有更多关于环路增益的内容。

##### Example 11.1

图11.3（a）所示的同相运算放大器配置直接实现了图11.1的反馈环路。

![image-20210518161515612](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210518161515612.png)



求：1.假设运放的输入电阻为无穷大而输出电阻为0，请计算 $\beta$的表达式

为了能够更清楚地看到图11.3（a）中的电路与图11.1中的框图之间的直接对应关系，我们用其等效电路模型代替了运算放大器，如图11.3（b）所示。  。

由于运算放大器被假定具有无限的输入电阻和零输出电阻，因此其模型是增益大小为$A$的理想电压控制电压源。从图11.3（b）可以看出，反馈网络由分压器组成 （R1，R2）并直接连接到输出，并将信号$V_f$馈送到运算放大器的反相输入端子。 在这一点上重要的是要注意，运算放大器的零输出电阻会导致输出电压为$AV_i$，而与R1和R2的值无关。 这就是我们在图11.1的框图中假定反馈网络不给基本放大器加载的陈述的意思。 现在我们可以轻松地从中确定反馈因子β
$$
\beta\equiv\frac{V_f}{V_o}=\frac{R_1}{R_1+R_2}
$$
接下来，让我们研究如何从输入端的$V_s$中减去$V_f$。 通过运算放大器的差分作用可以有效地进行减法运算。 就其本质而言，差分输入放大器利用其两个输入端子之间的信号差。 我们还应观察到，由于假定运算放大器的输入电阻是无限的，所以没有电流流入运算放大器的负输入端，从而反馈网络不会在输入侧给放大器加载负载。

2.假设A（$A=10^4$)减少20%，则反馈回路的放大倍数 $A_f(A_{f0}=10)$会下降多少？

该情况下$A>>A_f$从而有

![image-20210518154844264](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210518154844264.png)

故
$$
\beta\simeq\frac1{A_f}=0.1
$$
从而
$$
\frac1{\beta}=1+\frac{R_2}{R_1}=A_f=10\rightarrow\frac{R_2}{R_1}=9
$$
进行迭代，可以得到
$$
A_f=\frac{A}{1+A\beta}\rightarrow\beta=0.0999
$$
假设$A$减小20%，则
$$
A_f=\frac{0.8*10^4}{1+0.8*10^4*0.0999}=9.9975
$$
变化了不到0.025%

##### 11.1.4 Summary

![image-20210518164624187](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210518164624187.png)

### 11.2 Some Properties of Negative Feedback

##### 11.2.1 Gain Desensitivity

例11.1演示了负反馈对闭环增益降低灵敏度的影响，在该示例中，我们看到基本放大器的增益降低了20％，环路增益仅降低了0.025％。这种降低灵敏度的特性可以通过以下方法建立分析

假设 $\beta$是一个常数，对
$$
A_f=\frac{A}{1+A\beta}
$$
两侧微分，有
$$
dA_f=\frac{dA}{(1+A\beta)^2}
$$
两式相除，有

![image-20210518185618285](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210518185618285.png)

这表明$A_f$的变化率（由于某些电路参数的变化）要远远小于A的变化率

##### 11.2.2 Bandw$I_D$th Extension

考虑一个放大器，其高频响应以单极点为特征。 它在中高频时的增益可以表示为

![image-20210518190113160](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210518190113160.png)

在该放大器周围施加具有与频率无关的系数β的负反馈会产生由下式给出的闭环增益$A_f(s)$

![image-20210518190214790](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210518190214790.png)

代入，有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210518190248364.png" alt="image-20210518190248364" style="zoom:67%;" />

从而反馈回路会有一个中频带增益 $A_M/(1+A_M\beta)$，并且其频率上限 $\omega_{Hf}$为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210518190607807.png" alt="image-20210518190607807" style="zoom:67%;" />

换言之，其频率上限会随着反馈系数的变大而变大。类似的，假如一个放大器的开环收益函数中只有一个低频极点，则

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210518190849513.png" alt="image-20210518190849513" style="zoom:67%;" />

请注意，从中我们可以看出，在放大器带宽增加时，中频带增益将以相同的倍数减小，从而将增益带宽积保持在恒定值。 图11.4中的波特图进一步说明了这一点。

最后，请注意，负反馈在扩展放大器带宽方面的作用不足为奇：负反馈可最大程度地减小增益幅度的变化，包括其随频率的变化 

![image-20210518191735071](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210518191735071.png)

##### 11.2.3 Interference Reduction

负反馈可用于减少放大器中的干扰，或更准确地说，可用于增加信号与干扰的比率。 但是，正如我们现在要解释的那样，只有在某些条件下，这种减少干扰的过程才可能实现。 考虑图11.5所示的情况。 图11.5（a）显示了一个具有增益$A_1$，输入信号$V_s$和干扰$V_n$的放大器。 假定由于某种原因该放大器遭受干扰，并且假定干扰可以被引入到放大器的输入端。 该放大器的信噪比为
$$
S/I=V_x/V_n
$$
![image-20210518192252380](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210518192252380.png)

接着考虑下图的电路，在这里我们假设我们可以在这个电路中建立另一个放大器电路$A_2$，并且假设该放大器电路不会受到噪声影响

![image-20210518192514287](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210518192514287.png)

最后我们在总体电路的两侧施加反馈回路，通过叠加原理，可以得到

![image-20210518193038701](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210518193038701.png)

从而整个电路的信噪比为
$$
\frac{S}{I}=\frac{V_s}{V_n}A_2
$$
比之原来的值高出$A_2$倍

我们再次强调，只有当操作者可以使某个放大电路系统几乎完全不受噪声干扰时，才可以使用负反馈来提高信噪比，不过在大多数情况下这种情况都是有可能的。最好的例子是在音频放大器的输出功率放大器级。 这样的阶段通常会遭受电源嗡嗡声的问题。 这是由于该级从电源汲取大电流并且难以简单的地提供足够的电源滤波而出现的问题。 即要求功率输出级提供大的功率增益，但提供很少或没有的电压增益。 因此，我们可以在功率输出级之前放置一个小信号放大器，该放大器提供大的电压增益，然后施加大量的负反馈，从而将电压增益恢复到其原始值。 由于小信号放大器可以由另一个笨重（因此调节性能更好）的电源供电，因此不会出现嗡嗡声问题。

##### 11.2.4 Reduction in Nonlinear Distortion

图11.6中的曲线（a）显示了放大器的传输特性vO与vI的关系。 如图所示，该特性是分段线性的，电压增益从1000变为100，然后变为0。这种非线性传递特性将导致该放大器产生大量的非线性失真。

通过施加负反馈，可以将放大器的传递特性进行相当大的线性化。 这样做并不令人惊讶，因为我们已经看到，负反馈降低了整个闭环增益对基本放大器的开环增益的依赖性。

![image-20210518193724231](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210518193724231.png)

为了说明这一点，让我们将β= 0.01的负反馈应用于放大器，其开环电压传递特性如图11.6所示。 闭环放大器的最终传输特性，$v_0$与$v_S$的关系，在图11.6中显示为曲线（b）。 这里最陡段的斜率由下式给出

![image-20210518194107308](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210518194107308.png)

然后是下一段斜率

![image-20210518194138722](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210518194138722.png)

可以看到斜率的数量级变化已大大减少。 当然，付出的代价是电压增益的降低。 因此，如果必须恢复总增益，则应添加前置放大器。 该前置放大器不应出现严重的非线性失真问题，因为它将处理较小的信号。

最后，应该注意的是，负反馈对放大器的饱和状态完全没有任何作用，因为在饱和状态下，增益很小（几乎为零），因此反馈量几乎为1。

### 11.3 The Feedback Voltage Amplifier

根据要放大的参数（电压或电流）和所需的输出形式（电压或电流），放大器可以分为四类。 这些类别在第1章中进行了讨论。在本节中，我们研究最常见的放大器类型：电压放大器。我们从通过确定将负反馈施加到电压放大器的适当配置来进行研究。 然后，我们提出了一种用于分析反馈电压放大器的简单方法。 该方法利用了环路增益$A_β$

##### 11.3.1 The Series–Shunt Feedback Topology

电压放大器旨在放大输入电压信号并提供输出电压信号。 电压放大器本质上是一个电压控制的电压源。 输入电阻要求较高，输出电阻要求较低。 由于信号源本质上是电压源，因此可以用戴维南等效电路来表示。 由于关注的输出量是输出电压，因此反馈网络应该对输出电压进行采样，就像电压表测量电压一样。同样，由于电压源的戴维南等效表示，反馈信号$x_f$应当可以用一个与电压源串联的电压源来表示。

从上面的讨论中可以看出，一般而言，最适合电压放大器的反馈网络形式如下

![image-20210519115403937](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210519115403937.png)

在该反馈结构中，输入端采用串联结构，使反馈电压能够很好的作用于输入电压上而输出结构采用并联结构（或类似的结构）使反馈电压不会对下一级造成影响。如同我们将要展示的那样，这种结构不仅稳定了电压增益 $V_o/V_s$，还产生了更高的输入电阻 $R_{in}$和更低的输出电阻 $R_{out}$

输入电阻增加的原因在于反馈回路使得信号源到达放大器输入端的信号从 $V_s$变小成 $V_i$,而较小的输入信号进一步导致输入电流变小，这使得从 $V_s$看入的电阻变大，在下一部分中我们将会计算反馈放大器输入电阻的公式

输出电阻降低是因为反馈可将$V_o$保持尽可能恒定。 因此，如果从放大器输出汲取的电流变化了$\Delta I_o$，则$V_o$中的变化$\Delta V_o$将小于不存在反馈时的变化$\Delta V_o$。 因此，输出电阻$\Delta V_o$ / $\Delta I_o$将低于开环放大器的值。 在下面的部分中，我们将得出反馈电压放大器的输出电阻的表达式

##### 11.3.2 Examples of Series–Shunt Feedback Amplifiers

串联-并联反馈放大器的三个例子如图11.8所示。 图11.8（a）中的放大器是熟悉的同相运算放大器配置。 由分压器（$R_1$，$R_2$）组成的反馈网络产生一个电压$V_f$，该电压被施加到运算放大器的负输入端。 通过利用运算放大器差分输入的差分作用，可将$V_f$减去$V_s$。 为了使反馈为负，$V_f$必须与$V_s$具有相同的极性，从而在基本放大器的输入端产生较小的信号。 随着输入电压增大，我们发现反馈电压也会随之线性增大，从而达到负反馈的效果

![image-20210519121615598](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210519121615598.png)

如图11.8（b）所示，第二个反馈电压放大器级联使用两个MOSFET放大器级。 输出电压$V_o$通过由分压器（$R_1$，$R_2$）组成的反馈网络采样，反馈信号$V_f$被馈送到$Q_1$的源极端子。 通过将$V_s$施加到$Q_1$的栅极并将$V_f$施加到其源极来实现信号大小的减小，结果是该放大器输入端的信号$V_i$ = $V_{gs}$ = $V_s$ -$V_f$。 

串联-分流反馈的第三个例子如图11.8（c）所示，它使用了CG晶体管Q，其输出电压$V_o$的一部分$V_f$通过分压器（$R_1$，$R_2$）反馈到栅极。 观察到，CG放大器的输入$V_i$为$V_s$-$V_f$。 但是，像往常一样，我们必须检查反馈的极性：如果$V_s$增加，则$V_d$（即$V_o$）将增加，而$V_f$将相应地增加。 因此，$V_f$和$V_s$的变化趋势相同，从而验证反馈是否为负。

##### 11.3.3 Analysis of the Feedback Voltage Amplifier Utilizing the Loop Gain

在第11.1节中研究的反馈分析方法不能直接应用于实际的反馈电压放大器，例如图11.8中的放大器。 这是因为第11.1节的分析方法是基于以下假设：反馈网络不会影响基本放大器的放大倍数和信号源输入大小。 不幸的是，这种假设在大多数实际的放大器电路中不成立。 如图11.8的电路所示，反馈网络是一个简单的电阻电路，显然会影响到放大电路的特性参数。 例如，在图11.8（b）的电路中，组成反馈网络的电阻$R_2$和$R_1$的值会影响作为基本放大器一部分的共源级$Q_2$的增益（从整体上看，$Q_2$的偏置电路中多出了两个并接的电阻，这使得$Q_2$的工作点位置会受到影响）。 同样，反馈网络电阻$R_1$的值会影响$Q_1$放大器级的增益，该级是基本放大器的一部分。 因此，我们不能轻易地将放大电路与反馈电路分离开来来确定A和β，因此不能使用11.1和11.2节中所描述的的反馈公式。

虽然确定A和β并不容易，但我们依然可以使用11.1.3节中介绍的方法确定其乘积，即环路增益$Aβ$的大小。 另外，我们可以通过识别和隔离反馈网络（例如，图11.8中每个电路中的电阻分压器（R1，R2））轻松获得β值。 然后，我们可以使用Aβ和β的值来确定A和Af。 这种确定环路增益的方法很简单，我们将在本节中使用它来进行反馈电压放大器的分析。 然而，该方法具有局限性，将在后面提到。 下一节将介绍一种更准确，系统的分析反馈电压放大器的方法。

环路增益分析方法包括四个步骤：

1.找出反馈网络，并使用它来确定β的值。

2.定义闭环增益$A_f$的理想值为1 /β。当$Aβ>>1$时，$A_f$的值会十分接近于理想值。$A_f$的理想（或上限）值可用于反馈放大器的初始设计。 它还可以检查下面计算出的$A_f$的实际值。

3.使用第11.1.3节中描述的方法确定环路增益Aβ。 回想一下，在中断循环时，应注意不要更改循环中的条件。 因此，如果我们中断$XX'$处的反馈回路，如图11.9（a）所示，并在$XX'$左侧的端子施加测试电压$V_t$，则$XX'$右侧的端子必须为在施加电压$V_r$的同时也要串入一个阻抗$Z_t$，其大小与节点$XX'$左侧的戴维南等效电阻的阻值相等。、

![image-20210519160724511](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210519160724511.png)

从而环路增益为
$$
A\beta=\frac{A}{1+A\beta}
$$
一般来说，我们打断循环的点需要尽可能取在等效阻抗很大或接近无穷大的点处

4.使用Aβ的值与β的值一起确定开环增益A。然后，从下式确定闭环增益Af：
$$
A_f=\frac{A}{1+A\beta}
$$
如下面的例题所示

##### Example 11.2

对于图11.8（b）的串联-并联反馈放大器，忽略MOSFET的$r_o$

（a）给出反馈网络（β电路）和β的表达式。 同时计算闭环增益Af的理想值或上限值的表达式。

（b）求出$R_2 / R_1$之比，使之闭环增益的理想值为10。 如果$R_1$ = 1 k，则$R_2$必须具有什么值？

（c）找到环路增益Aβ的表达式。

（d）如果$g_{m1}$ = $g_{m2}$ = 4 mA / V且$R_{D1}$ = $R_{D2}$ = 10 k，确定Aβ，A和$A_f$的值



解：

（a）反馈网络如下所示

![image-20210519161517038](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210519161517038.png)

因此
$$
\beta=\frac{V_f}{V_o}=\frac{R_1}{R_1+R_2}
$$
从而可以得到闭环增益的理想值为
$$
A_f\simeq\frac1{\beta}=1+\frac{R_2}{R_1}
$$
（b）由上题知

![image-20210519161814066](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210519161814066.png)

（c）为了计算闭环增益的值，我们首先使信号源电压为0，再在$Q_1$的漏极和$Q_2$的栅极之间寻找一个最适合打断循环的点（我们选择在这条支路上打断循环的原因是$Q_2$的栅极输入电阻为无穷大，因此等效电阻可以直接看作断路）。结果电路如下图所示

![image-20210519162709727](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210519162709727.png)

有

![image-20210519163156606](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210519163156606.png)

从而

![image-20210519163219985](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210519163219985.png)

（d）

![image-20210519163249713](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210519163249713.png)

##### Example 11.3

在图11.11（a）的串联-并联反馈放大器中，运算放大器输入电阻为$R_{$I_D$}$，开路电压增益$μ$和输出电阻$r_o$。 计算β的表达式，$A_f≡V_o$ / $V_s$的理想值和环路增益Aβ。

![image-20210519163501815](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210519163501815.png)

solution

显然其反馈网络为由$R_1$和$R_2$所构成的串联电路，因此

![image-20210519164214544](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210519164214544.png)

从而

![image-20210519164233676](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210519164233676.png)

为了确定环路增益，我们将$V_s$设置为0，并用其等效电路模型代替运算放大器。结果电路如图11.11（b）所示。 接下来，我们断开环路以施加测试电压$V_t$，同时在断开处终止环路，其阻抗等于断开环路之前的阻抗。 产生的电路如图11.11（c）所示，其中在运算放大器的输入端子处环路已断开，左侧端子连接的电阻等于$R_{$I_D$}$。

![image-20210519164410284](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210519164410284.png)

![image-20210519164450180](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210519164450180.png)

根据分压原理，可以得到

![image-20210519170429586](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210519170429586.png)

##### 11.3.4 A Final Remark

环路增益分析方法虽然简单，但并不完整：它无法使我们找到反馈放大器的输入和输出电阻。 下一节将弥补这一缺点，我们在此提供了一种系统的方法来分析反馈电压放大器

### 11.4 Systematic Analysis of Feedback Voltage Amplifiers

在本节中，我们提供了用于分析反馈电压放大器的系统计算方法。 该过程实质上是拆解给定的反馈电压放大器电路，以获得“ $A$电路”，从中我们可以确定开环增益A和开环放大器的其他参数，例如输入和输出电阻， 和“$β$电路”，从中可以找到反馈因子β的值。从而我们根据这两个电路中计算出来的参数来确定反馈放大器中其他参数的值，比如闭环增益和输出电阻，等等

我们的方法是首先考虑反馈网络不影响基本放大电路参数的理想情况。 然后，我们考虑实际情况，其中反馈网络不仅对基本放大器的特性造成影响，而且还有一个有限的源电阻$R_s$和一个有限的负载电阻$R_L$。

##### 11.4.1 The $I_D$eal Case

如前所述，串联-并联是电压放大器的合适反馈拓扑。串联-并联反馈放大器的理想结构如图11.12（a）所示。

它由一个单边开环放大器（A电路）和一个理想的电压采样，电压混合反馈网络（β电路）组成。  A电路具有输入电阻$R_i$，开路电压增益A和输出电阻$R_o$。我们假设其信号源内阻为0并且没有负载电阻。更一步的，注意到β电路并没有连接到A电路上，这就是说β电路并没有改变A电路的放大倍数

![image-20210524185025481](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210524185025481.png)

上图的电路遵循我们此前提到的反馈模型，即
$$
A_f\equiv\frac{V_o}{V_s}=\frac{A}{1+A\beta}
$$
串联-并联反馈放大器的等效电路模型如图11.12（b）所示。 观察到$A_f$是反馈放大器的开路电压增益，$R_{if}$是其输入电阻，$R_{of}$是其输出电阻。$R_{if}$ 和$R_{of}$的表达式可以如下得出。

对于$R_{if}$，请参考图11.12（a）中电路的输入回路。 串联混频从$V_s$中减去$V_f$，因此将$V_i$减小为
$$
V_i=\frac{V_s}{1+A\beta}
$$
从而输入电流变为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210524185700349.png" alt="image-20210524185700349" style="zoom: 80%;" />

从而输入电阻（整体）的值变为
$$
R_{if}\equiv\frac{V_s}{I_i}=(1+A\beta)R_i
$$
因此，如预期的那样，串联混频反馈导致放大器输入电阻的增加等于反馈量（1 +Aβ）的因数，这是电压放大器非常希望的特性。

为了确定图11.12（a）中反馈放大器的输出电阻$R_{of}$，我们将$V_s$设为0并在输出端子之间施加测试电压$V_x$，如图11.13所示。 如果从$V_x$汲取的电流为$I_x$，则输出电阻$R_{of}$为 
$$
R_{of}\equiv\frac{V_x}{I_x}
$$
在输出端的回路方程可以得到

![image-20210524190135871](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210524190135871.png)

而在输入回路中，有

![image-20210524190209615](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210524190209615.png)

现在有$V_f=\beta V_0=\beta V_x$,因此

$$
V_i=-βV_x
$$
![image-20210524190413668](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210524190413668.png)

代入原式，有

![image-20210524190447366](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210524190447366.png)

从而

![image-20210524190458583](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210524190458583.png)

因此，正如预期的那样，输出端的并联采样（或电压采样）导致放大器输出电阻减小一个等于负反馈量（1 +Aβ）的因数，这是电压放大器的另一个非常理想的特性 。

尽管可能并不完全明显，但输出电阻的减小仅是对输出进行采样的方法的结果，而与混合方法无关。因此，晶体管放大器是采用分流（或电压）采样的另一种放大器类型，其输出电阻也将减小。

##### 11.4.2 The Practical Case

在实际的串联-并联反馈放大器中，反馈网络将不是理想的电压控制电压源。 相反，如图11.8的电路所示，反馈网络通常是电阻性的，因此会给基本放大器加载，从而影响A，$R_i$和$R_o$的值。 此外，将有有限的源电阻和负载电阻，这反过来会影响这三个参数。 因此，我们面临的问题如下：给定一个串联分流反馈放大器，如图11.14（a）的框图所示，找到A电路和β电路。

本质上，问题在于用图11.12（a）的理想结构来表示图11.14（a）的通用反馈电压放大器。 该解决方案在没有推导的情况下如图11.14（b）所示。 我们进行以下观察。

1.通过在输入端增加源电阻$R_s$和电阻$R_{11}$，在输出端增加负载电阻$R_L$和电阻$R_{22}$来基本放大完善基本放大器，从而获得A电路。 电阻$R_{11}$和$R_{22}$分别代表反馈网络在输入和输出上对基本放大器的负载效应

$2.R_{11}$是端口1在端口2短路时看入的电阻，$R_{22}$则是端口2在端口1开路时看入的电阻。这些定义已经展现在图11.14(c)中。由于反馈网络与输出并联连接，因此将其端口2短路会破坏反馈。 同样，由于反馈网络与输入端串联连接，因此打开其端口1会破坏反馈。 由此可见，通过查看反馈网络的适当端口，同时另一个端口开路或短路以破坏反馈，可以获得反馈网络的负载效果。

3.反馈因子β是来自端口2的传输 连接到反馈网络的端口1，端口1开路（这会破坏反馈）。 参考图11.14（c）可以看到

![image-20210524191719701](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210524191719701.png)

4.开环增益A可以从图11.14（e）的A电路获得。

5.A和β的值可用于确定闭环增益$A_f$，

![image-20210524191950553](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210524191950553.png)

6.开环输入电阻$R_i$和输出电阻$R_o$可以通过A电路确定[见图11.14（e）]。 这些值可用于确定包含反馈回路后的输入和输出电阻，

![image-20210524192059906](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210524192059906.png)

从图11.14（a）中我们可以看到，$R_{if}$是理想信号源$V_s$看到的电阻。 反馈放大器$R_{in}$的实际输入电阻不包括$R_s$，因此

![image-20210524192217705](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210524192217705.png)

同样，$R_{of}$是包括$R_L$在内的反馈放大器的输出电阻。 实际输出电阻不包括$R_L$（见图11.14（a）），可从$R_{of}$找到，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210524192346164.png" alt="image-20210524192346164" style="zoom:67%;" />

最后要注意的一点是：图11.14（b）中的表示仅等效于图11.14（a）中的原始电路。 近似是由于相对于基本放大器中的大得多的前向传输而忽略了反馈网络中的小前向传输。 同样，回想一下，我们一直假设基本放大器是单向的，也就是说，它没有内部反馈；它没有内部反馈。 所有反馈都发生在反馈网络中，并由反馈因子β表示。

![image-20210524191827756](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210524191827756.png)

![image-20210524190830552](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210524190830552.png)

![image-20210524190845568](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210524190845568.png)

![image-20210524191816709](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210524191816709.png)

##### Example 11.4

图11.15（a）显示了以同相配置连接的运算放大器。 运算放大器具有开路电压增益μ，差分输入电阻R$I_D$和输出电阻ro。 回想一下，在第2章对运算放大器电路的分析中，我们忽略了R$I_D$（假定为无穷大）和ro（假定为零）的影响。 在这里，我们希望使用反馈方法来同时考虑R$I_D$和ro来分析电路。 找到A，β，闭环增益Vo / Vs，输入电阻Rin [见图11.15（a）]和输出电阻Rout的表达式。 并计算出具体数值。有

![image-20210524192735197](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210524192735197.png)

![image-20210524192747331](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210524192747331.png)



![image-20210524192820082](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210524192820082.png)



解：

按照上面的步骤，我们首先找到A电路和β电路，并在电路中分别计算$R_{11}$和$R_{22}$的值，计算其开路电压收益。有

![image-20210524193909238](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210524193909238.png)

![image-20210524193919235](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210524193919235.png)

![image-20210524193937786](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210524193937786.png)

可以计算出A大约为6000V/V，而

![image-20210524194019939](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210524194019939.png)

从而

![image-20210524194031468](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210524194031468.png)

后略

### 11.5 Other Feedback-Amplifier Types

在详细研究了最常见的反馈放大器类型（即反馈电压放大器）之后，我们现在考虑其他三种类型的反馈放大器：反馈跨导放大器，反馈电流放大器和反馈跨阻放大器。 该介绍建立在反馈电压放大器的介绍的基础上，其结果将不作任何推导。 将通过大量涉及实际和广泛使用的电路的解决方案示例来说明该分析方法。

##### 11.5.1 Basic Principles

1.传感：反馈网络必须对感兴趣的输出信号进行采样。 因此，在电压和跨阻放大器的情况下，$V_o$是感兴趣的输出信号，则将反馈网络与放大器输出节点并联，就像连接电压表以测量电压一样。 另一方面，如果$I_o$是感兴趣的输出信号（如跨导和电流放大器的情况），则反馈网络与输出回路串联连接，就像连接电流表以测量电流一样。

2.混合：如果要放大的输入信号是电压，如电压和跨导放大器，则信号源由其Th'evenin等效表示，并且反馈电压信号$V_f$与输入信号串联连接。 另一方面，如果要放大的信号是电流，例如在电流和跨阻放大器的情况下，则使用诺顿形式来表示信号源，并且将反馈电流信号$I_f$与 输入信号源并联。

3.反馈结构：

![image-20210524194928576](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210524194928576.png)

适当的反馈拓扑不仅可以稳定感兴趣的增益（例如，跨导放大器中的跨导Af≡Io / Vs），而且可以使输入和输出电阻更加理想（例如，并联串联拓扑可以降低输入电阻和增加电流放大器的输出电阻）。

4.输入电阻仅取决于连接类型：串联始终会增加电阻； 并联连接始终会降低电阻。 此外，增加或减少始终取决于反馈量$（1+Aβ）$。 因此，例如，对于反馈电流放大器，输入端的并联连接会降低输入电阻：$R_{if}=R_i /（1/Aβ）$ ，并且输出端的串联连接增加了输出电阻；  $R_{of}=（1+Aβ）R_o$，其中$R_i$和$R_o$是开环放大器的输入和输出电阻。

$5.A$，$β$，$Aβ$和$A_f$的单位：根据放大器的类型，$A$，$β$和$A_f$的单位可以为$V / V，A / A，V / A$或$A / V$。 但是，$Aβ$始终是无量纲的。

6.使用环路增益进行分析：对于任何反馈放大器类型，都可以使用第11.3.3节中所述的方法确定环路增益Aβ。 然后，可以将环路增益与反馈因子β一起使用，以确定开环增益A，从而确定闭环增益Af。 但是，这种方法不能确定反馈放大器的输入和输出电阻。为此，我们需要使用以下所述的系统分析方法来获得A电路

##### Example 11.6

图11.17（a）显示了一个反馈跨导放大器，该放大器使用一个运放和一个NMOS晶体管。 反馈网络由一个电阻$R_F$组成，该电阻$R_F$感测输出电流$I_o$（请注意MOSFET的漏极电流和源极电流相等），并提供一个反馈电压，该电压通过运放输入的差分作用从$V_s$减去 。 请注意，反馈拓扑是串联-串联的，特别适合跨导放大器。

![image-20210524195720128](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210524195720128.png)

（a）求β并因此求出当Aβ为1时获得的闭环增益$A_f≡I_o / V_s。$
（b）用具有开路电压增益$μ$，输入差分电阻$R_{$I_D$}$和输出电阻$r_{o1}$的等效电路模型代替运算放大器。 同样，用具有跨导$g_m$和输出电阻$r_{o2}$的混合π模型代替MOSFET。 掌握了完整的等效电路后，将$V_s$设为0并断开环路以确定$Aβ$。
 （c）将$Aβ$与$β$联立计算$A$。
 （d）对于$μ= 1000，R_{$I_D$} = 100 k，g_m = 2 mA / V，r_{o2} = 20 k$和$R_F = 1 k$的情况，求出$β，Aβ，A$和$A_f$的值。 将$A_f$与$Aβ$为1时获得的理想值进行比较。

以下为进行电路分析时所需电路图，数值计算略。

![image-20210524200231541](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210524200231541.png)

下为等效电路图

![image-20210524200245155](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210524200245155.png)



下为测试电路

![image-20210524200259817](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210524200259817.png)

##### 11.5.2 The Feedback Transconductance Amplifier (Series–Series)

图11.18（a）显示了反馈跨导放大器的理想结构。开环放大器（A电路）是单向的，具有输入电阻$R_i$、短路跨导增益A和输出电阻$R_o$。反馈网络检测短路输出电流$I_o=AV_i$。注意，由于反馈网络端口2的电阻为零，反馈网络不会加载到放大器输出上。反馈网络在端口1处提供电压信号$V_f=βI_o$，反馈因子$β$单位为$V/A$。反馈信号与输入信号源$V_s$串联，反馈网络不加载放大器输入。最后，注意反馈输入电阻$R_{if}$和反馈输出电阻$R_{of}$的定义。后者是通过观察任意两个节点（如$O$和$O'$ ）之间的输出环路发现的电阻。

![image-20210524200911753](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210524200911753.png)

反馈跨导放大器的等效电路如图11.18（b）所示。注意，闭环增益$A_f$是短路输出（即此时负载电阻大小为0）电流$I_o$和输入电压$V_s$的比值，因此它是反馈放大器的短路跨导。此外，$R_{of}$是输出环路中任意两个节点之间的电阻，例如$O$和$O'$ ，而$V_s$设置为零。最后，图11.18（c）提供了用于确定$A_f$、$R_{if}$和$R_{of}$的公式。

![image-20210524201616534](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210524201616534.png)

这是在理想情况下的时候，我们现在考虑反馈跨导放大器的一般或实际情况，如图11.19（a）所示。为了能够对这个电路进行反馈分析，我们必须找到A电路和β电路. 如图11.19（b）所示。用$R_s$和$R_L$以及两个电阻$R_{11}$和$R_{22}$分别表示反馈网络在基本放大器输入端和输出端的负载效应，对基本放大器进行完善，得到A电路。图11.19（b）显示了如何确定$R_{11}$和$R_{22}$。这里，输入和输出端的串联意味着反馈网络的另一个端口必须保持开路。这是 $\beta$已知的情况。

![image-20210524201805620](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210524201805620.png)

![image-20210525185031196](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210525185031196.png)

![image-20210525185311957](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210525185311957.png)

##### Example 11.7

图11.20（a）显示了一个反馈跨导放大器，它由一个差分放大器$A_1$组成，该差分放大器具有一个输入差分电阻$R_{$I_D$}$、一个开路电压增益$A_1$和一个输出电阻$R_{o1}$，与一个具有跨导$g_{m2}$和一个输出电阻$r_{o2}$的共源MOSFET $Q_2$级联。利用反馈分析法确定闭环跨导Af，输入电阻$R_{in}$和输出电阻$R_{out}$。后者是$R_L$端子看向输出回路的电阻

![image-20210525185729305](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210525185729305.png)

首先确定基本放大器和反馈电路。从电路图中我们可以看出，基本放大电路有运放和晶体管构成；而输出电流通过$R_f$采样反馈到输入回路中。接下来确定闭环增益（$A_f$）的近似值（基于我们认为环路增益$A\beta$的值远远大于1的假设），换句话说
$$
\beta=R_f
$$
从而对于极大的$A\beta$,有
$$
A_f\simeq\frac1{\beta}=\frac1{R_f}
$$
接下来，我们确定A电路。由于反馈网络（图11.20b）与输入和输出回路串联，我们在每个回路中串联一个电阻$R_F$。这样做，在A电路中包括$R_s$和$R_L$，并用小信号模型替换$A_1$和$Q_2$，得到如图11.20（c）所示的A电路。

![image-20210525190550007](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210525190550007.png)

电路分析如下

![image-20210525190756567](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210525190756567.png)

从而其开环增益为

![image-20210525190835477](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210525190835477.png)

因此

![image-20210525190921346](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210525190921346.png)

进行一次迭代，有

![image-20210525190945059](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210525190945059.png)

![image-20210525190953869](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210525190953869.png)

后略

##### Example 11.8

由于负反馈扩展了放大器的带宽，所以在宽带放大器的设计中通常采用负反馈。一个这样的放大器是MC1553。MC1553的部分电路如图11.21（a）所示。所示电路（称为反馈三元组）由三个增益级组成，串联-串联反馈由$R_{E1}$、$R_F$和$R_{E2}$组成的网络提供。可以观察到，反馈网络对$Q_3$的发射极电流$I_o$进行采样，因此$I_o$是反馈放大器的输出量。然而，实际上，$I_o$很难利用。因此，通常取$Q_3$集电极电流$I_c$作为输出。这个电流当然几乎等于$I_o$。因此，作为以$I_c$作为输出电流的跨导放大器，感兴趣的输出电阻是图11.21（a）中标记为$R_{out}$的电阻。在某些应用中，$I_c$通过负载电阻，如RC3，电压Vo作为输出。假设偏置电路（未显示）确定$I_{C1}=0.6$ mA、$I_{C2}=1$ mA和$I_{C3}=4$ mA。还假设对于所有三个晶体管,$h_{fe}=100$和$r_o=∞$

![image-20210525191502104](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210525191502104.png)



当$A\beta$远远大于1时

![image-20210525191543188](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210525191543188.png)

反馈系数β 可以从反馈网络中找到。反馈网络在图11.21（a）中突出显示，并且β 如图11.21（b）所示

![image-20210525191623105](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210525191623105.png)

故

![image-20210525191749855](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210525191749855.png)

从而

![image-20210525191733794](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210525191733794.png)

（b） 利用图11.19给出的加载规则，我们得到了图11.21（c）所示的A电路。我们首先确定第一级的增益。这可以通过检视电路写为

![image-20210525192001152](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210525192001152.png)

![image-20210525192200559](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210525192200559.png)

同理第二级的增益可以写作

![image-20210525192234431](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210525192234431.png)

最后是第三级的增益

![image-20210525192300774](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210525192300774.png)

后略

##### 11.5.3 The Feedback Transresistance Amplifier (Shunt–Shunt)

图11.22（a）显示了理想的反馈跨阻放大器，正如预期的那样，它利用了并联-并联拓扑结构。放大器等效电路如图11.22（b）所示，确定$A_f$、$ R_{if}$和$R_{of}$的公式如图11.22（c）所示。

![image-20210525192439795](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210525192439795.png)

![image-20210525192453806](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210525192453806.png)

![image-20210525192506913](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210525192506913.png)

反馈分析方法在通用跨阻放大器中的应用如图11.23所示，其中给出了所需的所有步骤和公式。现在用一个详细的例子来说明这个方法。

![image-20210525192733447](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210525192733447.png)

![image-20210525192748469](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210525192748469.png)

![image-20210526143152086](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210526143152086.png)

从上式中可以看出这里的$R_{in}$($R_{out}$同理)即是从并联等效电阻中减去了信号源内阻和负载电阻的分量

##### Example 11.9

图11.24（a）显示了一个反馈跨阻放大器。它是通过在放大倍数为 $\mu$的电压放大器的负反馈沟道中连接一个电阻$R_F$来形成的,其中该电压放大器的输入电阻为$R_{$I_D$}$,输出电阻为$r_o$。这个电压放大器可以是一个运放，一个简单的差分放大器，或者是一个简单的共射放大电路。练习11.18将考虑后一种情况。当然，收益$μ$,越高 反馈跨阻放大器的特性越理想，这是因为环路增益随之增加。

![image-20210526143402978](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210526143402978.png)

（a） 当环路增益较大时，求出反馈放大器闭环跨阻$V_o$/$I_s$的近似表达式。
（b） 找到A回路和$A$、$R_i$和$R_o$的表达式。
（c） 找到环路增益、$A_f$、$ R_{if}$、$R_{in}$、$R_{of}$和$R_{out}$的表达式。
（d）求$R_i$，$R_o$，$A$，$β$, $Aβ$, $A_f$，$R_{if}$，$R_{in}$，$R_{of}$和$R_{out}$的值，其中 $\mu$ = 104V/V，$R_{$I_D$}=∞$, $r_o=100\Omega$ ，$R_F=10k\Omega$ ，$R_s=R_L=1k\Omega$ 。
（e） 如果如果将电流源改为电压源（内阻大小不变）来到馈送放大器，请计算电压增益Vo/Vs的表达式和值 

解：假如环路增益$A\beta$很大，那么

![image-20210526184553781](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210526184553781.png)

其中β的值可由以下电路计算出来

![image-20210526184638617](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210526184638617.png)



![image-20210526184648870](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210526184648870.png)

即

![image-20210526184716030](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210526184716030.png)

因此

![image-20210526184726780](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210526184726780.png)

注意，在这种情况下，输入节点处的电压大小将非常接近地面（也就是接近与0），也就是说，几乎所有的$I_s$都会通过$R_F$，导致$V_o\simeq0-I_ER_F=-I_ER_F$ 。这应该让人想起第2.2节中研究的反相运算放大器配置。

从图11.24（b）中的反馈网络中，我们可以看到放大器输入和输出处的负载效应只是分别增加了一个并接电阻$R_F$。如图11.24（c）所示的A电路所示，我们已更换了放大器μ 其等效电路模型。开环跨导电阻A可以得到如下：

![image-20210526185334778](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210526185334778.png)

其A电路如下

![image-20210526185408478](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210526185408478.png)

其中

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210526185433065.png" alt="image-20210526185433065" style="zoom:67%;" />

因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210526185450153.png" alt="image-20210526185450153" style="zoom:67%;" />

我们可以通过使信号源的输入电流大小为0来得到开环输出电阻，基于放大器的单向性，我们可以得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210526185643653.png" alt="image-20210526185643653" style="zoom:67%;" />

环路增益由此前的计算可以得到，是

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210526185731333.png" alt="image-20210526185731333" style="zoom:67%;" />

我们注意到虽然开环增益大小和反馈回路增益大小均为负数，但其乘积环路增益为正数，这决定了其作为负反馈的本质

此外，闭环增益大小也因此可以得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210526185929096.png" alt="image-20210526185929096" style="zoom:67%;" />

代入数据，从而有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210526185955255.png" alt="image-20210526185955255" style="zoom:67%;" />

由于环路增益的大小远远大于1，故有
$$
A_f\simeq-R_F
$$
此外

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210526190127440.png" alt="image-20210526190127440" style="zoom:67%;" />

令
$$
\frac{\mu(R_F||R_L)}{[r_o+(R_F||R_L)]}=\mu'
$$
则有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210526190416034.png" alt="image-20210526190416034" style="zoom:67%;" />

最后得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210526190452593.png" alt="image-20210526190452593" style="zoom: 67%;" />

同理我们可以得到输出电阻

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210526190525350.png" alt="image-20210526190525350" style="zoom:67%;" />

##### 11.5.4 The Feedback Current Amplifier (Shunt–Series)

图11.25（a）显示了理想的反馈电流放大器，正如预期的那样，它利用了并联-串联拓扑结构。放大器等效电路如图11.25（b）所示，用于确定$A_f$、$r_{if}$和$R_{of}$的公式如图11.25（c）所示。
图11.26显示了反馈分析方法可应用于一般反馈电流放大器。给出了所有必要的分析步骤和计算公式。

![image-20210526190804837](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210526190804837.png)

![image-20210526190817972](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210526190817972.png)

![image-20210526190833845](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210526190833845.png)

![image-20210526190907722](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210526190907722.png)

![image-20210526190919943](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210526190919943.png)

![image-20210526190939455](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210526190939455.png)

一个电流反馈放大器的例子（分析时请注意其虚地和虚短现象）

![image-20210526192709164](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210526192709164.png)



### 11.6 Summary of the Feedback-Analysis Method

表11.2总结了分析和设计四种反馈放大器时采用的规则和关系。除了表11.2中丰富的信息外，我们还提供了以下重要的分析提示。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210526192946097.png" alt="image-20210526192946097"  />

1.始终从确定闭环增益$A_f$的近似值开始分析，首先假设环路增益$Aβ$ 很大，因此$Af\simeq$$Q_1$$/\beta$ 应作为对$A_f$的最终值的检查。实际$A_f$与理想值的接近程度取决于$A\beta$的大小。

2.输入或输出的并联连接总是导致相应的电阻（输入或输出）减小。输入或输出端的串联总是导致相应的电阻（输入或输出）增加。

3.在利用负反馈改善设计中放大器的性能时，设计的出发点是选择适合当前应用的反馈拓扑。负反馈（1+Aβ)的所需数目（也就是反馈网络的数目） 可以利用这样一个事实来确定，即正是这个量决定了各种放大器参数的改善幅度。还有，反馈系数$β$可根据所需的闭环增益$A_f$确定。
$$
\beta\simeq1/A_f
$$

### 11.7 The Stability Problem

##### 11.7.1 Transfer Function of the Feedback Amplifier

在如图11.1的一般结构所示的反馈放大器中，开环增益$A$通常是频率的函数，因此应更准确地称为开环传递函数$A(s)$。此外，我们假设一般的反馈网络由线性元件构成，因此反馈系数$β$是恒定的，但不一定总是这样。因此，我们假设在一般情况下，反馈传递函数是$β(s)$。因此，闭环传递函数$A_f(s)$由下式给出

$$
A_f(s)=\frac{A(s)}{1+A(s)\beta(s)}
$$
为了将注意力集中在我们在本节讨论的中心点上，我们假设放大器与恒定直流增益$A_0$直接耦合，并且在高频带中出现极点和零点。另外，暂时让我们假设在低频下$β(s)$会减少到一个恒定值。因此，在低频时，环路增益$A(s)β(s)$ 变成常量，并且应该是正数；否则反馈不会是负的。问题是：在更高的频率下会发生什么？

我们将式子中的 $s$ 该换为其物理频率 $s=j\omega$ 并代入，有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210526194255695.png" alt="image-20210526194255695" style="zoom:67%;" />

由于其均为复数，因此可以转化为复平面上的极坐标表示，即

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210526194410343.png" alt="image-20210526194410343" style="zoom:67%;" />

环路增益随频率变化的方式决定了反馈放大器的稳定与否。要了解这一事实，请考虑相位角 $φ(ω) =180°$ 的情况（换言之，通过该放大器以后输出和输入是反相的）. 在这个频率下，$ω_{180}$会使回路增益$A(jω)β( jω)$ 变为负实数。因此，在这个频率的反馈将变为正反馈。如果在$ω = ω_{180}$时的环路增益的大小小于1，那么从等式（11.58）我们可以看出闭环增益$A_f(jω)$ 将大于开环增益$A(jω),$ 因为式（11.58）的分母将小于1。然而，反馈放大器将是稳定的。

另一方面，如果频率$ω_{180}$环路增益的大小等于1，由式（11.58）可知，$A_f（jω)$ 将变为无穷大。这意味着放大器即使在输入为0的情况下仍然会有输出；这就是振荡器的定义。为了直观地观察这个反馈回路是如何振荡的，考虑图11.1的一般回路，外部输入$x_s$设置为零。电路中的任何干扰，如电源开关的闭合，将在放大器的输入处产生扰动信号$x_i(t)$。这样的噪声信号通常包含很宽的频率范围，现在我们将集中讨论频率分量$ω = ω_{180}$，即信号$X_i sin(ω_{180})$。这个输入信号将产生如下的反馈信号

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210526195425174.png" alt="image-20210526195425174" style="zoom:67%;" />

由于$X_f$在输入端的summer块中进一步乘以–1，我们看到反馈导致放大器输入端的信号$X_i$保持不变。也就是说，从这一点开始，放大器的输入和输出频率都会出现频率大小为$ω_{180}$的正弦信号。

现在的问题是：如果$ω_{180}$环路增益的大小大于1，将会发生什么？我们将不会从一般的角度来回答这个问题，而是我们在这里感兴趣的受限但非常重要的一类电路。答案（从公式（11.58）中不明显）是电路将振荡，并且振荡的幅度将增加，直到一些非线性的电流分量（总是以某种形式存在）将环路增益的幅度降低到精确的1，此时将获得持续振荡。在第十八章的正弦波振荡器的设计中将采用这种机制，即通过使用环路增益大于1的正反馈来启动振荡，然后使用非线性来将环路增益减小到所需幅度（也就是1），这种机制将在正弦振荡器的设计中得到利用。不过现在恰恰相反，我们知道在负反馈放大器中如何发生振荡，我们希望找到防止振荡发生的方法。

##### 11.7.2 The Nyquist Plot（奈奎斯特图）

奈奎斯特图是基于上述讨论的用于测试稳定性的一种形式化方法。 它只是环路增益的极坐标图，其中频率用作参数。如下图所示

![image-20210526200237730](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210526200237730.png)

请注意，径向距离为$|Aβ|$ 角度是相位角$φ$。 实线图表示正频率。 由于环路增益（就此而言，物理网络的任何增益函数）都具有一个幅度，该幅度是频率的偶函数，而相位是频率的奇函数，因此$Aβ$表示负频率（如图11.28所示）（如虚线）可以通过Re轴绘制镜像。

奈奎斯特图与负实轴在频率$ω_{180}$处相交。 因此，如果此交点发生在点（–1，0）的左侧，我们知道该频率下环路增益的幅度大于1，放大器将变得不稳定。 另一方面，如果相交出现在点（–1，0）的右侧，则放大器将保持稳定。 因此，如果奈奎斯特图围绕点（–1，0），则放大器将不稳定。 但是，应该指出的是，该陈述是奈奎斯特准则的简化版本。 但是，它适用于我们感兴趣的所有电路。

### 11.8 Effect of Feedback on the Amplifier Poles

放大器的频率响应和稳定性直接由其极点决定。因此，我们将研究反馈对放大器极点的影响

##### 11.8.1 Stability and Pole Location

我们将从考虑稳定性和极点位置之间的关系开始。为了使放大器或任何其他系统稳定，其极点应位于s平面的左半部分。一对位于$jω$轴（虚轴）上的复共轭极点会引起持续的正弦振荡。而位于右半平面的极点则会使振荡幅度越来越大。

为了验证上述说法，考虑一个极点位置位于$s=σ_0\pm jω$的极点。如果该放大器受到干扰，例如电源开关闭合引起的干扰，其瞬态响应将包含以下形式的项

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527110300877.png" alt="image-20210527110300877" style="zoom:67%;" />

该复变函数可以证明，当极点位置位于复平面左侧时是稳定的；而位于右侧时是不稳定的，如下图所示

![image-20210527110653675](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527110653675.png)

![image-20210527110707651](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527110707651.png)

尽管上面的讨论是关于复共轭形式极点的，但可以证明，任何右半平面极点的存在都会导致不稳定性

##### 11.8.2 Poles of the Feedback Amplifier

从式（11.57）中的闭环传递函数可以看出，反馈放大器的极点是$1+A(s)β(s)$的零点 。即解方程

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527110955625.png" alt="image-20210527110955625" style="zoom:67%;" />

这就是反馈回路的特征方程。因此，很明显，对放大器施加反馈会改变其极点。

下面，我们将考虑反馈如何影响放大器的极点。为此，我们假设开环放大器有实极点，没有有限的零点（即，所有的零点都在$s=∞$上). 这将简化分析，使我们能够把注意力集中在所涉及的基本概念上。我们还假设反馈因子$β$与频率无关。

##### 11.8.3 Amplifier with a Single-Pole Response

首先考虑一个放大器的情况，假设其开环传递函数是单极的

$$
A(s)=\frac{A_0}{1+s/\omega_p}
$$
我们此前假设反馈因数$β$的大小不守频率影响，因此其闭环增益大小为
$$
A_f(s)=\frac{A_0/(1+A_0\beta)}{1+s/\omega_p(1+A_0\beta)}
$$
换言之，反馈使得极点沿负实半轴移动了一个系数，有
$$
\omega_{Pf}=\omega_P(1+A_0\beta)
$$
如下图所示

![image-20210527111801839](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527111801839.png)

下面的波特图展示了其开环和闭环时的幅频响应

![image-20210527111958297](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527111958297.png)

可以看到，在较低频率下，$|A|$与$|A_f|$之间有$20lg（1+A_0\beta）$的差距，但在高频下这两者趋于重合。当$ω>>\omega_P(1+A_0\beta)$(也就是说$s/\omega_P>>1$时)，有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527112518711.png" alt="image-20210527112518711" style="zoom: 67%;" />

从物理上讲，在如此高的频率，环路增益远小于1，反馈是无效的

由于该闭环放大器的极点没有位于右半平面的极点，从    而单极放大器对于任何$β$值都是稳定的. 因此，这个放大器被认为是无条件稳定的（unconditionally stable)。然而，这个结果并不令人惊讶，因为与单极响应相关的相位滞后永远不会大于90°. 因此，环路增益从未达到180° (使反馈变为正所需的相移）。

##### 11.8.4 Amplifier with a Two-Pole Response

接下来考虑一个放大器，其开环传递函数由两个实轴极点表征

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527113112070.png" alt="image-20210527113112070" style="zoom:67%;" />

在这种情况下，其闭环极点由方程$1+A(s)\beta=0$给出，展开可以得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527113326311.png" alt="image-20210527113326311" style="zoom:67%;" />

可以解得

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527113356498.png" alt="image-20210527113356498" style="zoom:67%;" />

从上式中我们可以看到随着环路增益$A_0\beta$从0开始增加，这两个极点会逐渐靠拢，直到达到重合（即此时根号内数值为0）。如果闭环增益进一步增加，则这两个极点会变为复共轭，并分别向虚轴的两个相反方向分开，下图显示了随着环路增益值的增加，极点在该复平面上的运动轨迹。称为root-locus diagram

![image-20210527133127853](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527133127853.png)

从上图中我们也可以看出这个反馈放大器是无条件稳定的。不过这也在我们意料之中，虽然该放大器最多可以拥有180的相位延迟（有两个极点）。但要达到180的相位延迟，必须使输入信号的频率达到无穷大才行。

在图11.31的根轨迹图上进行的另一观察是，开环放大器可能有一个主极点，但闭环放大器不一定是这样。当然，一旦从公式（11.68）中找到极点，闭环放大器的响应就可以绘制出来。与一般的二阶响应一样，闭环响应可以显示峰值（见第17章）。特别的，该二阶电路的特征方程如下

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527133554678.png" alt="image-20210527133554678" style="zoom:67%;" />

其中$ω_0$称作极点频率（pole frequency），Q称作pole Q factor。从这个特征方程中我们可以看出，当Q大于0.5时，该特征方程的解即为复数。换言之，极点即为复数。下图给出了这两个参数的几何解释

![image-20210527133936779](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527133936779.png)

其中$ω_0$表示极点到原点的极径，而Q则与极点到虚轴的距离有关

从上面的讯息中，我们可以计算得到Q的值，是

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527134714864.png" alt="image-20210527134714864" style="zoom:67%;" />

从第17章对二阶网络响应的研究可以看出，所考虑的反馈放大器的响应的Q有峰值（≤ 0.707）. 对应于Q=0.707的边界情况（使相位延迟在45°处的极点）导致最大平坦响应。图11.33显示了各种Q值（或相应地，各种$A_0β$值）的可能响应.

![image-20210527135027580](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527135027580.png)

##### Example 11.11

为了说明刚才讨论的一些想法，我们考虑图11.34（a）所示的正反馈电路。 求出回路方程$L(s)$和特征方程。 并画出其对应不断变化的K的根轨迹图，并找出产生最大平坦响应的K值和使电路振荡的K值。 假设放大器具有与频率无关的增益，无限的输入阻抗和零输出阻抗。

![image-20210527140222023](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527140222023.png)

为了获得环路增益的大小，我们将信号源短路并断开放大器输入端的环路。 然后，我们施加一个测试电压$V_t$并计算返回电压$V_r$，如图11.34（b）所示。

![image-20210527140548684](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527140548684.png)

其回路传输方程由下式给出
$$
L(s)\equiv A(s)\beta(s)=-\frac{V_r}{V_t}=-KT(s)
$$
其中$T(s)$是上图虚线框中的双端口RC电路的传递函数

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527140934961.png" alt="image-20210527140934961" style="zoom:67%;" />

因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527140955487.png" alt="image-20210527140955487" style="zoom:67%;" />

其特征方程为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527141027919.png" alt="image-20210527141027919" style="zoom:67%;" />

换言之

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527141046611.png" alt="image-20210527141046611" style="zoom:67%;" />

比之于此前我们所给出的二阶电路标准特征方程，我们可以得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527141146621.png" alt="image-20210527141146621" style="zoom:67%;" />

因此当K=0时，Q=1/3，从而极点位于负实轴上。而随着放大倍数K的增加，极点之间的距离逐渐拉近并最终重合。继续增加使得两级点开始在此分离。在上面我们看到$ω_0$的值不变。换言之其根轨迹是一个圆，在圆与虚轴的交点处我们可以得到$Q=\infin$，换言之此时K=3，恰好使放大电路进入不稳定状态，因此对于K大于等于3，电路会变得不稳定

![image-20210527141946274](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527141946274.png)

##### 11.8.5 Amplifiers with Three or More Poles

图11.35显示了一个反馈放大器的根轨迹图，其开环响应以三个极点为特征。 如图所示，从零开始增加环路增益会使最高频率极点向外移动，而另外两个极点更靠近在一起。 随着$A_0\beta$进一步增加，两个极点变得重合，然后变得复杂且共轭。 存在这对复共轭极点进入s平面右半部分的$A_0\beta$值，从而使放大器变得不稳定。这个结果并非完全出乎意料，因为当ω接近∞时，三极放大器的相移达到–270°。 因此，存在一个有限的频率ω180，在该频率下，环路增益具有180°的相移。

从图11.35的根轨迹图可以看出，始终可以通过使环路增益$A_0\beta$小于与进入右半平面的极点相对应的值来保持放大器的稳定性。 就奈奎斯特图而言，$A_0\beta$的临界值为该图通过（–1、0）点的临界值。 将$A_0\beta$降低到该值以下会导致奈奎斯特图缩小，从而使负实轴与（–1，0）点右侧相交，表明放大器性能稳定。 另一方面，将$A_0\beta$增加到临界值以上会导致奈奎斯特图扩大，从而圈住（–1，0）点并指示性能不稳定。

对于给定的开环增益$A_0$，可以根据反馈因子β陈述上述结论。 即，存在β的最大值，超过该最大值，反馈放大器变得不稳定。 或者，我们可以声明存在一个闭环增益$A_{f0}$的最小值，低于该最小值放大器就会变得不稳定。 为了获得较低的闭环增益值，因此需要改变环路传递函数$L(s)$。 这就是称为频率补偿的过程。 我们将在11.10节中研究频率补偿的理论和技术

![image-20210527142159145](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527142159145.png)

### 11.9 Stability Study Using Bode Plots

##### 11.9.1 Gain and Phase Margins(增益和相位裕度)

从第11.17和11.18节我们知道，可以通过检查其环路增益Aβ作为频率的函数来确定反馈放大器是否稳定。 最简单，最有效的方法之一是使用Aβ的波特图，如图11.36所示。  （请注意，因为相位接近–360°，所以检查的电路是四阶电路。）图11.36中绘出了环路增益的反馈放大器将是稳定的，因为在180°的相移频率$ω_{180}$处， 环路增益的幅度小于1（负dB）。  $ω_{180}$处的$|A\beta|$值与单位增益的差值（注：是转换为分贝以后的差值）称为增益裕度。 增益裕度表示在保持稳定性的同时可以增加环路增益的量。 反馈放大器通常设计为具有足够的增益裕度，以允许环路增益随温度，时间等不可避免地发生变化。

![image-20210527144227376](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527144227376.png)   

类似的我们可以定义相位裕度。如果在此频率（指单位增益时的频率）下相位角（幅度）小于180°，则放大器是稳定的。 这就是图11.36所示的情况。 该频率下的相位角与180°之间的差称为相位裕度。 另一方面，如果在单位环路增益幅度的频率下，相位滞后超过180°，则放大器将变得不稳定。

##### 11.9.2 Effect of Phase Margin on Closed-Loop Response

一般而言我们所设计的放大器要有至少45度的相位裕度。相位裕度的大小对闭环增益响应的形状有深远的影响。 要了解这种关系，请考虑具有较大低频环路增益的反馈放大器。假设其$A_0β>>1$，并记其单位增益频率为$ω_1$，有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527145204246.png" alt="image-20210527145204246" style="zoom:67%;" />

其中θ的大小为180减去相位裕度，此时环路增益大小为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527145319966.png" alt="image-20210527145319966" style="zoom:67%;" />

合并两式可以得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527145356596.png" alt="image-20210527145356596" style="zoom:67%;" />

从而在单位增益频率时的增益大小为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527145444324.png" alt="image-20210527145444324" style="zoom:67%;" />

对于大小为45度的相位裕度，我们可以得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527145519032.png" alt="image-20210527145519032" style="zoom:67%;" />

即，增益峰值是低频值1 /β的1.3倍。 该峰值随相位裕度的减小而增加，最终在相位裕度为零时达到∞。

##### 11.9.3 An Alternative Approach for Investigating Stability

通过构建环路增益$Aβ$的Bode图来研究稳定性可能是一个冗长而耗时的过程，尤其是当我们必须研究给定放大器对于各种反馈网络的稳定性时。另一种更简单的方法是只构造开环增益$A(jω)$的Bode图。暂时假设β与频率无关，在这个波特图中同时画出$20lg(1/\beta)$和$20lg|A|$,两条曲线之差是

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527151011179.png" alt="image-20210527151011179" style="zoom:67%;" />

由此我们得到了环路增益（单位为分贝）。 因此，我们可以通过检查两个图之间的差异来研究稳定性。 如果我们希望评估不同反馈因子的稳定性，我们只需在水平$20 log（1 /β）$处绘制另一条水平直线。

为了说明这一点，考虑一个放大器，其开环传递函数的特征方程有三个极点。 为简单起见，让三个极点分开放置-例如，分别为0.1 MHz，1 MHz和10 MHz，如图11.37所示。 请注意，由于两极之间的距离很远，因此第一个极点频率的相位约为–45°，第二个极点的频率约为–135°，第三个极点的频率约为–225°。  A（jω）的相位为–180°的频率位于–40dB /十倍频段上，如图11.37所示。

![image-20210527151249621](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527151249621.png)

该放大器的开环增益可以表示为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527151616980.png" alt="image-20210527151616980" style="zoom:67%;" />

并且相位可以表示为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527151812823.png" alt="image-20210527151812823" style="zoom:67%;" />

图11.37所示的幅值和相位图是使用构造波特图的方法（附录F）获得的。 这些图提供了重要放大器参数的近似值，并且可以从等式（11.85） 和（11.86）获得更精确的值。  例如，从图11.37可以得出相位角为180°的频率$f_{180}$约为$3.2×10^6 Hz$。 以该值作为初始值，可以使用等式通过反复迭代找到更精确的值。  （11.86）。 结果是$f_{180}$ $= 3.34×10^6 Hz$。 在此频率下， （11.85）给出的增益幅度为58.2 dB，这与图11.37给出的60 dB的近似值相当接近。

接下来考虑图11.37中标记为（a）的直线。 这条线表示一个反馈因子，其$20 log（1 /β）= 85 dB$，对应于$β= 5.623×10^{-5}$和83.6 $dB$的闭环增益。 由于环路增益是| A |和1 /β线之间的差 曲线，交点$X_1$对应于|Aβ| = 1的频率。 使用图11.37的图表，可以发现该频率约为$5.6×10^5 Hz。$ 使用传递函数方程可以得到更精确的$4.936×10^5$值。 在此频率下，相位角约为–108°。 因此，对于$20 log（1 /β）= 85 dB$的闭环放大器,要使其保持稳定，相位裕度为72°。 从图11.37可以很容易地获得增益裕度； 它是25 dB。

接下来，假设我们希望使用该放大器来获得标称值50 dB的闭环增益。 由于$A_0 = 100 dB$，我们看到$20 log（A_0β）=50 dB$，导致$20 log（1 /β）=50dB$。 为了查看该闭环放大器是否稳定，我们在图11.37中画出了高度为50 dB的线（b）。 该线在相应的相位大于180°的点$X_2$与开环增益曲线相交。 因此，增益为50 dB的闭环放大器将不稳定。

实际上，从图11.37可以很容易地看出，在使放大器稳定的情况下，可以使用的最小值$20 log（1 /β）$为60 dB。 换句话说，用该放大器获得的稳定闭环增益的最小值约为60 dB。 但是，在此增益值下，此放大器的制造版本可能仍会振荡，因为没有余量以允许可能的增益变化。

由于| A |总是在Bode图的–40dB / decade片段上出现180°相位点，因此保证稳定性的经验法则如下：如果$20 log  （1 /β）$线与$20 log | A |$相交 曲线在–20 dB /十倍频段上的一点。则应该至少保证45°的相位裕量。 对于图11.37的示例，该规则意味着β的最大值为$10^{-4}$，这对应于大约80 dB的闭环增益。

对于β是频率的函数的情况，可以概括上述经验法则。 一般规则指出，在$20 log [1 / |β（jω）|]$和$20 log | A（jω）|$的交点处 斜率之差（称为闭合率）不应超过20 dB /十倍。

### 11.10 Frequency Compensation(频率补偿)

在本节中，我们将讨论用于修改具有三个或更多极点的放大器的开环传递函数A（s）的方法，以使闭环放大器对于给定的所需闭环增益值保持稳定。 此过程称为频率补偿

##### 11.10.1 Theory

最简单的频率补偿方法是在函数$A（s）$中以一个频率$f_D$引入一个新的极点，该极点必须足够低，以使修改后的开环增益$A（s）$与$20 log（1 / |β|）$曲线相交处的斜率差为20 dB /十倍频程。 例如，让我们补偿图一个放大器，其开环传递函数$A(s)$如图所示，以使β高达$10^{-2}$的闭环放大器（即闭环增益低至约40 dB）保持稳定。 

![image-20210527155002649](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527155002649.png)

首先，我们在40dB的水平上画一条水平直线，代表$20 log（1 /β）$，如图11.38所示。 然后，我们将第一条频率$f_{P1}$处的点Y定位在这条线上。 从Y绘制一条斜率为$–20dB / decade$的直线，并确定该直线与直流增益线的交点$Y'$。这个点给出必须在开环传递函数中引入的新极点的频率$f_D$

补偿后的开环响应$A（s）$如图11.38所示。 它有四个极点：在$f_{D}，f_{P1}，f_{P2}$和$f_{P3}$处。 在$f_D$处，A开始以–20 dB /十倍频程的斜率滚降。 在$f_{P1}$处，斜率更改为– 40 dB /十倍，在$f_{P2}$处，斜率更改为– 60 dB /十倍，依此类推。 由于$20 log（1 /β）$线与新的直流增益曲线$20log|A'|$交点处的斜率大小为-20dB/十倍频，因此具有此β值（或更低值）的闭环放大器将保持稳定 。

这种补偿方法的严重缺点是，在大多数频率下，开环增益已大大降低。 这意味着在大多数频率下，可用的反馈量将很小。 由于负反馈的所有优点都与反馈量成正比，因此补偿放大器的性能将受到损害。

仔细检查图11.38可知，由于$f_{P1}$处的极点，增益$A（s）$较低。 如果我们能够以某种方式消除该极点，则可以从点Z（以第二极点的频率）开始，而不是定位点Y，绘制$YY'$等，而绘制线$ZZ'$。这会产生一个新的，远高于原来值的开环增益$A''(s)$

尽管不可能消除$f_{P1}$处的极点，但通常可以将该极点从$f = f_{P1}$移到$f = f'_D$。这使得极点占主导地位，并且无需引入额外的低频极点，如同我们接下来所展示的那样

##### 11.10.2 Implementation

现在，我们将解决实施上述频率补偿方案的问题。 放大器电路通常由多个级联增益级组成，每个级负责一个或多个传递函数极点。 通过对电路的手动和/或计算机分析，可以确定引入每个重要极点fP1，fP2等的阶段。 为了便于讨论，假设在图11.39（a）所示的两个级联差分级之间的界面处引入了第一极点$f_{P1}$。 在图11.39（b）中，我们在此接口处显示了一个简单的电路小信号模型。 电流源$I_x$代表$Q_1$-$Q_2$级的输出信号电流。 电阻$R_x$和电容$C_x$代表两个节点B和B之间的总电阻和电容。

![image-20210527161426746](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527161426746.png)

 因此，极点$f_{P1}$由下式给出：

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527161545872.png" alt="image-20210527161545872" style="zoom:67%;" />

现在让我们在节点B和B之间连接补偿电容器$C_C$。 这将导致修改后的等效电路如图11.39（c）所示，从中我们可以看到引入的极点不再位于$f_{P1}$处。 相反，极点可以处于任何所需的较低频率$f'_D$：

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527161730444.png" alt="image-20210527161730444" style="zoom:67%;" />

因此，我们得出的结论是，可以为$C_C$选择合适的值，以将极点频率从$f_{P1}$移至由图11.38中的点Z确定的值$f'_D$。

此时，应该指出的是，添加电容器CC通常会导致其他极点（$f_{P2}$和$f_{P3}$处）的位置发生变化。 因此，可能需要计算$f_{P2}$的新位置并执行几次迭代才能获得$C_C$所需的值。

该实施方法的缺点是$C_C$的要求值通常很大。 因此，如果要补偿的放大器是一个IC运算放大器，那么在IC芯片上包括这个补偿电容器将很困难，甚至可能是不可能的。  （如第8章和附录A所指出的，单片电容器的最大实际尺寸约为100 pF。）一个解决此问题的好方法是将补偿电容器连接到反相放大器级的反馈路径中。 由于存在米勒效应（第10.3节），补偿电容将乘以级增益，从而产生更大的有效电容。 此外，如稍后所述，还会产生另一个意外的好处。

##### 11.10.3 Miller Compensation and Pole Splitting

图11.40（a）显示了多级放大器中的一个增益级。 为简单起见，该级被示为一个共射极放大器，但实际上它可能是一个更复杂的电路。 在该共发射极级的反馈路径中，我们放置了一个补偿电容器$C_f$。

![image-20210527162336559](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527162336559.png)

图11.40（b）示出了图11.40（a）增益级的简化等效电路。这里，$R_1$和$C_1$代表节点B与地面之间的总电阻和总电容。 类似地，$R_2$和$C_2$代表节点C与地面之间的总电阻和总电容。 此外，假设$C_1$已经包含有因为$C_\mu$存在而导致的密勒分量，而C2包括后续放大器级的输入电容。最后，$I_i$代表前一级的输出信号电流。

在没有补偿电容器$C_f$的情况下，从图11.40（b）可以看到，存在两个极点-一个在输入端，一个在输出端。 让我们假设这两个极点是图11.38的$f_{P1}$和$f_{P2}$； 因此，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527190244691.png" alt="image-20210527190244691" style="zoom:67%;" />

在存在$C_f$的情况下，对电路进行分析即可得出传递函数

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527190352894.png" alt="image-20210527190352894" style="zoom:67%;" />

零频率点通常比主极点要高得多，我们将忽略其影响。 分母多项式$D（s）$可以写为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527190447337.png" alt="image-20210527190447337" style="zoom:67%;" />

其中$ω'_{P1}$和$ω'_{P2}$即为两个极点的新频率，通常来讲，其中一个极点会占据主导地位

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527190634839.png" alt="image-20210527190634839" style="zoom:67%;" />

通过比较系数我们可以得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527190726989.png" alt="image-20210527190726989" style="zoom:67%;" />

大约是

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527190746392.png" alt="image-20210527190746392" style="zoom:67%;" />

同理有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527190839019.png" alt="image-20210527190839019" style="zoom:67%;" />

从上面两式中我们可以看到，随着$C_f$的增加，$ω_{P1}$减小，$ω_{P2}$增大。 该现象称为极分裂。注意，$ω_{P2}$的增加是非常有益的。 它使我们可以将Z点（见图11.38）进一步向右移动，从而获得更高的补偿开环增益。 最后，请注意$C_f$乘以米勒效应因子$g_mR_2$，从而产生更大的有效电容$g_mR_2C_f。$换句话说，$C_f$的要求值将比图11.39中的$C_C$小得多。

## CHAPTER 13 Operational-Amplifier Circuits

在本章中，我们将研究最重要的模拟 IC，即运算放大器的内部电路。 运算放大器的终端特性和一些电路应用已在第 2 章中介绍。在这里，我们的目标是向读者展示多年来发展起来的一些巧妙技术，用于结合基本模拟电路构建块来实现完整的运算放大器 . 我们将研究 CMOS 和双极运算放大器。

所考虑的 CMOS 运算放大器电路主要应用于模拟和混合信号 VLSI 电路的设计。 由于这些运算放大器通常是针对特定应用而设计的，因此可以对其进行优化以满足所需规格列表的子集，例如高直流增益、宽带宽或大输出信号摆幅。 例如，许多 CMOS 运算放大器在 IC 内使用，并不连接到芯片的外部端子。 因此，其输出上的负载通常仅限于最多几皮法的小电容。 因此，内部 CMOS 运算放大器不需要具有低输出电阻，而且它们的设计很少包含输出级。 此外，如果运算放大器输入端未连接到芯片端，则不会有静电荷损坏输入 MOSFET 的栅极氧化物的危险。因此在IC电路中，我们可以充分发挥MOSFET输入电阻近乎无穷大的优势

虽然 CMOS 运算放大器广泛用于 VLSI 系统的设计，但 BJT 仍然是通用运算放大器设计中的首选器件。 这些运算放大器用于各种应用，旨在满足各种规格。 因此，通用运算放大器的电路代表了许多性能参数之间的折衷。 我们将详细研究一种这样的电路，即 741 型运算放大器。 尽管 741 已经问世 40 多年，但它的内部电路今天仍然像以往一样重要和有趣。 然而，技术的变化带来了新的要求，例如需要使用仅 2 V 至 3 V 的单电源供电的通用运算放大器。这些新要求给运算放大器设计人员带来了令人兴奋的挑战。 结果是大量的新想法和设计技术。 我们将在最后一节中展示这些现代设计技术的样本。

除了向读者展示使模拟 IC 设计成为如此令人兴奋的话题的一些想法之外，本章还应将迄今为止研究的许多概念和方法联系在一起。

THE GENIE OF ANALOG:模拟 IC 对精度的需求支持了一代技术娴熟的电路和工艺工程师。 他们克服现有技术局限性的创造性方法使他们在同龄人中成为名人。 也许最著名的是 Robert Widlar，他与工艺工程师 Dave Talbert 合作，在 1960 年代为 Fairchild 和 National Semiconductor 设计了非常成功的设计来引导模拟业务。  Widlar 的恶作剧，包括威胁要用斧头砍掉官僚主义，以及买一只羊来修剪 National 凌乱的草坪，仍然是硅谷的传奇。

Robert John Widlar 在 33 岁时就已经是一位传奇的芯片设计师（但在 53 岁时去世），并且是线性模拟集成电路设计的先驱：Widlar 电流源、Widlar 带隙电压基准、Widlar 输出级和 一系列运算放大器设计，包括第一款量产运算放大器 IC（Fairchild μA702、μA709）、第一款集成稳压器（μA723、National LM100）、第一款全内部补偿运算放大器（LM101）、现场- 效果输入（LM101A）和超级β输入（LM108）。  Widlar 的每一款设计都成为了同类产品中的佼佼者，这无疑是因为它们都至少拥有一项遥遥领先的功能。

### 13.1 The Two-Stage CMOS Op Amp

我们将研究的第一个运算放大器电路是图 13.1 所示的两级 CMOS 拓扑。这种简单而优雅的电路已成为经典，并以多种形式用于超大规模集成电路系统的设计中。 我们已经在第 9.6.1 节中研究了该电路作为多级 CMOS 放大器的示例。 我们敦促读者在继续之前阅读第 9.6.1 节。 在这里，我们的详细研究将强调电路的性能特征及其设计中涉及的权衡

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610100202894.png" alt="image-20210610100202894" style="zoom:67%;" />

##### 13.1.1 The Circuit

该电路由两个增益级组成：第一级由差分对 $Q_1$–$Q_2$ 及其电流镜负载 $Q_3–Q_4$ 组成。 在第 9.5 节中详细研究了这种差分放大器电路，它提供的电压增益通常在 $20 V/V$ 至 $60 V/V$ 的范围内，并且执行从差分形式到单端形式的转换，同时提供合理的 高共模抑制比 (CMRR)。

差分对由电流源$Q_5$偏置，电流源$Q_5$是由$Q_8$、$Q_5$和$Q_7$构成的电流镜的两个输出晶体管之一。 电流镜由参考电流 $I_{REF}$ 馈送，该电流可以通过简单地将精密电阻器（芯片外部）连接到负电源电压 –$V_{SS}$ 或更精确的负参考电压（如果在同一集成中可用）来生成 电路。 或者，对于具有更严格要求的应用，可以使用本节稍后研究的电路生成 $I_{REF}$（参见图 13.8）。

第二增益级由共源晶体管 $Q_6$ 及其电流源负载 $Q_7$ 组成。 第二级通常提供 $50 V/V$ 至 $80 V/V$ 的增益。 此外，它还参与运算放大器的频率补偿过程。 从第 11.10 节，读者会记得，为了保证运算放大器在施加不同量的负反馈时以稳定的方式运行（而不是振荡），开环增益会随着频率以均匀的方式滚降 –20 dB/十倍频程的速率。 这又是通过在相对较低的频率引入极点并安排它支配频率响应确定来实现的。 在我们正在研究的电路中，这是使用连接在第二级放大晶体管 $Q_6$ 的负反馈路径中的补偿电容 $C_C$ 来实现的。 正如将看到的，$C_C$（连同其上小得多的电容 $C_{gd6}$ ）的大小经过密勒效应放大以后会乘以第二级的增益，第二级输入端的最终电容与那里的总电阻相互作用，以提供所需的主导极点（稍后会详细介绍）

除非设计得当，否则图 13.1 的 CMOS 运算放大器电路可能会出现系统输出直流偏移电压。 这一点在第 9.6.1 节中进行了讨论，发现可以通过调整晶体管的大小以满足以下约束来消除系统直流偏移：

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610102131375.png" alt="image-20210610102131375" style="zoom:67%;" />

最后，我们观察到图 13.1 的 CMOS 运算放大器电路没有输出级。这是因为通常只需要驱动小的片上容性负载

##### 13.1.2 Input Common-Mode Range and Output Swing

参考图 13.1 并考虑两个输入端子连接在一起并连接到电压 $V_{ICM}$ 的情况。  $V_{ICM}$ 的最低值必须足够大以保持 $Q_1$ 和 $Q_2$ 处于饱和状态。 因此，$V_{ICM}$ 的最低值不比 $Q_1$ 漏极电压 $(−V_{SS} +V_{GS3} = –V_{SS} +V_{tn} +V_{OV3})$ 少$|V_{tp}|$ ，因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610102624965.png" alt="image-20210610102624965" style="zoom:67%;" />

$V_{ICM}$ 的最高值应保证 $Q_5$ 保持饱和； 也就是说，$Q_5$ 两端的电压 $V_{SD5}$ 不应低于 $|V_{OV5} |$。 同样，$Q_5$ 的漏极电压不应高于 $V_{DD} – |V_{OV5} |$。 因此 $V_{ICM}$ 的上限为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610103133173.png" alt="image-20210610103133173" style="zoom:67%;" />

或等价的

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610103157921.png" alt="image-20210610103157921" style="zoom:67%;" />

综上我们得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610103334051.png" alt="image-20210610103334051" style="zoom:67%;" />

正如预期的那样，过驱动电压是重要的设计参数，从直流电源电压中减去，从而降低了输入共模范围。 因此，从 $V_{ICM}$ 范围的角度来看，希望选择尽可能低的 $V_{OV}$ 值。

我们从方程观察。$V_{ICM}$ 的下限大约在 –$V_{SS}$ 的过驱动电压范围内。 然而，上限并不是那么好。 它比 $V_{DD}$ 低两个过驱动电压和一个阈值电压。运算放大器输出允许的信号摆幅范围在下端受限于需要保持 $Q_6$ 饱和，而在上端受限于需要保持 $Q_7$ 饱和，因此 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610103558565.png" alt="image-20210610103558565" style="zoom:67%;" />

因此，输出电压可以在每个电源轨的过驱动电压范围内摆动。这是一个相当宽的输出摆幅，可以通过选择 $|V_{OV}$ | 的值来最大化。

运算放大器电路的一个重要要求是其输出端可以连接回其负输入端，从而获得单位增益放大器。为了使这种连接成为可能，$v_O$ 的允许范围和 $V_{ICM}$ 的允许范围之间必须存在大量重叠。 在所研究的 CMOS 放大器电路中通常就是这种情况。

##### 13.1.3 DC Voltage Gain

要确定直流电压增益和频率响应，请考虑 CMOS 放大器小信号操作的简化等效电路模型（图 13.2），其中两级中的每一级都被建模为跨导放大器。 正如预期的那样，输入电阻实际上是无穷大

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610112202831.png" alt="image-20210610112202831" style="zoom:67%;" />

第一级跨导 $G_{m1}$ 等于 $Q_1$ 和 $Q_2$ 中每个的跨导（参见第 9.5 节），

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610112328288.png" alt="image-20210610112328288" style="zoom:67%;" />

由于 $Q_1$ 和 $Q_2$ 在相等的偏置电流 $(I/2)$ 和相等的过驱动电压下运行，$|V_{OV1} |= |V_{OV2} |，$

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610112432571.png" alt="image-20210610112432571" style="zoom:67%;" />

电阻$R_1$代表第一级的输出电阻，因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610112506543.png" alt="image-20210610112506543" style="zoom:67%;" />

其中

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610112616636.png" alt="image-20210610112616636" style="zoom:67%;" />

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610112630964.png" alt="image-20210610112630964" style="zoom:67%;" />

因此第一级的直流增益为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610112650786.png" alt="image-20210610112650786" style="zoom:67%;" />

观察到，通过在低过驱动电压下操作差分对晶体管 $Q_1$ 和 $Q_2$，以及通过为 $Q_1$、$Q_2$、$Q_3$ 和 $Q_4$ 选择更长的沟道长度以获得更大的早期电压，$A_1$ 的幅度会增加。

回到图 13.2 中的等效电路并将对各种模型电容的讨论留到第 13.1.5 节，我们注意到第二级跨导 $G_{m2}$ 由下式给出

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610113053976.png" alt="image-20210610113053976" style="zoom:67%;" />

电阻 $R_2$ 代表第二级的输出电阻，因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610113126574.png" alt="image-20210610113126574" style="zoom:67%;" />

其中

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610113147522.png" alt="image-20210610113147522" style="zoom:67%;" />

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610113208451.png" alt="image-20210610113208451" style="zoom:67%;" />

而且

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610113314106.png" alt="image-20210610113314106" style="zoom:67%;" />

现在可以找到第二级的电压增益为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610113422959.png" alt="image-20210610113422959" style="zoom:67%;" />

在这里我们再次观察到，为了增加 $A_2$ 的幅度，$Q_6$ 必须在低过驱动电压下运行，并且 $Q_6$ 和 $Q_7$ 的沟道长度应该更长。总直流电压增益可以作为乘积 $A_1A_2$ 找到，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610113708842.png" alt="image-20210610113708842" style="zoom:67%;" />

请注意，$A_v$ 的数量级为 $(g_mr_o)^2$。 因此，$A_v$ 的值将在 $500 V/V$ 到 $5000 V/V$ 的范围内。

最后，我们注意到运放的输出电阻等于第二级的输出电阻， 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610113933530.png" alt="image-20210610113933530" style="zoom:67%;" />

因此 $R_o$ 可能很大（即在几十千欧范围内）。 然而，正如我们从第 11 章中对负反馈的研究中了解到的，应用对运算放大器输出电压进行采样的负反馈会导致输出电阻降低一个等于反馈量 $(1+Aβ)$ 的因子。 此外，如前所述，很少需要 CMOS 运算放大器来驱动重电阻负载

##### 13.1.4 Common-Mode Rejection Ratio (CMRR)

图 13.1 的两级运算放大器的 CMRR 由第一级决定。 这在第 9.5.5 节中进行了分析，结果即

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610114425523.png" alt="image-20210610114425523" style="zoom:67%;" />

其中 $R_{SS}$ 是偏置电流源 $Q_5$($r_{o5}$) 的输出电阻。 观察到 CMRR 是 $(g_mr_o)^ 2$ 的数量级，因此可以相当高。 此外，由于 $g_mr_o$ 与 $V_A/V_{OV} = V_{ A}'L/V_{OV}$ 成正比，如果使用长通道，CMRR 会增加，尤其是 $Q_5$，并且晶体管在低过驱动电压下工作。

##### 13.1.5 Frequency Response

参考图 13.2 中的等效电路。 电容 $C_1$ 是第一级输出节点和地之间的总电容，因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610114841193.png" alt="image-20210610114841193" style="zoom:67%;" />

电容 $C_2$ 代表运算放大器输出节点和地之间的总电容，包括放大器需要驱动的任何负载电容 $C_L$，因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610114944574.png" alt="image-20210610114944574" style="zoom:67%;" />

通常，$C_L$ 大于晶体管电容，因此 $C_2$ 变得比 $C_1$ 大得多。 如前所述，故意包含电容器 $C_C$ 的目的是为运算放大器配备统一的 –6-dB/倍频程频率响应。 在下文中，我们将看到这是如何实现的以及如何为 $C_C$ 选择一个值。 最后，请注意，在图 13.2 的等效电路中，我们应该包含与 $C_C$ 并联的 $C_{gd6}$。 但是，通常情况下，$C_C>> C_{gd6}$，这就是我们忽略 $C_{gd6}$ 的原因。

为了确定 $V_o$，对图 13.2 中的电路进行如下分析。 在节点 $D_2$ 写一个节点方程产生

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610115234180.png" alt="image-20210610115234180" style="zoom:67%;" />

同理在节点$D_6$有节点方程

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610115330772.png" alt="image-20210610115330772" style="zoom:67%;" />

为了消除 $V_{i2}$ 从而根据 $V_{id}$ 确定 $V_o$，我们联立两个等式。用$V_o$ 表示$V_{i2}$ 并将结果代入等式。经过一些简单的计算，我们得到了放大器传递函数

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610115807634.png" alt="image-20210610115807634" style="zoom:67%;" />

首先，我们注意到对于 $s = 0$（即 dc），给出 $V_o/V_{id} = (G_{m1}R_1)(G_{m2}R_2)$，这是我们应该预料到的。 其次，方程中的传递函数。表明放大器在 $s = s_Z$ 处具有传输零点，其由下式确定

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610120132748.png" alt="image-20210610120132748" style="zoom: 67%;" />

因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610120150700.png" alt="image-20210610120150700" style="zoom:67%;" />

换句话说，零在正实轴上，频率 $ω_Z$ 为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610120319984.png" alt="image-20210610120319984" style="zoom:67%;" />

此外，放大器有两个极点，它们是等式的分母多项式的根。如果两个极点的频率分别表示为 $ω_{P1}$ 和 $ω_{P2}$，则分母多项式可以表示为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610120526310.png" alt="image-20210610120526310" style="zoom:67%;" />

现在，如果其中一个极点占主导地位，比如说频率为 $ω_{P1}$，则 $ω_{P1}<< ω_{P2}$，并且 $D(s)$ 可以近似为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610120655499.png" alt="image-20210610120655499" style="zoom:67%;" />

主极点的频率 $ω_{P1}$ 现在可以通过使等式中分母中 $s$ 项的系数相等来确定。 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610121058439.png" alt="image-20210610121058439" style="zoom:67%;" />

我们承认分母中的第一项出现在第一阶段和第二阶段之间的界面上。 此处，第一级的输出电阻 $R_1$ 与界面处的总电容相互作用。 后者是 $C_1$ 和米勒电容 $C_C(1+G_{m2}R_2)$ 的总和，这是在增益为 $G_{m2}R_2$ 的第二级负反馈路径中连接 $C_C$ 所产生的。 现在，由于 $R_1$ 和 $R_2$ 通常具有可比值，我们看到分母中的第一项将比第二项大得多，我们可以将 $ω_{P1}$ 近似为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610121324032.png" alt="image-20210610121324032" style="zoom:67%;" />

进一步的近似是可能的，因为 $C_1$ 通常比米勒电容小得多，而且$G_{m2}R_2$ ，因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610121640296.png" alt="image-20210610121640296" style="zoom:67%;" />

第二个非主导极点的频率可以通过使方程的分母中 $s^2$ 项的系数相等来找到，并代入 $ω_{P1}$的值, 结果是

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610122406458.png" alt="image-20210610122406458" style="zoom:67%;" />

由于 $C_1<< C_2$ 和 $C_1<< C_C$，$ω_{P2}$ 可以近似为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610122732893.png" alt="image-20210610122732893" style="zoom:67%;" />

为了为运算放大器提供 $–20 dB/decade$ 到 $0 dB$ 的均匀增益滚降，选择补偿电容器 $C_C$ 的值，以便得到 $ω_{P1}$的值，当乘以直流增益 $(G_{m1}R_1G_{m2}R_2)$ 时，单位增益频率 $ω_t$ 低于 $ω_Z$ 和 $ω_{P2}$。 具体来说

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610123330303.png" alt="image-20210610123330303" style="zoom:67%;" />

该值必须低于 $ω_Z =\frac {G_{m2}} {C_C}$ 和 $ω_{P2} \simeq \frac{G_{m2}} {C_2}$ 。 因此，设计必须满足以下两个条件：

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610123702045.png" alt="image-20210610123702045" style="zoom:67%;" />

**Simplified Equivalent Circuit**

在$f>> f_{P1}$ 但低于 $f_{P2}$ 和 $f_Z$ 时获得的均匀 $–20dB/decade$ 增益滚降表明，在这些频率下，运算放大器可以用图 13.3 所示的简化等效电路表示。 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610123841495.png" alt="image-20210610123841495" style="zoom:67%;" />

请注意，这种吸引人的简化是基于第二级增益 $|A_2 |$ 很大的假设，因此虚拟接地出现在第二级的输入端。 然后，第二级有效地充当积分器，该积分器被馈入第一级的输出电流信号；  $G_{m1}V_{id}$ 。 虽然是为 CMOS 放大器推导出来的，但这种简化的等效电路是通用的，适用于各种两级运算放大器，包括本章稍后研究的 741 型双极运算放大器的前两级

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610134955427.png" alt="image-20210610134955427" style="zoom:67%;" />

**Phase Margin**

两级 CMOS 放大器中使用的频率补偿方案是极点分裂类型，在 11.10.3 节中研究：它提供频率为 $f_{P1}$ 的主要低频极点，并将第二个极点移动到 $f_t$ 之外。 图 13.4 显示了增益幅度和相位的代表性波特图。 请注意，在单位增益频率 $f_t$ 处，相位滞后超过了由 $f_{P1}$ 处的主导极点引起的 90°。 这种所谓的过度相移是由于第二个极点的存在

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610135619553.png" alt="image-20210610135619553" style="zoom: 67%;" />

和位于实半轴上的零点

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610135823726.png" alt="image-20210610135823726" style="zoom:67%;" />

因此单位增益频率处的相移是

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610135855698.png" alt="image-20210610135855698" style="zoom:67%;" />

从而得到相位裕度的值

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610135932619.png" alt="image-20210610135932619" style="zoom:67%;" />

根据我们在第 11.9.2 节中对反馈放大器稳定性的研究，我们知道相位裕度的大小会显着影响闭环增益。因此，在设计电路时我们应该需要计算出满足要求的相位裕度。

由右半平面零点提供的额外相位滞后问题有一个相当简单和优雅的解决方案：通过包括一个与 $C_C$ 串联的电阻 $R$，如图 13.5 所示，传输零点可以移动到其他对电路工作状态影响更小的地方。 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610140550357.png" alt="image-20210610140550357" style="zoom:67%;" />

为了找到传输零点的新位置，设置 $V_{o}$ $= 0$。然后，通过 $C_C$ 和 $R$ 的电流将为$V_{i2}/(R+1/sC_C )$，输出端的节点方程产生

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610140644447.png" alt="image-20210610140644447" style="zoom:67%;" />

因此现在的零点为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610140726860.png" alt="image-20210610140726860" style="zoom:67%;" />

我们观察到，通过选择 $R = 1/G_{m2}$，我们可以将零置于无限频率。 更好的选择是选择大于 $1/G_{m2}$ 的 $R$，从而将零置于负实轴位置，在该位置它引入的相位成为相位超前，从而增加了相位裕度。

##### 13.1.6 Slew Rate

我们曾在第 2 章中讨论运算放大器的压摆率限制。在这里，我们将在所研究的两级 CMOS 放大器的背景下说明压摆现象的起源。

考虑图 13.6 的单位增益跟随器，在输入端施加 $1V$ 的阶跃电压。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610140957368.png" alt="image-20210610140957368" style="zoom:67%;" />

由于放大器的动态特性，其输出不会在零时间内发生变化。 因此，在施加输入后，阶跃的整个值将立即显示为两个输入端子之间的差分信号。 极有可能，如此大的信号将超过关闭输入差分对一侧所需的电压（$\sqrt{2}V_{OV 1}$：参见前面第 9 章图 9.6 中的图示）并将整个偏置电流 $I$ 切换到另一侧（换言之，由于差分对两侧的晶体管不再对称（一侧处于饱和态而另一侧截止），偏置电流不再会在两侧晶体管中平均分配） . 参考图 13.1 显示，对于我们的示例，$Q_2$ 将截止，因此$Q_1$ 将传导整个电流 $I$。因此 $Q_4$ 将吸收从 $C_C$ 拉出的电流 $I$，如图 13.7 所示。 在这里，正如我们在图 13.3 中所做的那样，我们将第二阶段建模为一个理想的积分器。 我们看到输出电压将是一个斜率为 $I/C_C$ 的斜坡：

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610141604305.png" alt="image-20210610141604305" style="zoom:67%;" />

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610141629724.png" alt="image-20210610141629724" style="zoom:67%;" />

而其压摆率则为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610141700572.png" alt="image-20210610141700572" style="zoom:67%;" />

然而，应该指出的是，这是一个相当简化的摆率模型。

**Relationship Between SR and $f_t$**

单位增益带宽 $f_t$ 和压摆率 $SR$ 之间存在简单的关系。通过等式关系之间的转化，并注意到 $G_{m1} = g_{m1} = I/V_{OV1}$，得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610142302134.png" alt="image-20210610142302134" style="zoom:67%;" />

或者写成

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610142323170.png" alt="image-20210610142323170" style="zoom:67%;" />

因此，对于给定的$ω_t$，压摆率由构成第一级晶体管的过驱动电压决定。 通过在更大的 $V_{OV}$ 下运行 $Q_1$ 和 $Q_2$ 可以获得更高的压摆率。 现在，对于给定的偏置电流 $I$，如果 $Q_1$ 和 $Q_2$ 是 p 沟道器件，则会获得更大的 $V_{OV}$。 这是在 CMOS 运算放大器的第一级中使用 p 沟道而不是 n 沟道器件的重要原因。 另一个原因是它允许第二级采用 n 沟道器件。 现在，由于 n 沟道器件比相应的 p 沟道器件具有更大的跨导，$G_{m2}$ 将很高，从而导致更高的第二极点频率和相应更高的 $ω_t$。 然而，为这些改进付出的代价是较低的 $G_{m1}$ 和较低的直流增益。

##### 13.1.7 Power-Supply Rejection Ratio (PSRR)

CMOS 运算放大器通常用于所谓的混合信号电路：结合模拟和数字电路的 IC 芯片。 在此类电路中，数字部分的开关活动通常会导致电源电压或电流的波动增加。 一部分波动会进入运算放大器输出，从而破坏输出信号。 通过在电源和地之间连接大电容来减少电源纹波的传统方法在 IC 设计中是不可行的，因为这样的电容会占用大部分芯片面积。 相反，模拟 IC 设计人员必须注意迄今为止我们忽略的另一个运算放大器规范，即电源抑制比 (PSRR)。

PSRR 定义为放大器差分增益与电源电压（$v_{dd}$ 和 $v_{ss}$）变化所经历的增益之比。 对于使用两个电源的电路，我们定义

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610143045959.png" alt="image-20210610143045959" style="zoom:67%;" />

其中

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610143101771.png" alt="image-20210610143101771" style="zoom:80%;" />

显然，为了尽量减少电源波动的影响，我们要求运算放大器具有较大的 PSRR。

对两级 CMOS 运算放大器 PSRR 的详细分析超出了本书的范围（参见 Gray 等人，2009 年）。 尽管如此，我们做以下简短的评论。 可以看出，该电路对 $V_{DD}$ 的变化非常不敏感，因此 PSRR+ 非常高。 然而，负电源纹波 $v_{ss}$ 并非如此，它主要通过第二级晶体管 $Q_6$ 和 $Q_7$ 耦合到输出。 特别是，出现在运算放大器输出端的 $v_{ss}$ 部分由 $Q_6$ 和 $Q_7$ 的输出电阻形成的分压器决定，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610143349250.png" alt="image-20210610143349250" style="zoom:67%;" />

因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610143433368.png" alt="image-20210610143433368" style="zoom:67%;" />

因此有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610143503112.png" alt="image-20210610143503112" style="zoom:67%;" />

因此，PSRR- 具有 $(g_mr_o)^ 2$ 形式，因此通过选择长信道 $L$（以增加 $|V_A |$）并在低 $|V_{OV} |$ 下运行而最大化。

##### 13.1.8 Design Trade-Offs

两级CMOS放大器的性能参数主要由两个设计参数决定

1.用于每个 MOSFET 沟道的长度 $L$。

2.过驱动电压$|V_{OV} |$ 

在本节中，我们发现更大的 $L$ 和相应更大的 $|V_A |$ 可以增加放大器的增益、CMRR 和 PSRR。 我们还计算得出，在较低的 $|V_{OV} |$ 下运行时我们可以給这三个参数增加的量以及增加输入共模范围和输出摆幅的允许范围。 此外，虽然我们没有在此分析运算放大器的失调电压，但我们从第 9.4.1 节中对该主题的研究中了解到，由随机器件失配引起的输入失调电压的许多分量与 $|V_{OV}|$成正比。 因此，我们还需要通过以较低的 $|V_{OV} |$ 操作来最小化偏移。然而，有一个重要的 MOSFET 性能参数需要选择更大的 $|V_{OV} |，$即过渡频率 $f_T$ ，它决定了 MOSFET 的高频性能（见第 10.2.1 节），

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610144329990.png" alt="image-20210610144329990" style="zoom:67%;" />

对于 n 沟道 MOSFET，可以证明

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610144407239.png" alt="image-20210610144407239" style="zoom:67%;" />

类似的关系适用于 PMOS 晶体管，用$μ_p$ 和 $|V_{OV} |$ 分别替换 $μ_n$ 和 $V_{OV}$ 。 因此，为了增加 $f_T$ 并改善运算放大器的高频响应，我们需要使用更大的过驱动电压值，并且毫不奇怪地使用更短的通道。 更大的$|V_{OV} |$ 还导致更高的运算放大器压摆率 SR。最后，请注意，选择较大的$| V_{OV} |$会导致相同的偏置电流，从而在较小的$W/L$中产生相同的功耗，这与短$L$相结合会导致更小的器件，从而降低MOSFET电容值和更高的工作频率。

总之，选择$|V_{OV}|$ 向设计人员展示了一方面改善低频性能参数和另一方面改善高频性能之间的权衡。 对于需要 $1 V$ 至 $1.5 V$ 电源供电的现代亚微米技术，通常使用 $0.1 V$ 至 $0.3 V$ 之间的过驱动电压。 对于这些工艺技术，模拟设计人员通常使用至少 1.5 到 2 倍 $L_{min}$ 指定值的通道长度，甚至更长的通道用于电流源偏置晶体管。

##### 13.1.9 A Bias Circuit for the Two-Stage CMOS Op Amp

我们现在提出一个电路，用于产生图13.1的两级CMOS运算放大器的偏置电流$I_{REF}$。可以看出，产生的偏置电流值与MOSFET的电源电压和阈值电压无关。同样，由该电路偏置的每个 MOSFET 的跨导（即 $I_{REF}$ 的倍数）的值仅由单个电阻器和器件尺寸决定。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610150228952.png" alt="image-20210610150228952" style="zoom:67%;" />

偏置电路如图13.8所示。它由两个故意不匹配的晶体管$Q_{12}$和$Q_{13}$组成，$Q_{12}$通常比$Q_{13}$宽四倍。电阻器$R_B$与$Q_{12}$的源极串联。如同我们将要展示的那样，$R_B$决定了参考电流的大小和跨导的大小，因此其值应准确、稳定； 在大多数应用中，$R_B$ 将是一个片外电阻器。 为了最小化 $Q_{12}$ 上的沟道长度调制效应，我们包括一个共栅晶体管 $Q_{10}$ （以和$Q_{12}$共同构成共源共栅电路）和一个匹配的二极管连接晶体管 $Q_{11}$，以为 $Q_{10}$ 提供偏置电压。 最后，由一对匹配器件 $Q_8$ 和 $Q_9$ 形成的 p 沟道电流镜都将电流 $I_B$ 复制回 $Q_{11}$ 和 $Q_{13}$，并为图 13.11 的 CMOS 运算放大器电路的 $Q_5$ 和 $Q_7$ 提供偏置电流 .

该电路的工作原理如下： 电流镜（$Q_8、Q_9$）使 $Q_{13}$ 传导等于 $Q_{12}$ 中的电流，即 $I_{REF}$。 因此，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610151331462.png" alt="image-20210610151331462" style="zoom:67%;" />

以及

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610151353834.png" alt="image-20210610151353834" style="zoom:67%;" />

从电路中，我们看到 $Q_{12}$ 和 $Q_{13}$ 的栅源电压的关系为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610151451638.png" alt="image-20210610151451638" style="zoom:67%;" />

开根号以后消去阈值电压，我们得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610151548966.png" alt="image-20210610151548966" style="zoom:67%;" />

因此我们可以从这个式子中得到参考电流的值

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610151619567.png" alt="image-20210610151619567" style="zoom:67%;" />

这是一个非常有趣的结果：$g_{m12}$ 仅由 $R_B$ 的值以及 $Q_{12}$ 和 $Q_{13}$ 的尺寸比决定。 此外，由于 MOSFET 的 $g_m$ 与 $I_D$$(W/L)$ 成正比，因此每个晶体管都由图 13.8 的电路偏置； 也就是说，使用$I_{REF}$作为偏置电流晶体管的 $g_m$ 值将会与 $g_{m12}$ 成比例 。 具体来说，第 $i$ 个 n 沟道 MOSFET 将具有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610152008107.png" alt="image-20210610152008107" style="zoom:67%;" />

第 $i$ 个p型 MOSFET 有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610152115560.png" alt="image-20210610152115560" style="zoom:67%;" />

最后，应该注意的是，图 13.8 的偏置电路采用正反馈，因此在设计时应注意避免性能不稳定。 正如已经指出的，通过使 Q12 比 Q13 更宽可以避免不稳定性。 尽管如此，仍可能会出现某种形式的不稳定； 事实上，电路可以在所有电流为零的稳定状态下运行。 为了让它摆脱这种状态，需要将电流注入它的一个节点，以“启动”它的运行。 第 11 章研究了反馈和稳定性。

### 13.2 The Folded-Cascode CMOS Op Amp

在本节中，我们研究另一种类型的 CMOS 运算放大器电路：折叠共源共栅。 该电路基于第 8.5.5 节中研究的折叠共源共栅放大器。 那里提到虽然由相反极性的 CS 晶体管和 CG 晶体管组成，但折叠共源共栅配置通常被认为是单级放大器。 同样，基于级联配置的运算放大器电路被认为是单级运算放大器。 然而，它可以设计为提供与上一节中研究的两级拓扑相同并在某些方面超过的性能参数。 事实上，折叠级联运算放大器拓扑目前与两级结构一样流行。

##### 13.2.1 The Circuit

图 13.9 显示了 CMOS 折叠级联运算放大器的结构。 这里，$Q_1$ 和 $Q_2$ 形成输入差分对，$Q_3$ 和 $Q_4$ 是共源共栅晶体管。 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610154930362.png" alt="image-20210610154930362" style="zoom:67%;" />

回想一下，对于差分输入信号，$Q_1$ 和 $Q_2$ 中的每一个都充当共源放大器。 另请注意，$Q_3$ 和 $Q_4$ 的栅极端子连接到恒定直流电压 ($V_{BIAS1}$)，因此位于信号地。 因此，对于差分输入信号，晶体管对 $Q_1-Q_3$ 和 $Q_2-Q_4$ 中的每一个都充当折叠共源共栅放大器，如图 8.36 中的那个。 请注意，输入差分对由恒流源 $I$ 偏置。因此，$Q_1$ 和 $Q_2$ 均以偏置电流 $I/2$ 工作。 每个漏极处的节点方程显示 $Q_3$ 和 $Q_4$ 中的每个的偏置电流为 $(I_B -I/2)$。 很快就会看到，直流增益和单位增益频率都与 $Q_1$ 和 $Q_2$ 的 $g_m$ 成正比。 因此，通常使偏置电流 $I$ 变大以获得 $g_{m1,2}$ 的高值。 对于给定的功耗和给定的总电流 $2I_B$，偏置 $Q_3$ 和 $Q_4$ 中的每一个的电流 $(I_B - \frac I 2 )$ 必然很小。 然而，事实证明这是有利的，因为它会导致 $Q_4$ 的 $r_o$ 大，从而导致运算放大器的较高的输出电阻和相应的大直流增益。 根据经验，$I_{D1,2}$ 与 $I_{D3,4}$ 的比率可以选择为 4。

正如我们在第 8 章中了解到的，如果要充分发挥通过级联共栅实现的高输出电阻的优势，电流源负载的输出电阻必须同样高。 这就是在图 13.9 的电路中使用共源共栅电流镜 $Q_5$ 至 $Q_8$ 的原因。  （此电流镜电路已在第 8.6.1 节中研究。）最后，请注意电容 $C_L$ 表示输出节点的总电容。 它包括内部晶体管电容、实际负载电容（如果有），以及可能为频率补偿而有意引入的附加电容。 然而，在许多情况下，负载电容将足够大，无需提供额外的电容来实现所需的频率补偿。 很快就会讨论这个话题。 目前，我们注意到与两级电路不同的是，我们并不需要在这个电路中引入$C_C$来进行频率补偿C。MOS 折叠级联运算放大器的更完整电路如图 13.10 所示。 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610160219016.png" alt="image-20210610160219016" style="zoom:67%;" />

这里我们展示了两个晶体管 $Q_9$ 和 $Q_{10}$，它们提供恒定偏置电流 $I_B$，以及晶体管 $Q_{11}$，它提供用于偏置差分对的恒定电流 $I$。 请注意，未显示用于生成偏置电压 $V_{BIAS1}、V_{BIAS2}$ 和 $V_{BIAS3}$ 的详细信息。 然而，我们对如何选择这些电压的值感兴趣。 为此，我们将要评估输入共模范围和允许的输出摆幅

##### 13.2.2 Input Common-Mode Range and Output Swing

要找到输入共模范围，请将两个输入端子连接在一起并连接到电压 $V_{ICM}$ 。  $V_{ICM}$ 的最大值受限于 $Q_1$ 和 $Q_2$ 始终在饱和状态下运行的要求。 因此，$V_{ICM_{max}}$ 最多应比 $Q_1$ 和 $Q_2$ 的漏极电压高 $V_{tn}$ 伏。 后者电压由 $V_{BIAS1}$ 决定，并且必须允许 $Q_9$ 和 $Q_10$ 上的压降至少等于它们的过驱动电压 $|V_{OV9} |  = |V_{OV10} |。$

假设 $Q_9$ 和 $Q_{10}$ 确实在饱和边缘运行，则 $V_{ICM _{max}}$ 将为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610161009140.png" alt="image-20210610161009140" style="zoom:67%;" />

它可以大于 $V_{DD}$，比两级电路的情况有显着改进。应选择 $V_{BIAS2}$ 的值以产生所需的 $I_B$ 值，同时以小值 $|V_{OV} |$ 操作 $Q_9$ 和 $Q_{10}$（例如$0.2 V$ 左右）。  $V_{ICM}$ 的最小值受限于需要保持 $Q_{11}$ 始终处于饱和状态 ，因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610161547430.png" alt="image-20210610161547430" style="zoom:67%;" />

该表达式中阈值电压$V_{t n}$ 的存在表明$V_{ICM_{min}}$ 不够低。 在本节的后面，我们将描述解决这个问题的巧妙技术。 目前，请注意应选择 $V_{BIAS3}$ 的值以提供所需的 $I$ 值，同时在低过驱动电压下运行 $Q_{11}$。 最后我们可以得到输入共模信号的上下界

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610162149103.png" alt="image-20210610162149103" style="zoom:67%;" />

$v_O$ 的允许范围的上限取决于将 $Q_{10}$ 和 $Q_4$ 保持在饱和状态的需要。 请注意，只要 $Q_{10}$ 上出现过驱动电压 $|V_{OV10} |$，它就会在饱和状态下工作。 因此，为了使 $v_O$（以及 $V_{ICM_{max}}$）的允许正摆幅最大化，我们应该选择 $V_{BIAS1}$ 的值，以便 $Q_{10}$ 在饱和边缘运行，即，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610162346284.png" alt="image-20210610162346284" style="zoom:67%;" />

$v_O$ 的上限为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610162532777.png" alt="image-20210610162532777" style="zoom:67%;" />

这是低于 $V_{DD}$ 的两个过驱动电压。 然而，另一端的情况并不好：由于 $Q_6$ 栅极的电压为 $–V_{SS} + V_{GS7} + V_{GS5}$ 或等效的 $–V_{SS} + V_{OV7} + V_{OV5} + 2V_{tn}$，因此当 $Q_6$ 达到 饱和边缘，即当 $v_O$ 下降到低于 $Q_6$ 栅极电压 $V_{tn}$ 时，即，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610162803847.png" alt="image-20210610162803847" style="zoom:67%;" />

请注意，该值是两个过驱动电压加上一个高于 $-V_{SS}$ 的阈值电压。 这是使用共源共栅镜的缺点。 这个问题可以通过使用修改后的镜像电路来缓解，我们很快就会看到。

##### 13.2.3 Voltage Gain

折叠共源共栅运算放大器只是一个跨导放大器，具有无穷大的输入电阻、跨导 $G_m$ 和输出电阻 $R_o$。 此外，$G_m$ 等于差分对的两个晶体管中每一个的 $g_m$，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610202241979.png" alt="image-20210610202241979" style="zoom:67%;" />

因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610202306442.png" alt="image-20210610202306442" style="zoom:67%;" />

输出电阻 Ro 是共源共栅放大器的输出电阻与共源共栅镜的输出电阻的并联等效值，因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610202334752.png" alt="image-20210610202334752" style="zoom:67%;" />

参考图 13.10 可知，电阻 $R_{o4}$ 是 CG 晶体管 $Q_4$ 的输出电阻。 后者在其源极引线中具有电阻 $(r_{o2}|| r_{o10})$，因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610202437897.png" alt="image-20210610202437897" style="zoom:67%;" />

电阻 $R_{o6}$ 是共源共栅镜的输出电阻，根据我们之前的计算结果

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610202533596.png" alt="image-20210610202533596" style="zoom:67%;" />

现在可以使用 $G_m$ 和 $R_o$ 找到直流开环增益，如下

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610202610414.png" alt="image-20210610202610414" style="zoom:67%;" />

因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610202626908.png" alt="image-20210610202626908" style="zoom:67%;" />

图 13.11 显示了包含负载电容 $C_L$ 的等效电路模型，我们将很快考虑到它。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610202713955.png" alt="image-20210610202713955" style="zoom:67%;" />

由于折叠共源共栅运算放大器是一种跨导放大器，因此它被命名为运算跨导放大器(OTA)。 由于其具有非常高的输出电阻（约为 $g_mr^2_ o$），这使得在单个放大器级中实现相对较高的电压增益成为可能 。但如此之高的输出电阻可能会让读者担心; 毕竟，在第 2 章中，我们说过理想运算放大器的输出电阻为零！ 为了在一定程度上减轻这种担忧，让我们找出一个单位增益跟随器的闭环输出电阻，该运放是通过将图 13.10  电路的输出端子 连接回负输入端形成的。由于此反馈属于电压采样类型，因此它将输出电阻降低系数 $(1 + Aβ)$，其中 $A = A_v$ 且 $β =1$,因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610203424569.png" alt="image-20210610203424569" style="zoom:67%;" />

带入我们之前计算出的$A_V$，可以得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610203502398.png" alt="image-20210610203502398" style="zoom:67%;" />

这是适用于任何应用了 100% 电压反馈的 OTA 的一般结果。对于我们的特定电路，$G_m = g_{m1}$，因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610203640787.png" alt="image-20210610203640787" style="zoom:67%;" />

由于 $g_{m1}$ 的数量级为 $1 mA/V$，因此 $R_{of}$ 的数量级为 $1 k$ 。 虽然这不是很小，但考虑到运算放大器电路的简单性以及这种类型的运算放大器通常不用于驱动低值电阻负载的事实，这是合理的。

##### 13.2.4 Frequency Response

从 10.5 节，我们知道共源共栅配置的优势之一是其出色的高频响应。 它具有三个极点：一个在输入端，一个在 CS 和 CG 晶体管之间的连接处（即 $Q_3$ 和 $Q_4$ 的源极端子），第三个在输出端。 通常，前两个极点的频率非常高，特别是当为差分对供电的信号发生器的电阻很小时。 由于 CMOS 运算放大器的主要目的是为容性负载供电，因此 $C_L$ 通常很大，并且输出极点占主导地位。 即使 $C_L$ 不大，我们也可以有意增加它，使运算放大器成为主导极点，从而使开环增益以 $-20 dB/decade$ 的均匀速率下降到单位增益频率 $f_t$ ，从而确保稳定应用反馈电路。 从图 13.11 我们可以写

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610203916579.png" alt="image-20210610203916579" style="zoom:67%;" />

因此，主极点的频率为 $f_P$，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610204443497.png" alt="image-20210610204443497" style="zoom:67%;" />

单位增益频率为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610204519149.png" alt="image-20210610204519149" style="zoom:67%;" />

从设计的角度来看，$C_L$ 的值应该使得在 $f = f_t$ 时，非主极点产生的多余相位足够小，以允许实现所需的相位裕度。 如果 $C_L$ 不够大，无法达到此目的，则可以对其进行扩充。

重要的是要注意增加负载电容对我们研究的两个运算放大器电路中的每一个的操作的影响的差异。 在两级电路中，如果$C_L$增加，第二极点的频率降低，$f=f_t$处的多余相移增加，相位裕度减小。 这里，另一方面，当 $C_L$ 增加时，$f_t$ 减少，但相位裕度增加。 换句话说，较重的容性负载会降低折叠共源共栅放大器的带宽，但不会削弱其响应（当相位裕度降低时会发生这种情况）。 当然，如果在两级运算放大器情况下，假如在设计时我们预计到必须增加 $C_L$，设计人员可以通过增加 $C_C$来解决这一问题，从而降低 $f_t$ 并将相位裕度恢复到其所需值。

##### 13.2.5 Slew Rate

如第 13.1.6 节所述，当运算放大器输入端出现大差分信号时，就会发生压摆。 请参考图 13.9 并考虑 $V_{id}$ 较大且$Q_2$ 截止的情况。晶体管 $Q_1$ 将尝试传导整个偏置电流 $I$。然而，这是不可能的，因为 $I$ 通常大于 $I_B$。 考虑 $Q_1$ 的漏极节点方程，要满足节点方程，不仅 $Q_3$ 中的电流必须减小到零，而且 $Q_1$ 的电流必须减小到等于 $I_B$。 为此，$Q_1$ 和为 $I$ 供电的晶体管都必须进入三极管工作模式，并且它们的漏极电压必须相应下降。 现在，$Q_3$ 中的零电流导致反射镜的输入电流为零，相应地，其在 $Q_6$ 漏极中的输出电流将为零。 同时，$Q_2$ 漏极中的零电流迫使整个电流 $I_B$ 流过 $Q_4$ 并流入 $C_L$。 这导致输出电压 $v_O$ 以 $I_B/C_L$ 的斜率上升，也就是压摆率，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610205327082.png" alt="image-20210610205327082" style="zoom:67%;" />

转换过程完成后，在放大器恢复正常线性工作之前，$Q_1$ 和提供偏置电流 $I$ 的晶体管都必须离开三极管模式并返回到饱和工作模式。 然而，这可能需要一些时间，并且可能会在输出信号中引入额外的失真。 然而，像往常一样，创造性的电路设计来拯救！ 习题 13.27 探讨了处理这个问题的巧妙方法

##### 13.2.6 Increasing the Input Common-Mode Range: Rail-to-Rail Input Operation

在第 13.2.2 节中，我们发现虽然输入共模范围的上限超过电源电压 $V_{DD}$，但下限的幅度明显低于 $V_{SS}$。 如果输入差分放大器由 PMOS 晶体管组成，则会出现相反的情况。 因此，并联放置的 NMOS 和 PMOS 差分对将提供一个共模范围超过两个方向的电源电压的输入级。 这称为轨到轨输入操作，下图展示了一个这样设计的电路

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610205612677.png" alt="image-20210610205612677" style="zoom:67%;" />

为简单起见，我们没有显示两个差分对的并联连接：两个正输入端子连接在一起，两个负输入端子连接在一起。 晶体管 $Q_5$ 和 $Q_6$ 是 $Q_1-Q_2$ 对的共源共栅晶体管，晶体管 $Q_7$ 和 $Q_8$ 是 $Q_3-Q_4$ 对的共源共栅器件。 输出电压 $V_o$ 显示为在共源共栅器件的漏极之间的电势差。 要获得单端输出，应级联差分输出电流到到单端转换电路。

图 13.12 用箭头指示了由施加正差分输入信号 $V_{id}$ 导致的电流增量方向。 指示的每个电流都等于 $G_m(V_{id}/2)$，其中 $G_m = g_{m1} = g_{m2} = g_{m3} = g_{m4}$。 因此，馈送两个输出节点中的每一个的总电流将为 $G_mV_{id}$ 。 现在，如果两个节点和地之间的输出电阻表示为 $R_o$，则输出电压将为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610210201341.png" alt="image-20210610210201341" style="zoom:67%;" />

因此电压增益将为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610210515047.png" alt="image-20210610210515047" style="zoom:67%;" />

然而，这假设两个差分对将同时运行。 这反过来只发生在有限的 $V_{ICM}$ 范围内。 在输入共模范围的其余部分，两个差分对中只有一个可以工作，增益下降到一半。这种轨到轨、折叠共源共栅结构常用于市售运算放大器

##### 13.2.7 Increasing the Output Voltage Range: The Wide-Swing Current Mirror

在第 13.2.2 节中发现，虽然图 13.10 电路的输出电压可以摆动到比 $V_{DD}$小 $2|V_{OV} |$ 之内。  ，但共源共栅电流镜将负摆幅限制为高于 $–V_{SS}$ 的 $[2|V_{OV} |+V_t]$。 换句话说，共源共栅镜将电压摆幅降低了 $V_t$ 伏。 这一点在图 13.13(a) 中进一步说明，它显示了一个共源共栅反射镜（为简单起见，$V_{SS}$ $=$ $0$）并指示在各个节点产生的电压。 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610212240375.png" alt="image-20210610212240375" style="zoom:67%;" />

观察到，由于 $Q_3$ 栅极的电压为 $2V_t +2V_{OV}$，输出允许的最小电压（当 $Q_3$ 保持饱和时）为 $V_t + 2V_{OV}$，因此有额外的 $V_t$。 此外，观察 $Q_1$ 以漏源电压 $V_t + V_{OV}$ 运行，该电压比在饱和状态下运行所需的电压大 $V_t$ 伏。

上述观察使我们得出结论，要允许 $Q_3$ 漏极的输出电压摆动到低至 $2V_{OV}$，我们必须将 $Q_3$ 栅极的电压从 $2V_t +2V_{OV}$ 降低到 $V_t +2V_{OV}$。 这正是图 13.13(b) 中修改后的镜像电路所做的：$Q_3$ 的栅极现在连接到偏置电压 $V_{BIAS} = V_t + 2V_{OV}$ 。 因此，当 $Q_3$ 仍处于饱和状态时，输出电压可以降至 $2V_{OV}$。 此外，$Q_1$ 的漏极电压现在为 $V_{OV}$，因此 $Q_1$ 工作在饱和边缘。  $Q_2$ 也是如此，因此可以确保 $Q_1$ 和 $Q_2$ 之间的电流跟踪。 但是请注意，我们不能再将 $Q_2$ 的栅极连接到其漏极。 相反，它连接到 $Q_4$ 的漏极。 这在 $Q_4$ 的漏极处建立了 $V_t +V_{OV}$ 电压，这足以使 $Q_4$ 工作在饱和状态（只要 $V_t$ 大于 $V_{OV}$ ，这通常是这种情况）。 该电路被称为宽摆幅电流镜。 最后，请注意图 13.13(b) 没有显示产生 $V_{BIAS}$ 的电路。有许多可能的电路来完成这个任务，练习 13.13 中探讨了其中一个。

### 13.3 The 741 BJT Op Amp

我们对 BJT 运算放大器的研究分为两部分：第一部分，在本节中，重点介绍模拟 IC 的经典电路设计，即 741 运算放大器电路； 第二部分，在 13.4 节，介绍了一些最近的设计技术

##### 13.3.1 The 741 Circuit

图 13.14 显示了 741 运算放大器电路。 为了与 IC 设计理念保持一致，该电路使用了大量晶体管，但电阻相对较少，并且只有一个电容器。

![image-20210610214422756](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210610214422756.png)

这种理念是由以 IC 形式制造有源和无源元件的经济性（硅面积、制造的简易性、可实现元件的质量）决定的（参见第 8.1 节和附录 A）。与大多数通用 IC 运算放大器一样，741 需要两个电源，$+V_{CC}$ 和 -$V_{EE}$。 通常情况下，$V_{CC} =V_{EE} =15 V$，但是当电源降低到更低的值（例如 $±5 V$）时，电路也能令人满意地运行。重要的是要观察到没有电路节点接地，即我们会把这个电路连接到两个电源的公共端上。

对于图 13.14 所示的相对较大的电路，分析的第一步是确定其可识别的部分及其功能。 因此，我们从电路的定性描述开始。 如图所示，将电路分成各个部分有助于我们的描述。

**Bias Circuit**

741 电路的参考偏置电流 $I_{REF}$ 在图 13.14 最左侧的支路中产生，该支路由两个二极管连接的晶体管 $Q_{11}$ 和 $Q_{12}$ 以及电阻 $R_5$ 组成。 使用由 $Q_{11}$、$Q_{10}$ 和 $R_4$ 形成的 Widlar 电流源，第一级的偏置电流在 $Q_{10}$ 的集电极中产生。 由 $Q_8$ 和 $Q_9$ 形成的另一个电流镜参与偏置第一级（差分输入级）。

参考偏置电流 $I_{REF}$ 用于在 $Q_{13}$ 的集电极中提供两个成比例的电流。 这种双集电极横向 pnp 晶体管可以被认为是两个晶体管，其基极 - 发射极结并联。 因此 $Q_{12}$ 和 $Q_{13}$ 形成一个两输出电流镜：一个输出，$Q_{13B}$ 的集电极，提供偏置电流并作为 $Q_{17}$ 的电流源负载，另一个输出，$Q_{13A}$ 的集电极，为运算放大器的输出级提供偏置电流。另外两个晶体管 $Q_{18}$ 和 $Q_{19}$ 参与直流偏置过程。  $Q_{18}$ 和 $Q_{19}$ 的目的是在输出晶体管 $Q_{14}$ 和 $Q_{20}$ 的基极之间建立两个 $V_{BE}$ 压降。

**Short-Circuit-Protection Circuitry**

741 电路包括许多晶体管，这些晶体管通常处于关闭状态，只有在尝试从运算放大器输出端子汲取大电流时才导通。 例如，如果输出端子与两个电源之一短路，就会发生这种情况。 短路保护网络（图 13.14 中以颜色显示）由 $R_6$、$R_7$、$Q_{15}$、$Q_{21}$、$Q_{24}$、$R_{11}$ 和 $Q_{22}$ 组成。 下面我们假设这些晶体管是关断的。 短路保护网络的操作将在第 13.3.3 节中解释。

**The Input Stage**

741 电路由三级组成：输入差分级、中间单端高增益级和输出缓冲级。 输入级由晶体管 $Q_1$ 到 $Q_7$ 组成，偏置由 $Q_8$、$Q_9$ 和 $Q_{10}$ 执行。 晶体管 $Q_1$ 和 $Q_2$ 充当射极跟随器，导致输入电阻较高，并将差分输入信号传送到由 $Q_3$ 和 $Q_4$ 形成的差分共基极放大器。 因此，输入级是第 8.7.3 节中讨论的公共集电极、公共基极配置的差分版本。

晶体管 $Q_5$、$Q_6$ 和 $Q_7$ 以及电阻器 $R_1$、$R_2$ 和 $R_3$ 构成输入级的负载电路。 这是一个精心设计的电流镜负载电路，我们将在 13.3.3 节中对其进行分析。该电路基于第 8.2.3 节中研究的基极电流补偿镜，但它包括两个发射极负反馈电阻 $R_1$ 和 $R_2$，以及 $Q_7$ 发射极中的一个大电阻 $R_3$。 与电流镜负载的情况一样，该电路不仅为 $Q_4$ 提供高电阻负载，而且还将信号从差分形式转换为单端形式，而不会损失增益或共模抑制。 输入级的输出在 $Q_4$ 的集电极处单端获取。

如第 9.6.2 节所述，每个运算放大器电路都包含一个电平转换器，其功能是移动信号的直流电平，以便运算放大器输出端的信号可以正负摆动。 在 741 中，使用横向 pnp 晶体管 $Q_3$ 和 $Q_4$ 在第一阶段完成电平转换。 尽管横向 pnp 晶体管的高频性能较差，但它们在共基极配置（已知具有良好的高频响应）中的使用不会严重损害运算放大器的频率响应。

在第一级中使用横向 pnp 晶体管 $Q_3$ 和 $Q_4$ 带来了额外的优势：保护输入级晶体管 $Q_1$ 和 $Q_2$ 免受发射极-基极结击穿。 由于 npn 晶体管的发射极 - 基极结在大约 7 V 的反向偏压下击穿（参见第 6.4.1 节），如果电源电压意外连接在输入端子之间，则常规 npn 差分级会遭受这种击穿。 然而，横向 pnp 晶体管具有高发射极 - 基极击穿电压（约 50 V），并且由于它们与 $Q_1$ 和 $Q_2$ 串联，它们为 741 个输入晶体管 $Q_1$ 和 $Q_2$ 提供保护。

最后，请注意，除了使用输入缓冲晶体管之外，741 输入级本质上是一个电流镜负载差分放大器。 它与图 13 中 CMOS 放大器的输入级非常相似。

**The Second Stage**

第二级或中间级由 $Q_{16}$、$Q_{17}$、$Q_{13B}$ 和两个电阻器 $R_8$ 和 $R9$ 组成。 晶体管 $Q_{16}$ 充当射极跟随器，从而为第二级提供高输入电阻。 这最大限度地减少了输入级的负载并避免了增益损失。 此外，添加具有 $50k\Omega$ 发射极电阻（类似于 $Q_7$ 和 $R_3$）的 $Q_{16}$ 增加了第一级的对称性，从而提高了其 CMRR。 晶体管 $Q_{17}$ 用作共发射极放大器，发射极中有一个 $100\Omega$ 电阻。 它的负载由与输出级的输入电阻并联的 pnp 电流源 $Q_{13B}$ 的高输出电阻组成（从 $Q_{23}$ 的基极看）。 使用晶体管电流源作为负载电阻（有源负载）可以获得高增益，而无需使用大电阻（这会占用大芯片面积并需要大电源电压）。

第二级的输出取自 $Q_{17}$ 的集电极。 电容器 $C_C$ 连接在第二级的反馈路径中，以使用第 11.10.3 节中研究的米勒补偿技术提供频率补偿。 第 13.3.4 节将显示，相对较小的电容器 $C_C$ 为 741 提供了大约 4 Hz 的主极点。 此外，极点分裂会导致其他极点移动到更高的频率，从而使运算放大器具有统一的 $–20-dB/decade$ 增益滚降，单位增益带宽约为 $1 MHz。$ 由于密勒效应的存在，虽然$C_C$ 的值很小，但由于密勒效应的存在，其值可以放大33倍以上

$μA741$ 的创造者——DAVID FULLAGAR：David Fullagar 于 1967 年在飞兆半导体设计 $μA741$，这可能是有史以来最成功的运算放大器。  Fairchild、TI 和 National 仍在销售这种无处不在的设备的更新版本。  Fullagar 在英国剑桥接受教育，之前在 Ferranti 工作，在 Widlar 在 $μA702$ 和 $μA709$ 设计后离开后，于 1966 年加入 Fairchild。Fullagar 的 $μA741$ 产品结合了内部补偿、短路保护和新颖的高阻抗输入级，以解决早期设计的缺点。 离开 Fairchild 后，他加入 Intersil，成为公司的第一位模拟 IC 设计师。 这位工程师兼设计师于 1983 年共同创立并成为 Maxim Integrated Products 的重要技术贡献者； 他于 1999 年退休。

**The Output Stage**

输出级（第 12 章）的目的是为放大器提供低输出电阻。 此外，输出级应该能够提供相对较大的负载电流，而不会在 IC 中消耗过多的功率。  741 使用高效的 AB 类输出级，我们将在第 13.3.3 节中研究。

741 的输出级由互补对 $Q_{14}$ 和 $Q_{20}$ 组成，其中 $Q_{20}$ 是衬底 pnp（参见附录 A）。 晶体管 $Q_{18}$ 和 $Q_{19}$ 由电流源 $Q_{13A}$ 供电，并对输出晶体管 $Q_{14}$ 和 $Q_{20}$ 进行偏置。 晶体管 $Q_{23}$（它是另一个衬底 pnp）充当射极跟随器，从而最大限度地减少输出级对第二级的负载影响。

**Device Parameters**

在接下来的部分以及练习和章末问题中，我们将对 741 电路进行详细分析。 对于标准的 npn 和 pnp 晶体管，将使用以下参数：

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210611142949569.png" alt="image-20210611142949569" style="zoom:67%;" />

在 741 电路中，非标准器件是 $Q_{13}$、$Q_{14}$ 和 $Q_{20}$。 假设晶体管 $Q_{13}$ 等效于两个晶体管 $Q_{13A}$ 和 $Q_{13B}$，它们具有平行的基极-发射极结，并具有以下饱和电流：

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210611143120783.png" alt="image-20210611143120783" style="zoom:67%;" />

假设晶体管 $Q_{14}$ 和 $Q_{20}$ 的面积是标准器件的三倍。 输出晶体管通常具有相对较大的面积，以便能够提供较大的负载电流并耗散相对较大的功率，而器件温度仅适度升高。

##### 13.3.2 DC Analysis

在本节中，我们将对 741 电路进行直流分析，以确定每个器件的偏置点。 对于运算放大器电路的直流分析，输入端子接地。从理论上讲，这应该导致输出端的直流电压为零。 然而，由于运算放大器具有非常大的增益，分析中的任何轻微近似都将表明输出电压远非零，接近$+V_{CC}$ 或$-$$V_{EE}$。 在实际操作中，左开环运算放大器的输出电压会在接近两个电源之一时饱和。为了克服直流分析中的这个问题，假设运算放大器连接在一个负反馈回路中，该回路将输出直流电压稳定到零伏

**Reference Bias Current**

参考偏置电流 $I_{REF}$ 在由两个二极管连接的晶体管 $Q_{11}$ 和 $Q_{12}$ 以及电阻器 $R_5$ 组成的支路中产生。 因此，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210611143542772.png" alt="image-20210611143542772" style="zoom:67%;" />

对于 $V_{CC} = V_{EE} = 15 V$ 和 $V_{BE11} = V_{EB12}\simeq 0.7 V$的情况，我们有 $I_{REF} = 0.73 mA。$

**Input-Stage Bias**

晶体管 $Q_{11}$ 和 $Q_{10}$ 以及电阻器 $R_4$ 形成一个 Widlar 电流源（第 8.6.4 节），因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210611143816683.png" alt="image-20210611143816683" style="zoom:67%;" />

确定 $I_{C10}$ 后，我们继续确定每个输入级晶体管中的直流电流。 为此，我们在图 13.15 中展示了输入级的核心部分

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210611143933493.png" alt="image-20210611143933493" style="zoom:67%;" />

如同我们马上就要看到的，这是一个负反馈电路，可将 $Q_1$ 至 $Q_4$ 的偏置电流稳定在大约等于 $I_{C10}/2$ 的值。 请参阅图中所示的分析（假设 $β_N$ 很高）。  $Q_1$ 和 $Q_2$ 的集电极电流之和 ($2I$) 馈送到电流镜 $Q_8 -Q_9$ 的输入端（或由其感测）。 反射镜的输出电流（对于大 $β_P$ 大约等于 $2I$）与节点 $X$ 处的 $I_{C10}$ 进行比较。两个电流之间的差值 $(2I/β_P)$ 确定了 $Q_3$ 和 $Q_4$ 的基极电流。 这是反馈回路的误差信号。 对于大 $β_P$，该电流接近于零，$X$ 处的节点方程给出 $2I\simeq I_{C10}$，因此 $I \simeq I_{C10}/2。$

为了验证负反馈循环在稳定 $I$ 值方面的作用，假设 $I$ 由于某种原因增加。 我们看到 $Q_8 -Q_9$ 镜的输入电流增加，相应地，其输出电流增加。 假设 $I_{C10}$ 保持不变，考虑节点 $X$ 表明 $Q_3$ 和 $Q_4$ 中的基极电流必须降低。 这反过来又降低了 $I$ 的值，这与最初假设的变化相反

继续输入级的直流分析，我们在图 13.16 中显示了电流镜负载（$Q_5、Q_6$ 和 $Q_7$）和第二级的输入晶体管（$Q_{16}$）。 电流镜负载由 $I_{C3} = I_{C4}\simeq  I$ 馈送。分析如图所示，显示对于大 $β_N$ ，$Q_5$ 和 $Q_6$ 中的每一个都偏置在大约等于 $I$ 的电流上。 $Q_7$ 的偏置电流有点 更高，如练习 13.18 所示

**Input Common-Mode Range**

输入共模范围是输入级保持线性有源模式的输入共模电压范围。 参见图 13.14。 我们看到，在 741 电路中，输入共模范围的上限由 $Q_1$ 和 $Q_2$ 的饱和度决定，下限由 $Q_3$ 和 $Q_4$ 的饱和度决定。

**Second-Stage Bias**

参考图 13.14 表明，如果我们忽略 $Q_{23}$ 的基极电流，$Q_{17}$ 的集电极电流将等于 $Q_{13B}$ 提供的电流。 然后我们可以使用 $I_{C17}$ 来确定 $V_{BE17}$、$V_{B17}$、通过 $R_9$ 的电流，从而确定 $I_{E16}$，最后得到 $I_{C16}\simeq  I_{E16}$。

**Output-Stage Bias**

图 13.17 显示了 741 的输出级，其中省略了短路保护电路。 电流源 $Q_{13A}$ 向 $Q_{18}$、$Q_{19}$ 和 $R_{10}$ 组成的电路提供 $0.25I_{REF}$ 的电流（因为 $Q_{13A}$ 的 $I_S$ 是 $Q_{12}$ 的 $I_S$ 的 $0.25$ 倍）。 如第 13.3.1 节所述，$Q_{18}-Q_{19}$ 电路的目的是在$Q_{14}$ 之间建立两个 $V_{BE}$ 电压。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210611150938501.png" alt="image-20210611150938501" style="zoom:67%;" />

下面举例说明输出级晶体管偏置电流的确定

##### Example 13.3

确定 $I_{C23}$、$I_{B23}$、$V_{BB}$ $=V_{BE18} +V_{BE19}、I_{C14}$ 和 $I_{C20}$。 回想一下 $Q_{14}$ 和 $Q_{20}$ 是非标准器件，其 $I_{S14} = I_{S20} = 3×10^{−14} A$。

不难得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210611152445522.png" alt="image-20210611152445522" style="zoom:67%;" />

因此，我们看到 $Q_{23}$ 的基极电流仅为 $180/50 = 3.6 μA$，这与我们之前假设的 $I_{C17}$ 相比可以忽略不计。

如果我们假设 $V_{BE18}$ 约为 $0.6 V$，我们可以确定 $R_{10}$ 中的电流为 $15 μA$（$R_{10} $ 两侧电势差即为 $V_{BE18}$）。 因此 $Q_{18}$ 的发射极电流为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210611152857271.png" alt="image-20210611152857271" style="zoom:67%;" />

并且

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210611152916756.png" alt="image-20210611152916756" style="zoom:67%;" />

在此电流值下，我们发现 $V_{BE18} = 588 mV$，这与假定值非常接近。  $Q_{18}$ 的基极电流为 $165/200 = 0.8 μA$，可以将其添加到 $R_{10}$ 中的电流以确定 $Q_{19}$ 电流为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210611153109708.png" alt="image-20210611153109708" style="zoom:67%;" />

从而得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210611153150070.png" alt="image-20210611153150070" style="zoom:67%;" />

电压降 $V_{BB}$ 现在可以计算为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210611153227783.png" alt="image-20210611153227783" style="zoom:67%;" />

由于 $V_{BB}$ 出现在 $Q_{14}$ 和 $Q_{20}$ 的基极-发射极结的串联组合中，我们可以写成

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210611153313395.png" alt="image-20210611153313395" style="zoom:67%;" />

使用 $V_{BB}$ 的计算值并代入 $I_{S 14} = I_{S20} = 3 × 10^{−14} A$，我们确定集电极电流为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210611153411636.png" alt="image-20210611153411636" style="zoom:67%;" />

这是 AB 类输出级偏置的小电流（相对于要求输出级提供的负载电流）。

##### 13.3.3 Small-Signal Analysis 

**The Input Stage**

图 13.18 显示了 741 输入级的一部分，用于执行小信号分析。 请注意，由于 $Q_1$ 和 $Q_2$ 的集电极连接到恒定直流电压，因此它们显示为接地。 另外，$Q_3$和$Q_4$的基极恒流偏置相当于公共基极开路（电流源可被视为具有无穷大的输入电阻）。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210611160703794.png" alt="image-20210611160703794" style="zoom:67%;" />

施加在输入端子之间的差分信号 $v_i$ 有效地出现在四个串联连接的相等发射极电阻上——$Q_1$、$Q_2$、$Q_3$ 和 $Q_4$ 的发射极电阻。 因此，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210611160913321.png" alt="image-20210611160913321" style="zoom:67%;" />

其中 $r_e$ 表示 $Q_1$ 到 $Q_4$ 中每个的发射极电阻。 因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210611160953553.png" alt="image-20210611160953553" style="zoom:67%;" />

因此，四个晶体管 $Q_1$ 到 $Q_4$ 为负载电路提供一对互补电流信号 $αi_e$，如图 13.18 所示。

运算放大器的输入差分电阻可从图 13.18 获得为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210611161126773.png" alt="image-20210611161126773" style="zoom:67%;" />

继续进行输入级分析，我们在图 13.19 中显示了电流镜负载电路，其中馈送了早先发现的互补电流信号对。 分析以及执行分析的步骤的顺序在图表中进行了指示。 正如预期的那样，电流镜提供了一个输出电流 $i_o$，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210611161215132.png" alt="image-20210611161215132" style="zoom:67%;" />

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210611161231726.png" alt="image-20210611161231726" style="zoom:67%;" />

因此我们可以借此得到输入级的跨导为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210611161438281.png" alt="image-20210611161438281" style="zoom:67%;" />

其中 $g_{m1}$ 是四个晶体管 $Q_1$、$Q_2、Q_3$ 和 $Q$ 中每一个的跨导

为了完成我们对 741 输入级的建模，我们必须找到它的输出电阻 $R_{o1}$。这是在图 13.19 中“回看”电路输出端子时看到的电阻。因此，$R_{o1}$ 是提供信号电流 $αi_e$ 的电流源的输出电阻和 $Q_6$ 的输出电阻的并联等效项。 第一个组件是图 13.18 中 $Q_4$ 集电极的电阻。 如果我们基于$Q_3$ 和 $Q_4$ 的公共基极虚拟接地的前提假设来分析电路，可以大大简化查找该电阻的过程。 这当然只有在以互补方式施加输入信号 $v_i$ 时才会发生。 尽管如此，做出这个假设并不会导致很大的错误。

假设 $Q_4$ 的基极虚拟接地，我们想要计算的电阻是 $R_{o4}$，如图 13.20(a) 所示。 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210611162330255.png" alt="image-20210611162330255" style="zoom:67%;" />

这是共基极晶体管的输出电阻，其发射极具有电阻（$Q_2$ 的 $r_e$）。 为了找到 $R_{o4}$，我们使用以下表达式：

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210611162410277.png" alt="image-20210611162410277" style="zoom:67%;" />

其中 $R_e = r_e$ 和 $r_o = V_{Ap}/I$。

输出电阻的第二个分量是在图 13.19 中观察 $Q_6$ 的集电极，$αi_e$ 设为 0。虽然 $Q_6$ 的基极不在信号接地，但我们不妨假设基极的信号电压小到足以使这种近似有效。 然后电路采用图 13.20(b) 所示的形式，$R_{o6}$ 可以使用等式确定。其中有 $R_e = R_2$

图 13.21 显示了我们为输入级推导出的等效电路。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210611162814394.png" alt="image-20210611162814394" style="zoom:67%;" />

##### Example 13.4

我们希望找到由图 13.14 中的电阻 $R_1$ 和 $R_2$ 之间的 2% 失配引起的输入失调电压。

**Solution**

首先考虑两个输入端子都接地的情况，并假设 $R_1 = R$ 和 $R_2 = R+\Delta  R$，其中 $\Delta R/R = 0.02$。 从图 13.22 我们看到，虽然 $Q_5$ 仍然传导等于 $I$ 的电流，但 $Q_6$ 中的电流将小 $\Delta I$。  

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210611191230589.png" alt="image-20210611191230589" style="zoom:67%;" />

利用进入两侧电路的电流大小是相等的这一事实

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210611191410779.png" alt="image-20210611191410779" style="zoom:67%;" />

因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210611191427742.png" alt="image-20210611191427742" style="zoom:67%;" />

左侧的 $V_{BE}$ 变化实际上是由于 $I_E$ 变化了 $\Delta {I}$ 而导致的 。 因此我们可以写

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210611191624274.png" alt="image-20210611191624274" style="zoom:67%;" />

联立两式，可以得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210611191704574.png" alt="image-20210611191704574" style="zoom:67%;" />

代入数据我们可以得到
$$
\Delta I=5.5\times 10^{-3}I
$$
因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210611191925070.png" alt="image-20210611191925070" style="zoom:67%;" />

将 $I = 9.5 μA$ 和 $G_{m1} = 0.19 mA/V$ 代入，偏移电压 $V_{OS}$ 为 $0.3 mV$。

应该指出的是，计算出的失调电压只是 741 输入失调电压的一个组成部分。其他分量是由于晶体管特性不匹配而产生的。  741 偏移电压的典型值为 $2 mV$。

##### Example 13.5

请计算 741 输入级的 CMRR。 在这里我们假设电路是平衡的，即除了电流镜负载不匹配导致镜电流传输比误差 $\epsilon_m$，我们不计入其他的误差， 也就是说，比率变为 $1−\epsilon_m$ 。

**Solution**

在 9.5.5 节中，我们分析了电流镜负载差分放大器的共模运行状态，并推导出了其 CMRR 的表达式。 然而，由于存在调节偏置电流的反馈环路，741 输入级的情况大不相同。 该反馈环路对共模信号很敏感，正如稍后将看到的，该环路会降低共模增益，并相应地增加 CMRR。 因此，它的作用被称为共模反馈。

图 13.23 显示了 741 输入级，共模信号 $v_{icm}$ 应用于两个输入端子。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210611163227514.png" alt="image-20210611163227514" style="zoom:67%;" />

我们假设信号电流 $i$ 如图所示流动。由于两侧电路匹配，所以两侧电流相同

我们现在的目标是确定 $i$ 与 $v_{icm}$ 的关系。 为此，观察对于共模输入，差分放大器的两侧，即 $Q_1 -Q_3$ 和 $Q_2 -Q_4$，充当跟随器（它们在共模输入电压看来都是共集配置），将几乎等于 $v_{icm}$ 的信号传送到 $Q_3$ 和 $Q_4$。 现在，该节点 $Y$ 连接到两个电流源 $Q_9$ 和 $Q_{10}$ 的集电极。 以 $R_o$ 表示节点 $Y$ 和地之间的总电阻，有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210611183403373.png" alt="image-20210611183403373" style="zoom:67%;" />

在图 13.23 中，我们“拉出了 $R_o$”，从而留下了理想的电流源 $Q_9$ 和 $Q_{10}$。 由于 $Q_{10}$ 中的电流是恒定的（$Q_{10}$ 处的电流大小取决于额参考电流的大小，因此其共模信号电流大小为0），我们将图 13.23 中的 $Q_{10}$ 显示为具有零增量电流。 另一方面，晶体管 $Q_9$ 提供的电流大约等于馈入 $Q_8$ 的电流，即 $2i$。 这是反馈电流。 由于 $Q_8$ 检测差分放大器两侧的电流总和，因此反馈环路仅对共模信号起作用，对任何差分信号（差分信号会将两侧的电流抵消，差分信号电流是反向的而共模信号电流是同向的）都不敏感。

继续分析，我们现在可以在 $Y$ 处写一个节点方程，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210611184011006.png" alt="image-20210611184011006" style="zoom:67%;" />

假设$β_P >> 1$，这个方程简化为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210611184051571.png" alt="image-20210611184051571" style="zoom:67%;" />

确定 $i$ 后，我们现在通过查找输出电流 $i_o$ 来完成我们的分析。 从图 13.23 的电路中，我们看到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210611184125579.png" alt="image-20210611184125579" style="zoom:67%;" />

因此其共模增益为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210611184149442.png" alt="image-20210611184149442" style="zoom:67%;" />

或者写为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210611184212214.png" alt="image-20210611184212214" style="zoom:67%;" />

因此其共模抑制比为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210611184251050.png" alt="image-20210611184251050" style="zoom:67%;" />

其中 $g_{m1}$ 是 $Q_1$ 的跨导。 现在从等式中替换 $R_o$，我们得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210611184335263.png" alt="image-20210611184335263" style="zoom:67%;" />

在离开这个例子之前，我们观察到如果反馈不存在，方程中的 $2i$ 项将不存在，电流 $i$ 将变为 $β_P v_{icm}/2R_o$ ，这是存在反馈时的 $β_P$ 倍。 换句话说，共模反馈减少了 $i$，从而减少了共模跨导和共模增益，系数为 $β_P$。 可以证明$β_P$ 是环路增益的大小。  （见练习 13.17。）

**The Second Stage**

图 13.24(a) 显示了为小信号分析准备的 741 第二阶段，图 13.24(b) 显示了它的小信号模型。 可以如下确定三个模型参数 $R_{i2}$、$G_{m2}$ 和 $R_{o2}$。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210611192713618.png" alt="image-20210611192713618" style="zoom:67%;" />

通过检查可以发现输入电阻 $R_{i2}$ 为 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210611192739643.png" alt="image-20210611192739643" style="zoom:67%;" />

从图 13.24(b) 的等效电路中，我们看到跨导 $G_{m2}$ 是短路输出电流与输入电压的比值。 将第二级（图 13.24a）的输出端短路到地，使得通过 $Q_{13B}$ 输出电阻的信号电流为零，输出短路电流变为等于 $Q_{17}$（$i_{c17}$）的集电极信号电流。 后一种电流可以很容易地与 $v_{i2}$ 相关，如下所示：

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210611193344400.png" alt="image-20210611193344400" style="zoom:67%;" />

我们忽略了 $r_{o16}$ 因为 $r_{o16}>> R_9$。 这些方程可以组合起来得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210611193446790.png" alt="image-20210611193446790" style="zoom:67%;" />

为了确定图 13.24(a) 中第二级的输出电阻 $R_{o2}$，我们将输入端子接地，并找到返回输出端子的电阻。 由此可知 $R_{o2}$

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210611193539155.png" alt="image-20210611193539155" style="zoom:67%;" />

其中 $R_{o13B}$ 是 $Q_{13B}$ 集电极的电阻，其基极和发射极接地。 不难看出

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210611193616508.png" alt="image-20210611193616508" style="zoom:67%;" />

等式中的第二项，即 $R_{o17}$ 是从 $Q_{17}$ 的集电极中看到的电阻。 由于 $Q_{17}$ 的基极与地之间的电阻相对较小（大约等于 $r_{e16}$），因此可以通过假设基极接地来大大简化问题

**The Output Stage**

741 输出级如图 13.25 所示，没有短路保护电路。 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210611200314597.png" alt="image-20210611200314597" style="zoom:67%;" />

该级显示为由第二级晶体管 $Q_{17}$ 驱动并加载 $2-k\Omega$ 电阻。 该电路属于 AB 类（第 12.4 节），由 $Q_{18}$、$Q_{19}$ 和 $R_{10}$ 组成的网络为输出晶体管 $Q_{14}$ 和 $Q_{20}$ 提供偏置。 尽管输出设备是标准设备的三倍，但使用该网络而不是两个串联二极管连接的晶体管可以在低电流 $(0.15 mA)$ 下对输出晶体管进行偏置。 这个结果是通过设置$Q_{19}$中的电流很小，因此其$V_{BE}$也很小而获得的。 我们在第 13.3.2 节中分析了直流偏置。

741 输出级的另一个值得注意的特点是该级由射极跟随器 $Q_{23}$ 驱动。 如下所示，该射极跟随器提供了额外的缓冲，这使得运算放大器增益几乎与输出晶体管的参数无关。我们首先确定输出电压摆幅的允许范围。 最大正输出电压受电流源晶体管 $Q_{13A}$ 的饱和限制。 因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210611200032391.png" alt="image-20210611200032391" style="zoom:67%;" />

比 $V_{CC}$ 低约 $1 V$。 最小输出电压（即最大负幅值）受 $Q_{17}$ 的饱和限制。 忽略 $R_8$ 上的压降，我们得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210611200129619.png" alt="image-20210611200129619" style="zoom:67%;" />

大约比 $–V_{EE}$ 高 $1.5 V$。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210611200501722.png" alt="image-20210611200501722" style="zoom:67%;" />

接下来，我们考虑输出级的小信号分析。 具体来说，我们使用图 13.26 中的等效电路对输出级进行建模，并确定模型参数如下。 请注意，模型显示为第二级 $v_{o2}$ 的开路电压，其中从图 13.24(b) 可知，$v_{o2} =-G_{m2}R_{o2}v_{i2}$。

为了确定输入电阻 $R_{in3}$，我们考虑了负载电阻 $R_L$ 并假设输出晶体管之一正在导通，如下例所示。

##### Example 13.6

假设 $Q_{14}$ 关闭且 $Q_{20}$ 向负载 $R_L =2 k\Omega$ 传导 $5 mA$ 的电流，确定 $R_{in3}$ 的值。 使用 $G_{m2} = 6.5 mA/V$ 和 $R_{o2} = 81 k\Omega$ ，确定第二级的电压增益。

**Solution**

参见图 13.25。  $Q_{20}$ 基极的输入电阻约为 $β_{20}R_L = 50 × 2 = 100 k\Omega$ 。 该电阻与 $r_{o13A} = V_{Ap}/I_{C13A} = 50V/180 μA = 280 k\Omega$ 的串联组合以及 $Q_{18}–Q_{19}$ 网络的电阻并联出现。 后者电阻很小（大约 $160\Omega$ ；见后面：练习 13.35）。 因此，$Q_{23}$ 发射极的总电阻约为 $(100 k\Omega|| 280 k\Omega )$ 或 $74 k\Omega$ ，输入电阻 $R_{in3}$ 为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210611203022994.png" alt="image-20210611203022994" style="zoom:67%;" />

因此我们看到 $R_{in3} >>R_{o2}$ 和 $R_{in3}$ 的值对运算放大器的性能几乎没有影响。我们仍然可以确定第二阶段的增益为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210611203137766.png" alt="image-20210611203137766" style="zoom:67%;" />

继续确定等效电路模型参数，我们从图 13.26 中注意到 $G_{vo3}$ 是输出级的开路总电压增益，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210611203243714.png" alt="image-20210611203243714" style="zoom:67%;" />

当 $R_L = ∞$ 时，射极跟随器输出晶体管（$Q_{14}$ 或 $Q_{20}$）的增益将接近1。 此外，当 $R_L =∞$ 时，$Q_{23}$ 发射极中的电阻将非常大。 这意味着 $Q_{23}$ 的增益将接近 1，$Q_{23}$ 的输入电阻将非常大。 因此我们得出结论，$G_{vo3}\simeq1$ 

接下来，我们将找到运算放大器的输出电阻值 $R_{out}$。 为此，请参考图 13.27 中所示的电路。 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210611203557213.png" alt="image-20210611203557213" style="zoom:67%;" />

根据图 13.26 中 $R_{out}$ 的定义，为输出级供电的输入源接地，但它的电阻（即第二级的输出电阻 $R_{o2}$）包括在内。 我们假设输出电压 $v_O$ 为负，因此 $Q_{20}$ 传导大部分电流； 因此，晶体管 $Q_{14}$ 已被取消。 输出电阻的准确值当然取决于哪个晶体管（$Q_{14}$ 或 $Q_{20}$）导通以及负载电流值。 然而，我们希望找到 $R_{out}$ 的估计。 这样做的分析如图 13.27 所示。 然而，应该注意的是，对于图中给出的 $R_{out}$ 值，我们必须加上电阻 $R_7 (27\Omega )$（见图 13.14），该电阻包含在短路保护中，以获得741的总输出电阻。

**Output Short-Circuit Protection**

如果运算放大器输出端子与电源之一短路，则两个输出晶体管之一可能会传导大量电流。
如此大的电流会导致足够的热量导致 IC 烧坏（第 12 章）。 为了防止这种可能性，741 运算放大器配备了一个特殊的短路保护电路。 该电路的功能是在发生短路时限制输出晶体管中的电流。

请参阅图 13.14 并注意短路保护电路以颜色突出显示。 电阻 $R_6$ 与晶体管 $Q_{15}$ 一起限制在发生短路时流出 $Q_{14}$ 的电流。 具体而言，如果 $Q_{14}$ 发射极中的电流超过约 $20 mA$，则 $R_6$ 上的压降超过 $540 mV$，从而开启 $Q_{15}$。 当 $Q_{15}$ 导通时，它的集电极会夺走 $Q_{13A}$ 提供的部分电流，从而降低 $Q_{14}$ 的基极电流。

因此，这种机制将运算放大器可以提供的最大电流（即从输出端子向外提供）限制为大约 $20 mA$。限制运算放大器可以吸收的最大电流，从而限制通过 $Q_{20}$ 的电流，是通过类似于上面讨论的机制来完成的。 相关电路由$R_7、Q_{21}、Q_{24}、Q_{22}$组成。 对于所示组件，向内方向的电流也被限制在大约 $20 mA$

**Overall Voltage Gain**

总小信号增益可以从上面推导出的三个运算放大器级的等效电路的级联中找到。 这个级联如图 13.28 所示，其负载电阻为 $R_L=2k\Omega$，这是计算741电路时的经典数值。因此我们可以由此得出总体增益

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210611204600587.png" alt="image-20210611204600587" style="zoom:67%;" />

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210611204623487.png" alt="image-20210611204623487" style="zoom: 67%;" />

使用先前发现的值得出整体开路电压增益，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210611204655236.png" alt="image-20210611204655236" style="zoom:67%;" />

##### 13.3.4 Frequency Response

741 是一个内部补偿运算放大器。 它采用第 11.10.3 节中研究的米勒补偿技术来引入主要的低频极点。 具体来说，一个 $30pF$ 的电容器 ($C_C$) 连接在第二级的负反馈路径中。 主极点频率的近似估计可以如下获得。

根据米勒定理（第 10.3.3 节），我们看到 $Q_{16}$ 的基极和地之间由 $C_C$ 引起的有效电容为（见图 13.14）

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210611204939784.png" alt="image-20210611204939784" style="zoom:67%;" />

其中 $A_2$ 是第二级增益。 使用例 13.6 中为 $A_2$ 计算的值，$A_2 = -515$，导致 $C_{in} = 15,480 pF$。 由于这个电容非常大，我们将忽略 $Q_{16}$ 基极和信号地之间的所有其他电容。 该节点与地之间的总电阻为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210611205131522.png" alt="image-20210611205131522" style="zoom:67%;" />

因此，主极点的频率 $f_P$ 由下式给出

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210611205159215.png" alt="image-20210611205159215" style="zoom:67%;" />

需要注意的是，这种方法等价于使用等式中的近似公式。

如第 11.10.3 节所述，米勒补偿提供了额外的有利效果，即极点分裂。 结果，电路的其他极点移动到非常高的频率。 这已通过计算机辅助分析得到证实（参见 Gray 等，2000）。

假设所有非主导极点都处于非常高的频率，计算值会产生如图 13.29 所示的波特图，其中 $f_{3dB} = f_P$。 单位增益带宽 $f_t$ 可以计算为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210611205359447.png" alt="image-20210611205359447" style="zoom:67%;" />

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210611205413634.png" alt="image-20210611205413634" style="zoom:67%;" />

因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210611205434222.png" alt="image-20210611205434222" style="zoom:67%;" />

尽管此波特图暗示 $f_t$ 处的相移为 $–90°$，因此相位裕度为 $90°$，但实际上获得的相位裕度约为 $80°$。 多余的相移（大约 $10°$）是由于非主极造成的。 该相位裕度足以为具有任何反馈系数 $β$ 值的闭环放大器提供稳定运行。 使用内部补偿的741的这种便利是以大大降低开环增益并因此降低负反馈量为代价实现的。 换句话说，如果一个人需要一个增益为 1000 的闭环放大器，那么 741 对于这样的应用（指1000倍的放大倍数下）是过度补偿的，设计自己的补偿会好得多（当然，假设有一个 op 尚未进行内部补偿的放大器）。

**A Simplified Model**

图 13.30 中显示的 741 运算放大器的简化模型类似于我们用于 CMOS 两级运算放大器（第 13.1.5 节）的模型。 然而，在这里，具有反馈电容 $C_C$ 的高增益第二级由理想积分器建模。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210611205811604.png" alt="image-20210611205811604" style="zoom:67%;" />

在该模型中，假设第二级的增益足够大，以至于在其输入端出现虚拟接地。 为此，省略了输入级的输出电阻和第二级的输入电阻。 此外，假设输出级是理想的单位增益跟随器。  （当然，两级 CMOS 放大器都没有输出级。）

对图 13.30 中模型的分析给出

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210611205853943.png" alt="image-20210611205853943" style="zoom:67%;" />

因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210611205913990.png" alt="image-20210611205913990" style="zoom:67%;" />

并且增益的幅度在 $ω = ω_t$ 处变为1，其中

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210611210007836.png" alt="image-20210611210007836" style="zoom:67%;" />

代入 $G_{m1} = 0.19 mA/V 和$ $C_C = 30 pF$ 得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210611210125669.png" alt="image-20210611210125669" style="zoom:67%;" />

这等于之前计算的值。 然而，应该指出的是，该模型仅在频率 $f >>f_{3dB}$ 时有效。 在这样的频率下，增益以 –20 dB/十倍频程的斜率下降（图 13.29），就像积分器的斜率一样。

##### 13.3.5 Slew Rate

运算放大器的压摆率限制在第 2 章中讨论，$SR$ 的表达式是针对第 13.1 节中的两级 CMOS 运算放大器和第 13.2 节中的折叠级联 CMOS 运算放大器推导出来的。  741 的压摆率计算公式与两级 CMOS 运算放大器的压摆率计算公式非常相似。 因此，按照相同的程序，我们可以证明对于 741 运算放大器，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210611210622670.png" alt="image-20210611210622670" style="zoom:67%;" />

当 $2I$ 是输入差分级的总偏置电流时。对于 741，$I = 9.5 μA$，$C_C = 30 pF$，可以计算出 $SR = 0.63 V/μs$。

此外，正如我们对两级 CMOS 运算放大器所做的那样，我们可以推导出 $SR$ 和 $ω_t$ 之间的关系。 对于 741 案例，我们可以证明

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210611210909260.png" alt="image-20210611210909260" style="zoom:67%;" />

其中 $V_T$ 是热电压（室温下约为 $25 mV$）。对于 741，我们有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210611211113533.png" alt="image-20210611211113533" style="zoom:67%;" />

这是之前得到的结果。 观察方程。  (13.126) 的形式与等式相同。  (13.47)，适用于两级 CMOS 运算放大器。 在这里， $4V_T$ 取代了 $V_{OV}$ 。 由于通常情况下，$V_{OV}$ 是 $4V_T$ 值的两到三倍，因此 $f_t$ 等于 741 的两级 CMOS 运算放大器的压摆率是 741 的两到三倍

### 13.4 Modern Techniques for the Design of BJT Op Amps

尽管 741 运算放大器设计中采用的巧妙技术经受住了时间的考验，但它们现在已有 40 多年的历史！ 技术进步导致用户对通用双极运算放大器的要求发生了变化。 由此产生的更苛刻的规范反过来又给模拟 IC 设计人员带来了新的挑战，他们像以前反复做过的那样，正在用新的、令人兴奋的电路来响应。 在本节中，我们展示了一个最近开发的设计技术示例。 有关此相当高级主题的更多信息，请参阅附录 I 中参考书目的模拟电路部分。

##### 13.4.1 Special Performance Requirements

许多特殊的性能要求源于使用电压低得多的电源运行现代运算放大器的需要。 因此，虽然 741 型运算放大器使用 $±15V$ 电源供电，但许多现代 BJT 运算放大器需要使用仅 $2V$ 至 $3V$ 的单电源供电。这样做的原因有很多，包括下列的几点要求。

1.现代小特征尺寸 IC 制造技术需要低电源电压。

2.必须与系统中使用低压电源的其他部分兼容。

3.功耗必须最小化，特别是对于电池供电的设备。

如图 13.31 所示，有两个重要变化：使用单个以地为参考的电源 $V_{CC}$，以及 $V_{CC}$ 的低值。 这两个要求都会引起性能规格的变化，并带来新的设计挑战。 下面我们将讨论两个由此产生的变化。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210611214838870.png" alt="image-20210611214838870" style="zoom:67%;" />

**Rail-to-Rail Input Common-Mode Range**

回想一下，运算放大器的输入共模范围是运算放大器正常工作并满足其性能规格（例如电压增益和 CMRR）的共模输入电压范围。  741 型运算放大器采用 $±15V$ 电源供电，输入共模范围可扩展到每个电源的几伏以内。 如果运算放大器要由仅 $2 V$ 至 $3 V$ 的单电源供电，那么输入共模范围与电源之间的这种差距显然是不可接受的。 事实上，我们现在将展示这些单电源、低电压运算放大器需要有一个输入共模范围，该范围扩展到整个电源电压，0 到 $V_{CC}$，称为轨到轨输入共模范围。

首先考虑图 13.32(a) 所示的反相运算放大器配置。 由于正输入端子接地（即负电源的电压），因此接地电压必须在允许的输入共模范围内。 事实上，因为对于正输出电压，反相输入端子上的电压可能会略微为负，所以输入共模范围应扩展到负电源（地）以下。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210612115201310.png" alt="image-20210612115201310" style="zoom:67%;" />

接下来考虑通过向运算放大器施加 100% 负反馈获得的单位增益电压跟随器，如图 13.32(b) 所示。 这里输入共模电压等于输入信号 $v_I$ 。 为了最大限度地发挥该缓冲放大器的作用，应允许其输入信号 $v_I$ 从 0 扩展到 $V_{CC}$，尤其是因为 $V_{CC}$ 仅为 $2V$ 至 $3V$。

因此，输入共模范围还应包括正偏置电源电压的大小。 很快就会看到，现代 BJT 运算放大器可以在输入共模电压范围内工作，该电压范围超出其两个电源轨的几分之一伏：也就是说，不仅仅是轨到轨操作！

**Near Rail-to-Rail Output Signal Swing**

在 741 运算放大器中，我们对可以摆动到比每个电源电压变化大小在 $2 V$（或类似数值的电压摆幅）以内的输出感到满意。 在 $±15V$ 的电源下，这种容量产生了可观的 $±13V$ 输出范围。 但是，在使用 $3V$ 单电源供电的运算放大器中，将输出摆幅限制在电源轨的 $2V$ 以内会导致器件无法使用！ 因此，在这里，我们也需要轨到轨的操作。 正如我们将在 13.4.5 节中看到的，这一要求迫使我们采用全新的方法进行输出级设计。

**Device Parameters**

我们将在本节的示例、练习和问题中使用的技术具有以下参数

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210612115928752.png" alt="image-20210612115928752" style="zoom:67%;" />



对于两种晶体管来说，都有 $|V_{BE} | \simeq 0.7 V$ 和 $|V_{CE_{sat}} | \simeq 0.1 V$。需要注意的是，我们将假设对于这种技术，晶体管将在 $|V_{CE} |$  低至 $0.1 V$时保持活动模式。（换句话说，需要 $0.6 V$ 来正向偏置 CBJ）。

##### 13.4.2 Bias Design

与 741 电路一样，现代 BJT 放大器的偏置设计广泛使用电流镜和电流控制电路（第 8.2 和 8.6 节）。 然而，由于通常偏置电流很小（在微安范围内）。 因此Widlar 电流源（第 8.6.4 节）在这里特别受欢迎。 同样，经常使用发射极衰减电阻器（在数十千欧范围内）。

图 13.33 显示了一个自偏置电流参考源，它利用由 $Q_1、Q_2$ 和 $R_2$ 形成的 Widlar 电路，以及带有匹配的发射极负反馈电阻器 $R_3$ 和 R4 的电流镜 $Q_3 -Q_4$。 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210612120354797.png" alt="image-20210612120354797" style="zoom:67%;" />

该电路在四个晶体管中的每一个中建立电流 $I$，$I$ 的值确定如下。 为简单起见，忽略基极电流和 $r_o$，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210612120405123.png" alt="image-20210612120405123" style="zoom:67%;" />

因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210612120427106.png" alt="image-20210612120427106" style="zoom:67%;" />

但由于

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210612120545541.png" alt="image-20210612120545541" style="zoom:67%;" />

因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210612120600550.png" alt="image-20210612120600550" style="zoom:67%;" />

因此，$I$ 的值由 $R_2$ 以及 $Q_1$ 和 $Q_2$ 的发射极面积之比决定。 此外，请注意 $I$ 独立于 $V_{CC}$，这是一个非常理想的结果。 忽略 $R_2$ 的温度依赖性，我们看到 $I$ 直接是 $PTAT$（与绝对温度 $T$ 成正比）。

因此，由 $I$ 或它的镜像版本偏置的晶体管将表现出某些与温度无关的特性！

图 13.33 中的电路提供了一条偏置线 $V_{BIAS1}$，其电压等于 $V_{BE1}$。

这可用于偏置其他晶体管，从而通过适当缩放其发射极面积来产生与 $I$ 成正比的电流。 类似地，该电路在低于 $V_{CC}$ 的电压 $(IR_3 +V_{EB3})$ 下提供偏置线 $V_{BIAS2}$。 该偏置线可用于偏置其他晶体管，从而通过适当缩放发射极面积和发射极退化电阻来产生与 $I$ 成正比的恒定电流。 这些想法如图 13.34 所示。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210612120938559.png" alt="image-20210612120938559" style="zoom:67%;" />

##### 13.4.3 Design of the Input Stage to Obtain Rail-to-Rail $V_{ICM}$

带有电流镜负载的经典差分输入级如图 13.35(a) 所示。 这本质上是 741 输入级的核心，除了这里我们使用的是单个正电源。 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210612133909613.png" alt="image-20210612133909613" style="zoom:67%;" />

同样，该电路的 CMOS 对应电路几乎用于所有 CMOS 运算放大器设计（参见第 13.1 节）。 不幸的是，这个非常流行的电路不能满足我们对轨到轨共模操作的要求。

首先考虑输入共模范围的低端。  $V_{ICM_{min}}$ 的值受到将 $Q_1$ 保持在活动模式的需要的限制。 具体来说，由于 $Q_1$ 的集电极电压 $V_{BE3}$ 为 $0.7 V$，我们看到施加到 $Q_1$ 基极的电压不能低于 $0.1 V$，并且还要求不会导致 $Q_1$ 的集电极-基极结正向偏置。因此 $V_{ICM_{min}}$ $= 0.1 V$，输入共模范围不包括所需的接地电压。

将 $V_{ICM_{min}}$ 扩展到 $0 V$ 的唯一方法是降低 $Q_1$ 集电极的电压。 这反过来只能通过放弃使用电流镜负载并使用电阻负载来实现，如图 13.35(b) 所示。 请注意，实际上我们将回到第 9 章中开始研究差分放大器的电阻加载差分对！

图 13.35(b) 的电路中 $V_{ICM}$ 的最小允许值当然仍然受到将 $Q_1$ 和 $Q_2$ 保持在活动模式的需要的限制。 这反过来又是通过避免导致 $Q_1$ 和 $Q_2$ 的基极电压低于其集电极电压 $0.6 V$ 以上的 $V_{ICM}$ 值来实现的，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210612134325500.png" alt="image-20210612134325500" style="zoom:67%;" />

其中 $V_{RC}$ 是 $R_{C1}$ 和 $R_{C2}$ 两端的电压降。 现在，如果 $V_{RC}$ 选择为 $0.2 V$ 至 $0.3 V$，则 $V_{ICM_{min}}$ 将为 $-0.4 V$ 至 $-0.3 V$，这正是我们所需要的。

用电阻负载代替电流镜负载的主要缺点是实现的差分增益大大降低， 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210612134623455.png" alt="image-20210612134623455" style="zoom:67%;" />

为简单起见，我们忽略了 $r_o$。 因此，对于 $V_{RC} = 0.3 V$，实现的增益仅为 $12 V/V$。 我们很快就会看到，这个低增益问题可以通过级联来解决。

接下来考虑输入共模范围的上限。 参考图 13.35(b) 中的电路表明，可以施加到 $Q_1$ 和 $Q_2$ 基极的最大电压受到将电流源晶体管保持在活动模式的需要的限制。 这反过来又是通过确保 $Q_5$ 两端的电压 $V_{EC5}$ 不低于 $0.1 V$ 左右来实现的。 因此 VICM 的最大值将为电压 $V_{EB1,2}$ 或比其大约低 $0.7 V$

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210612134916613.png" alt="image-20210612134916613" style="zoom:67%;" />

也就是说，输入共模范围的上限至少比 $V_{CC}$ 低 $0.8 V$，这是一个严重的限制。回顾一下，虽然图 13.35(b) 中的电路的 $V_{ICM_{min}}$ 比负电源轨（在接地电压下）低十分之几伏，但 $V_{ICM}$ 的上限离 $V_{CC}$ 相当远，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210612135036558.png" alt="image-20210612135036558" style="zoom:67%;" />

其中我们假设 $V_{RC} = 0.3 V$。为了扩展 $V_{ICM}$ 的上限，我们采用类似于 CMOS 情况下使用的解决方案（第 13.2.6 节，图 13.12），即我们利用并行互补输入级。 为此，请注意图 13.35(b) 电路的 npn 版本（如图 13.36 所示）的公共输入范围为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210612135311996.png" alt="image-20210612135311996" style="zoom:67%;" />

我们假设 $V_{RC}$ = 0.3 V。因此，正如预期的那样，上限符合我们的设计要求，实际上比正电源轨高 $0.3 V$。然而该电路的下限不是，但这应该不会引起我们的关注，因为其输入下限将由pnp 晶体管电路来定义

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210612135508195.png" alt="image-20210612135508195" style="zoom:67%;" />

图 13.37 显示了一个输入级，它利用并联的 pnp 差分对$（Q_1、Q_2）$和 npn 差分对$（Q_3、Q_4）$实现了轨到轨输入共模范围。 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210612135820840.png" alt="image-20210612135820840" style="zoom:67%;" />

为了保持图表简单，我们没有显示输入端子的并联连接； 假设 $+$ 输入端子连接在一起，对于 $–$ 输入端子也是如此。 为了增加从电阻加载的差分对获得的增益，添加了折叠级联级。 这里 $R_7$ 和 $R_8$ 是 pnp 对 $Q_1 -Q_2$ 的电阻负载，$Q_7 -Q_8$ 是它的共基共集晶体管。 同样，$R_9$ 和 $R_{10}$ 是npn 对 $Q_3 -Q_4$ 的电阻负载， $Q_9 -Q_{10}$ 是其共基共集晶体管。 观察共基共集晶体管执行“双重任务”。 例如，$Q_7 -Q_8$ 用作 $Q_1 -Q_2$ 的共基共集器件，同时用作 $Q_9 -Q_{10}$ 的电流源负载。 可以对 $Q_9 -Q_{10}$ 做出类似的陈述。 第一级的输出电压 $v_{od}$ 取自共基共集器件的集电极之间。

对于 $V_{ICM}<< 0.8 V$，npn 级将处于非活动状态，增益由 $Q_1 -Q_2$ 对的跨导 $G_m$ 以及在共基共集晶体管的集电极之间看到的输出电阻决定。 在 $V_{ICM}$ 的另一端，即 $V_{ICM}>> V_{CC} -0.8，Q_1 -Q_2$ 级将处于非活动状态，增益将由 $Q_3 -Q_4$ 对的跨导 $G_m$ 和级联设备集电极之间的输出电阻决定 。 在重叠区域 $0.8 ≤ V_{ICM} ≤ V_{CC} -0.8$ 中，pnp 和 npn 级都将处于活动状态，并且它们的有效跨导 $G_m$ 相加，从而导致更高的增益。 不过，差分增益大小对输入共模 $V_{ICM}$ 的依赖性通常是不可取的，可以通过安排两个差分对之一在另一个激活时关闭，从而大大降低这种依赖性。

##### Example 13.7

求出图 13.37 所示的输入级的输入电阻和电压增益。令 $V_{ICM}$ 为 $0.8 V$，以便 $Q_3 -Q_4$ 对关闭。 假设 $Q_5$ 提供 $10 μA$，$Q_7$ 到 $Q_{10}$ 中的每一个偏置在 $10 μA$，并且所有四个共基共集晶体管都在活动模式下运行。 运放第二级（未示出）的输入电阻为$R_L = 2M\Omega$ 。 发射极退化电阻为 $R_7 = R_8 = 20 k\Omega$ 和 $R_9 = R_{10} = 30 k\Omega$ 。 回想一下，设备参数是 $β_N = 40、β_P = 10、V_{An} = 30 V、V_{Ap} = 20 V。$

**Solution**

由于该级是完全平衡的，我们可以使用图 13.38(a) 所示的差分半电路。 输入电阻 $R_{id}$ 是 $r_{π1}$ 值的两倍，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210612142954606.png" alt="image-20210612142954606" style="zoom:67%;" />

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210612143014445.png" alt="image-20210612143014445" style="zoom:67%;" />

其中

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210612143203105.png" alt="image-20210612143203105" style="zoom:67%;" />

因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210612143221503.png" alt="image-20210612143221503" style="zoom:67%;" />

为了找到短路跨导，我们将输出短路到地，如图 13.38(b) 所示，并找到 $G_{m1}$ 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210612143324125.png" alt="image-20210612143324125" style="zoom:67%;" />

在节点 $X$ 处，我们有四个接地的并联电阻（注意电流流动的方向）

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210612143513302.png" alt="image-20210612143513302" style="zoom:67%;" />

显然 $r_{o1}$ 和 $r_{o7}$ 非常大，可以忽略不计。 然后，$g_{m1} (v_{id}/2)$ 流入 $Q_7$ 发射极的部分可以从以下式子中找到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210612143725494.png" alt="image-20210612143725494" style="zoom:67%;" />

因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210612144629592.png" alt="image-20210612144629592" style="zoom:67%;" />

从而得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210612144656388.png" alt="image-20210612144656388" style="zoom:67%;" />

为了找到电压增益，我们需要确定图 13.38(a) 中电路的输出节点和地之间的总电阻，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210612144716572.png" alt="image-20210612144716572" style="zoom:67%;" />

电阻 $R_{o9}$ 是 $Q_9$ 的输出电阻，它有一个发射极退化电阻 $R_9$。 因此，$R_{o9}$ 的大小为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210612144830236.png" alt="image-20210612144830236" style="zoom:67%;" />



其中

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210612144902912.png" alt="image-20210612144902912" style="zoom:67%;" />

因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210612144917645.png" alt="image-20210612144917645" style="zoom:67%;" />

电阻 $R_{o7}$ 是 $Q_7$ 的输出电阻，它有一个发射极退化电阻 $R_7|| r_{o1} \simeq R_7$。 因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210612145131325.png" alt="image-20210612145131325" style="zoom:67%;" />

其中

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210612145145991.png" alt="image-20210612145145991" style="zoom:67%;" />

因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210612145214567.png" alt="image-20210612145214567" style="zoom:67%;" />

从而

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210612145239203.png" alt="image-20210612145239203" style="zoom:67%;" />

最后，我们可以找到电压增益为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210612145258105.png" alt="image-20210612145258105" style="zoom:67%;" />

##### 13.4.4 Common-Mode Feedback to Control the DC Voltage at the Output of the Input Stage

为了使图 13.37 中的共源共栅电路正常工作并提供高输出电阻和高电压增益，共源共栅晶体管 $Q_7$ 到 $Q_{10}$ 必须始终工作在有源模式。 但是，仅依靠匹配不足以确保 $Q_9$ 和 $Q_{10}$ 提供的电流与 $Q_7$ 和 $Q_8$ 提供的电流完全相等。 两组电流之间的任何小失配 $\Delta I$ 都会乘以每个集电极节点和地之间的大输出电阻，因此电压 $v_{O1}$ 和 $v_{O2}$ 会发生很大变化。 这些变化又会导致一组电流源（即 $Q_7 -Q_8$ 或 $Q_9 -Q_{10}$）饱和。 因此，我们需要一个电路来检测 $v_{O1}$ 和 $v_{O2}$ 的直流或共模分量 $V_{CM}$ 的变化，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210612145532192.png" alt="image-20210612145532192" style="zoom:67%;" />

并调整 $Q_7$ 和 $Q_8$ 基极上的偏置电压 $V_B$，以恢复电流相等。 这个负反馈回路应该对 $v_{O1}$ 和 $v_{O2}$ 的差分信号分量不敏感； 否则会降低差分增益。 因此，反馈回路应提供共模反馈 (CMF)。

图 13.39 显示了 CMF 电路作为黑盒的共基共集电路。  

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210612151147067.png" alt="image-20210612151147067" style="zoom:67%;" />

CMF 电路接受 $v_{O1}$ 和 $v_{O2}$ 作为输入，并提供偏置电压 $V_B$ 作为输出。 在我们将很快介绍的特定实现中，CMF 电路具有传输特性

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210612151125237.png" alt="image-20210612151125237" style="zoom:67%;" />

通过保持 $V_B$ 仅比 $V_{CM}$ 高 $0.4 V$，CMF 电路可确保 $Q_7$ 和 $Q_8$ 保持活动状态（饱和需要 $0.6 V$）。

$V_B$ 的标称值由 $Q_7$ 到 $Q_{10}$ 的静态电流、$I_1$ 和 $I_2$ 的静态值以及 $R_7$ 和 $R_8$ 的值决定。 得到的 $V_B$ 标称值和 $V_{CM}$ 的相应值旨在确保 $Q_9$ 和 $Q_{10}$ 在活动模式下运行。 在这里，重要的是要记住 $V_{BIAS3}$ 由运算放大器偏置电路的其余部分决定。

要查看 CMF 电路如何调节直流电压 $V_{CM}$，我们首先假设由于某种原因 $V_B$ 高于它应有的值，因此 $Q_7$ 和 $Q_8$ 的提供的电流将比 $Q_9$ 和 $Q_{10}$ 提供的电流增加增量 $\Delta I$。 当乘以每个输出节点和地之间的总电阻时，增量 $ \Delta I$ 将导致 $v_{O1}$ 和 $v_{O2}$ 产生一个较大的负电压增量。  CMF 电路通过将 $V_B$ 降低到恢复电流相等的值来响应。 恢复平衡所需的 $V_B$ 变化通常很小（参见下面的示例 13.8），并且 $V_{CM}$ 的相应变化将同样小。 因此，我们看到负反馈在起作用：它最大限度地减少了初始变化，从而使 $V_{CM}$ 几乎保持在其标称值不变，其设计目的是在有源区域运行 $Q_7$ 到 $Q_{10}$。

我们通过简要考虑 CMF 电路的可能实现来结束这一节。

图 13.40 显示了运算放大器电路的第二级。 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210612152035957.png" alt="image-20210612152035957" style="zoom:67%;" />

该电路由输入级的输出 $v_{O1}$ 和 $v_{O2}$ 馈送

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210612152013981.png" alt="image-20210612152013981" style="zoom:67%;" />

除了放大 $v_d$ 的差分分量外，该电路还产生一个直流电压 $V_B$，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210612152154863.png" alt="image-20210612152154863" style="zoom:67%;" />

要了解电路的工作原理，请注意 $Q_{11}$ 和 $Q_{12}$ 是射极跟随器，可最大限度地减少输入级第二级的负载。 射极跟随器向差分对 $Q_{13} −Q_{14}$ 的基极提供几乎等于 $v_{O1}$ 和 $v_{O2}$ 但直流偏移量为 $V_{EB11,12}$ 的电压，因此 $Q_{13} -Q_{14}$ 的发射极电压为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210612154021929.png" alt="image-20210612154021929" style="zoom:67%;" />

可以写为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210612154040290.png" alt="image-20210612154040290" style="zoom:67%;" />

电压 $V_B$ 等于 $V_E$ 加上二极管 $D_1$ 的压降。 后者是肖特基势垒二极管 $(SBD)$，具有约 0.4 V 的低正向压降。因此，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210612154148285.png" alt="image-20210612154148285" style="zoom:67%;" />

##### 13.4.5 Output-Stage Design for Near Rail-to-Rail Output Swing

如前所述，现代低压双极运算放大器无法使用经典的基于射极跟随器的 AB 类输出级，这会消耗过多的电源电压。 相反，使用了一对互补的共发射极晶体管，如图 13.41 所示。 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210612154235700.png" alt="image-20210612154235700" style="zoom:67%;" />

输出晶体管 $Q_P$ 和 $Q_N$ 以 AB 类方式工作。 通常，$i_L$ 可高达 $10 mA$ 至 $15 mA$，并由 $v_O$ 和 $R_L$ 决定。对于 $i_L = 0，i_P = i_N = I_Q$，其中静态电流 $I_Q$ 通常为几分之一毫安。

图 13.41 中的输出级由两个独立但相等的信号 $v_{BP}$ 和 $v_{BN}$ 驱动。当 $v_{BP}$ 和 $v_{BN}$ 为高电平时，$Q_N$ 提供与所示方向相反的负载电流 ，并且输出电压 $v_O$ 可以摆动到接地的 $0.1 V$ 左右。 同时，$Q_P$ 处于非活动状态。 然而，为了最小化交叉失真，$Q_P$ 被阻止关闭并被强制（如稍后所示）传导约 $I_Q/2$ 的最小电流。

当 $v_{BP}$ 和 $v_{BN}$ 为低电平时，情况正好相反：$Q_P$ 提供指定方向的负载电流 $i_L$，并且 $v_O$ 可以上升到 $V_{CC} -0.1 V$。同时，$Q_N$ 处于非活动状态，但被阻止关闭并强制开启，传导约 $I_Q/2$ 的最小电流。

从上面的描述中，我们看到 $v_O$ 可以摆动到每个电源轨的 $0.1 V$ 以内。 这种接近轨到轨的操作是该 CE 输出级的主要优势。

它的缺点是输出电阻比较高。 然而，考虑到运算放大器几乎总是与负反馈环路一起使用，闭环输出电阻仍然可以非常低

**A Buffer/Driver Stage**

可以调用输出晶体管来提供 $10 mA$ 至 $15 mA$ 范围内的电流。 当这种情况发生时，$Q_P$ 和 $Q_N$ 的基极电流可能很大（回想一下 $β_P\simeq  10$ 和 $β_N\simeq 40$）。 如此大的电流通常不能由输出级之前的放大器级直接提供。 相反，通常需要一个缓冲器/驱动器级，如图 13.42 所示。 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210612155007619.png" alt="image-20210612155007619" style="zoom:67%;" />

这里使用射极跟随器 $Q_3$ 来驱动 $Q_N$ 。 然而，由于 $β_P$ 较低，因此使用由互补射极跟随器 $Q_1$ 和 $Q_2$ 组成的双缓冲器来驱动 $Q_P$。 驱动级由来自运算放大器电路中前级放大器级（通常是第二级）的两个独立但相同的信号 $v_{IP}$ 和 $v_{IN}$ 馈送。

**Establishing IQ and Maintaining a Minimum Current in the Inactive Transistor**

我们接下来考虑用于在 $Q_N$ 和 $Q_P$ 中建立静态电流 $I_Q$ 以及在非活动输出晶体管中保持 $I_Q/2$ 的最小电流的电路。 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210612155318721.png" alt="image-20210612155318721" style="zoom:67%;" />

图 13.43 显示了输出级的更完整版本。 除了我们已经讨论过的输出晶体管 $Q_P -Q_N$ 和缓冲器/驱动器级之外，该电路还包括两个电路块，我们现在将解释其操作。

第一个是由差分对 $Q_6 -Q_7$ 和相关晶体管 $Q_4$ 和 $Q_5$ 以及电阻器 $R_4$ 和 $R_5$ 组成的电路。 该电路测量输出晶体管中的电流 $i_P$ 和 $i_N$ ，并根据 $i_N /i_P$ 的比值安排电流 $I$ 在 $Q_6$ 和 $Q_7$ 之间分配，并提供相关的输出电压 $v_E$。 具体来说，可以证明（问题 13.86 和 13.87）

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210612155725197.png" alt="image-20210612155725197" style="zoom:67%;" />

其中 $I_{SN}$ 和 $I_{S7}$ 分别是 $Q_N$ 和 $Q_7$ 的饱和电流。 观察 $i_P>> i_N 、i_{C6}\simeq  0$ 和 $i_{C7}\simeq  I$。因此 $Q_6$ 关闭且 $Q_7$ 导通所有 $I$。发射极电压 $v_E$ 变为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210612155909213.png" alt="image-20210612155909213" style="zoom:67%;" />

因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210612155937452.png" alt="image-20210612155937452" style="zoom:67%;" />

这个方程简单地说明了 $v_E = v_{BEN} +V_{EB7}$，这可以直接从图 13.43 中的电路图中获得。 然而，需要注意的重要一点是，由于 $V_{EB7}$ 是一个常数，因此 $v_E$ 由无源晶体管 $Q_N$ 中的电流 $i_N$ 决定。 在 $i_N>> i_P、i_{C6}\simeq  I、i_{C7}\simeq 0$ 的另一个极端情况下， $Q_7$ 关闭，$Q_6$ 导通所有 $I$。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210612160153852.png" alt="image-20210612160153852" style="zoom:67%;" />

因此，这里也是，因为 $V_{EB6}$ 是一个常数，所以 $v_E$ 由非活动晶体管中的电流 $Q_P$ 决定。

第二个电路块是一个差分放大器，由 $Q_8 -Q_9$ 及其发射极负反馈电阻 $R_8、R_9$ 组成。 由测量电路产生的电压 $v_E$ 被馈送到差分放大器的一个输入端，而另一个输入端则被馈入参考电压 $V_{REF}$，该参考电压 $V_{REF}$ 是通过将参考电流 $I_{REF}$ 通过串联连接的二极管连接的晶体管 $Q_{10}$ 和 $Q_{11}$ 而产生的。 该差分放大器参与负反馈回路，该回路使用 $v_E$ 的值来控制通过节点 $v_{IP}$ 和 $v_{IN}$ 的电流 $i_P$ 和 $i_N$ 。 反馈控制的目的是将无效输出晶体管中的电流设置为最小值。 要查看反馈如何工作，请考虑 $i_P>> i_N$ 的情况，因此 $Q_N$ 是无源晶体管。 在这种情况下，$Q_6$ 关断，$Q_7$ 导通所有 $I$。 现在，如果由于某种原因 $i_N$ 低于其最小预期值，$v_E$ 会降低，从而导致 $i_{C9}$ 降低。 这反过来会导致节点 $v_{IN}$ 上升，$Q_N$ 基极的电压最终会上升，从而将 $i_N$ 增加到其预期值。

通过分析，我们可以得到 $i_N$ 和 $i_P$ 之间的关系如下。 假设由差分放大器 $Q_8 -Q_9$ 锚定的反馈环路的环路增益足够高以迫使两个输入端电压相同，即，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210612160955361.png" alt="image-20210612160955361" style="zoom:67%;" />

将$v_{E}$的值代入

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210612161033140.png" alt="image-20210612161033140" style="zoom:67%;" />

我们注意到$i_N=i_P=I_Q$,因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210612161050485.png" alt="image-20210612161050485" style="zoom:67%;" />

# PART IV Filters and Oscillators

在第四部分中，我们研究了一类重要的模拟电路：滤波器和振荡器。 这两个主题的共同点是面向应用程序或系统。 它们为负和正反馈的应用提供了生动而有力的说明。 虽然这里研究的滤波器是线性电路，但振荡器的设计同时使用了线性和非线性技术。

第 17 章讨论滤波器的设计，滤波器是通信和仪表系统的重要组成部分。 滤波器设计是少数拥有完整设计理论的工程领域之一，从规范开始到实际工作电路。 所提供的材料应该允许读者执行这样一个完整的设计过程。

第 17 章涵盖了当前用于模拟滤波器的大部分设计方法和实现技术。 在这方面，我们应该注意到，尽管现在越来越多的信号处理是以数字方式进行的，但仍然需要模拟滤波器。 这是因为大多数系统都必须与物理世界进行交互，而物理世界本质上是模拟的。 这种接口至少由一个放大器和一个模拟滤波器组成。

在电子系统的设计中，通常需要各种波形的信号——正弦、脉冲、方波等。 此类信号的生成是第 18 章的主题。可以看到，波形生成中使用的一些电路采用了第 16 章中研究的基本存储元件的运算放大器版本，即双稳态多谐振荡器或锁存器。

滤波器和振荡器的研究依赖于对基本反馈概念的彻底熟悉，包括反馈对放大器极点的影响（第 11 章）和运算放大器电路应用（第 2 章）。 同样，我们假设了解基本的 s 平面概念，包括传递函数（第 1 章和附录 E）、极点、零点和波特图（附录 F）。

零点：当系统输入幅度不为零且输入频率使系统输出为零时，此输入频率值即为零点。极点：当系统输入幅度不为零且输入频率使系统输出为无穷大（系统稳定破坏，发生振荡）时，此频率值即为极点。

## CHAPTER 17 Filters and Tuned Amplifiers

在本章中，我们研究了通信和仪表系统的一个重要组成部分——电子滤波器的设计。 滤波器设计是极少数拥有完整设计理论的工程领域之一，从规范到电路设计都十分完备。滤波器设计的详细研究需要一整本书，而且确实存在这样的教科书。 在此处可用的有限空间中，我们将集中选择一些主题，这些主题提供对该主题的介绍以及有用的滤波器电路和设计方法库。

实现滤波器的最古老技术使用电感器和电容器，由此产生的电路称为无源 LC 滤波器。 这种滤波器在高频下工作良好； 然而，在低频应用（直流至 100 kHz）中，所需的电感器体积大且体积庞大，而且它们的特性非常不理想。 此外，这种电感器不可能以单片形式制造，并且与用于组装电子系统的任何现代技术都不兼容。 因此，人们对寻找不需要电感器的滤波器实现非常感兴趣。 在各种可能的无电感滤波器类型中，我们将研究有源 RC 滤波器、跨导 C 滤波器和开关电容滤波器。

有源 RC 滤波器利用运算放大器以及电阻器和电容器，并使用分立、混合厚膜或混合薄膜电路技术制造。 然而，对于大批量生产，此类技术无法实现单片 (IC) 制造所实现的经济性。 目前，有两种实现完全集成滤波器的流行方法：跨导-C 方法，特别适用于高频应用，以及开关电容器方法，用于音频应用。 我们将研究这两种方法。

本章研究的最后一个主题是无线电和电视接收机设计中常用的调谐放大器。 尽管调谐放大器实际上是带通滤波器，但由于它们的设计基于一些不同的技术，因此需要单独研究。

本章中的材料要求完全熟悉运算放大器电路应用。 因此，学习第 2 章是先决条件。

### 17.1 Filter Transmission, Types, and Specification

##### 17.1.1 Filter Transmission

我们将要研究的滤波器是线性电路，可以用图 17.1 所示的一般二端口网络表示。 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210612162534532.png" alt="image-20210612162534532" style="zoom:67%;" />

滤波器传递函数 $T(s)$ 是输出电压 $V_o(s)$ 与输入电压 $V_i(s)$ 的比值，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210612162458323.png" alt="image-20210612162458323" style="zoom:67%;" />

滤波器传输是通过评估物理频率的 $T(s)$ 来找到的，$s = jω$，并且可以用其幅度和相位表示为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210612162600986.png" alt="image-20210612162600986" style="zoom:67%;" />

传输的幅度通常用增益函数的分贝表示

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210612162624545.png" alt="image-20210612162624545" style="zoom:67%;" />

或者，根据衰减函数

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210612162643557.png" alt="image-20210612162643557" style="zoom:67%;" />

滤波器根据传递函数 $|T( jω)|$ 的幅度对输入信号的频谱，$|V_i( jω)|$，进行整形从而提供输出 $V_o( jω)$

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210612162800104.png" alt="image-20210612162800104" style="zoom:67%;" />

此外，根据滤波器相位函数 $φ(ω)$，当信号通过滤波器时，它的相位特性会被修改。

##### 17.1.2 Filter Types

我们在这里对执行频率选择功能的滤波器特别感兴趣：通过频谱位于指定范围内的信号，并阻隔频谱位于此范围之外的信号。 理想情况下，这样的滤波器具有传输幅度为1的频带（或多个频带）（滤波器通带）和传输为零的频带（或多个频带）（滤波器阻带）。 图 17.2 描绘了四种主要滤波器类型的理想传输特性：图 17.2(a) 中的低通 (LP)、图 17.2(b) 中的高通 (HP)、图 17.2 中的带通 (BP)  (c) 和图 17.2(d) 中的带阻 (BS) 。 这些理想化的特性，凭借其垂直边缘，被称为砖墙响应

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210612163041737.png" alt="image-20210612163041737" style="zoom:67%;" />



##### 17.1.3 Filter Specification

滤波器设计过程始于滤波器用户指定滤波器所需的传输特性。 这样的规范不能是图 17.2 所示的形式，因为物理电路不能实现这些理想化的特性。 图 17.3 显示了低通滤波器传输特性的实际规格。 请注意，由于物理电路无法在所有通带频率下提供恒定传输，因此规范允许通带传输与理想情况（ 0 dB ）的偏差，但在此偏差上设置上限 $A_{max} (dB)$。 根据应用的不同，$A_{max}$ 通常在 $0.05 dB$ 到 $3 dB$ 的范围内。 此外，由于物理电路不能在所有阻带频率下提供零传输，图 17.3 中的规范允许在阻带上进行一些传输。 然而，规范要求阻带信号相对于通带信号至少衰减 $A_{min} (dB)$。 根据滤波器应用的不同，$A_{min}$ 的范围可以从 $20 dB$ 到 $100 dB$。

由于物理电路的传输不能在通带边缘突然改变，图 17.3 的规范提供了一个频带，在该频带上衰减从接近 $0 dB$ 增加到 $A_{min}$。 该过渡带从通带边缘 $ω_p$ 延伸到阻带边缘 $ω_s$。 比率 $ω_s/ω_p$ 通常用作衡量低通滤波器响应锐度的指标，称为选择性因子。 最后，请注意为方便起见，通带传输指定为 $0 dB$。 但是，如果需要，可以为最终滤波器提供通带增益，而不会改变其选择性特性。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210612163437468.png" alt="image-20210612163437468" style="zoom:67%;" />

模拟滤波器简史：受 20 世纪早期新兴电话系统需求的推动，最早的模拟滤波器使用电感器（线圈）和电容器，并使用特殊方法进行设计。 直到 1940 年代，才开发了无源 LC 滤波器的设计理论。 然而，这种滤波器合成方法需要大量的计算，并且必须等待数字计算机的出现及其在 1950 年代和 1960 年代的广泛使用才能被采用、进一步发展和利用。

晶体管和 IC 的发明产生了组装电子电路的新方法，然而，这些方法与音频 LC 滤波器中使用的笨重电感器不兼容。 因此开始了对无电感滤波器的研究，并受到 1960 年代后期 IC 运算放大器的出现及其低成本可用性的极大影响。  1960 年代和 1970 年代的广泛研究产生了大量的运算放大器 - RC 滤波器，本章将研究其中最好的。

运算放大器 – RC 滤波器成为一种成熟可靠的技术后，就出现了对可以完全集成的模拟滤波器的需求。  1970 年代后期提出了多种方法，但开关电容器电路已成为低频应用的首选技术，主要是因为它与 CMOS 兼容。 对于新兴的移动通信市场所需的接近千兆赫范围的高频应用，有两种方法获得了动力：跨导-C 和有源-LC。 后者使用在 IC 芯片上制造的实际物理电感器（在纳亨范围内）。

总之，低通滤波器的传输由四个参数指定

1. 通带边缘 $ω_p$ 
2. 通带传输的最大允许变化 $A_{max}$ 
3. 阻带边缘 $ω_s$ 
4. 所需的最小阻带衰减 $A_{min}$

滤波器指定得越严格——即较低的 $A_{max}$、较高的 $A_{min}$ 和/或选择比 $ω_s/ω_p$ 更接近于 1——所得滤波器的响应越接近理想值。然而，由此产生的滤波器电路将是更高阶的，因此更复杂和昂贵。

除了传输幅度之外，滤波器的相位响应在某些应用中也很重要。 然而，当要同时指定幅度和相位时，滤波器设计问题相当复杂。

确定滤波器规格后，设计的下一步是找到幅度符合规格的传递函数。 为了满足规范，幅度响应曲线必须位于图 17.3 中的无阴影区域。 图中所示的曲线是针对刚好符合规格的滤波器。 观察到对于这个特定的滤波器，幅度响应在整个通带中波动，并且纹波峰值都是相等的。

由于峰值纹波等于 $A_{max}$，因此通常将 $A_{max}$ 称为通带纹波，将 $ω_p$ 称为纹波带宽。 特定的滤波器响应在阻带中也显示出纹波，同样纹波峰值全部相等，并且达到的最小阻带衰减等于指定值 $A_{min}$。 因此，这个特定的响应被称为在通带和阻带中都是等波纹的。

获得满足给定规范的传递函数的过程称为滤波器逼近。 滤波器近似通常使用计算机程序 (Snelgrove, 1982; Ouslis and Sedra, 1995) 或滤波器设计表 (Zverev, 1967) 。在一些简单的情况下，滤波器近似可以使用闭式表达式执行，如第17.3节所示。

最后，图17.4显示了带通滤波器的传输规范以及满足这些规范的滤波器的响应。对于这个例子，我们选择了一个近似函数，它在通带中不起波纹；相反，传输在中心频率的两侧单调地减小，在通带的两个边缘处达到最大允许偏差

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210612164314347.png" alt="image-20210612164314347" style="zoom:67%;" />

### 17.2 The Filter Transfer Function

滤波器传递函数$T（s）$可以写成两个多项式的比值

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210612164402070.png" alt="image-20210612164402070" style="zoom: 67%;" />

分母的次数 N 是滤波器阶数。 为使滤波电路稳定，分子的次数必须小于或等于分母的次数：M≤N。分子和分母系数$a_0，a_1，..$$a_M$ 和 $b_0, b_1, .  .  .  ,b_{N−1}$是实数。

分子和分母中的多项式可以进行因式分解，$T(s)$可以表示为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210612164604270.png" alt="image-20210612164604270" style="zoom:67%;" />

分子中 $z_1, z_2, .  .  .  , z_M$ 是传递函数零点或传输零点；分母中 $p_1, p_2, .  .  .  ,p_N$ 是传递函数极点。每个传输零或极点可以是实数或复数。 然而，复数零点和极点必须以共轭对出现。 因此，如果 $-1+j2$ 恰好是一个零点，那么 $–1 – j2$ 也必须是零点。

由于在滤波器阻带中，传输要求为零或很小，因此滤波器传输零点通常位于阻带频率处的 $jω$ 轴上（虚轴上）。 这确实是滤波器的情况，其传输函数如图 17.3 所示。 可以看到该特定滤波器在两个阻带频率$ω_{l1}$ 和 $ω_{l2}$处具有零传输（无限衰减）。 然后滤波器必须在 $s=+jω_{l1}$ 和 $s=+jω_{l2}$ 处具有传输零点。 然而，由于复零点出现在共轭对中，因此在 $s = −jω_{l1}$ 和 $s = −jω_{l2}$ 处也必须有传输零点。 因此，该滤波器的分子多项式将具有因子 $(s+jω_{l1})(s−jω_{l1})(s+jω_{l2})(s−jω_{l2})$，可以写成 $(s^2 +ω^ 2_{l1})( s^2 +ω^ 2 _{l2}$  . 对于 $s =jω$（物理频率），分子变为 $(−ω ^2 +ω^ 2 _{l1} )(−ω^ 2 +ω^ 2_ {l2})$ ，在 $ω = ω_{l1}$ 和 $ω = ω_{l2}$ 处确实为零。

继续图 17.3 中的示例，我们观察到随着 $ω$ 接近 $∞$，通过率下降到零。 因此滤波器在 $s=∞$ 处必须有一个或多个传输零点。 通常，在 $s=∞$ 处的传输零点数是等式中传递函数的分子多项式的阶数 M 与分母多项式的阶数 N 之间的差值。 这是因为随着 $s$ 接近$∞$，$T(s)$ 接近 $a_M/s^{N−M}$，因此说在 $s=∞$ 处有 $N – M$ 个零点。

要使滤波器电路稳定，其所有极点必须位于 $s$ 平面的左半部分，因此 $p_1、p_2、...  .  .  ,p_N$ 必须都具有负实部。 图 17.5 显示了低通滤波器的典型极点和零点位置，其传输函数如图 17.3 所示。 

![image-20210614192248251](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210614192248251.png)

我们假设这个滤波器是五阶 (N = 5)。 它有两对复共轭极点和一个实轴极点，总共有五个极点。 所有极点都位于通带附近，这使滤波器在通带频率下具有高传输率。 五个传输零点位于 $s=±jω_{l1}、s=±jω_{l2}$ 和 $s=∞$。 因此，该滤波器的传递函数的形式为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210614192409757.png" alt="image-20210614192409757" style="zoom:67%;" />

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210612163437468.png" alt="image-20210612163437468" style="zoom:67%;" />

作为另一个例子，考虑带通滤波器，其幅值响应如图 17.4 所示。 该滤波器在 $s=±jω_{l1}$ 和 $s=±jω_{l2}$ 处具有传输零点。 它还在 $s = 0$ 处有一个或多个零点，在 $s=∞$ 处有一个或多个零点（因为随着 $ω$ 接近 $0$ 和 $∞$，透射率向 $0$ 降低）。 假设在 $s = 0$ 和 $s=∞$ 处只存在一个零点，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210612164314347.png" alt="image-20210612164314347" style="zoom:67%;" />

滤波器必须是六阶的，其传递函数的形式为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210614192743143.png" alt="image-20210614192743143" style="zoom:67%;" />

其图像如下图所示

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210614192817220.png" alt="image-20210614192817220" style="zoom:67%;" />

作为第三个也是最后一个例子，考虑低通滤波器，其传输函数如图 17.7(a) 所示。 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210614193341017.png" alt="image-20210614193341017" style="zoom:67%;" />

我们观察到，在这种情况下，没有传输为零的 $ω$ 有限值。 因此有可能这个滤波器的所有传输零点都在无穷大处，因此其传递函数的形式为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210614193408649.png" alt="image-20210614193408649" style="zoom:67%;" />

这种滤波器称为全极点滤波器。 五阶全极点低通滤波器的典型零极点位置如图 17.7(b) 所示。

本章中研究的几乎所有滤波器的所有传输零点都在 $jω$ 轴上，在滤波器阻带中，包括 $ω = 0$ 和 $ω=∞$。 此外，为了获得高选择性，所有零点都将是复共轭（奇数阶滤波器的情况除外，其中一个零点必须在实轴上）。 最后我们注意到，所需滤波器响应的选择性越强，其阶数就必须越高，并且其自然模越接近 $jω$ 轴。

![image-20210614193805039](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210614193805039.png)![image-20210614193819463](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210614193819463.png)

### 17.3 Butterworth and Chebyshev Filters

在本节中，我们将介绍两个常用于近似低通滤波器传输特性的函数； 即，在得知其幅度$|T(jω)|$的大小后可以给出满足给定的低通滤波器规格传递函数$T(s)$ 。 这些函数的参数可以使用方程的解析解来计算出来，因此可以在滤波器设计中使用它们，而无需计算机或滤波器设计表。 然而，它们的效用仅限于相对简单的应用程序。

尽管在本节中我们只讨论低通滤波器的设计，但通过使用频率变换，可以将所提供的近似函数应用于其他滤波器类型的设计（参见 Sedra 和 Brackett，1978）。

##### 17.3.1 The Butterworth Filter

图 17.8 显示了 Butterworth 滤波器的幅度响应的草图。 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210614194728607.png" alt="image-20210614194728607" style="zoom:67%;" />

该滤波器表现出单调递减的传输，所有传输零点位于 $ω=∞$，使其成为全极点滤波器。 具有通带边缘 $ω_p$ 的 N 阶巴特沃斯滤波器的幅度函数由下式给出

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210614194806043.png" alt="image-20210614194806043" style="zoom:67%;" />

在 $ω = ω_p$ 时，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210614194839096.png" alt="image-20210614194839096" style="zoom:67%;" />

因此，参数  $\epsilon$ 决定了通带传输的最大变化 $A_{max}$，也就是下式

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210614195006197.png" alt="image-20210614195006197" style="zoom:67%;" />

相反，给定 $A_{max}$，可以从下式中得到 $\epsilon $ 的值

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210614195114618.png" alt="image-20210614195114618" style="zoom:67%;" />

观察到在巴特沃斯响应中，通带传输的最大偏差（理想情况下是1）仅出现在通带边缘。可以证明，$|T|$对 $ω$ 求导的前$2N-1$个导数在 $ω = 0$ 时均为零（参见 Van Valkenburg，1980）。此属性使巴特沃斯响应在 $ω = 0$ 附近非常平坦，并导致其名称为最大平坦响应。 从图 17.9 可以看出，通带平坦度随着阶数 $N_{is}$ 的增加而增加。 该图还表明，正如预期的那样，随着阶数 N 的增加，滤波器响应接近理想的砖墙响应类型

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210614195447073.png" alt="image-20210614195447073" style="zoom:67%;" />

在阻带边缘，$ω=ω_s$，巴特沃斯滤波器的衰减可以通过将$ω=ω_s$代入方程中得到。结果由下式给出

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210614195642607.png" alt="image-20210614195642607" style="zoom:67%;" />

该方程可用于确定所需的滤波器阶数，即产生 $A(ω_s) ≥ A_{min}$ 的 N 的最低整数值。

 N 阶巴特沃斯滤波器的自然模可以从图 17.10(a) 所示的图形结构中确定。 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210614200358801.png" alt="image-20210614200358801" style="zoom:67%;" />

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210614200415030.png" alt="image-20210614200415030" style="zoom:67%;" />

观察到自然模位于半径为 $ω_p(1/\epsilon )^{ 1/N}$ 的圆上，并以 $π/N$ 的等角间隔，第一个模式与 $+jω$ 轴成 π/2N 角。 由于固有模式都与原点的径向距离相等，因此它们都具有相同的频率 $ω_0 = ω_p(1/\epsilon )^{ 1/N}$ 。 要了解 N = 2、3 和 4 阶巴特沃斯滤波器的自然模，请分别参见图 17.10(b)、(c) 和 (d)。 一旦 N 个自然模 $p_1, p_2, .  .  .  ,p_N$ 已经找到，传递函数可以写为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210614210248430.png" alt="image-20210614210248430" style="zoom:67%;" />

其中 $K$ 是一个常数，等于滤波器所需的直流增益。

总而言之，为了找到满足图 17.3 中形式的传输规范的巴特沃斯传递函数，我们执行以下过程：

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210614210327902.png" alt="image-20210614210327902" style="zoom:67%;" />

##### 17.3.2 The Chebyshev Filter

图 17.12 显示了偶数阶和奇数阶 Chebyshev 滤波器的代表性传输函数。  Chebyshev 滤波器在通带中呈现等波纹响应，在阻带中呈现单调递减的传输。 而奇数阶滤波器有 $|T(0)|  = 1$，偶数阶滤波器在 $ω = 0$ 处表现出最大幅度偏差。在这两种情况下，通带最大值和最小值的总数等于滤波器的阶数 $N$

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210614210554154.png" alt="image-20210614210554154" style="zoom:67%;" />

Chebyshev 滤波器的所有传输零点都在 $ω = ∞$ 处，使其成为全极点滤波器。

具有通带边缘（纹波带宽）$ω_p$ 的 N 阶切比雪夫滤波器的传递函数的幅度由下式给出

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210614210658969.png" alt="image-20210614210658969" style="zoom:67%;" />

以及

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210614210722766.png" alt="image-20210614210722766" style="zoom:67%;" />

在通带边缘，$ω = ω_p$，幅度函数由下式给出

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210614210810495.png" alt="image-20210614210810495" style="zoom:67%;" />

因此，我们可以通过上一节所给出的方法来计算参数 $\epsilon$

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210614211020953.png" alt="image-20210614211020953" style="zoom:67%;" />

Chebyshev 滤波器在阻带边缘 (ω = ωs) 处实现的衰减同样不难得到，是

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210614211104402.png" alt="image-20210614211104402" style="zoom:67%;" />

借助计算器，该等式可用于通过找到产生 $A(ω_s) ≥ Amin$ 的 N 的最低整数值来确定获得指定 $A_{min}$ 所需的阶数 N。 与巴特沃斯滤波器的情况一样，增加切比雪夫滤波器的阶数 N 会使其幅度函数接近理想的砖墙低通响应。

Chebyshev 滤波器的极点由下式给出 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210614211343382.png" alt="image-20210614211343382" style="zoom:67%;" />

最后，切比雪夫滤波器的传递函数可以写成

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210614211414440.png" alt="image-20210614211414440" style="zoom:67%;" />

其中 $K$ 是滤波器所需的直流增益。

总而言之，给定图 17.3 所示类型的低通传输规格，满足这些规格的切比雪夫滤波器的传递函数可以如下找到：

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210614211457508.png" alt="image-20210614211457508" style="zoom:67%;" />

Chebyshev 滤波器提供比 Butterworth 滤波器更有效的近似值。因此，对于相同的阶数和相同的 $A_{max}$，切比雪夫滤波器提供比巴特沃斯滤波器更大的阻带衰减。 或者，为了满足相同的规格，切比雪夫需要比巴特沃斯滤波器更低的阶数。 

### 17.4 First-Order and Second-Order Filter Functions

在本节中，我们将研究最简单的滤波器传递函数，即一阶和二阶电路的传递函数。 这些函数本身在简单滤波器的设计中很有用。 一阶和二阶滤波器也可以级联以实现高阶滤波器。 级联设计实际上是设计有源滤波器（使用运算放大器和RC 电路）。 由于滤波器极点出现在复共轭对中，因此高阶传递函数 $T(s)$ 被分解为二阶函数的乘积。 如果 $T(s)$ 是奇函数，分解中也会有一个一阶函数。 然后使用本章将研究的运算放大器-RC 电路之一实现每个二阶函数[以及 $T(s)$ 为奇函数时的一阶函数]，并将生成的块级联放置 . 如果每个模块的输出取自阻抗水平较低（理想情况下为零）的运算放大器的输出端子，则级联不会改变各个模块的传递函数。 因此，级联的整体传递函数只是各个块的传递函数的乘积，即原始 $T(s)$。

##### 17.4.1 First-Order Filters

一般的一阶传递函数由下式给出

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210614211825747.png" alt="image-20210614211825747" style="zoom:67%;" />

该双线性传递函数用于表征一阶滤波器，其极点位于 $s = -ω_0$，传输零点位于 $s=-a_0/a_1$，高频增益接近 $a_1$。 分子系数 $a_0$ 和 $a_1$ 决定滤波器的类型（例如，低通、高通等）。 图 17.13显示了一些特殊情况以及无源 (RC) 和有源（运算放大器-RC）实现。 在许多情况下，增益可以设置为所需值，并且可以在不影响其他参数的情况下调整一些传递函数参数。 有源电路的输出阻抗也很低，很容易实现级联。 然而，运算放大器限制了有源电路的高频操作。

![image-20210614212125552](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210614212125552.png)

一阶滤波器函数的一个重要特例是图 17.14 中所示的全通滤波器。 这里，传输零点和极点相对于 $jω$ 轴对称定位。  （它们相对于 $jω$ 轴显示镜像对称。）观察到，尽管全通滤波器的传输增幅（理想情况下）在所有频率下都是恒定的，但其相位显示出了一定的频率选择性。 全通滤波器用作移相器和需要相位整形的系统（例如，在称为延迟均衡器的电路设计中，它导致传输系统的总时间延迟随频率保持恒定）。

![image-20210614212159230](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210614212159230.png)

##### 17.4.2 Second-Order Filter Functions

一般的二阶（或双二次）滤波器传递函数通常用标准形式表示

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210614214307047.png" alt="image-20210614214307047" style="zoom:67%;" />

其中 $ω_0$ 和 $Q$ 根据下式确定自然模（极点）

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210614214346141.png" alt="image-20210614214346141" style="zoom:67%;" />

我们通常对 $Q > 0.5$ 时获得的复共轭自然模的情况感兴趣。 图 17.15 显示了一对复共轭极点在 $s$ 平面中的位置。 观察到自然模的径向距离（距原点）等于 $ω_0$，即极点频率。 参数 $Q$ 决定极点与 $j_ω$ 轴的距离：$Q$ 值越高，极点离 $jω$ 轴越近，滤波器响应的选择性就越大。  $Q$ 的无穷大值将极点定位在 $jω$ 轴上，并且可以在电路实现中产生持续振荡。  $Q$ 的负值意味着极点位于 $s$ 平面的右半部分，这肯定会产生振荡。 参数 $Q$ 称为极点品质因数，或简称为极点 $Q$。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210614214546520.png" alt="image-20210614214546520" style="zoom:67%;" />

二阶滤波器的传输零点由分子系数 $a_0、a_1$ 和 $a_2$ 确定。 因此，分子系数决定了二阶滤波器函数的类型（即 LP、HP 等）。 图 17.16 说明了七个感兴趣的特殊情况。 对于每种情况，我们都给出了传递函数、传递函数奇点的 $s$ 平面位置和幅度响应。 各种二阶滤波器函数的电路实现将在后续章节中给出。

![image-20210614214843799](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210614214843799.png)

所有七个特殊的二阶滤波器都有一对复共轭自然模，其特征在于频率 $ω_0$ 和品质因数 $Q$。

在低通 (LP) 情况下，如图 17.16(a) 所示，两个传输零点位于 $s=∞$。幅度响应可能会出现一个峰值，我们在上面显示了细节部分。 可以看出，峰值仅在 $Q > 1/ \sqrt 2$ 时出现。 $Q = 1/\sqrt2$ 时获得的响应是巴特沃斯响应，或最大平坦响应。

图 17.16(b) 中所示的高通 (HP) 函数在 $s = 0$ (dc) 处具有两个传输零点。 幅度响应显示了 $Q > 1/ \sqrt2$ 的峰值，响应的详细信息如图所示。 观察 LP 和 HP 响应之间的二元性。

接下来考虑图 17.16(c) 所示的带通 (BP) 滤波器函数。 这里，一个传输零位于 $s = 0$ (dc)，另一个位于 $s=∞$。 幅度响应在 $ω=ω_0$ 处达到峰值。 因此带通滤波器的中心频率等于极点频率$ω_0$。二阶带通滤波器的选择性通常通过其 3-dB 带宽来衡量。 这是两个频率 $ω_1$ 和 $ω_2$ 之间的差值，在该差值处，幅度响应比其最大值（在 $ω_0$ 处）低 3 dB。 可以证明

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210614215422472.png" alt="image-20210614215422472" style="zoom:67%;" />















































































































































































































































#### 附录1：极点的概念：

我们以一个普通的单时间常数电路为例

![image-20210517110016082](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210517110016082.png)

这是一个典型的低通滤波电路，要计算$V_o$，根据电容C的定义式，我们可以得到
$$
C=\frac{Q}V\rightarrow V=\frac{Q}C\rightarrow \frac{dV}{dt}=\frac1C\frac{dQ}{dt}=\frac1Ci\rightarrow i=C\frac{dV}{dt}
$$
故我们得出了在电路中电流大小$i$与输出电压$V_o$的数量关系，接下来有
$$
V_o+RC\frac{dV_o}{dt}=V_s
$$
解这个微分方程，可以得到
$$
e^t=A(V_o-V_s)^{-RC}(A为常数)
$$
我们现在假设$V_s$是一个阶跃函数（step function），在t=0时会发生阶跃，其解析式为
$$
f(t)=\begin{cases}0(t<0)\\V_s(t\geq0)\end{cases}
$$
由上面的微分方程解可以得出
$$
A_2e^{-\frac{t}{RC}}=V_o-V_s
$$
从而
$$
V_o=V_s+A_2e^{-\frac{t}{RC}}
$$
其中$A_2$可以根据初值条件计算得出，该初始条件是t=0时电容器上积累的电荷量大小，在本例中，t=0时积累的电荷量大小为0，故
$$
Q=0\rightarrow V_o=\frac QC=V_o=V_s+A_2e^{-\frac{t}{RC}}=0\rightarrow A_2=-V_s\rightarrow V_o=V_s(1-e^{-\frac t{RC}})
$$
由此我们定义时间常数 $\tau=RC$,在t= $\tau$时，有
$$
V_o=V_s(1-e^{-1})
$$
我们认为在此时，$V_o$的大小已经接近$V_s$(表示了电路的反应时间)

现我们假设输入信号$V_i(t)$是一正弦波，复平面上其方程用
$$
V_i(t)=V_ie^{j\omega{t}}
$$
表示，由上面的推导可知，输入电压和输出电压之间的响应存在一定的时间差，这意味着输入与输出波形之间会产生相位差，记为 $\theta$

再由
$$
V_o+RC\frac{dV_o}{dt}=V_s
$$
可以得到
$$
V_se^{j\omega{t}}=\tau{j\omega}V_oe^{j{\omega}t}+V_oe^{j{\omega}t}
$$
化简可以得到
$$
V_s=V_o({\tau}j\omega+1)
$$
即
$$
V_o=\frac{V_s}{\tau{j}{\omega}+1}
$$
我们定义 $\omega_0=\frac1{\tau}$(即该电路系统的角频率)，从而有
$$
V_o=\frac{V_s}{1+j(\frac{\omega}{\omega_0})}
$$
在这个式子中我们发现，实常数$V_s$的表达式中出现了虚数单位 $j$，由此我们可得出$V_o$必然是一个复数，这从数学角度上解释了输出电压和输入电压之间存在相位差的原因

将上式代入$V_o（t）$的表达式中，有
$$
V_o（t）=\frac{V_s}{1+j(\frac{\omega}{\omega_0})}e^{j{\omega}t}
$$
现定义传递函数$T(\omega)$
$$
T(\omega)\equiv\frac{V_o}{V_s}=\frac{1}{1+j(\frac{\omega}{\omega_0})}
$$
从而有
$$
V_o(t)=T(\omega)V_i(t)
$$
习惯上我们记$j\omega=s$，则有
$$
T(s)=\frac{K}{1+(\frac{s}{\omega_0})}
$$
其中K指电路系统的直流电压增益，作波特图，有

![image-20210517121147000](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210517121147000.png)

此前我们提到过，当 $t=\tau$时，我们认为电路的输出与输入可以看作恰好响应，但当输入信号的频率过高（一个周期的时间过短时）就会导致电路无法及时响应，从而使输出电压变小（来不及变大已经开始变小），这解释了在上面的波特图中频率越高传递函数越小的原因。此外，除了在数值上的变化以外，相位上的变化也可以藉由传递函数得出，相位的变化大小即为传递函数（复变函数）的相角大小，有
$$
T_(\omega)=|T|e^{j\theta}=\frac{K}{1+j(\frac{\omega}{\omega_0})}
$$
分子为常数，故幅角为0，简化为 $e^{j0}$,从而有
$$
e^{j\theta}=\frac{e^{j0}}{e^{jtan^{-1}\frac{\omega}{\omega_0}}}=e^{j(-tan^{-1}\frac{\omega}{\omega_0})}
$$
故
$$
\theta=-tan^{-1}\frac{\omega}{\omega_0}
$$
同样作波特图，可以得到



![image-20210517135020862](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210517135020862.png)

可以看到，在频率较低时，相位几乎不会发生改变；频率与电路系统的角频率相等时则出现45度的相位差；而随着频率逐渐升高，相位差则会逐渐向90度移动

在上面的图中，可以看到，当 $\omega=\omega_0$,也就是输入信号的频率等于电路系统的角频率时，反映在波特图上都可以找到一个较为明显的转折点，我们称这些转折点为***极点（pole）***，换言之，当我们面对一个复杂的电路系统时，这个电路系统可能同时包含有高通和低通两个滤波电路，我们要做的就是计算该电路的传递函数，并借此计算出电路的极点大小，以确定电路的带宽和 $f_H$、$f_L$

是否对于每一个电路我们都需要用微分方程求解？答案当然是否定的，事实上，我们可以把电容器看作是一个容抗大小为 $R_c$的电阻来解电路。推导如下
$$
i=C\frac{dV}{dt}
$$
而在交变电路中，电流大小与电压大小都可以用复变函数表示
$$
i=Ie^{j\omega{t}}
$$
以及
$$
V=Ve^{j\omega{t}}
$$
从而我们可以通过电流与电压的比值来定义容抗
$$
R_c=\frac{V}i=\frac{1}{j\omega{C}}
$$
从而在电容两端的分压即为简单的电阻分压，在本例中，我们可以借此计算出传递函数
$$
\frac{V_o(\omega)}{V_s(\omega)}=\frac{\frac{1}{j\omega{C}}}{R+\frac{1}{j\omega{C}}}=\frac{1}{1+j(\frac{\omega}{\omega_0})}
$$
有时一个电路可能有多个极点，例如下面求解一个场效应管电路 $f_L$的例子

![image-20210517145739364](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210517145739364.png)

该场效应管电路图及其等效电路图如上所示，我们所要计算的传递函数即是
$$
\frac{V_o}{V_{sig}}
$$
分析电路的过程在此略去不表，我们可以得出
$$
\frac{V_o}{V_{sig}}=\frac{V_g}{V_{sig}}*\frac{I_D}{V_g}*\frac{V_o}{I_D}
$$
换言之，我们的计算会得到三个传递函数，也就会得到三个极点频率

对于第一个极点频率，我们进行简单的分析，有

![image-20210517150322351](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210517150322351.png)

也就是说我们可以得到第一幅波特图

![image-20210517150442987](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210517150442987.png)

第二项传递函数

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210517150622957.png" alt="image-20210517150622957" style="zoom:150%;" />

此外，当
$$
s=-\frac{1}{C_sR_s}
$$
该传递函数的值为零，因此我们额外得到了零频率点。但我们从算式中也能看出，由于 $\omega_{p2}$通常远远大于 $\omega_Z$,因此在决定 $\omega_L$时，$\omega_{p2}$的权重要远大于$\omega_Z$

波特图如下

![image-20210517151410864](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210517151410864.png)

同理可以得到

![image-20210517151548299](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210517151548299.png)

及其波特图

![image-20210517151640673](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210517151640673.png)

最后得出传递函数

![image-20210517151725714](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210517151725714.png)



以及该传递函数的波特图

![image-20210517151801178](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210517151801178.png)

## APPENDIX F s-DOMAIN ANALYSIS: POLES, ZEROS, AND BODE PLOTS

在分析放大器的频率响应时，大部分工作涉及计算放大器电压增益，并且通常而言，我们要将其表示为一个可以在复平面上表示的函数（以便于分析频率响应）。 在此 $s$ 域分析中，电容 $C$ 由导纳 $sC$ 代替，或等效地为阻抗 $1/sC$，电感 $L$ 由阻抗 $sL$ 代替。 然后，使用通常的电路分析技术，推导出电压传递函数 $T(s) ≡ V_o(s)/V_i(s)$。

一旦获得传递函数 $T(s)$，就可以通过将 $s$ 替换为 $jω$ 来评估物理频率。 得到的传递函数 $T(jω)$ 通常是一个复数，其幅度给出了放大器的幅度响应，其角度给出放大器的相位响应。

在许多情况下，不需要替换 $s = jω$ 并计算 $T(jω)$； 相反，$T(s)$ 的形式将揭示许多有关电路性能的有用事实。 一般而言，对于本书中涉及的所有电路，$T(s)$ 可以表示为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210614204029817.png" alt="image-20210614204029817" style="zoom:67%;" />

其中系数$a$和$b$为实数，分子中的$m$小于或等于分母中的$n$； 后者称为电路的阶数。此外，对于一个稳定的电路——也就是说，一个不自行生成信号的电路——分母系数应该使得分母多项式的根都具有负实部。 第 10 章研究了放大器稳定性问题。

### F.1 Poles and Zeros

表达 $T(s)$ 的另一种形式是

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210614204300614.png" alt="image-20210614204300614" style="zoom:67%;" />

其中 $a_m$ 是常数（分子中 $s_m$ 的系数），$Z_1, Z_2, ...  .  .  , Z_m$ 是分子多项式的根，$P_1, P_2, .  .  .  , P_n$ 是分母多项式的根。  $Z_1, Z_2, .  .  .  , Z_m$ 称为传递函数零点或传输零点，而 $P_1, P_2, .  .  .  , P_n$ 是网络的传递函数极点或自然模。传递函数完全由其极点和零点以及乘法常数的值指定。

极点和零点可以是实数或复数。 然而，由于 $a$ 和 $b$ 是实数，复极点（或零点）必须以共轭对出现。也就是说，如果 $5+j3$ 为零点，则 $5 – j3$ 也必须为零点。 纯虚数 $(±jω_Z )$ 的零d点导致传递函数 $T(jω)$ 在 $ω = ω_Z$ 处恰好为零。 这是因为分子将具有因子 $(s+jω_Z )(s−jω_Z )=(s^2+ω^ 2_ Z )$，对于物理频率，其变为 $(−ω^ 2 +ω ^2 _Z )$，因此传递函数将在 $ω = ω_Z$ 处恰好为零。 因此，放置在电视机输入端的“陷阱”是一个在特定干扰频率下具有传输零点的电路。 另一方面，实零点不会产生传输空值。 最后，请注意，对于远大于所有极点和零点的 $s$ 值，方程中的传递函数变为 $T(s)\simeq a_m/s^{n-m}$。 因此，传递函数在 $s=∞$ 处具有 $(n-m)$ 个零点。

### F.2 First-Order Functions

本书中遇到的许多传递函数都有实极点和零点，因此可以写成一般形式的一阶传递函数

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210614205243814.png" alt="image-20210614205243814" style="zoom:67%;" />

其中$−ω_0$ 是实极点的位置。 量 $ω_0$，称为极点频率，等于该单时间常数 (STC) 网络的时间常数的倒数（参见附录 E）。 常数 $a_0$ 和 $a_1$ 决定了 STC 网络的类型。 具体来说，我们在第 1 章研究了两种类型的 STC 网络，低通和高通。 对于低通一阶网络，我们有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210614205334196.png" alt="image-20210614205334196" style="zoom:67%;" />

在这一点上，强烈建议读者阅读附录 E 中有关 STC 网络及其频率和脉冲响应的材料。特别感兴趣的是两种特殊类型 STC 网络的幅度和相位响应图。 可以使用此类图来生成高阶传递函数的幅度和相位图，如下所述

### F.3 Bode Plots

有一种简单的技术可用于获得传递函数的幅度和相位的近似图，给定其极点和零点。 该技术在实极点和零点的情况下特别有用。 该方法由 H. Bode 开发，生成的图表称为 Bode 图。

方程中描述的形式的传递函数。  (F.2) 由形式为 s + a 的因子的乘积组成，如果该因子对应于零，则出现在顶部，如果对应于极点，则出现在底部。 因此，可以通过将 20log10 √ a2 +ω2 形式的项相加来获得以分贝为单位的网络幅度响应，并且可以通过对 tan-1(ω/a) 形式的项求和来获得相位响应。 在这两种情况下，对应于极点的项都用负号求和。 为方便起见，我们可以提取常数 a 并将典型的幅度项写成 20 log 1+(ω/a)2 的形式。
   在分贝与对数频率的关系图上，该项产生图 F.1 所示的曲线和直线渐近线。 这里的低频渐近线是一条 0-dB 电平的水平直线，高频渐近线是一条斜率为 6dB/octave 或等效为 20dB/decade 的直线。 两条渐近线在频率 ω = |a| 处相遇，称为转角频率。 如图所示，实际幅度图与









































































