# Microelectronic-Circuits

### CHAPTER 10  Frequency Response
章节概要

1.耦合和旁路电容如何导致分立电路放大器的增益在低频时下降，以及如何获得频率fL的估计值，在该频率fL处，增益比其在中频处的值低3 dB。

2.MOSFET和BJT中存在的内部电容效应以及如何通过在混合电路中添加电容来修正这些电路的hybrid-pi模型以及T-model。

3.CS和CE放大器增益的高频限制，以及增益衰减和3db频率fH的上限主要由漏极和栅极（集电极和基极）之间的小电容决定。

4.分析复杂度不同的放大器电路的高频响应的有力方法。

5.第8章研究的共源共栅放大器如何设计成比CS和CE放大器更宽的带宽。

6.源和发射极跟随器的高频性能。

7.差分放大器的高频性能。

8.用于获得宽带放大的电路配置。

简介

我们在第五章到第九章中对晶体管放大器的研究假设它们的增益是恒定的，与输入信号的频率无关。这就意味着它们的带宽是无限的，当然这并不符合真实情况。为了说明这一点，我们在图10.1中给出了三极管分立放大电路的增益幅度与输入信号频率的关系示意图。虽然我们观察到该电路确实有一个很宽的频率范围，并且在这个范围内增益几乎保持不变。这是特定放大器的有效工作频率范围。到目前为止，我们一直假设我们的放大器工作在这个波段，该波段称为中频波段或中频。放大器的设计使其中频与所需放大信号的频谱一致。因为如果不是这样，放大器会使输入信号的频谱失真，输入信号的不同分量会被不同的量放大。

![image-20210513110800288](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210513110800288.png)

图10.1表明，在较低的频率，放大器增益的幅度下降。电路中的耦合电容和旁路电容在该频段内的阻抗迅速升高。回想一下，我们此前假设它们的阻抗很小，并且足以视为短路。这种假设虽然在中频是正确的，但是当输入信号的频率降低时，其容抗迅速变大（基于容抗的表达式），导致其不再可以被视为短路，如同我们在10.1节所要看到的，这会导致放大器的总电压增益降低。

在第10.1节分立放大电路的低频响应分析中，我们将注意力放在频率fL的确定上，它定义了中频的下限。通常而言，fL被定义为增益大小比电路处在中频的值低3分贝的频率。要注意的是，集成电路放大器不使用耦合和旁路电容器，因此其中频的下限在零频率（dc）处，如图10.2所示。

![image-20210513111412812](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210513111412812.png)

图10.1和10.2表明放大器的增益在高频端下降。这是由于BJT的内部电容效应（扩散电容和势垒电容）。我们将在第10.2节中研究这些效应，并用我们将添加到此前我们所使用的hybrid-pi model和T-model中。第10.3节将使用高频设备模型分析CS和CE放大器（分立和集成）的高频响应。我们将特别关注频率fH的确定，它定义了中频带的上限。它被定义为增益大小比电路位于中频时的增益值低3 dB的频率。因此，放大器带宽由fL和fH定义（对于IC放大器为0和fH）

放大器的增益带宽积（gain-bandwidth product）定义如下
$$
GB=|A_M|BW
$$
其中BW指带宽的的长度
$$
BW=f_H-f_L(分立电路)                         BW=f_H(集成电路)
$$
本章的其余部分将关注各种复杂度不同的放大器配置的频率响应分析。我们特别感兴趣的是通过添加特定的电路组件（例如源极和射级衰减电阻（emitter-degenerate resistance）或通过完全改变电路配置来扩展放大器带宽（即，增加fH）的方法。

### 10.1 Low-Frequency Response of Discrete-Circuit Common-Source and Common-Emitter Amplifiers
在本节中，我们考虑耦合电容器和旁路电容器对分立电路共射极（CE）放大器的增益的影响。 如前所述，它们的效果仅在低频处（即，在中频带以下）表现出来。

#### 10.1.2 The Method of Short-Circuit Time Constants

在某些电路中，如不久前讨论的共射放大器的电路中，电容器存在相互作用，很难确定fL频率。然而，幸运的是，有一种简单的方法可以获得fL的估计值，而不需要确定极点的频率。尽管该方法是基于其中一个极点占主导地位的假设，虽然该假设的前提并非精确，但其仍然为fL给出了一个良好的近似。方法如下

1.假设输入信号为0

2.每次考虑一个电容器，并且在考虑这个电容器时将其他电容器的电容大小设为无穷大（换言之，将其他电容器短路）

3.对于每一个电容器$C_i$，找到从该电容器看入的电阻$R_i$，这可以通过在电容处设置一个测试电源$V_x$得到，$R_i$被定义为$V_i/I_x$

4.通过下面的式子估算3dB频率$f_L$
$$
f_L\approx\sum_{i=1}^n\frac 1{C_iR_I} 
$$
其中n是电容器的数量

除了简单之外，该方法还有一个非常重要的作用：方程式指出了每个电容器对fL值的相对贡献。具体来说，与特定电容器相关的时间常数值越低，该电容器对fL的贡献就越大。如下文所示，这一观察结果具有重要的设计意义。

短路时间常数法的应用将在下一节中说明，其中它用于确定CE放大器的fL。

#### 10.1.3 The CE Amplifier

![image-20210513115023646](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210513115023646.png)

图10.9（a）显示了使用classic偏置的分立电路共射放大器，以及耦合电容器$C_{C1}$和$C_{C2}$以及旁路电容器$C_E$。我们希望能计算出该电路的fL。并且同时，我们需要确定$C_{C1}$、$C_E$和$C_{C2}$的值，以确保fL的大小符合实际应用要求，同时最小化所需的总电容值。

为了分析CE放大器的低频增益，我们使用图10.9（b）所示的等效电路。这种等效电路是通过短接$V_{CC}$，用T-model代替BJT，而忽略$r_o$得到的。忽略$r_o$的原因在于晶体管的输出电阻对分立电路放大器的增益影响很小，并且由于它的存在会导致分析相当复杂。从图10.9（b）中的电路中，我们观察到BJT基极输入电流有限导致$C_{C1}$和$C_{C2}$相互作用。也就是说，与CS放大器的情况不同，这里由$C_{C1}$和$C_{C2}$引起的两极中的每一个都将以一种复杂的方式依赖于这两个电容值，这妨碍了对设计的理解。

![image-20210513120750743](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210513120750743.png)

因此在这里我们不应当尝试去确定极点频率，而是采用短路时间常数法来估算$f_L$的值

##### Applying the Method of Short-Circuit Time Constants

这里插入一段题外话：如何判断从某个电容看入的电阻？

我们以这里的三个电容为例

$C_{C1}$:首先我们记在BJT基极上的偏置电阻的并联等效电阻为$R_B$,换言之，                        $R_B=(R_{B1}||R_{B2})$

此外在$R_B$的左侧有一个信号源的内电阻$R_{sig}$（要注意的是$R_B$并非是三极管的内电阻），接着向右看，有一个三极管，该三极管的输入电阻是$r_\pi$,并且由于$R_B$接地，$R_B$和BJT是并联关系，因此，从$C_{C1}$看入的电阻大小是
$$
(R_B||R_\pi)+R_{sig}
$$
换言之，$C_{C1}$的时间常数为
$$
τ_1=[(R_B||R_\pi)+R_{sig}]C_{C1}
$$
![image-20210513123136273](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210513123136273.png)

$C_{E}$:此时我们视 $C_{C1}$短路，因此$R_B$和$R_{sig}$并联，并且由于发射极电路上的电流和基极电路上的电流有差异，因此在基极上的电阻需要乘以系数$\frac 1{\beta+1}$。总体上看，从$C_{E}$出发的电路分成了两条支路，因此这两条支路上电阻的并联等效电阻即为从$C_{E}$看入的电阻。

故$C_E$的时间常数为
$$
\tau_E=C_E[R_E(r_e+\frac{R_B||R_{sig}}{\beta+1})]
$$
![image-20210513124016266](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210513124016266.png)

(note:由于$r_e$上方是一个受控电流源，因此它不会被算入电阻计算中)

对于$C_{C2}$这个分析过程是类似的，此处略去不表

![image-20210513124254752](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210513124254752.png)

因此我们可以根据短路时间常数来估计其3-dB频率$f_L$
$$
f_L=\frac{\omega_L}{2\pi}=\frac1{2\pi}[\frac1{\tau_1}+\frac1{\tau_E}+\frac1{\tau_2}]
$$
当在这个表达式中代入数值时，很快就会发现三个电容器中哪个对fL的贡献最大。显然，这个贡献最大的电容器是时间常数最小的电容器。在射级放大电路中，通常是$C_E$，这是因为相关的电阻RCE通常很小。知道哪种电容器有可能主导fL具有重要的设计意义，如下所示。

###### Selecting Values for CC1, CE, and CC2

我们现在讨论为$C_{C1}$、$C_E$和$C_{C2}$选择适当值的设计问题。设计目标是将较低的3-dB频率fL放置在指定位置，使电路中的总电容值最小。由于如上所述，$C_E$通常是三个电阻中最低的，因此通过选择$C_E$使总电容最小化，从而使其对fL的贡献占主导地位。也就是说，通过参考上式，我们可以选择某个电容值$C_S$，使得$1/(C_ER_E)$，比方说，是80%的$\omega_L=2\pi f_L$，让其他每个电容器贡献10%的ωL。例10.2应该有助于说明这个过程。

##### Example 10.2

我们希望为共射放大器选择一个合适的$C_{c1}$,$C_{C2}$,$C_E$,其中放大器电路参数为$R_B=100k\Omega$,$R_C=8k\Omega$,$R_L=5k\Omega$,$R_{sig}=5k\Omega,R_E=5k\Omega,\beta=100,g_m=40mA/V$,以及$r_\pi=2.5k\Omega$.设计要求为fL=100Hz

首先我们计算三个电容的时间常数

![image-20210513135315776](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210513135315776.png)

现在我们为$C_E$选择一个合适的值，使其满足其时间常数的倒数是$\omega_L$的80%

![image-20210513135643165](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210513135643165.png)

其他两个电容分别贡献10%

![image-20210513135721790](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210513135721790.png)

### 10.2 Internal Capacitive Effects and the High-Frequency Model of the MOSFET and the BJT

耦合和旁路电容会导致晶体管放大器的增益在低频端下降，而在高频时的增益下降则是由晶体管内部的电容效应引起的。在本节中，我们将简要地考虑这些影响，更重要的是，展示如何修正电路的小信号模型，以考虑这些影响。

##### 10.2.2 The BJT

在我们对BJT物理特性的研究中，我们假设晶体管对输入信号的反应是瞬时性的，因此我们开发的晶体管模型不包括任何会引起时间或频率依赖性的元件（即电容器或电感器）。然而，实际的晶体管表现出电荷存储现象，这会限制它们的运行速度和频率。我们在第三章的pn结研究中已经遇到了这种效应，并且已经知道它们可以用电容来建模。在下面我们研究了发生在BJT中的电荷存储效应，并通过在hybrid—$\pi$ model和T-model中添加电容来考虑它们对整体电路的影响。由此产生的修正BJT模型将能够预测放大器增益对频率的依赖性，以及晶体管开关和逻辑门所表现出的时间延迟

##### The Base-Charging or Diffusion Capacitance $C_{de}$（扩散电容）

当npn BJT处于放大状态时，其基极中储存的非平衡少子(电子)的数量 $Q_n$的数量可以表示为
$$
Q_n=\tau_Fi_c
$$
其中 $\tau_F$ 是一个随时间变化的常数。称为前向基极渡越时间，表示电荷载流子（电子）穿过基极的平均时间。一般来说，$\tau_F$在10 ps到100 ps的范围内。

上式常应用于振幅较大的信号中，而由于 $i_c$的大小与 $v_{be}$成指数关系，因此 $Q_n$的大小与其关系也类似，此外，对于微变信号，我们根据电容的定义式，可以得到
$$
C_{dc}\equiv\frac{dQ_n}{dv_{BE}}=\tau_F\frac{di_C}{dv_{BE}}
$$
而在小信号模型中，集电极电流大小与EBJ电压大小之间的关系，近似为跨导 $g_m$,故
$$
C_{dc}=\tau_Fg_m=\tau_F\frac{I_C}{V_T}
$$

##### The Base–Emitter Junction Capacitance $C_{je}$

$v_{BE}$的变化不仅改变了存储在基极区的电荷，还改变了存储在基极与发射极耗尽层的电荷。这种独特的电荷存储效应由EBJ耗尽层电容$C_{je}$表示。耗尽层电容近似可以以下式表示
$$
C_{je}\simeq2C_{je0}
$$
其中 $C_{je0}$为EBJ电势差为0时的电容大小

##### The Collector–Base Junction Capacitance $C_\mu$

在放大模式下，CBJ反偏，其结电容（或称势垒电容）通常记为 $C_\mu$，其表达式如下
$$
C_\mu=\frac{C_{\mu0}}{(1+\frac{V_{CB}}{V_{0c}})^m}
$$
其中，$C_{\mu0}$是CBJ零偏时的大小；$V_{CB}$ 是CBJ反向偏置电压的大小，$V_{0c}$是CBJ内置电压（通常为0.75 V），m是其分级系数（通常为0.2–0.5）。

##### The High-Frequency Models

图10.14显示了BJT在高频信号下的hybrid— $\pi$模型和T模型，其中包括了电容效应。具体来说，有两个电容：发射极-基极电容$C_π = C_{de}+C_{je}$和集电极-基极电容$C_μ$ 通常，$C_π$ 在几微法拉到几十微法之间；而 $C_\mu$的大小则在数皮法之间。注意，我们还在模型中添加了一个电阻$r_x$

![image-20210516135259569](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516135259569.png)

这个电阻是由于BJT本身材料硅晶体所带来的（该电阻由基极区域中的硅材质导致）。一般来说，$r_x$的大小是几十欧姆，并且其大小以一种相当复杂的方式取决于电流水平。通常而言 $r_x<<r_\pi$ , 因此在低频时其影响可以忽略不计。然而，在高频相应中，该电阻的作用就会变得明显，如同我们接下来将要看到的一样。

##### The BJT Unity-Gain Frequency

晶体管数据表通常不会给出 $C_\pi$的值，更不要说地说β (或称 $h_{fe}$）与频率的关系。为了确定$C_π$ 和$C_μ$的大小, 我们将导出$h_{fe}$的表达式，即CE短路电流增益，以作为hybrid- $\pi$模型中的一个参数。为此，考虑图10.15所示的电路，其中集电极和发射极之间短接。根据C处的节点方程，可算出短路集电极电流Ic的大小为

![image-20210516140511650](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516140511650.png)

（注：其中 $sC_\mu$是电容阻抗的倒数）

![image-20210516141212273](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516141212273.png)

因此 $V_\pi$大小为

![image-20210516141449788](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516141449788.png)

从而

![image-20210516141519838](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516141519838.png)

当 $\omega{C_\mu}<<g_m$时，有

![image-20210516141707338](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516141707338.png)

故

![image-20210516141747478](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516141747478.png)

其3-dB频率为 $\omega=\omega_\beta$,其中

![image-20210516141958048](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516141958048.png)

其波特图为

![image-20210516142051358](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516142051358.png)

在 $\omega=\omega_T$时，增益大小下降到1，此时的频率称作单位增益频率，大约是

![image-20210516142332486](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516142332486.png)

即

![image-20210516142410501](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516142410501.png)

或者

![image-20210516142426980](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516142426980.png)

单位增益带宽$f_T$，也称为跃迁频率，通常会在数据表上指出。在某些情况下，$f_T$是$I_C$和$V_{CE}$的函数。要了解fT如何随$I_C$变化，请回忆一下，$g_m$与 $I_C$的大小成正比，不过在我们上面的表达式中，$C_\pi$只有一部分（扩散电容 $C_{de}$的那部分）与 $I_c$是成正比的。这可以解释 $f_T$在低电流下会变小的原因，如图10.17所示。然而，图10.17所示的高电流下$f_T$的减少不能用这个论点来解释；相反，这是由于同样的现象，导致$β_0$在大电流下减小(其工作点位置发生变化导致其直流增益变小）（第6.4.2节）。
在$f_T$几乎恒定的区域，$C_π$ 的大小主要取决于扩散电容的大小，并且远大于$C_μ$. 也就是说
$$
C_\pi+C\mu\simeq{C_{de}=\tau_Fg_m}
$$
并且基于同样的原因
$$
f_T\simeq\frac{1}{2\pi\tau_F}
$$
![image-20210516151704283](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516151704283.png)

通常，$f_T$的范围是100兆赫到几十兆赫。$f_T$的值套用于此前的公式中，以确定$C_π + C_μ$. 电容$C_μ$的大小通常通过直接测量在反偏电压 $V_{CB}$下基极和集电极之间的电容大小来确定。

从图10.14（a）的高频模型中可以观察到的一个重要现象是，当频率大小介于5到10 $f_\beta$时 , 人们可以忽略电阻$r_π$ . 可以看出，此时$r_x$成为高频输入阻抗中唯一的电阻部分。因此，rx在确定晶体管电路在高频下的频率响应方面起着重要的作用。因此，只有通过高频测量才能准确确定$r_x$的大小。

在离开本节之前，我们应该提到，图10.14中的高频模型相当准确地描述了晶体管在约0.2$f_T$的频率下的运行情况。而对于更高的频率响应，我们需要在模型中添加更多的细节才行

总结

![image-20210516153916804](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516153916804.png)

### 10.3 High-Frequency Response of the CS and CE Amplifiers
在了解了BJT高频响应的等效电路模型后，我们现在讨论CS和CE放大器的高频性能问题。我们的目标是确定限制这些重要放大器在高频信号下性能的机制。同样，我们需要找到一种简单的方法来估计频率$f_H$，在该频率$f_H$处，增益比其在中频频率$| A_M |$的值低3db。

本文的分析同样适用于分立电路、电容耦合放大器和集成电路放大器。前者的频率响应如图10.1所示，后者的频率响应如图10.2所示。在我们感兴趣的频率（高频段），所有耦合和旁路电容器都表现为完美短路，两种类型的放大器都有相同的高频等效电路。

##### 10.3.2 The Common-Emitter Amplifier

图10.19（a）显示了CE放大器的高频等效电路。它是通过用图10.14（a）的高频等效电路模型替换如图10.9（a）所示的电路中的BJT，并像往常一样移除所有直流电源而获得的。注意图10.19（a）中的电路是通用的，适用于分立和集成电路放大器。因此，它包括$R_B$，通常出现在分立放大电路中。$R_C$也可以是电流源负载的无源电阻或输出电阻，对于$R_L$也是如此。

![image-20210516154349227](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516154349227.png)

通过使用戴维南定理，我们可以得到上述电路的等效电路

![image-20210516154830165](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516154830165.png)



上述的戴维南等效电路可以用于计算中频带电压收益 $|A_M|$,正如我们之前所做的一样，我们将电路中的两个电容值设为0，有

![image-20210516155357301](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516155357301.png)

接下来我们把注意力放在输入端，并且尝试在输入端处简化电路以获得一个简单的RC低通电路，为此，我们需要将桥接电容器$C_\mu$转换成从节点B'到地面的等效电容，首先我们看向输出端

在输出端，由节点方程可以看到负载电流的大小为
$$
g_mV_\pi-I_\mu
$$
此时，放大电路处于中频段的分界线处，我们可以合理的认为此时电容效应还不很明显，也就是说，此时我们可以认为$I_\mu$的大小要远远小于$g_mV_\pi$的大小，换言之 ，输出电压可以近似表示为
$$
V_o\simeq-g_mV_\pi{R_L}
$$
此时我们把$C_\mu$等效替代成阻抗，可以得到
$$
I_\mu=sC_\mu(V_{\pi}-V_{o})=sC_\mu{V_\pi}(1+g_mR_L)
$$
接着我们用一个等效电容来代替$C_\mu$,	我们只要保证在等效替代前后流入电容的电流大小相等即可，换言之
$$
C_{eq}=C_\mu(1+g_mR_L)
$$
因此我们最终将电路图简化为如下所示

![image-20210516162134641](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516162134641.png)

这样做的好处是可以将左侧单独拿出来考虑而不用考虑右侧元件对输入端的影响，接着我们对左侧电路即可进行电路分析，电容器并联时，等效电容为并联的每个电容之和
$$
C_{in}=C_\pi+C_{eq}
$$
计算时间常数的过程略去不表，可以算出传递函数为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516160346099.png" alt="image-20210516160346099" style="zoom:150%;" />

因此3-dB频率 $f_H$由下式给出

![image-20210516160450950](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516160450950.png)

并且

![image-20210516160610909](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516160610909.png)

注意$C_{in}$是$C_\pi$和密勒电容$C_\mu(1+g_mR^`_L)$ 的和。从$C_{in}$看到的电阻$R_{sig}^、$可以从上图的电路中很容易的找到，如下所示：将$V_{sig}$减至零，从端口B '和E向左看。你会看到$r_π$ 与$r_x$并联，$r_x$与$R_B||R_{sig}$ 串联。这种寻找“被电容看到”的电阻的方法是非常有用的，而且免去了繁琐的工作！


![image-20210516162241082](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516162241082.png)

##### Example 10.4

找出以下偏置配置CE放大器的 $f_H$大小

![image-20210516162441980](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516162441980.png)



首先计算hybrid- $\pi$的模型参数，有

![image-20210516162612815](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516162612815.png)

中频带增益为

![image-20210516162654562](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516162654562.png)

其中

![image-20210516162722629](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516162722629.png)

因此

![image-20210516162857426](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516162857426.png)

故

![image-20210516162924446](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516162924446.png)

转换为分贝，有

![image-20210516163041131](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516163041131.png)

为了找到 $f_H$我们首先找到 $C_{in}$

![image-20210516163136241](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516163136241.png)

以及等效源电阻

![image-20210516163307790](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516163307790.png)

从而

![image-20210516163812066](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516163812066.png)

##### 10.3.3 Miller’s Theorem（密勒定理）

在分析共源和共发射极放大器的高频响应时，我们采用了一种替代桥接电容（$C_\mu$)用于等效输入电容。这个非常有用和有效的技术是基于一个我们现在将要介绍的定理，即密勒定理。

考虑图10.20（a）中的情况。作为未显示的更大电路的一部分，我们隔离了两个电路节点，分别标记为1和2，它们之间连接阻抗Z。节点1和节点2也连接到电路的其他部分，如从两个节点发出的虚线所示。此外，假设以某种方式已经确定节点2处的电压与节点1处的电压相关，并且成正比

![image-20210516164558175](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516164558175.png)

即
$$
V_2=KV_1
$$
在通常的情况下，K是一个增益因子，它可以是正的，也可以是负的，其大小通常大于1。不过这并非密勒定理的前提假设。

密勒定理指出阻抗Z可以由两个阻抗代替：$Z_1$连接在节点1和地之间，$Z_2$连接在节点2和地之间，其中
$$
Z_1=Z/(1-K)
$$
以及
$$
Z_2=Z/(1-\frac1K)
$$
以获得下图的等效电路图

![image-20210516165009350](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516165009350.png)

密勒定理的证明如下：在图10.20（a）的原始电路中，节点1“感觉到阻抗Z的存在”的唯一方式是通过Z从节点1获得的电流I。因此，为了使等效电路中的电流保持不变，我们必须选择Z1的值，使其产生相等的电流

![image-20210516165125366](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516165125366.png)

从而我们获得了 $Z_1$的大小，同理，我们也可以借此计算出 $Z_2$的大小

（注：尽管没有明说这一点），但上述密勒等效电路仅在电路其余部分保持不变的情况下有效；否则V2与V1的比值可能会改变。因此，密勒等效电路不能直接用来确定放大器的输出电阻。这是因为在确定输出电阻时，隐含地假设源信号被减少到零，并且测试信号源（电压或电流）被施加到输出端子显然是电路中的一个重大变化，使得密勒等效电路不再有效。）

##### Example 10.5

下图显示了一个放大倍数为-100的反相放大器，其中有一个阻抗Z从输出端作为反馈回路连接到输入端，在第一种情况下，Z是一个100M的电阻；第二种情况下Z是一个1pf大小的电容。请计算这两种情况下的密勒等效电路，并计算其电压收益

![image-20210516170849717](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516170849717.png)

在本例中，显然K=100,故对于第一种情况，有

![image-20210516170632879](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516170632879.png)

因此其电压增益为

![image-20210516171047200](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516171047200.png)

![image-20210516170710832](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516170710832.png)

第二种情况下，我们先计算电容等效的容抗，从而有

![image-20210516170824503](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516170824503.png)

同理可以得到

![image-20210516171117926](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516171117926.png)

这是该放大器的传递函数，由此可算出其3dB频率为

![image-20210516171208715](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516171208715.png)

从本例中我们可以看到，对于当K小于零时，我们对桥接电阻或反馈电阻进行密勒等效替代时，会导致输入端的等效阻抗变小（1-K)倍，若该输入阻抗由电容形成，则等效电容的值会变为（1-K）倍，这被称作密勒效应

### 10.4 Useful Tools for the Analysis of the High-Frequency Response of Amplifiers

在第10.3节中，我们介绍了一种利用密勒效应的近似方法，用于分析CS和CE放大器的高频响应。 该方法可以对$f_H$进行合理准确的估算，同等重要的是，可以对限制高频运行的机制进行深入了解。 然而，不幸的是，这种方法不能应对存在负载电容$C_L$的情况。 同样，该方法不容易扩展到更复杂的放大器电路。 因此，我们将要简要介绍一些计算高频响应的工具，这些工具在分析例如共源共栅放大器等更复杂的电路时将非常有用。 我们稍稍后退几步，更普遍地考虑放大器的高频传递函数。

##### 10.4.1 The High-Frequency Gain Function

考虑到晶体管的内部电容，放大器的增益可以表示为复变函数
$$
A(s)=A_MF_H(s)
$$
其中$A_M$是中频带增益（对于集成放大电路而言，这个也是其低频时的放大增益）可以通过分析放大器等效电路并且忽略晶体管内部电容的影响来确定$A_M$的值(即视其为)。 而当我们将放大器的内部电容纳入考虑范围时，我们可以得到$F_H(s)$，该数值可以用其极点和零频率点（通常是实数）表示，如下所示

![image-20210516185709560](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516185709560.png)

其中$ω_{p1}$，$ω_{p2}$......$ω_{pn}$是指n个极点的频率，$ω_{Z2}$，······$ω_{Zn}$是表示n个零频率点的频率。在高频响应中，零频率点和极点的频率根据定义大于中频率，我们从等式（10.71）中可以看出，当s接近中间带频率时，$F_h(s)$大小将逐渐接近1，也使得放大电路的增益大小逐渐接近$A_M$

##### 10.4.2 Determining the 3-dB Frequency $f_H$

放大器设计人员通常对靠近中频带的高频部分特别感兴趣。 这是因为设计人员需要估计（或者根据需要修改）3 dB上限频率$f_H$（或$ω_H$； $f_H =ω_H/2π$）的值。不过需要指出的时，在许多情况下，零频率点要么是无穷大的，要么是对于确定$ω_H$无关紧要的高频。 如果另外一个极点（例如$ω_{P1}$）的频率比其他任何一个极点的频率低得多，则该极点将对放大器$ω_H$的值产生最大的影响。 换句话说，该极点将主导放大器的高频响应，并且称该放大器具有一个主极点。 在这种情况下，函数$F_H$可以近似为

![image-20210517185357271](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210517185357271.png)

也就是一阶单时间常数网络的传递函数

这是我们在第10.3节分析的共射极放大器的情况。根据经验法则，如果频率最低的极点与最近的极点或零频率点至少有四倍频的距离，则存在主极点。如果主极不存在，则3-dB频率$ω_H$可由$| F_H（jω)|$的图像确定。或采用如下的近似公式，为简单起见，仅考虑在高频带中具有两个极点和两个零频率点的电路的情况

![image-20210517190133876](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210517190133876.png)

将 $s=j\omega$代入并平方，有

![image-20210517190351433](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210517190351433.png)

根据定义，在3-dB频率( $\omega=\omega_H$) 下，放大倍数会下降一半，也就是说

![image-20210517190611463](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210517190611463.png)

由于 $\omega_H$的大小通常要小于极点和零频率点的大小，因此我们可以略去带有 $\omega_H^4$的几项，解方程，有

![image-20210517190839164](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210517190839164.png)

并且可以延伸到任意极点与零点数

![image-20210517190922972](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210517190922972.png)

##### 10.4.3 The Method of Open-Circuit Time Constants（开路时间常数法）

如果可以很容易地确定放大器传递函数的极点和零点，那么我们就可以使用上述方法来确定$f_H$。然而，在许多情况下，计算传递函数并非易事。在这种情况下，可以使用开路时间常数的方法获得$f_H$的近似值，如同我们将在下面介绍的。
该方法与我们在第10.1节中用于估算$f_L$的短路时间常数方法类似。
考虑函数$F_H(s)$（等式10.71），它决定放大器的高频响应。将其分子分母展开化简，有

![image-20210517191612005](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210517191612005.png)

其中系数a、b分别对应零点和极点的频率大小，特别的，系数$b_1$由下式给出。

![image-20210517191745123](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210517191745123.png)

也就是说，$b_1$的值是n个时间常数之和，换言之，假如要得到$b_1$的值，我们可以在电路的高频等效电路中依次计算其时间常数并求和，如同我们在短路时间常数法中所做的一样，我们每考虑一个电容，就将所有其他电容设置为开路，并令信号源电压为0，来计算其时间常数，有

![image-20210517192454136](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210517192454136.png)

最后有

![image-20210517192703928](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210517192703928.png)

需要指出的是，大多数情况下电路系统都不存在主极点，但该方法仍然可以得到一个良好的近似结果

### 10.5 High-Frequency Response of the Common-Gate and Cascode Amplifiers



















































































#### 注：极点的概念：

我们以一个普通的单时间常数电路为例

![image-20210517110016082](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210517110016082.png)

这是一个典型的低通滤波电路，要计算$V_o$，根据电容C的定义式，我们可以得到
$$
C=\frac{Q}V\rightarrow V=\frac{Q}C\rightarrow \frac{dV}{dt}=\frac1C\frac{dQ}{dt}=\frac1Ci\rightarrow i=C\frac{dV}{dt}
$$
故我们得出了在电路中电流大小$i$与输出电压$V_o$的数量关系，接下来有
$$
V_o+RC\frac{dV_o}{dt}=V_s
$$
解这个微分方程，可以得到
$$
e^t=A(V_o-V_s)^{-RC}(A为常数)
$$
我们现在假设$V_s$是一个阶跃函数（step function），在t=0时会发生阶跃，其解析式为
$$
f(t)=\begin{cases}0(t<0)\\V_s(t\geq0)\end{cases}
$$
由上面的微分方程解可以得出
$$
A_2e^{-\frac{t}{RC}}=V_o-V_s
$$
从而
$$
V_o=V_s+A_2e^{-\frac{t}{RC}}
$$
其中$A_2$可以根据初值条件计算得出，该初始条件是t=0时电容器上积累的电荷量大小，在本例中，t=0时积累的电荷量大小为0，故
$$
Q=0\rightarrow V_o=\frac QC=V_o=V_s+A_2e^{-\frac{t}{RC}}=0\rightarrow A_2=-V_s\rightarrow V_o=V_s(1-e^{-\frac t{RC}})
$$
由此我们定义时间常数 $\tau=RC$,在t= $\tau$时，有
$$
V_o=V_s(1-e^{-1})
$$
我们认为在此时，$V_o$的大小已经接近$V_s$(表示了电路的反应时间)

现我们假设输入信号$V_i(t)$是一正弦波，复平面上其方程用
$$
V_i(t)=V_ie^{j\omega{t}}
$$
表示，由上面的推导可知，输入电压和输出电压之间的响应存在一定的时间差，这意味着输入与输出波形之间会产生相位差，记为 $\theta$

再由
$$
V_o+RC\frac{dV_o}{dt}=V_s
$$
可以得到
$$
V_se^{j\omega{t}}=\tau{j\omega}V_oe^{j{\omega}t}+V_oe^{j{\omega}t}
$$
化简可以得到
$$
V_s=V_o({\tau}j\omega+1)
$$
即
$$
V_o=\frac{V_s}{\tau{j}{\omega}+1}
$$
我们定义 $\omega_0=\frac1{\tau}$(即该电路系统的角频率)，从而有
$$
V_o=\frac{V_s}{1+j(\frac{\omega}{\omega_0})}
$$
在这个式子中我们发现，实常数$V_s$的表达式中出现了虚数单位 $j$，由此我们可得出$V_o$必然是一个复数，这从数学角度上解释了输出电压和输入电压之间存在相位差的原因

将上式代入$V_o（t）$的表达式中，有
$$
V_o（t）=\frac{V_s}{1+j(\frac{\omega}{\omega_0})}e^{j{\omega}t}
$$
现定义传递函数$T(\omega)$
$$
T(\omega)\equiv\frac{V_o}{V_s}=\frac{1}{1+j(\frac{\omega}{\omega_0})}
$$
从而有
$$
V_o(t)=T(\omega)V_i(t)
$$
习惯上我们记$j\omega=s$，则有
$$
T(s)=\frac{K}{1+(\frac{s}{\omega_0})}
$$
其中K指电路系统的直流电压增益，作波特图，有

![image-20210517121147000](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210517121147000.png)

此前我们提到过，当 $t=\tau$时，我们认为电路的输出与输入可以看作恰好响应，但当输入信号的频率过高（一个周期的时间过短时）就会导致电路无法及时响应，从而使输出电压变小（来不及变大已经开始变小），这解释了在上面的波特图中频率越高传递函数越小的原因。此外，除了在数值上的变化以外，相位上的变化也可以藉由传递函数得出，相位的变化大小即为传递函数（复变函数）的相角大小，有
$$
T_(\omega)=|T|e^{j\theta}=\frac{K}{1+j(\frac{\omega}{\omega_0})}
$$
分子为常数，故幅角为0，简化为 $e^{j0}$,从而有
$$
e^{j\theta}=\frac{e^{j0}}{e^{jtan^{-1}\frac{\omega}{\omega_0}}}=e^{j(-tan^{-1}\frac{\omega}{\omega_0})}
$$
故
$$
\theta=-tan^{-1}\frac{\omega}{\omega_0}
$$
同样作波特图，可以得到



![image-20210517135020862](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210517135020862.png)

可以看到，在频率较低时，相位几乎不会发生改变；频率与电路系统的角频率相等时则出现45度的相位差；而随着频率逐渐升高，相位差则会逐渐向90度移动

在上面的图中，可以看到，当 $\omega=\omega_0$,也就是输入信号的频率等于电路系统的角频率时，反映在波特图上都可以找到一个较为明显的转折点，我们称这些转折点为***极点（pole）***，换言之，当我们面对一个复杂的电路系统时，这个电路系统可能同时包含有高通和低通两个滤波电路，我们要做的就是计算该电路的传递函数，并借此计算出电路的极点大小，以确定电路的带宽和 $f_H$、$f_L$

是否对于每一个电路我们都需要用微分方程求解？答案当然是否定的，事实上，我们可以把电容器看作是一个容抗大小为 $R_c$的电阻来解电路。推导如下
$$
i=C\frac{dV}{dt}
$$
而在交变电路中，电流大小与电压大小都可以用复变函数表示
$$
i=Ie^{j\omega{t}}
$$
以及
$$
V=Ve^{j\omega{t}}
$$
从而我们可以通过电流与电压的比值来定义容抗
$$
R_c=\frac{V}i=\frac{1}{j\omega{C}}
$$
从而在电容两端的分压即为简单的电阻分压，在本例中，我们可以借此计算出传递函数
$$
\frac{V_o(\omega)}{V_s(\omega)}=\frac{\frac{1}{j\omega{C}}}{R+\frac{1}{j\omega{C}}}=\frac{1}{1+j(\frac{\omega}{\omega_0})}
$$
有时一个电路可能有多个极点，例如下面求解一个场效应管电路 $f_L$的例子

![image-20210517145739364](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210517145739364.png)

该场效应管电路图及其等效电路图如上所示，我们所要计算的传递函数即是
$$
\frac{V_o}{V_{sig}}
$$
分析电路的过程在此略去不表，我们可以得出
$$
\frac{V_o}{V_{sig}}=\frac{V_g}{V_{sig}}*\frac{I_D}{V_g}*\frac{V_o}{I_D}
$$
换言之，我们的计算会得到三个传递函数，也就会得到三个极点频率

对于第一个极点频率，我们进行简单的分析，有

![image-20210517150322351](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210517150322351.png)

也就是说我们可以得到第一幅波特图

![image-20210517150442987](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210517150442987.png)

第二项传递函数

![image-20210517150622957](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210517150622957.png)

此外，当
$$
s=-\frac{1}{C_sR_s}
$$
该传递函数的值为零，因此我们额外得到了零频率点。但我们从算式中也能看出，由于 $\omega_{p2}$通常远远大于 $\omega_Z$,因此在决定 $\omega_L$时，$\omega_{p2}$的权重要远大于$\omega_Z$

波特图如下

![image-20210517151410864](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210517151410864.png)

同理可以得到

![image-20210517151548299](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210517151548299.png)

及其波特图

![image-20210517151640673](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210517151640673.png)

最后得出传递函数

![image-20210517151725714](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210517151725714.png)



以及该传递函数的波特图

![image-20210517151801178](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210517151801178.png)

































