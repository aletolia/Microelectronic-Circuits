# Microelectronic-Circuits

## CHAPTER 2 Operational Amplifiers

该元件简称op amp，起初被运用在复杂原件和模拟计算器上，随着IC电路的发展，运放也为电器工程揭开了新的一页

### 2.1 The Ideal Op Amp

从信号的角度来看，运放有三个端口：两个输入端口和一个输出端口

![image-20210528102850373](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528102850373.png)

放大器的电压增幅来源于其外接电源，因此大多数IC放大器还需要两个直流电源才可以正常工作，因此我们从放大器的封装中再引出两个端口来外接电源，如上图所示，需要注意的是这两个直流电源并非真的接地，这个接地只是表示他们有一个公共端，下面我们将不会明确指出电源存在（默认放大器已经偏置完成）

运算放大器的输入电压是两个输入端口之间的差分电压，并将其放大A倍然后在输出端口输出

理想的运放不存在输入电流，即流入端口1、2的电流大小应该为0，换言之，其阻抗应为无穷大；而输出端口应充当理想的输出电源，其阻抗为0

因此我们得出以下的等效电路

![image-20210528103852489](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528103852489.png)

此外，我们对这种只对差分信号有反应而忽略共模信号的现象称为共模抑制，类似的，我们称增益A为差分增益（或称开环增益）。

运放的另外一个重要特性是其可以直接耦合，这使其拥有许多重要的应用，不过这也会带来一些问题，我们会在后面描述。

我们认为理想运放的带宽大小使无穷大的，并且其差分增益A的理想值也应该是无穷大，不过如何应用A这个问题也由此产生，事实上，没有电路会单独使用一个运放，我们将在后面详细描述这一点

### 2.2 The Inverting Configuration（反向配置）

如同我们上面所说的，运放不能单独使用，不过我们有两种使用运放的基本电路配置：同相配置和反相配置，下图即展示了反相配置

![image-20210528104621537](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528104621537.png)

它由一个运放和两个电阻构成

闭环增益（The Close-loop Gain):

我们现在计算上图闭环电路中的电压增益G，有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528104910939.png" alt="image-20210528104910939" style="zoom:67%;" />

基于该运放使理想运放的假设，我们开始进行电路分析

我们假设输出端得到了一个有限的、可测的电压$V_o$，有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528105112169.png" alt="image-20210528105112169" style="zoom:67%;" />

得到这个结果是因为A是无穷大（或趋向于无穷大的），因此我们得到，在理想状态下

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528105238111.png" alt="image-20210528105238111" style="zoom:67%;" />

这两个端口之间的电势恒定相等，因此我们称其为“虚拟短路”（简称虚短 virtual short circuit)(请注意其与真实短路之间的区别)，而我们在电路图上可以看到，二端口接地，因此1端口处的电势为0，我们称此时的1端口为"虚拟接地"（简称虚地 virtual ground)(同样注意其与真实接地的区别)

接着我们计算$R_1$上的电流大小，由欧姆定律

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528134246405.png" alt="image-20210528134246405" style="zoom:67%;" />

接着，因为端口1处的电阻大小为无穷大，因此$i_1$全部流入反馈回路，因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528134444836.png" alt="image-20210528134444836" style="zoom:67%;" />

从而

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528134553818.png" alt="image-20210528134553818" style="zoom:67%;" />

整体分析的图示如下

![image-20210528134631188](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528134631188.png)

![image-20210528134657709](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528134657709.png)

因此我们看到闭环增益的值为两只电阻的比值，负号表明输出信号是反相的。

闭环增益的大小取决于外部原件这一点非常重要，因为这意味着我们可以通过适当选择原件来使增益达到我们想要的值或精确度。通过在其上施加负反馈，我们得到了一个远小于A的稳定可预测增益大小

有限开环增益（开环增益非无穷大）分析：

假设运放A的增益有限，记为A，依照之前的思路，我们可以得到正负输入端口间的电压大小是
$$
v=-\frac{v_o}A
$$
因此输入电压$v_i$的大小会被分去一些，从而电流大小变为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528135815401.png" alt="image-20210528135815401" style="zoom:67%;" />

因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528135902138.png" alt="image-20210528135902138" style="zoom:67%;" />

从而

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528135918916.png" alt="image-20210528135918916" style="zoom:67%;" />

分析图示如下

![image-20210528135946425](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528135946425.png)

输入与输出电阻：

对于一般的电压放大器，我们一般要求其输入电阻尽可能大以使信号损失达到最小，但我们同样也计算出该运放电路的电压增益大小为$-R_2/R_1$，这意味着假如我们同时要求信号损失低和高放大倍数两个要求时，$R_2$将会变得不切实际的大，下面的例子给出了一个解决方案

##### Example 2.2

考虑下面的电路图

![image-20210528140825026](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528140825026.png)

初始分析与此前相同，不同的是，$i_2$使节点x处产生了一个负的电势，使得电阻$R_3$上产生电流$i_3$因此在$R_4$上的电流大小为$i_2+i_3$，分析如下

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528141045886.png" alt="image-20210528141045886" style="zoom:67%;" />

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528141055998.png" alt="image-20210528141055998" style="zoom:67%;" />

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528141110314.png" alt="image-20210528141110314" style="zoom:67%;" />

因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528141125492.png" alt="image-20210528141125492" style="zoom:67%;" />

从而$v_o$为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528141146698.png" alt="image-20210528141146698" style="zoom:67%;" />

因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528141227665.png" alt="image-20210528141227665" style="zoom:67%;" />

这意味着我们只要合适调整$R_3$的大小就可以获得足够大的放大倍数

一个重要应用：加权求和器

![image-20210528141711013](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528141711013.png)

由于虚地存在，每条支路的输入电流都是

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528141818964.png" alt="image-20210528141818964" style="zoom:67%;" />

因此总的输入电流大小为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528141839928.png" alt="image-20210528141839928" style="zoom:67%;" />

而

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528141907491.png" alt="image-20210528141907491" style="zoom:67%;" />

因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528141918706.png" alt="image-20210528141918706" style="zoom:67%;" />

我们可以通过独立调整$v_1$或者其他输入电压的大小来调整对应系数，这使得混合信号的放大变得轻而易举。此外，由于输出是反相的，我们还可以在这个加权放大器的基础上再次叠加一个加权放大器，来使输出信号与输入信号同相，并且这种叠加还使其允许进行减法操作，如下图所示

![image-20210528142209258](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528142209258.png)

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528142259058.png" alt="image-20210528142259058" style="zoom:67%;" />

### 2.3 The Noninverting Configuration

我们研究的第二个闭环电路配置如下所示

![image-20210528142355625](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528142355625.png)

##### 2.3.1 The Closed-Loop Gain

我们首先研究理想状态下的闭环增益大小，首先

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528142533081.png" alt="image-20210528142533081" style="zoom:67%;" />

因此仍然存在虚短效应，换言之
$$
v_1=v_2=v_I
$$
接着我们计算输入电流大小，不难发现
$$
i=v_1/R_1=v_I/R_1
$$
因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528142757999.png" alt="image-20210528142757999" style="zoom:67%;" />

简化为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528142829280.png" alt="image-20210528142829280" style="zoom:67%;" />

分析图示如下

![image-20210528142903412](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528142903412.png)



##### 2.3.2 Effect of Finite Open-Loop Gain

同样我们可以证明，假如输出端的放大倍数并非无穷大，其闭环增益大小为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528143239901.png" alt="image-20210528143239901" style="zoom:67%;" />

当运放本身的放大倍数A远远大于闭环增益的理想值时

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528143520557.png" alt="image-20210528143520557" style="zoom:67%;" />

我们可以采用上一部分的方法来计算闭环增益大小。

##### 2.3.3 Input and Output Resistance

同相配置的增益为正，因此名称为同相。 由于没有电流流入运算放大器的正输入端，因此该闭环放大器的输入阻抗在理想情况下是无限的。 同相放大器的输出取自理想电压源$A（v_2-v_1）$的端子（参见图2.3中的运算放大器等效电路），因此同相配置的输出电阻为零。

##### 2.3.4 The Voltage Follower

同相放大器高输入电阻和低输出电阻的特点使其可以成为缓冲放大器，为此我们可以使$R_2\rightarrow0$而$R_1\rightarrow\infin$来使其增益趋向于1，在最极端的状况下

![image-20210528143929731](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528143929731.png)

![image-20210528143940467](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528143940467.png)

### 2.4 Difference Amplifiers

在研究了运放的两种基本配置以后，我们可以着手设计一些重要应用。在这一节中，我们将研究差分放大器，差分放大器是一种对两个输入端差分信号作出反应的放大器。理想状态下其仅接受输入差分信号$v_{$I_D$}$而不接受共模信号$v_{Icm}$,不过一般而言，实际电路的输出电压为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528144326963.png" alt="image-20210528144326963" style="zoom:67%;" />

其中$A_d$表示差分增益而$A_{cm}$表示共模增益，共模抑制比定义为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528144444970.png" alt="image-20210528144444970" style="zoom:67%;" />

![image-20210528145015355](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528145015355.png)

差分放大器在电路设计中有很广泛的应用，比如考虑一个换能器，其两条线会输出一个1mV的差分信号，但其中包含有1V的噪声，此时差分放大器就能起到过滤噪声的作用。

运放本身由于放大倍数太大而不适用于差分放大器的设计，不过通过反馈网络，我们便可以设计一个合适的稳定电路

##### 2.4.1 A Single-Op-Amp Difference Amplifier（单运放差分放大器）

![image-20210528145415917](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528145415917.png)

假设运放是理想运放，电路分析如下

从下方电路开始，由于流入运放的电流大小为0，因此$R_4$处的电压大小为
$$
v_{I2}\frac{R_4}{R_3+R_4}=v_2
$$
因为虚短，$v_1$的值为
$$
v_1=v_2=v_{I2}\frac{R_4}{R_3+R_4}
$$
因此我们可以得到$R_1$上的电势差为
$$
v_{I1}-v_{I2}\frac{R_4}{R_3+R_4}
$$
换言之，其电流为
$$
i_1=\frac{(v_{I1}-v_{I2}\frac{R_4}{R_3+R_4})}{R_1}
$$
基于同样的原因，我们可以得到$R_2$上的电势差大小为
$$
\frac{(v_{I1}-v_{I2}\frac{R_4}{R_3+R_4})}{R_1}*R_2
$$
从而输出电压为
$$
v_{I2}\frac{R_4}{R_3+R_4}+\frac{(v_{I1}-v_{I2}\frac{R_4}{R_3+R_4})}{R_1}*R_2
$$
化简可以得到
$$
v_o=-\frac{R_2}{R_1}v_{I1}+(1+\frac{R_2}{R_1})(\frac{R_4}{R_3+R_4})v_{I2}
$$
要使得$v_o=A(v_{I2}-v_{I1})$,这两项前的系数必须相同，换言之，我们比较系数可以得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528151013176.png" alt="image-20210528151013176" style="zoom:67%;" />

即

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528151031970.png" alt="image-20210528151031970" style="zoom:67%;" />

也就是说

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528151050151.png" alt="image-20210528151050151" style="zoom:67%;" />

此外还可以得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528151124341.png" alt="image-20210528151124341" style="zoom:67%;" />

但是由于信号源存在内电阻并且$v_{I1}$和$v_{I2}$的信号源内阻几乎不可能相同，为了防止信号失真，我们可以在两个信号的输入处连接两个电压跟随器，如下节所示

对于共模输入信号我们可以用同样的分析方法得到结果，
$$
v_o=\frac{R_4}{R_3+R_4}(1-\frac{R_2R_3}{R_1R_4})v_{Icm}
$$
故
$$
A_{cm}=\frac{R_4}{R_3+R_4}(1-\frac{R_2R_3}{R_1R_4})
$$
因此只要$R_3=R_1,R_4=R_2$即可使$A_{cm}=0$

##### 2.4.2 A Superior Circuit—The Instrumentation Amplifier

![image-20210528151437569](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528151437569.png)

分析如下

![image-20210528151636930](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528151636930.png)

上述分析也表明我们可以从阻抗缓冲中获得更多的收益。

### 2.5 Integrators and Differentiators

目前为止，我们在反馈回路中都仅加入了电阻这一元件，它的加入并不会改变输入信号的频率，但加入电容会如何呢？我们可以利用电容来得到信号的微分器和积分器

##### 2.5.1 The Inverting Configuration with General Impedances

下图展示了包含一般阻抗$Z_i$的反向配置

![image-20210528160614839](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528160614839.png)

就上图而言，其增益大小为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528160643424.png" alt="image-20210528160643424" style="zoom:67%;" />

##### Example 2.4

下面的电路中同时采用了电容和电阻

![image-20210528160739883](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528160739883.png)

代入开头给出的模型，我们可以得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528160820972.png" alt="image-20210528160820972" style="zoom:67%;" />

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528160838857.png" alt="image-20210528160838857" style="zoom:67%;" />

令其倒数为$Y_2(s)$，有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528160931497.png" alt="image-20210528160931497" style="zoom:67%;" />

代入得

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528161027968.png" alt="image-20210528161027968" style="zoom:67%;" />

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528161102843.png" alt="image-20210528161102843" style="zoom:67%;" />

不难看出其直流增益大小为

![image-20210528161144825](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528161144825.png)

并且其3-dB频率$ω_0$为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528161220955.png" alt="image-20210528161220955" style="zoom:67%;" />

##### 2.5.2 The Inverting Integrator（反相积分器）

将上节中电路中的$Z_1$改为电阻，$Z_2$改为电容，我们得到以下电路

![image-20210528161403456](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528161403456.png)

设输入信号是时变函数$v_I(t)$,不难看出R上的电流大小为
$$
I_i=\frac{v_I(t)}{R}
$$
该电流也是一个时变函数，随着时间增加不断给反馈回路中的电容充电。但由于电容的阻拦作用，在$I_i$反相以前电流都不会通过C，如果我们假设在初始状态时，电容器上的电压大小为$V_C$,那么在电流反相以前，电荷都会不断在电容器上聚集，根据电容的定义式，我们可以得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528161940787.png" alt="image-20210528161940787" style="zoom:67%;" />

而输出电压$v_o(t)=-v_C(t)$,因此有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528162047599.png" alt="image-20210528162047599" style="zoom:67%;" />

而如果我们直接把电容等效为其容抗，根据反相配置的闭环增益表达式，我们可以直接得到其传递函数为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528162355257.png" alt="image-20210528162355257" style="zoom:67%;" />

该传递函数的模是

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528162509850.png" alt="image-20210528162509850" style="zoom:67%;" />

相位差是（注：可以从传递函数中看出，分母为纯虚数而分子为纯实数，因此相位差为90度）

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528162556357.png" alt="image-20210528162556357" style="zoom:67%;" />

其波特图如下

![image-20210528162710069](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528162710069.png)

这个传递函数同时带来了一个问题，那就是当输入一个直流电压会产生什么效果？很明显，输入直流电压将会导致输出变为无穷大。但实际上，电容器在直流电压下可以视作短路，因此并不会工作，换言之，此时的放大器是开环工作的（反馈回路断开了）。根据理想运放的特性，理论上来说，输入信号中的任何直流分量（比如驼载电压）都会导致输出信号变为无穷大，为了解决这一问题，我们在反馈回路中添加了一条直流支路，来防止其开环。

![image-20210528163409765](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528163409765.png)

通过简单的分析，我们可以得到以上电路的传递函数，为
$$
\frac{v_o}{v_i}=-\frac{R_F/R}{1+sCR_F}
$$
我们为$R_F$选择的值越小，其转折频率就会越高。因此其直流性能于交流性能之间的均衡取决于$R_F$的值。

##### Example 2.5

求密勒积分器对阶跃函数信号的响应（如下图所示），其中$R=10kΩ，C=10\mu F$.如果我们在反馈支路上再加一个大小为1M的电阻，其相应图又会如何？

![image-20210528164254668](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528164254668.png)

解：

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528164323164.png" alt="image-20210528164323164" style="zoom:67%;" />

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528164332664.png" alt="image-20210528164332664" style="zoom:67%;" />



因此

![image-20210528164350329](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528164350329.png)

接着考虑$R_F=1MΩ$的情况，与之前一样，1V的电压会提供一个0.1mA大小的电流，但不同的是，现在这个电流会进入由电容$C$与$R_F$所构成的STC中，我们考虑这个拥有一个恒流源的STC，可以计算其输出电压大小为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528164723135.png" alt="image-20210528164723135" style="zoom:67%;" />

并在$t=0.1ms$时达到到最大值

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528164836746.png" alt="image-20210528164836746" style="zoom:67%;" />

接着由于回路的存在，电容中的电荷放出，由此引起电压下降，因此其总体的图像如下

![image-20210528165037829](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528165037829.png)

（上图分段的两条曲线分别是输入信号不变和变为0的图线）

积分器在电路工程中有重要的应用，即变换信号，比如说把直线波变成三角波。

##### 2.5.3 The Op-Amp Differentiator

该电路与积分器的差别在于电容和电阻的位置发生了交换

![image-20210528191645141](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528191645141.png)

我们知道
$$
C=\frac{Q}V\rightarrow V=\frac{Q}C\rightarrow \frac{dV}{dt}=\frac1C\frac{dQ}{dt}=\frac1Ci\rightarrow i=C\frac{dV}{dt}
$$
因此干路中的电流为
$$
i(t)=C\frac{dv_I{t}}{dt}
$$
通过与之前类似的而分析过程，我们可以得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528192003139.png" alt="image-20210528192003139" style="zoom:67%;" />

及其传递函数

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528192248859.png" alt="image-20210528192248859" style="zoom:67%;" />

模长为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528192322551.png" alt="image-20210528192322551" style="zoom:67%;" />

相位差为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528192338855.png" alt="image-20210528192338855" style="zoom:67%;" />

波特图如下

![image-20210528192403144](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528192403144.png)

微分放大器的频率响应可以看作是拐角频率为无穷大的STC的响应。最后们应该注意到，微分放大器会成为“噪声放大器”（因为信号中小小的波动都会引起微分放大器的输出信号中的一个尖峰），因此一般会避免使用微分放大器。

### 2.6 DC Imperfections

目前为止，我们都认为运放是理想的，唯一的例外是讨论了放大倍数有限时大的电路闭环增益。尽管在许多应用中，认为运放是理想的这一假说并不坏，但实验人员必须完全了解运放的特性，以期了解这些特性对电路的影响

##### 2.6.1 Offset Voltage（失调电压）

事实上，op是直流放大器见，因此面临的第一个问题就是电压失调的问题。

考虑这样一个虚拟实验：如果运算放大器的两个输入端子连接在一起并接地，则会发现尽管$v_{$I_D$}$ = 0，但输出端仍存在有限的直流电压。 实际上，如果运算放大器具有高直流增益，则输出将处于正或负饱和电平。 通过在运算放大器的两个输入端子之间连接适当极性和大小的直流电压源，可以将运算放大器的输出恢复到理想的0 V值。 该外部源平衡了运算放大器的输入失调电压。 因此，输入失调电压（$V_{OS}$）必须与我们外部施加的电压具有相同的幅值并且极性相反

一般而言，失调电压的大小在1mV到5mV的范围内。此外，其还取决于温度等外部因素

事实上，我们并不会事先知道失调的极性如何，因此我们暂时以下面的模型来描述这一现象



![image-20210528193319722](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528193319722.png)

通过分析运算放大器电路来确定运算放大器VOS对其性能的影响是很简单的：输入电压信号源短路，运算放大器替换为图2.28的模型。  （为简化起见，消除输入信号是基于叠加原理。）

![image-20210528193710172](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528193710172.png)

按照此步骤，我们发现反相放大器和同相放大器配置都产生相同的电路，如图2.29所示，从该电路中 发现由于$V_{OS}$而产生的输出直流电压为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528193721091.png" alt="image-20210528193721091" style="zoom:67%;" />

该输出直流电压可能具有很大的幅度。 例如，当由具有5mV输入失调电压的运算放大器构成时，闭环增益为1000的同相放大器的直流输出电压为+5 V或-5 V（取决于极性）。而不是0 V的理想值。现在，当将输入信号施加到放大器时，相应的信号输出将叠加在5 V dc上。

通常而言，解决这个问题有两种办法，一是直接引入外部电源来将其消除，如下图

![image-20210528193913033](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528193913033.png)

另一种则是在其输入端耦合一个电容，但这样做的问题是会使放大器只能进行开环放大，如下图（失调电压因为虚短仍会出现，但不会被放大）

![image-20210528194211177](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528194211177.png)

##### 2.6.2 Input Bias and Offset Currents

为了使op amp工作，必须向两个输入端子提供直流电流（称输入偏置电流），如下图

![image-20210528194331946](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528194331946.png)

理想状态下，这两个电流大小应该相等，记$I_B$为总输入偏置电流，有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528194438835.png" alt="image-20210528194438835" style="zoom:67%;" />

不过在实际操作过程中，电流大小不可能相等，记其差值为输入失调电流（$I_{OS}$)]

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528194738279.png" alt="image-20210528194738279" style="zoom:67%;" />

为了分析失调电流对放大器性能的影响，如之前所做的一样，我们首先断开信号源

1.反相：

![image-20210528194846169](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528194846169.png)



通过对输入端负极的节点方程计算可知，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528194949246.png" alt="image-20210528194949246" style="zoom:67%;" />

2.同相：

![image-20210528195046750](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528195046750.png)

同样分析输入端负极的节点方程，可以得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528195137070.png" alt="image-20210528195137070" style="zoom:67%;" />

假设$I_{B1}=I_{B2}=I_B$,有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528195222452.png" alt="image-20210528195222452" style="zoom:67%;" />

从而我们可以借此设置$R_3$的值来使$V_O$变为0

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528195311910.png" alt="image-20210528195311910" style="zoom:67%;" />

若两者之间存在失调电流$I_{OS}$,那么

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528195426424.png" alt="image-20210528195426424" style="zoom:67%;" />

我们得出的结论是，为了最大程度地减小输入偏置电流的影响，应在正极引线中放置一个电阻，该电阻应等于反相端子看到的等效直流电阻。 我们在最后一个语句中强调dc一词； 注意，如果放大器是交流耦合的，则应选择$R_3 = R_2$，如图2.35所示。

![image-20210528195730339](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528195730339.png)

当我们讨论交流耦合放大器时，我们应注意，必须始终在运算放大器的每个输入端子与地面之间提供连续的直流路径。不管$I_B$多么小，都是如此。 因此，如果没有接地电阻$R_3$，图2.36的交流耦合同相放大器将无法工作。 不幸的是，包括R3会大大降低闭环放大器的输入电阻。

![image-20210528195627257](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528195627257.png)

##### 2.6.3 Effect of $V_{OS}$ and $I_{OS}$ on the Operation of the Inverting Integrator

我们在第2.5.2节中对反相积分器电路的讨论提到了在小直流电压或小电流存在的情况下该电路对饱和的敏感性。 因此，我们有必要考虑运算放大器直流失调对其工作的影响。 可以看出，这些影响可能非常显著

![image-20210528195926631](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528195926631.png)

分析过程和结果如上图所示，最后我们得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528200020864.png" alt="image-20210528200020864" style="zoom:67%;" />

我们可以在C上面并联一个电阻$R_F$来减弱此效应

### 2.7 Effect of Finite Open-Loop Gain and Bandw$I_D$th on Circuit Performance

##### 2.7.1 Frequency Dependence of the Open-Loop Gain

运算放大器的差分开环增益A并非无限大； 相反，它是有限的，并且随频率而降低。 图2.39显示了$| A |$的曲线图，其中带有一些市售通用运算放大器（例如，可从许多半导体制造商处购买的流行741型运算放大器；其内部电路在第13章中进行研究）的典型曲线。

![image-20210528200246330](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528200246330.png)

请注意，尽管增益在直流和低频时都很高，但在相当低的频率（在我们的示例中为10 Hz）下会开始下降。 所示的均匀的–20 dB /十倍增益衰减是内部补偿运算放大器的典型特性。 这些是在同一IC芯片中包含网络（通常是单个电容器）的单元，其功能是使运算放大器增益具有所示的单时间常数（STC）低通响应。 修改开环增益的过程称为频率补偿，其目的是确保运算放大器电路稳定（与振荡相反）。 运放电路（或更一般而言，反馈放大器）的稳定性问题将在第11章中进行研究。

从上面的波特图中我们可以看到3-dB频率点和单位增益频率点

实际上，我们注意到，相同类型的运算放大器单元之间的$f_t$值的差异通常比$A_0$和$f_b$之间的差异小得多。 因此，首选$f_t$作为规范参数。 最后，应该提到的是，具有这种均匀的–6 dB /倍频程（或等效地–20 dB /十倍频）增益衰减的运算放大器具有单极点模型。 同样，由于该单极点在放大器的频率响应中占主导地位，因此被称为主导极点。 有关极点（和零点）的更多信息，读者不妨参考附录F。

##### 2.7.2 Frequency Response of Closed-Loop Amplifiers

接下来，我们考虑有限的运算放大器增益和带宽对两个基本配置的闭环传递函数的影响：图2.5的反相电路和图2.12的同相电路。 假设运算放大器的开环增益为A，则反相放大器的闭环增益在第2.2节中得出，如下

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528200840836.png" alt="image-20210528200840836" style="zoom:67%;" />

我们假设该放大器有一个主导极点，因此其传递函数应为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528200955695.png" alt="image-20210528200955695" style="zoom:67%;" />

将其带入上式

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528201033549.png" alt="image-20210528201033549" style="zoom:67%;" />

通常而言，有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528201057543.png" alt="image-20210528201057543" style="zoom:67%;" />

故

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528201109191.png" alt="image-20210528201109191" style="zoom:67%;" />

因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528201125070.png" alt="image-20210528201125070" style="zoom:67%;" />

对于同相电路这个分析是类似的

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528201209093.png" alt="image-20210528201209093" style="zoom:67%;" />

最后得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528201223551.png" alt="image-20210528201223551" style="zoom:67%;" />

### 2.8 Large-Signal Operation of Op Amps

##### 2.8.1 Output Voltage Saturation

与所有其他放大器相似，运算放大器在有限的输出电压范围内线性工作。具体来说，运算放大器的输出以图1.14所示的方式饱和，其中L +和L-分别在正电源和负电源的1V左右。 因此，当输出电压在正方向上达到约+ 13V，在负方向上达到–13 V时，以±15 V电源工作的运放将饱和。 对于这种特殊的运算放大器，额定输出电压标称为±13V。为避免削波输出波形的峰值和由此产生的波形失真，必须将输入信号保持相对较小。

##### 2.8.2 Output Current Limits

运算放大器工作的另一个限制是它们的输出电流被限制在规定的最大值内。 例如，流行的741运算放大器被指定为具有±20 mA的最大输出电流。 因此，在设计使用741的闭环电路时，设计人员必须确保在任何情况下都不需要运算放大器在任一方向上提供超过20 mA的输出电流。 当然，这必须包括反馈电路中的电流以及提供给负载电阻器的电流。 如果电路需要更大的电流，则运算放大器的输出电压将饱和在对应于最大允许输出电流的电平上

##### 2.8.3 Slew Rate（摆率）

当存在较大的输出信号时，另一个可能导致非线性失真的现象是摆率限制。 该名称指的是这样的事实，即在实际运算放大器的输出端可能存在特定的最大变化率。 该最大值称为运算放大器的压摆率（SR），其定义为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528201609676.png" alt="image-20210528201609676" style="zoom:67%;" />

因此，如果施加到运算放大器电路的输入信号要求输出响应快于SR的指定值，则运算放大器将不符合要求。相反，它的输出将以最大可能的速率变化，这等于它的SR。作为一个例子，考虑在图2.43（a）所示的单位增益电压跟随器配置中连接的运算放大器，并让输入信号为图2.43（b）所示的阶跃电压。运算放大器的输出不能瞬间上升到理想值V；相反，输出将是斜率等于SR的线性斜坡，如图2.43（c）所示。

![image-20210528201711167](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210528201711167.png)



为了理解转换率现象的起源，我们需要了解运算放大器的内部电路，我们将在第13章对其进行研究，了解这一现象并注意到它不同于限制闭环放大器频率响应的有限运算放大器带宽（在上一节中研究过）。有限带宽是线性现象，不会导致输入正弦曲线形状的变化；也就是说，它不会导致非线性失真。另一方面，当输入正弦信号的频率和振幅使得相应的理想输出需要vO以大于SR的速率变化时，转换速率限制会导致输入正弦信号的非线性失真。这是另一个相关运算放大器规范的起源，其全功率带宽将在后面解释。

## CHAPTER 3 Semiconductors（半导体类）

### 3.3 Current Flow in Semiconductors

##### 3.3.1 Drift Current（漂移电流）

在半导体中给定电场，其中的空穴和自由电子将会朝相反方向相互运动，假设空穴的速度是$v_{p-drift}$,有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530101302082.png" alt="image-20210530101302082" style="zoom:67%;" />

其中 $μ_p$ 是一个常数，称为空穴迁移率：它表示空穴响应电场 $E$ 穿过硅晶体的容易程度。 因为速度的单位是厘米每秒，而 $E$ 的单位是伏特每厘米 ，我们从方程中看到。迁移率$μ_p$ 的单位必须是厘米平方每伏秒（$cm^2$/$V$·$s$）。 对于本征硅, $μ_p$ $= 480 cm^2/V·s。$

![image-20210530101518206](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530101518206.png)

对于电子则同理

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530101543112.png" alt="image-20210530101543112" style="zoom:67%;" />

其计算结果为负，因为电子在与 $E$ 相反的方向移动。这里 $μ_n$ 是电子迁移率，对于本征硅来说，它大约为 $1350 cm^2/V·s。$ 请注意，$μ_n$ 大约是 $μ_p$ 的 2.5 倍，这表明电子比空穴更容易穿过硅晶体。

现在让我们回到图 3.5 所示的单晶硅棒。 设空穴浓度为 p，自由电子浓度为 n。 由于孔的流动，我们希望计算电流分量。 考虑一个垂直于 x 方向的平面。 在一秒钟内，穿过该平面的空穴电荷将为 ($Aqpν_{p-drift}$) 库仑，其中 A 是硅棒的横截面积，q 是电子电荷的大小。 那么这一定是流过棒的漂移电流的空穴分量

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530101838861.png" alt="image-20210530101838861" style="zoom:67%;" />

代入空穴漂移的速度，有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530101935924.png" alt="image-20210530101935924" style="zoom:67%;" />

我们通常对电流密度更感兴趣，记为$J_p$，有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530102035975.png" alt="image-20210530102035975" style="zoom:67%;" />

可以用类似的方式找到由于自由电子漂移引起的电流分量。 但是请注意，从右到左漂移的电子会导致从左到右的电流分量。 这是因为将电流流动方向作为正电荷流动方向而与负电荷流动方向相反的惯例。 因此，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530102121706.png" alt="image-20210530102121706" style="zoom:67%;" />

同理可以找到其电流密度

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530102226895.png" alt="image-20210530102226895" style="zoom:67%;" />

因此总电流密度为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530102244364.png" alt="image-20210530102244364" style="zoom:67%;" />

或者写作

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530102259297.png" alt="image-20210530102259297" style="zoom:67%;" />

或

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530102421341.png" alt="image-20210530102421341" style="zoom:67%;" />

其中电导率$σ$由下式给出

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530102445123.png" alt="image-20210530102445123" style="zoom:67%;" />

电阻率$ρ$由下式给出

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530102612539.png" alt="image-20210530102612539" style="zoom:67%;" />

##### 3.3.2 Diffusion Current（扩散电流）

当一块半导体中的载流子密度不均匀时，就会发生载流子扩散。 例如，如果通过某种机制使一块硅的一部分中的空穴浓度高于另一部分中的空穴浓度，则空穴将从高浓度区域扩散到低浓度区域。 这种扩散过程就像在装满水的水箱中滴几滴墨滴所观察到的一样。 电荷载流子的扩散产生净电荷流或扩散电流。

例如，考虑图 3.6(a) 中所示的硅棒：通过一些未指定的过程，我们已经安排在其左侧注入空穴。 这种连续的空穴注入产生并保持了如图 3.6(b) 所示的空穴浓度分布。该分布反过来导致空穴沿着硅棒从左到右扩散，从而在 x 方向产生空穴电流。 任何一点的电流大小都与浓度分布的斜率或该点的浓度梯度成正比，

![image-20210530102756650](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530102756650.png)



空穴电流密度为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530102839652.png" alt="image-20210530102839652" style="zoom:67%;" />

其中 $J_p$ 是空穴电流密度 $(A/cm^2)$，$q$ 是电子电荷的大小，$D_p$ 是称为扩散常数或空穴扩散率的常数；$p(x)$ 是点 x 的空穴浓度。 请注意，梯度 $(dp/dx)$ 为负，导致 x 方向上的电流为正，正如预期的那样

类似的

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530103153094.png" alt="image-20210530103153094" style="zoom:67%;" />

其中 $D_n$ 是电子的扩散常数或扩散率。 观察到负值 $(dn/dx)$ 产生负电流，这是电流的正方向被视为正电荷流动的惯例的结果

对于在本征硅中扩散的空穴和电子，扩散常数的典型值为 $D_p = 12 cm^2/s 和 D_n = 35 cm^2/s$。

##### 3.3.3 Relationship between $D$ and $μ$

一个简单但强大的关系将扩散常数与迁移率联系起来，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530103734343.png" alt="image-20210530103734343" style="zoom:67%;" />

其中 $V_T = kT/q$。 参数 $V_T$ 称为热电压。 在室温下$，T\simeq300 K$ 和 $V_T = 25.9 mV$。 

### 3.4 The pn Junction

##### 3.4.2 Operation with Open-Circuit Terminals

图3.9显示了开路条件下的pn结-也就是说，外部端子保持开路。  p 型材料中的“+”号表示多数空穴。 这些空穴的电荷被与受体原子相关的等量束缚负电荷中和。 为简单起见，这些绑定电荷未在图中显示。 也未显示通过热电离在 p 型材料中产生的少数电子。在 n 型材料中，多数电子用“-”符号表示。 此处也未显示中和多数电子电荷的束缚正电荷，以保持图表简单。  n 型材料还包含由热电离产生的少数空穴，但图中未显示。

![image-20210530104200405](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530104200405.png)

扩散电流 $I_D$:由于空穴浓度在 p 区高而在 n 区低，空穴从 p 侧向 n 侧扩散穿过结。 类似地，电子从 n 侧向 p 侧扩散穿过结。 这两个电流分量加在一起形成扩散电流 $I_D$，其方向是从 p 侧到 n 侧，如图 3.9 所示。

耗尽层：扩散入对应极区的载流子会迅速与对应载流子中和。因此，一些束缚正电荷将不再被自由电子中和。 由于复合发生在结附近，因此在结附近会有一个区域，该区域耗尽了自由电子并包含未覆盖的束缚正电荷，如图 3.9 所示。

穿过结扩散到 p 区的电子迅速与那里的一些多数空穴复合，从而从场景中消失。 这也会导致一些多数空穴消失，导致一些束缚负电荷被发现（即不再被空穴中和）。 因此，在靠近结的 p 材料中，将有一个耗尽空穴并包含未覆盖的束缚负电荷的区域，如图 3.9 所示。

由上可知，结的两侧将存在载流子耗尽层，该区域的 n 侧带正电，p 侧带负电。这个载流子耗尽层——或者简单地说，耗尽层——也被称为空间电荷区。 耗尽层两侧的电荷导致电场 E 沿图 3.9 所示方向穿过该区域。 因此，耗尽层两端产生电位差，n 侧相对于 p 侧处于正电压，如图 3.9(b) 所示。 因此，产生的电场阻止空穴扩散到 n 区和电子扩散到 p 区。 事实上，耗尽层两端的电压降充当势垒，空穴扩散到 n 区和电子扩散到 p 区必须克服它。 势垒电压越大，能够克服势垒的载流子数量越少，因此扩散电流的幅度越低。 因此，势垒电压 $V_0$ 的出现限制了载流子扩散过程。 因此，扩散电流 $I_D$ 强烈依赖于耗尽层两端的电压降 $V_0$。

漂移电流 $I_S$ 和平衡:除了多数载流子扩散引起的电流分量 $I_D$ 外，结中还存在少数载流子漂移引起的分量。具体而言，n 材料中一些热产生的空穴向结移动并到达耗尽层的边缘。 在那里，他们经历耗尽层中的电场，这使他们穿过该区域进入 p 侧。 类似地，p 材料中一些少数热产生的电子移动到耗尽层的边缘，并被耗尽层中的电场扫过该区域进入 n 侧。 这两个电流分量——电子从 p 漂移到 n 和空穴从 n 漂移移动到 p——加在一起形成漂移电流 $I_S$，其方向是从结的 n 侧到 p 侧，如 图 3.9。 由于电流 $I_S$ 由热产生的少数载流子携带，因此其值强烈依赖于温度； 然而，它与耗尽层电压 $V_0$ 的值无关。 这是因为漂移电流由到达耗尽层边缘的少数载流子数量决定； 任何设法到达耗尽层边缘的少数载流子都将被 E 扫过，而不管 E 的值或相应的 $V_0$ 的值。

在开路条件下（图 3.9）不存在外部电流； 因此，通过结的两个相反的电流大小必须相等

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530105033501.png" alt="image-20210530105033501" style="zoom:67%;" />

这种平衡条件由势垒电压$V_0$ 维持。 因此，如果由于某种原因$I_D$ 超过 IS，则结的两侧将暴露出更多的束缚电荷，耗尽层将变宽，其两端的电压 (V0) 将增加。 这反过来导致 $I_D$ 减小，直到达到 $I_D$ = $I_S$ 的平衡。 另一方面，如果 $I_S$ 超过 $I_D$，则未覆盖电荷量将减少，耗尽层将变窄，其两端的电压 ($V_0$) 将下降。 这导致 $I_D$ 增加，直到达到平衡 $I_D$ = $I_S$

结内置电压:在没有施加外部电压的情况下，pn 结上的势垒电压 $V_0$ 可以表示为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530105459770.png" alt="image-20210530105459770" style="zoom:67%;" />

其中 $N_A$ 和 $N_D$ 分别是结的 p 侧和 n 侧的掺杂浓度。 因此 $V_0$ 取决于掺杂浓度和温度。 称为结点内置电压。 通常，对于室温下的硅，$V_0$ 在 0.6 V 到 0.9 V 的范围内。

当 pn 结端子保持开路时，它们之间测得的电压将为零。 即，耗尽区两端的电压$V_0$不会出现在结端子之间。 这是因为端子处的金属-半导体结处存在接触电压，它抵消并精确地平衡了势垒电压。 如果不是这种情况，我们就可以从孤立的 pn 结中汲取能量，这显然违反了能量守恒定律。

耗尽区的宽度和存储的电荷:图 3.10 进一步说明了当结处于平衡状态时在 pn 结中的情况

![image-20210530105714957](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530105714957.png)

![image-20210530105728154](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530105728154.png)

![image-20210530105739683](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530105739683.png)

![image-20210530105754818](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530105754818.png)

在图 3.10(a) 中，我们展示了一个 NA > ND 的连接点，这是实践中的典型情况。 这由结两侧的载流子浓度证实，如图 3.10(b) 所示。请注意，我们已用 $np_0$ 和 $pn_0$ 表示两侧的少数载流子浓度，附加下标“0”表示平衡（即，在施加外部电压之前，将在下一节中看到）。 观察耗尽区在 p 和 n 材料中延伸，并且两侧存在等量的电荷（图 3.10c 中的 $Q_+$ 和 $Q_-$）。 然而，由于通常使用不等的掺杂 $N_A$ 和 $N_D$，如图 3.10 所示的情况，耗尽层的宽度在两侧将不相同。 相反，为了产生相同数量的电荷，耗尽层将更深地延伸到更低掺杂的材料中。 具体来说，如果我们用 $x_p$ 表示 p 侧耗尽区的宽度，$x_n$ 表示 n 侧耗尽区的宽度，我们可以将结的 n 侧电荷的大小表示为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530115041818.png" alt="image-20210530115041818" style="zoom:67%;" />

同理p侧电荷量大小为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530115117238.png" alt="image-20210530115117238" style="zoom:67%;" />

显然两侧的电荷量要平衡

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530115153739.png" alt="image-20210530115153739" style="zoom:67%;" />

或写为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530115219693.png" alt="image-20210530115219693" style="zoom:67%;" />

在实际实践中，结的一侧通常比另一侧掺杂得更重，结果耗尽区几乎完全存在于一侧（轻掺杂侧）。

耗尽层的宽度 W 可以表示为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530115308253.png" alt="image-20210530115308253" style="zoom:67%;" />

其中 $\epsilon_ s$ 是硅的介电常数 =11.7$\epsilon_0$ =$11.7×8.85×10^{−14} F/cm$ $= 1.04× 10^{−12} F/cm$。 通常 W 在 0.1 μm 到 1 μm 的范围内。 方程式 (3.25) 和 (3.26) 可用于根据 W 获得 $x_n$ 和 $x_p$ 为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530115620782.png" alt="image-20210530115620782" style="zoom:67%;" />

存储在耗尽区任一侧的电荷可以通过利用上式以 W 表示。  

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530115717591.png" alt="image-20210530115717591" style="zoom:67%;" />

### 3.5 The pn Junction with an Applied Voltage

##### 3.5.1 Qualitative Description of Junction Operation

在施加反向偏置电压时，耗尽层会因此变大，从而使势垒从$V_0\rightarrow V_0+V_R$而使漂移电流的大小迅速下降，在实际分析时，如此小数量级的漂移电流$I_D$可以被忽略，因此我们认为此时电路中仅存在扩散电流$I_s$

![image-20210530120324925](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530120324925.png)

而正偏时，情况相反，势垒大小$V_0\rightarrow V_0-V_R$，漂移电流的大小会比扩散电流的大小高出几个数量级

反偏时，耗尽层宽度上升

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530120552101.png" alt="image-20210530120552101" style="zoom:67%;" />

相应的，耗尽层中存储的电荷量也会上升

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530120701669.png" alt="image-20210530120701669" style="zoom:67%;" />

正偏时同理。

pn结的输出电流大小为漂移电流和扩散电流之差

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530120820911.png" alt="image-20210530120820911" style="zoom:67%;" />

##### 3.5.2 The Current–Voltage Relationship of the Junction

为了找到其伏安特性关系，我们首先考虑正偏情况。我么知道，正偏会使更多的空穴到达n的耗尽层边缘，耗尽层边缘的稳态浓度为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530121046253.png" alt="image-20210530121046253" style="zoom:67%;" />

即该空穴（n中的少子）会从平衡浓度$p_n$上升到一个由正偏电压V决定的值，我们因此定义过量浓度为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530121217521.png" alt="image-20210530121217521" style="zoom:67%;" />

而随着少子的注入，扩散远离的少子会与多子复合，从而少子的浓度会随扩散距离增加而呈指数衰减（我们以n型半导体为例），其在距离x处的浓度如下式所示

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530121619461.png" alt="image-20210530121619461" style="zoom:67%;" />

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530121626331.png" alt="image-20210530121626331" style="zoom:67%;" />

常数$L_p$为n型材料中的空穴扩散长度，$L_p$越小，空穴与电子的符合越快，衰减速度越快

![image-20210530121815569](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530121815569.png)

我们假定$N_D<<N_A$,根据我们此前得出扩散电流密度公式，有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530121955434.png" alt="image-20210530121955434" style="zoom:67%;" />

如我们所预料的一样，在空穴密度最大的$x_n$处，其扩散电流密度大小最大

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530122055664.png" alt="image-20210530122055664" style="zoom:67%;" />

同理我们还可以得出电子扩散电流的大小

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530122141797.png" alt="image-20210530122141797" style="zoom:67%;" />

尽管我们所计算出来的扩散电流的值是在耗尽层的边缘计算出来的，但这个电流的值在耗尽层中并不会改变，从而我们可以得出交界处的电流大小为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530122353421.png" alt="image-20210530122353421" style="zoom:67%;" />

将$p_{n0}=n_i^2/N_D$和$n_{p0}=n_i^2/N_A$代入，有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530122548228.png" alt="image-20210530122548228" style="zoom:67%;" />

此外我们从上式中可以看出，当$V<0$时（也就是外部电压反偏）指数项几乎下降到0，我们知道，此时电流大小即为扩散电流$I_s$，换言之

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530122838352.png" alt="image-20210530122838352" style="zoom:67%;" />

因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530122936057.png" alt="image-20210530122936057" style="zoom:67%;" />

![image-20210530123055340](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530123055340.png)

图 3.13 显示了 pn 结的 I-V 特性。 观察到，在负方向，电流在等于 $–I_S$ 的值处饱和。 因此，$I_S$ 被命名为饱和电流。 从方程。  (3.41) 我们看到$I_S$ 与结的横截面积A 成正比。 因此，我们更喜欢在本书中使用的 $I_S$ 的另一个名称是结标度电流。 对于不同区域的结点，IS 的典型值范围从 $10^{-18} A 到 10^{-12} A$。

除了与连接面积 A 成正比外，上式还表明表明 $I_S$ 与 $n^2_ i$ 成正比，这是一个非常强的温度函数。

##### 3.5.3 Reverse Breakdown（反向击穿）

在反向电压超过一定值以后，可能会发生电流突然增大的情况，如果此时还处于额定功率内，则该现象一般不会产生破坏

![image-20210530123615323](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530123615323.png)



在 $V = V_Z$ 处发生的现象称为结击穿。 这不是一种破坏性的现象。 即，pn结可以在击穿区域中重复操作而对其特性没有永久性影响。但是，这是基于以下假设：反向击穿电流的大小受外部电路限制为“安全”值。  “安全”值是将结中的功耗限制在安全、允许水平的值。

pn 结击穿有两种可能的机制：齐纳击穿和雪崩击穿。 如果 pn 结击穿电压 $V_Z < 5 V$，击穿机制通常是齐纳击穿。 当 VZ 大于大约 7 V 时会发生雪崩击穿。对于在 5 V 和 7 V 之间击穿的结，击穿机制可以是齐纳击穿或雪崩击穿，也可以是两者的组合。

当耗尽层中的电场增加到可以破坏共价键并产生电子 - 空穴对时，就会发生齐纳击穿。 以这种方式产生的电子将被电场扫入 n 侧，空穴扫入 p 侧。因此，这些电子和空穴构成了穿过结的反向电流。 一旦齐纳击穿开始，就会产生大量载流子，结电压的增加可以忽略不计。 因此击穿区的反向电流会很大，其值必须由外部电路决定，而二极管端子之间出现的反向电压将保持接近规定的击穿电压$V_Z$。

另一种击穿机制，雪崩击穿，当少数载流子在电场的影响下穿过耗尽区时获得足够的动能，从而能够破坏与它们碰撞的原子中的共价键。 通过该过程释放的载流子可以具有足够高的能量，以能够使其他载流子在另一次电离碰撞中被释放。该过程一次类推，可以迅速产生大量载流子，因此得名雪崩击穿。

### 3.6 Capacitive Effects in the pn Junction

pn结中存在两种电荷储存机制。一个与存储在耗尽区中的电荷相关，另一个与存储在n和p材料中的少数载流子电荷相关，这是通过载流子注入建立的浓度分布的结果。当pn结反向偏置时，第一种更容易观察到，而第二种仅在结正向偏置时有效

##### 3.6.1 Depletion or Junction Capacitance（势垒电容）

当pn结处于反偏电压$V_R$下时，储存在两侧耗尽层中的电荷量如下式所示

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530162005713.png" alt="image-20210530162005713" style="zoom:67%;" />

因此对于给定的pn结，有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530162106058.png" alt="image-20210530162106058" style="zoom:67%;" />

其中 $\alpha$为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530162139590.png" alt="image-20210530162139590" style="zoom:67%;" />

因此该势垒电容$Q_J$的大小与反偏电压$V_R$并非呈线性关系，如下图所示

![image-20210530162505205](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530162505205.png)

因此当偏置电压变化时，我们很难给出一个稳定的关系来刻画势垒电容的变化，不过，当pn结在给定电压下工作时，我们可以定义势垒电容的大小为曲线的斜率。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530162719077.png" alt="image-20210530162719077" style="zoom:67%;" />

或者说

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530162806107.png" alt="image-20210530162806107" style="zoom:67%;" />

因此当零偏时，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530162828349.png" alt="image-20210530162828349" style="zoom:67%;" />

从而我们可以将势垒电容大小表示为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530162852909.png" alt="image-20210530162852909" style="zoom:67%;" />

不过要注意的是，我们现在研究的pn结，其掺杂浓度会在两类半导体的交界处发生突变，这类pn结被称作突变结；而另外一类pn结，这种掺杂浓度的变化则是渐变式的，因此我们可以将上面的式子写作更为一般的形式。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530163229246.png" alt="image-20210530163229246" style="zoom:67%;" />

其中m（梯度系数 grading coefficient）的大小随其掺杂方式的变化而变化。

##### 3.6.2 Diffusion Capacitance（扩散电容）

此前我们给出了非平衡少子的扩散方程，该方程给出了非平衡少子的分布函数，因此通过计算该曲线与横轴围成的面积，可以计算出其数量（积分）

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530163709465.png" alt="image-20210530163709465" style="zoom:67%;" />

将我们此前得出的方程代入上式，有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530163747823.png" alt="image-20210530163747823" style="zoom:67%;" />

其中($L_p^2/D_p$)是一个有用的时域参数，记为$\tau_p$

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530163950298.png" alt="image-20210530163950298" style="zoom:67%;" />

换言之可以写作

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530164003280.png" alt="image-20210530164003280" style="zoom:67%;" />

对于电子来说也是这样

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530174416364.png" alt="image-20210530174416364" style="zoom:67%;" />

因此总电荷量的大小是

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530181253874.png" alt="image-20210530181253874" style="zoom: 67%;" />

对于偏置点附近的微小变化，我们可以将增量扩散电容$C_d$定义为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530182333547.png" alt="image-20210530182333547" style="zoom:67%;" />

并且我们可以证明

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210530182403395.png" alt="image-20210530182403395" style="zoom:67%;" />

其中 $I$ 是正向偏置电流。 请注意，$C_d$ 与正向电流 $I$ 成正比，因此在二极管反向偏置时可以忽略不计。 还要注意，为了保持 $C_d$ 小，渡越时间 $τ_T$ 必须小，这是用于高速或高频操作的 pn 结的重要要求

## CHAPTER 5 MOS Field-Effect Transistors (MOSFETs)

在研究了最基本的二端半导体器件结型二极管之后，我们现在将注意力转向三端半导体器件。 三端设备比两端设备有用得多，因为它们可用于多种应用，从信号放大到数字逻辑和存储器。 所涉及的基本原理是**利用两个端子之间的电压来控制流入第三个端子的电流**。 通过这种方式，可以使用三端设备来**实现受控源**，正如我们在第 1 章中学到的，这是放大器设计的基础。 另外，在极端情况下，可以利用控制信号使第三端的电流从零变为一个较大的值，从而使器件起到开关的作用。 正如我们将在第 14 章中看到的，开关是实现逻辑反相器的基础，逻辑反相器是数字电路的基本元素。

三端半导体器件有两种主要类型：本章将研究的金属氧化物半导体场效应晶体管 (MOSFET) 和我们将在第 6 章中研究的双极结型晶体管 (BJT)。 这两种晶体管类型提供独特的功能和应用领域，MOSFET 已成为迄今为止使用最广泛的电子设备，尤其是在集成电路 (IC) 的设计中，集成电路是在单个硅芯片上制造的整个电路。

与 BJT 相比，MOSFET 可以做得非常小（即需要在硅 IC 芯片上占用很小的面积），并且它们的制造工艺相对简单（参见附录 A）。

此外，它们的操作需要相对较小的功率。 此外，电路设计人员已经找到了几乎完全使用MOSFET（即，几乎没有电阻器或没有电阻器）来实现数字和模拟功能的巧妙方法。 所有这些特性使得在单个 IC 芯片上封装大量 MOSFET（多达 40 亿个！）成为可能，以实现非常复杂的超大规模集成 (VLSI) 数字电路，例如用于存储器和 微处理器。 放大器和滤波器等模拟电路也可以在 MOS 技术中实现，尽管是在更小、密度更低的芯片中。 此外，越来越多的模拟和数字功能在同一个 IC 芯片上实现，即所谓的混合信号设计。

本章的目的是让读者高度熟悉 MOSFET：其物理结构和操作、端子特性和直流电路应用。 这将为 MOSFET 在放大器设计（第 7 章）和数字电路设计（第 14 章）中的应用奠定坚实的基础。 尽管存在分立 MOS 晶体管，并且本章中研究的材料将使读者能够设计分立 MOS 电路，但我们对 MOSFET 的研究受到其大部分应用在集成电路设计中这一事实的强烈影响。  IC 模拟和数字 MOS 电路的设计占据了本书其余部分的很大一部分。

### 5.1 Device Structure and Physical Operation

增强型 MOSFET 是应用最广泛的场效应晶体管。 除最后一节外，本章专门研究增强型MOSFET。 在本节中，我们首先了解其结构和物理操作。而由其产生的伏安特性则将在下一节中研究

##### 5.1.1 Device Structure

图 5.1 显示了 n 沟道增强型 MOSFET 的物理结构。  “增强”和“n 沟道”这两个名称的含义很快就会变得显而易见。 该晶体管是在 p 型衬底上制造的，该衬底是一个单晶硅晶片，为器件（以及在集成电路的情况下为整个电路）提供物理支持。 两个重掺杂的 n 型区，在图中表示为 n+ 源极和 n+ 漏区，在衬底中形成。 一层厚度为 $t_{ox}$（通常为 1 nm 至 10 nm）2 的二氧化硅 ($SiO_2$) 薄层是一种极好的电绝缘体，它生长在衬底表面，覆盖源区和漏区之间的区域。 金属沉积在氧化物层的顶部以形成器件的栅电极

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604125337283.png" alt="image-20210604125337283" style="zoom:67%;" />

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604125353421.png" alt="image-20210604125353421" style="zoom:67%;" />

在源极、漏极、栅极和衬底上分别各有一个金属接触点，因此，引出四个端子：栅极端子 (G)、源极端子 (S)、漏极端子 (D) 和衬底端子 (B)。

（注：在图 5.1 中，与衬板的接触点显示在设备的底部。 这将在第 5.4 节中证明有助于解释称为“衬底效应”的现象。 然而，重要的是要注意，在实际的 IC 中，与衬板的接触点多数是在器件顶部的某个位置）

















































































































































































































































































## CHAPTER 6 Bipolar Junction Transistors (BJTs)

### 6.1 Device Structure and Physical Operation

##### 6.1.1 Simplified Structure and Modes of Operation

该晶体管由两个pn结构成，分别是发射极-基极结（EBJ）和集电极—基极结（CBJ),这也是其被称为双极性晶体管的原因

![image-20210531113737014](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531113737014.png)

![image-20210531114141068](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531114141068.png)

##### 6.1.2 Operation of the npn Transistor in the Active Mode

首先我们列出BJT的工作模式和其对应的结工作情况

![image-20210531114318799](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531114318799.png)

在这三种模式中，active mode（也就是放大状态）是最重要的，如下图所示

![image-20210531114508940](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531114508940.png)

两个外部电源用于建立放大状态所需的偏置条件，$V_{BE}$使EBJ正偏而$V_{CE}$使CBJ反偏

电流流动：

发射极-基极结上的正向偏压将导致电流流过该结。 电流由两部分组成：从发射极注入基极的电子和从基极注入发射极的空穴。 很快就会明白，我们非常希望第一个分量（从发射极到基极的电子）比第二个分量（从基极到发射极的空穴）大得多。 而这可以通过用重掺杂的发射极和轻掺杂的基极制造该器件来实现。 也就是说，该器件被设计为在发射极中具有高密度的电子而在基极中具有低密度的空穴。

流过发射极-基极结的电流将构成发射极电流 $i_E$，如图 6.3 所示。  $i_E$ 的方向是“离开”发射极引线， 发射极电流 iE 等于这两个分量的总和。 但是，由于电子成分比空穴成分大得多，因此发射极电流将由电子成分控制。

根据我们在第 3.5 节对正向偏置 pn 结的电流的研究，我们知道 $i_E$ 的电子分量和空穴分量的大小将与 $e^{v_{BE} /V_T}$ 成正比，其中 $v_{BE}$ 是EBJ的正偏电压，$V_T$则是热电压（室温下约为25mV）

现在我们关注电子电流这个分量，这些p区 的非平衡少子在基极会形成一个由基极的发射结侧到集电结侧的逐渐减小的浓度梯度，从而形成扩散运动，尽管基极中的空穴会与它们复合，但仍会有部分电子在反偏电压$V_{CB}$的作用下穿过CBJ的耗尽层进入集电极，这部分电子电流被称作集电极电流$I_c$

The Collector Current：由于集电极处于反偏状态，因此其内部电流大小几乎完全受控于饱和电流（扩散电流）的大小，该扩散电流是来自于EBJ的扩散电流，因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531121357443.png" alt="image-20210531121357443" style="zoom:67%;" />

需要注意的是，$i_c$与$V_{CB}$的大小无关，即只要CBJ反偏，那么到达基区CBJ处的电子u就会被被电场扫掠到E中从而构成集电极电流。

The Base Current：基极电流由两个分量构成，第一个分量$I_{B1}$来自于从基极注入到发射极的空穴电流，而第二个分量则是外部用于补充在基极中与来自发射极的电子复合的空穴构成的空穴电流，记为$I_{B2}$,而由于$I_{B2}$与注入基极的电子数成正比，因此其也与$e^{v_{BE} /V_T}$成正比。因此基极电流和集电极电流之间就存在比例关系

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531122115085.png" alt="image-20210531122115085" style="zoom:67%;" />

从上面的描述中，我们可以看到共射极电流增益$β$受到两个因素影响，一是基极区的宽度（这影响到进入集电极的扩散电流大小），二是B区与E区的相对掺杂浓度

The Emitter Current：根据基尔霍夫电流定律，进入晶体管的电流最后都会离开

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531122515063.png" alt="image-20210531122515063" style="zoom:67%;" />

代入我们之前的式子，可以得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531122549825.png" alt="image-20210531122549825" style="zoom:67%;" />

或者

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531122605021.png" alt="image-20210531122605021" style="zoom:67%;" />

换言之，我们也可以将式子写成

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531122643907.png" alt="image-20210531122643907" style="zoom:67%;" />

或者

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531122701714.png" alt="image-20210531122701714" style="zoom:67%;" />

因此$α$和$β$之间的关系是

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531122736715.png" alt="image-20210531122736715" style="zoom:67%;" />

或者

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531122745264.png" alt="image-20210531122745264" style="zoom:67%;" />

从上面的式子中我们可以看到，对于特定的晶体管而言，$α$是一个常数，小于但接近于1，此外也表明对$α$的微小扰动可能导致$β$发生巨大变化，实际上，相同类型的晶体管的$β$值可能 相差很大。

Minority-Carrier Distribution（少数载流子分布）：通过考虑基极和发射极中的非平衡少子分布可以让我们对BJT内部所发生的事有更深刻的理解，如下图

![image-20210531123207218](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531123207218.png)

观察到，由于发射极的掺杂浓度 $N_D$ 远高于基极的掺杂浓度 $N_A$，从发射极注入到基极的电子浓度 $n_p(0)$ 远高于从基极注入到发射极的空穴浓度$p_n(0)$。 这两个量都与 $e^{v_{BE} /V_T}$ 成正比，因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531123649413.png" alt="image-20210531123649413" style="zoom:67%;" />

此外，由于反偏电压的存在，基极中靠近集电极的电子均会被扫入集电极中，导致基极区最右侧的电子浓度为0.此前我们说过，扩散电流的大小于该处浓度曲线的斜率成正比。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531123923871.png" alt="image-20210531123923871" style="zoom:67%;" />

其中$A_E$是发射结的截面积，$D_n$是基极中的电子扩散率，少子产生的浓度梯度引起了扩散电流$I_n$。而集中的复合运动虽然比较小，但仍会对浓度曲线的分布造成一定影响，因此实际曲线相较于理想值会稍稍下凹。

该电流最后扩散流入集电极，因此在集电极中，其饱和电流大小为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531124620249.png" alt="image-20210531124620249" style="zoom: 67%;" />

或者

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531124640179.png" alt="image-20210531124640179" style="zoom:67%;" />

从上式中可以看出，$I_s$与截面积$A_E$成正比而与宽度$W$成反比，此外，由于其也与$n_i^2$有关，因此其温度依赖性也很强。大小通常在$10^{-12}A$到$10^{-18}A$之间

Recapitulation and Equivalent-Circuit Models：

我们为放大状态下的npn晶体管提供了一个一阶（first-order）等效模型，如下

![image-20210531134852002](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531134852002.png)

由前面的推导可知，只要三极管处于active mode，$i_c$大小就与$V_{CB}$大小无关，因而在模型中集电极表现为一个受控恒流源，同时，由于$i_B$相对较小，我们可以近似认为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531135200825.png" alt="image-20210531135200825" style="zoom:67%;" />

$α$越接近1，误差越小。在这个模型中，电流源变化并非线性（因为变量是$V_{BE}$），而假如我们将变量设置为$i_E$，则有

![image-20210531135422833](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531135422833.png)

根据相同的原理我们还可以得到下面两个模型

![image-20210531135621772](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531135621772.png)

##### 6.1.4 Operation in the Saturation Mode

事实上处于active mode下的CBJ反偏电压并非严格要求大于等于0，因为pn结中势垒（耗尽层电场）的存在，$V_{CB}$只要不越过势垒即可

![image-20210531140140224](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531140140224.png)

通常而言，势垒的大小在0.4v左右。可以从下面的模型中看到为什么$i_c$在CBJ导通时减小

![image-20210531141119667](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531141119667.png)

在CBJ导通时，会产生由基极流向集电极的而空穴电流，其方向恰好与扩散电流（电子电流）的方向相反，因此此时

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531141344030.png" alt="image-20210531141344030" style="zoom:67%;" />

同理，基极电流的大小会因此增大

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531141510991.png" alt="image-20210531141510991" style="zoom:67%;" />

此时对应的$β$值将会响应减小

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531141613112.png" alt="image-20210531141613112" style="zoom:67%;" />

我们将看到，在分析电路时，我们可以通过以下两个测试之一来确定 BJT 是否处于饱和模式： 

1.CBJ 正向偏置是否超过 0.4 V？

2.$i_C/i_B$ 的比值是否低于 β？

一般而言，我们假设能使CBJ正偏的临界电压大小为$V_{CE_{sat}}=0.3V$.

### 6.2 Current–Voltage Characteristics

##### 6.2.1 Circuit Symbols and Conventions

在这本书中，我们规定绘制电路图时，电势从上至下降低，比如

![image-20210531142109806](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531142109806.png)

![image-20210531143954357](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531143954357.png)

The Collector–Base Reverse Current ($I_{CBO}$)：该电流是来自热激发的漂移电流，由于CBJ处于反偏状态，因此该电流的大小非常小，通常在nA级，并且对温度变化非常敏感，每升高10°C变大约一倍

![image-20210531144331765](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531144331765.png)

![image-20210531144347016](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531144347016.png)



##### 6.2.2 Graphical Representation of Transistor Characteristics

有时以伏安特性曲线来描述BJT比较直观，比如$i_c$与$V_{BE}$的关系

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531144542361.png" alt="image-20210531144542361" style="zoom:67%;" />

就与二极管的伏安特性曲线相同，其他极电流与EBJ偏置电压之间的关系也是指数形式的，由于其指数的系数较大，使其曲线十分陡峭。在$V_{BE}<0.5V$时我们一般认为其中没有电流；在正常电流范围内，$V_{BE}$一般处于[0.6,0.8]的区间中，计算时取平均值0.7V

![image-20210531144909970](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531144909970.png)

![image-20210531144920268](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531144920268.png)

与硅二极管一样，如果温度每升高 1°C，发射极 - 基极结上的电压就会降低约 2 mV，前提是该结以恒定电流运行。图 6.17 通过描绘 npn 晶体管在三种不同温度下的 $i_C-v_{BE}$ 曲线来说明这种温度依赖性

##### 6.2.3 Dependence of iC on the Collector Voltage—The Early Effect(厄利效应)

实际上BJT中的集电极电流大小并非完全与$V_{CB}$不相关

![image-20210531145147969](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531145147969.png)

考虑如上图所示的共射电路，其中$V_{BE}$和$V_{CE}$可调节，我们在给定的$V_{BE}$处调节$V_{CE}$并测量此时的集电极电流$i_c$，可得到如下图像

![image-20210531145754476](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531145754476.png)

可以看到，虽然在放大区段，$i_c$的图像仍然是直线，但此时其斜率不为0；此外还可以看到各曲线的延长线交于一点$V_A$，该点被称作厄利电压。

出现这种现象的原因是，在给定$V_{BE}$的情况下，增大$V_{CE}$会使得CBJ上的反偏电压$V_{CB}$大小上升，从而使其耗尽层宽度变小，而饱和电流的大小与耗尽层宽度$W$成反比，故集电极电流大小上升

该效应被称作厄利效应。为了计算方便，我们假设$I_s$大小不变，而将其变化体现在系数上，根据图像我们可以看到该变化近似于线性。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531150459811.png" alt="image-20210531150459811" style="zoom:67%;" />

由于此时$V_{CE}$相对于$i_c$出现变化，这意味着对于集电极而言，集电极到发射极之间的电阻并非无穷大

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531150702196.png" alt="image-20210531150702196" style="zoom:67%;" />

代入可以得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531150739282.png" alt="image-20210531150739282" style="zoom:67%;" />

或者写作

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531152733767.png" alt="image-20210531152733767" style="zoom:67%;" />

其中

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531152800349.png" alt="image-20210531152800349" style="zoom:67%;" />

在实际的电路设计中我们一般可以忽略$i_c$对$V_{CE}$，不过有限的$r_o$可能会对放大器的性能产生影响，我们下面给出带有$r_o$的三极管模型

![image-20210531153025947](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531153025947.png)



##### 6.2.4 An Alternative Form of the Common-Emitter Characteristics

表示晶体管特性的另一种方式如下所示

![image-20210531153151661](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531153151661.png)

我们仍然采用之前的共射电路模型，但这次我们不采用恒定的$V_{BE}$而是采用恒定的$i_B$来做参考。

The Common-Emitter Current Gain β：一般而言确定工作点Q的方法是在这一点上，有
$$
i_C=\beta_Qi_B
$$
但这次我们采用了不大一样的方法，在上图中，我们确定的工作点Q为
$$
\Delta i_c/\Delta i_B=\beta_Q
$$
这两个$β$分别代表了在交流与直流条件下的$β$值，虽然这两个$β$略有不同，但在本书中，我们暂且认为无论是交流电流还是直流电流，$β$值都是一样的。

The Saturation Voltage $V_{CE_{sat}}$ and Saturation Resistance $R_{CE_{sat}}$：

下图是饱和区伏安曲线图

![image-20210531154145103](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531154145103.png)

其斜率表示集电极与发射极之间的等效电阻的倒数，在饱和电压处有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531154539009.png" alt="image-20210531154539009" style="zoom:67%;" />

![image-20210531154601893](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531154601893.png)

### 6.3 BJT Circuits at DC

我们现在准备分析只施加直流电压的 BJT 电路。 在以下示例中，我们将使用简单模型，其中 导通晶体管的$|V_{BE} |$ 为 0.7 V 和 饱和晶体管的 $|V_{CE} |$为 0.2 V，我们将忽略厄利效应。 这些模型如表 6.3 所示。 当然，更好的模型可以用来获得更准确的结果。 然而，这通常是以牺牲分析速度为代价的。 更重要的是，随之而来的复杂性可能会阻碍电路设计人员深入了解电路行为的能力。 使用带有 SPICE 的电路仿真可以获得使用精细模型的准确结果。 这几乎总是在设计的最后阶段完成，当然在电路制造之前。 然而，计算机模拟并不能替代快速的纸笔电路分析，这是有抱负的电路设计师必须掌握的一项基本能力。 以下一系列示例是朝这个方向迈出的一步。

正如将要看到的，在分析电路时，必须回答的第一个问题是：晶体管在哪种模式下工作？ 在某些情况下，答案是显而易见的。 例如，快速检查端电压将指示晶体管是截止还是导通。 如果它正在导通，我们必须确定它是在活动模式下还是在饱和模式下运行。 然而，在某些情况下，这可能并不明显。 不用说，随着读者在晶体管电路分析和设计方面获得实践和经验，答案将在更大比例的问题中显而易见。 但是，始终可以通过使用以下程序来确定答案。

![image-20210531155147112](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531155147112.png)

![image-20210531155251030](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531155251030.png)

![image-20210531155338972](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531155338972.png)

![image-20210531155523700](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531155523700.png)

![image-20210531155810194](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531155810194.png)

![image-20210531155913984](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531155913984.png)

![image-20210531155945706](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531155945706.png)

![image-20210531160041619](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531160041619.png)



戴维南等效电路示例，如上图

![image-20210531160625467](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531160625467.png)

上面的例子要采用迭代法解（先假设$Q_1$的集电极电流完全由$I_{C1}$提供）

![image-20210531161006849](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210531161006849.png)

在电路图中我们可以看到，$Q_1$与$Q_2$的基极电势相同，因此其中有一个必然没有导通。假设$Q_1$未导通，则$Q_2$的发射极电流必然来自于接地端，但这意味着其发射极电势为负，显然不成立，因此$Q_1$导通。通过建立方程，我们最终可以得到上图所示的数据

##### 6.4.2 Dependence of β on IC and Temperature

在本章中，我们假设晶体管共发射极直流电流增益 $β$ 或 $h_{FE}$ 对于给定的晶体管是恒定的。 事实上，$β$的大小取决于晶体管工作时的直流电流，如图 6.34 所示。 引起这种依赖性的物理过程超出了本书的范围。 但是请注意，存在一个 $β$ 最高的电流范围。 通常，人们安排在此范围内的电流下操作晶体管。

图 6.34 还显示了 $β$ 对温度的依赖性。  $β$ 随温度增加的事实会导致晶体管在大功率水平下运行时出现严重问题（参见第 12 章）。

![image-20210601130839668](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601130839668.png)

## CHAPTER 7 Transistor Amplifiers

简介

在研究了两种主要的晶体管类型，MOSFET（第 5 章）和 BJT（第 6 章）之后，我们现在开始研究它们的应用。 有两种截然不同的晶体管应用：在数字电路设计中作为开关（第 14-16 章）和在模拟电路放大器设计中作为受控源。 本章和随后的六章重点讨论后者的应用，即晶体管在各种放大器类型设计中的使用。

由于在放大器设计中使用 MOSFET 和 BJT 的基本原理是相同的，因此本章将同时研究这两种器件。 除了在介绍中提供一些经济性之外，这种统一的研究使我们能够对 MOS 和双极放大器进行重要的比较。

本章的大部分内容涉及晶体管在放大器设计中的应用基础的基本原理和概念：我们详细研究了在小信号线性分析和设计中用于表示两种晶体管类型的模型。 放大器。 我们还研究了三种基本配置，其中两种晶体管类型中的每一种都可以连接以实现放大器。

本章以分立电路放大器的示例结束。 这些电路可以使用印刷电路板 (PCB) 上的分立晶体管、电阻器和电容器进行组装。 它们主要使用 BJT，它们的设计与集成电路 (IC) 放大器的设计有很大不同。 后者主要使用 MOSFET，它们的研究从第 8 章开始。 然而，本章介绍的基本原理和概念同样适用于分立放大器和集成放大器

### 7.1 Basic Principles

##### 7.1.1 The Basis for Amplifier Operation

晶体管在放大器设计中的应用挤出式，当期间在active mode下工作时，可以实现作为受控电流源使用。比如对于BJT而言，基极-发射极电压$V_{BE}$根据指数关系控制集电极电流$i_c$，对于$npn$晶体管而言，可以表示为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601131537243.png" alt="image-20210601131537243" style="zoom:67%;" />

该一阶模型表明集电极电流大小与$V_{CE}$无关，从而我们在工作时隔离了集电极，如下面的电路图所示

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601131731332.png" alt="image-20210601131731332" style="zoom:67%;" />

我们通过使$V_{CE}\ge0.3V$来确保CBJ反偏，而$V_{BE}$则一般在$0.7V$左右

##### 7.1.2 Obtaining a Voltage Amplifier

从上面的描述中可以看出，晶体管一般是跨导放大器，即输入电压而输出电流，不过国人们普遍对电压放大器更感兴趣，一个普遍的方法是使用电阻并将电阻两端的电压作为输出，如下

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601133009872.png" alt="image-20210601133009872" style="zoom:67%;" />

有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601133032862.png" alt="image-20210601133032862" style="zoom:67%;" />

并且我们给出了其输出电压随EBJ偏置电压变化而变化的图像

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601133213600.png" alt="image-20210601133213600" style="zoom:67%;" />

##### 7.1.3 The Voltage-Transfer Characteristic (VTC)

电压传输特性指的是输出电压与输入电压之间的关系，比如在上图中，有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601133439286.png" alt="image-20210601133439286" style="zoom:67%;" />

关系固然是 正确的，但存在一个问题，即这样的关系并非线性，导致在实际中难以应用

##### 7.1.4 Obtaining Linear Amplification by Biasing the Transistor

对晶体管的合理偏置（即设置工作点）可以让我们从晶体管中获得几乎与线性无异的放大。让我们回到之前所描述过的电压放大器的VTC图上，不过这次以场效应管为例

![image-20210601134204529](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601134204529.png)

在右图中，我们选定一个偏置电压 $V_{GS}$，在图上它对应一点$Q$，该点被称为直流工作点，如下图

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601134332565.png" alt="image-20210601134332565" style="zoom:67%;" />

接下来我们在偏置电压$V_{GS}$的基础上施加信号电压$v_{gs}$，该信号是一时变函数

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601134449473.png" alt="image-20210601134449473" style="zoom:67%;" />

具体来说，$v_{gs}$ 的幅度足够小，可以将瞬时工作点的偏移限制在 VTC 偏置点 $Q$ 附近的一个短的、几乎线性的段。该段越短，其对线性的近似程度越好。 这就是从非线性 MOSFET 获得线性放大的本质，如下图

![image-20210601134635781](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601134635781.png)

对于BJT，我们也可以进行同样的操作来得到线性放大倍数

##### 7.1.5 The Small-Signal Voltage Gain

依据上一节的结论，我们可以认为在工作点处的电压收益大小即为其VTC图像在工作点$Q$处的斜率

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601135846599.png" alt="image-20210601135846599" style="zoom:67%;" />

我们得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601135935429.png" alt="image-20210601135935429" style="zoom:67%;" />

我们对电压增益的这个表达式进行以下观察：

1. 增益为负，表示放大器正在反相； 也就是说，输入和输出之间存在 180° 相移。 这种反转应该是从方程中预料到的。  

   2. 增益与集电极偏置电流 $I_C$ 和负载电阻 $R_C$ 成正比。

该式子也可写成

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601140124211.png" alt="image-20210601140124211" style="zoom:67%;" />

理论上我们规定$V_{CE}$的最小值为$0.3V$，因此其增益的理论最大值为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601140249668.png" alt="image-20210601140249668" style="zoom:67%;" />

不过这仅仅是理论值而已，考虑到失真问题，采用这种电压输出信号的负值没有留下摆幅

##### 7.1.6 Determining the VTC by Graphical Analysis

尽管在实践中很少使用晶体管电路的图形分析，但在此阶段对我们更深入地了解电路操作很有用，尤其是在回答偏置点 Q 的位置问题时。

如下

![image-20210601140540282](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601140540282.png)

图形分析基于以下观察结果：对于$V_{GS}$的每个值，电路将在该曲线与$i_D-v_{DS}$曲线的交点处运行，表示式（7.3）的直线，可重写为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601141205195.png" alt="image-20210601141205195" style="zoom:67%;" />

表示此关系的直线叠加在$i_D−v_{DS}$特性如图7.7所示。它在$v_{DS}=V_{DD}$处与水平轴相交，斜率为$−1/R_D$。由于这条直线实际上代表负载电阻$R_D$，因此称为负载线。然后逐点确定VTC。请注意，我们已经标记了四个重要点：点A，$v_{GS}=V_t$;点Q，在点Q，MOSFET可以被偏置用于放大器操作（$v_{GS}=V_{GS}$和$v_{DS}=V_{DS}$）;点B，在点B，MOSFET离开饱和并进入三极管区域，点C，深入三极管区域，并且$v_{GS}=V_{DD}$。如果将MOSFET用作开关，则操作点A和C适用：在A处，晶体管关闭（打开开关），在C处，晶体管作为低值电阻$r_{DS}$工作，电压降很小（关闭开关）。

上述图形分析方法可用于确定图7.2（c）中BJT放大器的VTC。图7.2（d）中的A点对应于刚刚开启的BJT（$v_{BE} \simeq 0.5 V$），B点对应于离开有源区进入饱和区的BJT。如果将BJT作为开关操作，则两种操作模式为切断（打开开关）和饱和（关闭开关）。如第6.2节所述，在饱和状态下，BJT具有较小的闭合电阻$R_{CE_{sat}}$和偏置电压。

##### 7.1.7 Deciding on a Location for the Bias Point Q

![image-20210601143903800](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601143903800.png)

在决定$R_D$的值时，参考$i_D−v_{DS}$平面很有用。图7.9显示了导致两个极端偏置点的两条负载线：$Q_1$点太接近$V_{DD}$，导致$v_{ds}$的正信号摆动受到严重限制。超过允许的正最大值会导致信号的正峰值被截断。同样，$Q_2$点太接近三极管区域的边界，从而严重限制了$v_{ds}$允许的负信号摆动。超过这一限制将导致晶体管进入三极管区域的一部分，每个周期接近负峰值，导致输出信号失真。最后，我们注意到类似的考虑也适用于BJT放大器的情况。

### 7.2 Small-Signal Operation and Models

##### 7.2.2 The BJT Case

我们现在考虑BJT的在小信号下的计算模型，如下

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601144354764.png" alt="image-20210601144354764" style="zoom:67%;" />

首先考虑其直流工作点，有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601144438166.png" alt="image-20210601144438166" style="zoom:67%;" />

其中，当BJT处于active mode 时，$V_{CE}$应当比其极限值稍小以保证输出信号有足够的摆幅，接入时频信号$v_{be}$后，EBJ正偏电压变为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601144742318.png" alt="image-20210601144742318" style="zoom:67%;" />

相应的，集电极电流变为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601144811484.png" alt="image-20210601144811484" style="zoom:67%;" />

我们假设$v_{be}<<V_T$,利用泰勒级数展开，我们得到一个线性近似

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601144912765.png" alt="image-20210601144912765" style="zoom:67%;" />

上式可以展开为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601145007471.png" alt="image-20210601145007471" style="zoom:67%;" />

因此我们可以将接入信号以后的集电极电流分为直流分量和信号分量，其信号分量为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601145108217.png" alt="image-20210601145108217" style="zoom:67%;" />

简写为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601145137724.png" alt="image-20210601145137724" style="zoom:67%;" />

$g_m$称为跨导

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601145205778.png" alt="image-20210601145205778" style="zoom:67%;" />

该值由上式可以看出与$I_C$成正比，因此为了确定$g_m$的值，我们需要一个可确定的集电极电流$I_C$，这也是确定工作点的意义所在。

严格意义上来说（不使用估算），$g_m$是$i_c-v_{BE}$图像在（偏置电压，偏置直流集电极电流）点处的斜率，即

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601145546511.png" alt="image-20210601145546511" style="zoom:67%;" />

根据曲线方程，结合上式，我们做图示如下

![image-20210601145645324](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601145645324.png)

对于该偏置条件下的基极电流，不难计算得出，有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601145759722.png" alt="image-20210601145759722" style="zoom:67%;" />

因此基极电流也可以被拆分成直流分量和信号分量两个电流

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601145930884.png" alt="image-20210601145930884" style="zoom:67%;" />

类似的，有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601145950537.png" alt="image-20210601145950537" style="zoom:67%;" />

因此我们定义小信号（微变信号）情况下，从基极看入的基极与发射极之间的等效电阻$r_{\pi}$为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601150044771.png" alt="image-20210601150044771" style="zoom:67%;" />

此外根据之前得到代数关系该式子也可以变形成

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601150123942.png" alt="image-20210601150123942" style="zoom:67%;" />

或

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601150137863.png" alt="image-20210601150137863" style="zoom:67%;" />

同理，对于发射极电流，有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601150212157.png" alt="image-20210601150212157" style="zoom:67%;" />

因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601150231488.png" alt="image-20210601150231488" style="zoom:67%;" />

从而我们定义在小信号（微变信号）情况下，从发射级看入的基极与发射极之间的等效电阻$r_e$为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601150810305.png" alt="image-20210601150810305" style="zoom:67%;" />

同理，该式可以写作

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601150839307.png" alt="image-20210601150839307" style="zoom:67%;" />

或

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601150851794.png" alt="image-20210601150851794" style="zoom:67%;" />

此外，有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601150909196.png" alt="image-20210601150909196" style="zoom:67%;" />

因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601150928272.png" alt="image-20210601150928272" style="zoom:67%;" />

从而

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601150942224.png" alt="image-20210601150942224" style="zoom:67%;" />

同时我们还可以得出电压增益大小

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601151136264.png" alt="image-20210601151136264" style="zoom:67%;" />

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601151217899.png" alt="image-20210601151217899" style="zoom:67%;" />

因此，放大器的电压增益为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601151324867.png" alt="image-20210601151324867" style="zoom:67%;" />

接下来为了模型的简单起见，我们暂时忽略直流偏置电压，对于之前计算出的两个不同方向的等效电阻，我们分别建立两类等效模型：Hybrid-$\pi$模型和T模型

##### The Hybrid-π Model：

该模型将BJT表示为受控电流源，我们在该模型中给出的电阻是$r_{\pi}$

![image-20210601151750994](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601151750994.png)

有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601151913819.png" alt="image-20210601151913819" style="zoom:67%;" />

如果考虑厄利效应，那么模型修正为

![image-20210601152037895](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601152037895.png)

需要注意的是，图 7.25 的小信号等效电路模拟了 BJT 在给定偏置点的操作。 模型参数 $g_m$、$r_π$ 和 $r_o$ 取决于直流偏置电流 $I_C$ 的值这一事实应该是显而易见的，如图 7.25 所示。 也就是说，这些等效电路模拟了 BJT 在偏置点附近的增量操作。但同时，包含$r_o$会使电压增益变为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601152402586.png" alt="image-20210601152402586" style="zoom:67%;" />

##### The T Model

除了Hybrid-π Model外，还有一类模型，在这类模型中我们给出了$r_e$，如下图

![image-20210601152615357](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601152615357.png)

一个使用T-model的例子

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601153335934.png" alt="image-20210601153335934" style="zoom:67%;" />

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601153346166.png" alt="image-20210601153346166" style="zoom:50%;" />

##### 7.2.3 Summary Tables

![image-20210601153530147](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601153530147.png)

![image-20210601153620479](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601153620479.png)

### 7.3 Basic Configurations

在第 7.1 节中，我们研究了 MOSFET 和 BJT 作为放大器的应用的基本原理。 在那里，我们发现通过在晶体管工作的有效区域的适当点对晶体管施加直流偏置，并保持输入信号（$v_{gs}$ 或 $v_{be}$）较小，可以获得几乎线性的放大。然后，在第 7.2 节中，我们开发了电路模型 代表两种晶体管类型（表 7.2 和 7.3）中每一种的小信号操作，从而为晶体管放大器的分析提供了系统程序（表 7.1）。

我们现在准备考虑 MOSFET 和 BJT 放大器的各种可能配置，我们将在本节中进行。 为了将注意力集中在各种配置的显着特征上，我们将以最简单或“精简”的版本呈现它们。 因此，我们不会展示直流偏置安排，将偏置设计的研究留到下一节。 最后，在第 7.5 节中，我们将把所有内容放在一起并介绍实用的分立电路放大器，即可以使用分立元件构建的放大器电路。 集成电路放大器的研究从第 8 章开始。

##### 7.3.1 The Three Basic Configurations

用于连接BJT作为放大器的三种基本配置，每一种都是通过将其中一个端子获得的，从而建立了一个两端口网络，并且对于输入和输出端而而言，接地端是通用的，如下图

![image-20210601190556976](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601190556976.png)

我们的下一步就是用此前提到的Hybrid-$\pi$模型和T模型来替换上述电路图中的BJT，并分析所得电路以确定其参数。为了简化起见，我们在分析过程中暂时不考虑$r_o$

##### 7.3.2 Characterizing Amplifiers

在我们开始研究不同的晶体管放大器配置之前，我们先考虑如何表征作为电路构建块的放大器的性能。 第 1.5 节介绍了该主题。

图 7.34(a) 显示了一个放大器，其信号源具有开路电压 $v_{sig}$ 和内阻 $R_{sig}$。 这些可以是实际信号源的参数，或者在级联放大器中，是所研究的放大器之前的另一个放大器级的输出电路的 Th´evenin 等效值。 放大器显示为负载电阻 $R_L$ 连接到输出端子。 这里，RL 可以是实际负载电阻或级联放大器中后续放大器级的输入电阻

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601190931978.png" alt="image-20210601190931978" style="zoom:67%;" />

图7.34（b）展示了当放大器被其等效电路替代以后的电路图，其中输入电阻$R_{in}$代表放大器之于信号源可被视作的等效电阻

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601191145570.png" alt="image-20210601191145570" style="zoom:67%;" />

定义为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601191207668.png" alt="image-20210601191207668" style="zoom:67%;" />

将信号源内阻$R_{sig}$也考虑进去，那么输入电压$v_i$的大小为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601191316608.png" alt="image-20210601191316608" style="zoom:67%;" />

而放大器的放大倍数，正如我们此前所提到的，是在其负载开路的情况下测得的（开路电压增益）

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601191412264.png" alt="image-20210601191412264" style="zoom:67%;" />

同理我们也可以测出放大器的输出电阻

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601191447887.png" alt="image-20210601191447887" style="zoom:67%;" />

因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601191540126.png" alt="image-20210601191540126" style="zoom:67%;" />

从而放大器的实际放大倍数为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601191648835.png" alt="image-20210601191648835" style="zoom:67%;" />

从信号源到负载的整体放大倍数定义为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601191739614.png" alt="image-20210601191739614" style="zoom:67%;" />

不难得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601191808605.png" alt="image-20210601191808605" style="zoom:67%;" />

##### 7.3.3 The Common-Source (CS) and Common-Emitter (CE) Amplifiers

在三种BJT配置中，最为广泛使用的是共射接法，下面我们简单介绍一下共射放大器的基本参数。

Characteristic Parameters of the CE Amplifier：

下图为基本的共射放大电路（注：我们在其中忽略了偏置电阻和偏置电源，仅保留了最重要的部分）

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601192335425.png" alt="image-20210601192335425" style="zoom:67%;" />

以npn晶体管为例，由于其CBJ反偏，因此基极到集电极的电路无法导通，换言之，三极管的内部路径仅有基极到发射极一条，因此其输入电阻不难得到，即为从基极看向发射极的等效电阻$r_{\pi}$，其等效电路如下图所示

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601192550447.png" alt="image-20210601192550447" style="zoom:67%;" />

因此有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601193830374.png" alt="image-20210601193830374" style="zoom:67%;" />

从而

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601193853000.png" alt="image-20210601193853000" style="zoom: 67%;" />

由于负载电阻与集电极电阻并联，因此有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601194003681.png" alt="image-20210601194003681" style="zoom:67%;" />

从而整体电压增益为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601194028554.png" alt="image-20210601194028554" style="zoom:67%;" />

Final Remarks

1.CS和CE放大器是所有晶体管放大器配置中最有用的。它们表现出中等至高的输入电阻（CS 无穷大）、中等至高的输出电阻和合理的高电压增益。

2.CE 放大器的输入电阻 $R_{in} = r_π = β/g_m$，与直流偏置电流 $I_C$ 成反比。 增加 $R_{in}$ 的目的是降低偏置电流 $I_C$； 然而，这也会降低 $g_m$，从而降低电压增益。 这是一个重要的设计权衡。 如果需要更高的输入电阻，则可以应用对 CE 配置的修改（将在第 7.3.4 节中讨论），或者可以在信号源和 CE 放大器之间插入一个射极跟随器级（参见第 7.3.4 节）  。

3.分别降低 $R_D$ 或 $R_C$ 以降低 CS 或 CE 放大器的输出电阻通常不是可行的建议，因为电压增益也会降低。 或者，如果需要非常低的输出电阻（在欧姆或几十欧姆范围内），可以在 CS 或 CE 放大器的输出与负载电阻之间使用源极跟随器或射极跟随器级（ 见第 7.3.6 节）。

4.虽然 CS 和 CE 配置是晶体管放大器的主力，但两者都受到高频响应的限制。 如第 10 章所示，将 CS (CE) 放大器与 CG (CB) 放大器结合可以显着扩展带宽。  CG 和 CB 放大器在第 7.3.5 节中研究。

##### 7.3.4 The Common-Source (Common-Emitter) Amplifier with a Source (Emitter) Resistance

通常来讲，在发射极有电阻串联的情况下，我们一般采用T模型来表征电路，比如对于如下图的电路

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601194941812.png" alt="image-20210601194941812" style="zoom:67%;" />

我们通常采用下面的等效电路图

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601195014033.png" alt="image-20210601195014033" style="zoom:67%;" />

对于输入电阻，我们仍然将其定义为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601195123654.png" alt="image-20210601195123654" style="zoom:67%;" />

不难得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601195138762.png" alt="image-20210601195138762" style="zoom:67%;" />

而发射极电流为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601195207041.png" alt="image-20210601195207041" style="zoom:67%;" />

因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601195221131.png" alt="image-20210601195221131" style="zoom:67%;" />

这是一个非常重要的结果。 它指出，从基极看的输入电阻是发射极总电阻的 $(β +1)$ 倍，这被称为电阻反射规则。 因子 $(β +1)$ 的出现是因为基极电流是发射极电流的 $1/(β +1)$ 倍。  $R_{in}$ 在方程中的表达式。上式清楚地表明，在发射极中包含电阻 $R_e$ 可以显着增加 $R_{in}$，这是一个非常理想的结果。 事实上，$R_{in}$ 的值是按比例增加的

假如我们对不加发射极电阻的电路的输出电阻进行前后对比，我们可以得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601195320131.png" alt="image-20210601195320131" style="zoom:67%;" />

从而电路的设计者可以依靠$R_e$的值来控制输入电阻的大小

其开路电压增益$A_{v0}$可以计算得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601195759968.png" alt="image-20210601195759968" style="zoom:67%;" />

因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601195817803.png" alt="image-20210601195817803" style="zoom:67%;" />

上面的式子可以简化为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601195853518.png" alt="image-20210601195853518" style="zoom:67%;" />

因此，包括 $R_e$ 会使电压增益降低因子 $(1+g_mR_e)$，这与 $R_{in}$ 增加的因子相同。 这指出了增益和输入电阻之间的一个有趣的权衡，设计人员可以通过为 $R_e$ 选择适当的值来进行权衡。输出电阻 $R_o$ 可以从图 7.38(b) 的电路中通过检查得到 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601200022685.png" alt="image-20210601200022685" style="zoom:67%;" />

因此放大器两端的电压增益为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601200054843.png" alt="image-20210601200054843" style="zoom:67%;" />

依据之前的计算经验

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601200129355.png" alt="image-20210601200129355" style="zoom:67%;" />

因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601200143345.png" alt="image-20210601200143345" style="zoom:67%;" />

虽然现在放大器的整体增益大小比在装有射级电阻以前小，但对应的，其对于$β$的变化更加不敏感了

在发射极中包含电阻 $R_e$ 的另一个重要结果是，它使放大器能够处理更大的输入信号，而不会产生非线性失真。这是因为只有一部分基极输入信号 $v_i$ 出现在基极和发射极之间。 具体来说，从图 7.38(b) 的电路中，我们看到 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210601200456392.png" alt="image-20210601200456392" style="zoom:67%;" />

也就是说实际进入放大器的信号电压变小了（有一部分被射级电阻分走），因此输入信号的上限提高了$(1+g_mR_e)$倍

总而言之，在 CE 放大器的发射极中包含一个电阻 Re 会导致以下特性

1.输入电阻 $R_{in}$ 增加了因子 $(1+g_mR_e)$。

2.从基极到集电极的电压增益 $A_v$ 减少了因子 $(1+g_mR_e)$。

3.对于相同的非线性失真，输入信号$v_i$可以增加因子$(1+g_mR_e)$。

4.总电压增益较少依赖于 $β$ 的值。

5.高频响应得到显着改善（我们将在第 10 章中看到）。

除了增益降低之外，这些特性代表了性能的提高。实际上，增益的减少是为获得其他性能改进而付出的代价。 在许多情况下，这是一笔划算的交易。 这是使用负反馈的基本理念。 电阻 $R_e$ 在放大器电路中引入负反馈可以通过使用类似于我们在上面用于 MOSFET 情况的程序来验证。 在第11章正式研究负反馈，我们会发现反复出现的因子(1+gmRe)就是Re引入的“负反馈量”。 最后，我们注意到 $R_e$ 的负反馈作用，并称其为射级衰减电阻

##### 7.3.5 The Common-Gate (CG) and the Common-Base (CB) Amplifiers

下图显示共基配置的BJT电路及其等效T模型

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602102905586.png" alt="image-20210602102905586" style="zoom:67%;" />

我们不难计算出该电路的各项参数

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602103018979.png" alt="image-20210602103018979" style="zoom:67%;" />

以及其总体电压增益

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602103119353.png" alt="image-20210602103119353" style="zoom:67%;" />

由于$α\simeq 1$，所以总增益可以近似看作集电极总电阻和发射级总电阻之比，并且我们注意到，总增益大小几乎与BJT的$β$值无关，电路的输入电阻也很低（$1/g_m$)，以及类似于共射放大器的放大倍数和较高的输出电阻。共基配置的放大器由于其较低的输入电阻，因而其作为电压放大器的价值较低，不过由于其有出色的高频响应，因此被广泛应用于高频放大器中

##### 7.3.6 The Source and Emitter Followers

最后一种配置是共集配置，通常被称为射级跟随器。

The Need for Voltage Buffers：正如我们之前所提到的级联放大器的例子一样，通常一个放大器不能完成所有任务，一般而言，我们会把一个放大电路分成输入，放大和输出三级，输入端需要具有较大的输入电阻以保证输入信号能够大部分进入放大电路，并且放大倍数尽可能接近1，而射级跟随器恰好能满足上述特性

Characteristic Parameters of the Emitter Follower

下图是射级跟随器的基本电路图及其等效模型（采用了T模型）

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602105544550.png" alt="image-20210602105544550" style="zoom:67%;" />

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602105619605.png" alt="image-20210602105619605" style="zoom:67%;" />



其输入电阻定义为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602111352141.png" alt="image-20210602111352141" style="zoom:67%;" />

而其基极电流可以表示为
$$
i_b=i_e/(\beta+1)
$$
不难算出其射级电流大小为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602111434748.png" alt="image-20210602111434748" style="zoom: 67%;" />

因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602111555884.png" alt="image-20210602111555884" style="zoom:67%;" />

而其电压增益大小为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602111704118.png" alt="image-20210602111704118" style="zoom:67%;" />

当负载电阻趋向于无穷大（开路时），我们得到其开路电压增益

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602111741903.png" alt="image-20210602111741903" style="zoom:67%;" />

并且不难发现其输出电阻为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602111855507.png" alt="image-20210602111855507" style="zoom:67%;" />

因此我们得到放大器的总体电压增益为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602111954880.png" alt="image-20210602111954880" style="zoom:67%;" />

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602112004738.png" alt="image-20210602112004738" style="zoom:67%;" />

该等式表明，如果 $(β +1)R_L$ 大于或与 $R_{sig}$ 值相当，则总体增益虽然低于 1，但可以接近于 1。 这再次证实了射极跟随器将大部分 $v_{sig}$ 传递给低值负载电阻 $R_L$ 的作用，即使 $R_{sig}$ 可能远大于 $R_L$。 关键是$R_L$在“呈现给源”之前乘以$（β+1）$。 图 7.44(a) 显示了通过简单地将 $r_e$ 和 $R_L$ 反射到基极侧获得的射极跟随器的等效电路。 总电压增益 $G_v ≡v_o/v_{sig}$ 可以通过使用分压器规则直接且非常简单地从该电路确定。结果是方程中已经给出的 $G_v$ 表达式。  (7.133)。

将图 7.44(a) 电路中的所有电阻除以 $β +1$ 不会改变电压比 $v_o/v_{sig}$。 因此，我们获得了另一个等效电路，如图 7.44(b) 所示，可用于确定射极跟随器的 $G_v ≡ v_o/v_{sig}$。 看一眼这个电路就会发现它只是将 $v_{sig}$ 和 $R_{sig}$ 从基极侧反射到发射极侧得到的等效电路。 在这个反射中，$v_{sig}$ 没有变化，但 $R_{sig}$ 除以 $β +1$。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602112400819.png" alt="image-20210602112400819" style="zoom:67%;" />

因此，无论我们是将电阻反射到基极得到7.44（a）还是反射到射级得到7.44（b），我们最终都能得到以下的表达式

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602113101754.png" alt="image-20210602113101754" style="zoom:67%;" />

观察到这个表达式除了分子和分母都除以 $β +1$以外，都与此前的表达式相同。

这个等式有一个有趣的解释：射极跟随器在“将 $R_{sig}$ 呈现给负载电阻 $R_L$”之前将 $R_{sig}$ 减小了因子 $(β+1)$,使其具有相同缓冲效果的阻抗变换。在这一点上，重要的是要注意，虽然射极跟随器不提供电压增益，但它的电流增益为 $β +1$。

Thévenin Representation of the Emitter-Follower Output

通过上面的两幅等效电路图，我们可以得到其戴维南等效电路，这也是其更一般的表示方法，如下图所示

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602113613105.png" alt="image-20210602113613105" style="zoom:67%;" />



这里 $G_{v o}$ 是总开路电压增益，可以通过在图 7.44(b) 的电路中设置 $R_L = ∞$ 来获得，如图 7.45(b) 所示。 结果是$G_{v o} =1$。 输出电阻 $R_{out}$ 与 $R_o$ 不同。 为了确定 $R_{out}$，我们将 $v_{sig}$ 设置为零（而不是将 $v_i$ 设置为零）。 同样，我们可以使用图 7.44(b) 中的等效电路来做到这一点，如图 7.45(c) 所示。 我们看到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602113934833.png" alt="image-20210602113934833" style="zoom:67%;" />

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602113954371.png" alt="image-20210602113954371" style="zoom:67%;" />

最后，我们在图 7.45(d) 中展示了射极跟随器电路及其 $R_{in}$ 和 $R_{out}$。观察到 $R_{in}$ 是通过将 $r_e$ 和 $R_L$ 反射到基侧（通过将它们的值乘以 $β+1$）来确定的。 要确定 $R_{out}$ ，请抓住发射器并在 $v_{sig}$ =0 时向后走（或只是看！）。 您将看到 $r_e$ 与 $R_{sig}$ 串联，因为它在基数中必须除以 $(β +1)$(这个“串联”电路的两部分电流不同）。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602114436821.png" alt="image-20210602114436821" style="zoom:67%;" />

##### 7.3.7 Summary Tables and Comparisons

为了便于参考和进行比较，我们在表 7.4 和 7.5 中分别列出了确定 MOSFET 和 BJT 放大器各种配置的特征参数的公式。 除了在本节中对各种配置的特征和适用领域所做的评论之外，我们还提出以下结论：

1.MOS 放大器提供更高的、理想情况下无限的输入电阻（当然，CG 配置除外）。 与 BJT 放大器相比，这是一个明显的优势。

2.BJT 表现出比 MOSFET 更高的 $g_m$ 值，从而导致更高的增益。

3.对于分立电路放大器——即由印刷电路板 (PCB) 上的分立元件组装而成的放大器——BJT 仍然是首选器件。这是因为分立 BJT 在物理上比分立 MOSFET 更容易处理，更重要的是，商业上可以买到种类繁多的分立 BJT。 本章的其余部分涉及分立电路放大器。

4.集成电路 (IC) 放大器主要使用 MOSFET，尽管 BJT 用于某些特定领域。 第 8 章到第 13 章主要涉及 IC 放大器。

5.CS 和 CE 配置最适合实现放大器所需的大部分增益。 根据所需增益的大小，可以使用单级或两级或三级级联。

6.在 CS 放大器的源极中包含一个电阻 $R_s$（在 CE 放大器的发射极中包含一个电阻 Re）以降低增益为代价提供了许多性能改进。

![image-20210602115313395](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602115313395.png)

7.CG 和 CB 放大器的低输入电阻使其仅在特定应用中有用。 正如我们将在第 10 章中看到的，这两种配置表现出比 CS 和 CE 放大器提供的更好的高频响应。 这使得它们可用作高频放大器，尤其是与 CS 或 CE 电路结合使用时。 我们将在第 8 章研究这样一种组合。

8.源极跟随器（发射极跟随器）用作将高阻源连接到低阻负载的电压缓冲器，以及多级放大器中的输出级，其目的是为放大器配备低阻输出电阻。

##### 7.3.8 When and How to Include the Output Resistance $r_o$

到目前为止，我们一直忽略 MOSFET 和 BJT 的输出电阻 ro。 我们这样做有两个原因：

1.为简单起见，将注意力集中在每个基本配置的重要特征上.

2.因为本章的主要兴趣是分立电路设计，其中电路电阻（例如$R_C$、$R_D$ 和 $R_L$) 通常比 ro 小得多。

然而，在某些情况下，将 $r_o$ 包括在分析中相对容易。 具体来说：

1.在CS和CE放大器中，可以看出晶体管的$r_o$分别与$R_D$和$R_C$并联出现，可以简单地将$R_D$替换为($R_D|| r_o$)和 RC 与 ($R_C|| r_o$)。效果将是增益幅度的降低，可能降低 5% 到 10%。

2.在源极跟随器和射极跟随器中，可以看出晶体管$r_o$与$R_L$并联出现，可以通过将相应公式中的$R_L$替换为$(R_L|| r_o)$来考虑。 因此，这里也考虑到 $r_o$ 的影响是增益的小幅降低。 然而，更重要的是，考虑 $r_o$ 会降低开路电压增益 $A_{v o}$ 从 1 到 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602115910805.png" alt="image-20210602115910805" style="zoom:67%;" />

在某些配置中，将 ro 考虑在内会使分析变得相当复杂。 这些是带有源（发射极）电阻的 CS (CE) 放大器和 CG (CB) 放大器。 幸运的是，对于这些配置的离散实现，忽略 ro 的影响通常很小（可以通过计算机模拟来验证）。

最后，非常重要的一点：在IC放大器的分析和设计中，必须始终考虑$r_o$。 这是因为，正如将在下一章中看到的，所有电路电阻都与 $r_o$ 具有相同的数量级； 因此，忽略 $r_o$ 可能会导致完全错误的结果

### 7.4 Biasing

如第 7.1 节所述，晶体管放大器设计的一个重要步骤是为晶体管建立适当的直流工作点。 这是称为偏置或偏置设计的步骤。 在本节中，我们将研究分立电路放大器中常用的偏置方法。 集成电路放大器的偏置将在第 8 章中研究。

偏置设计旨在在漏极（集电极）中建立一个直流电流，该电流是可预测的，并且对温度变化和相同类型器件之间参数值的巨大变化不敏感。 例如，属于同一制造商零件编号的离散 BJT 可以显示 β 值，范围从 50 到 150。不过一般来讲，我们也允许其集电极直流偏置电流有10%左右的差异。关于直流漏极电流对分立 MOSFET 的 $V_t$ 中遇到的广泛变化的期望不敏感，可以做出类似的陈述。

偏置设计中的第二个考虑是将直流工作点定位在晶体管的有源工作区，以便获得高电压增益，同时允许所需的输出信号摆幅，而无需晶体管随时离开有源区（以避免非线性失真）。 我们在 7.1.7 节讨论了这一点。

尽管我们将分别考虑 MOSFET 和 BJT 放大器的偏置，但结果电路非常相似。 此外，还可以看到良好的偏置设计包含反馈机制，该机制可以使直流偏置点尽可能保持恒定。

为了使事情简单化，从而将注意力集中在重大问题上，我们将忽略厄利效应； 即假设 $λ = 0$ 或 $V_A =∞$。 这在分立电路的初始设计中当然是允许的。 当然，稍后可以借助诸如 SPICE 之类的电路仿真程序对设计进行微调。

##### 7.4.2 The BJT Case

在介绍“好的”偏置方案之前，我们应该指出为什么两个明显的安排不好。 首先，尝试通过固定电压 $V_{BE}$ 来偏置 BJT，例如，在电源 $V_{CC}$ 上使用分压电路，如图 7.51(a) 所示，这不是一种可行的方法：非常尖锐的指数关系 $i_C -  v_{BE}$ 意味着 $V_{BE}$ 与所需值的任何微小且不可避免的差异都会导致 $I_C$ 和 $V_{CE}$ 的巨大差异。 其次，通过在基极中建立恒定电流来偏置 BJT，如图 7.51(b) 所示，其中 $I_B\simeq (V_{CC} -0.7)/R_B$ 也不是推荐的方法。 在这里，相同器件类型的单元之间 $β$ 值的典型大变化将导致 $I_C$ 和 $V_{CE}$ 的相应大变化。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602123010999.png" alt="image-20210602123010999" style="zoom:67%;" />

###### The Classical Discrete-Circuit Bias Arrangement：

图 7.52(a) 显示了在只有一个电源可用的情况下最常用于偏置分立电路晶体管放大器的布置。 该技术包括通过分压器 $R_1$、$R_2$ 向晶体管的基极提供电源电压 $V_{CC}$ 的一小部分。 此外，电阻器$R_E$连接到发射极。 该电路与我们用于 MOSFET 的电路非常相似 [图7.48(c)]。 然而，这里的设计必须考虑到有限的基极电流。图 7.52(b) 显示了相同的电路，其中分压器网络被其 Th´evenin 等效电路取代，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602123237649.png" alt="image-20210602123237649" style="zoom:67%;" />

有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602123349771.png" alt="image-20210602123349771" style="zoom:67%;" />

电流 $I_E$ 可以通过为基极-发射极-接地环路编写基尔霍夫环路方程来确定，该环路标记为 $L$，并代入 $I_B = I_E/(β +1)$：

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602123533283.png" alt="image-20210602123533283" style="zoom:67%;" />

此外我们最好将$β$对集电极电流大小的影响降到最低，因此在设计电路时，我们一般都会取这样的电路参数

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602123659103.png" alt="image-20210602123659103" style="zoom:67%;" />

条件1 确保 $V_{BE}$ (0.7 V) 的微小变化将被更大的 $V_{BB}$ 淡化。 然而，对于 $V_{BB}$ 的大小有一个限制：对于给定的电源电压 $V_{CC}$ 值，我们用于 $V_{BB}$ 的值越高，$R_C$ 和集电极-基极结上的电压总和就越低（$V_{CB}$)(我们不难从电路中看出，要使$V_{BB}$到$V_{CC}$的总体电压降为0，就必须有$V_{BB}+V_{CB}+I_CR_C=V_{CC}$）。 另一方面，我们希望 $R_C$ 两端的电压大，以获得高电压增益和大信号摆幅（在晶体管截止之前）。 我们还希望 $V_{CB}$（或 $V_{CE}$）大，以提供大的信号摆幅（在晶体管饱和之前）。

因此，与任何设计的情况一样，我们有一组相互冲突的需求，解决方案必须是一种权衡。 根据经验，一个较合理的设计的 $V_{BB}$ 约为 $1 /3V_{CC}$，$V_{CB}$（或 $V_{CE}$）约为 $1/ 3V_{CC}$，$I_C R_C$ 约为 $1/ 3V_{CC}$。

条件2使 $I_E$ 对 $β$ 的变化不敏感，这可以通过选择小 $R_B$ 来满足。 这反过来又是通过对 $R_1$ 和 $R_2$ 使用低值来实现的。 然而，$R_1$ 和 $R_2$ 的较低值将意味着从电源中消耗更高的电流，并且会导致放大器的输入电阻降低（如果输入信号耦合到基极），这是设计这一部分涉及的权衡。应该注意的是，条件2意味着我们要使基极电压与 $β$ 的值无关，并且仅由分压器决定。 如果分压器中的电流比基极电流大得多，这显然会得到满足。 通常选择 $R_1$ 和 $R_2$ 使其电流在 $I_E$ 到 $0.1I_E$ 的范围内。

进一步了解图 7.52(a) 的偏置布置以稳定直流发射极（以及集电极）电流的机制的关键在于考虑由电阻$R_E$所带来的反馈机制。考虑到由于某种原因发射极电流增加。  $R_E$ 两端的电压降会变大，因此 $V_E$将相应增加。 现在，如果基极电压主要由分压器 $R_1、R_2$ 决定，如果 $R_B$ 很小，则它会保持不变，而 $V_E$ 的增加将导致 $V_{BE}$ 相应降低。 这反过来又降低了集电极（和发射极）电流，这与最初假设的变化相反。

因此，$R_E$ 提供了稳定偏置电流的负反馈作用。 这应该提醒读者我们在第 7.3.4 节中包含在 CE 放大器的发射极引线中的电阻 $R_e$的作用也是类似的。 此外，图 7.52(a) 电路中 $R_E$ 的反馈作用类似于图 7.48(c) 电路中 $R_S$ 的反馈作用。 我们将在第 11 章正式研究负反馈。

###### A Two-Power-Supply Version of the Classical Bias Arrangement：

如图7.53所示，如果有两个电源可用，则可以有更简单的偏置布置。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602144751049.png" alt="image-20210602144751049" style="zoom:67%;" />

为标记为$L$的回路编写回路方程

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602145101180.png" alt="image-20210602145101180" style="zoom:67%;" />

该方程与式（7.143）相同，但以$V_{EE}$代替$V_{BB}$。因此，等式的两个约束条件1和2在此也适用。注意，如果晶体管要与基极接地一起使用（即，在共基极配置中），那么$R_B$可以完全消除。另一方面，如果输入信号要耦合到基极，则需要$R_B$。我们将在第7.5节中研究各种BJT放大器配置的完整电路。

###### Biasing Using a Collector-to-Base Feedback Resistor

图7.54（a）显示了这样一种简单但有效的偏置布置，适用于共射放大器。该电路采用连接在集电极和基极之间的电阻$R_B$来提供负反馈，有助于稳定BJT的偏置点。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602145934896.png" alt="image-20210602145934896" style="zoom:67%;" />

不难得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602150105179.png" alt="image-20210602150105179" style="zoom:67%;" />

因此其射级偏置电流为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602150131674.png" alt="image-20210602150131674" style="zoom:67%;" />

值得注意的是，这个公式与等式（7.143）相同，后者控制着传统偏置电路的操作，只是$V_{CC}$取代了$V_{BB}$，$R_C$取代了$R_E$。因此，要获得对温度变化不敏感的$I_E$值, 我们选择$R_B/(β +1)<<R_C$。但是，请注意，$R_B$的值决定了采集器处允许的负信号摆幅，因为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602150430705.png" alt="image-20210602150430705" style="zoom:67%;" />

### 7.5 Discrete-Circuit Amplifiers

随着我们对晶体管放大器基础知识的学习完成，我们现在通过介绍分立电路放大器的实用电路，把所有的东西放在一起。这些电路利用第7.3节中研究的放大器配置和第7.4节中的偏置方法，可以使用现成的分立晶体管、电阻器和电容器进行组装。虽然本节介绍的电路实用且经过精心挑选，以说明一些要点，但应将其视为分立电路晶体管放大器的示例。事实上，这样的电路有很多种，在本章的最后，我们将探讨其中的一些电路。

如前所述，绝大多数的分立电路放大器都使用BJT。这反映在本节中，除一个电路外，所有电路都使用BJT。当然，如果需要的话，可以在这里介绍的相同放大器配置中使用场效应管。此外，MOSFET是集成电路（IC）放大器设计中的首选器件。我们从第八章开始研究集成电路放大器。

很快就会看到，本节中介绍的电路使用大电容器（在$μF$范围）将信号源耦合到放大器的输入端，并将放大器输出信号耦合到负载电阻或另一个放大器级的输入端。同样，采用大电容器在晶体管的期望端子（例如，在CE放大器的发射极处）建立信号接地。为这些目的使用电容器大大简化了设计：由于电容器阻挡直流电，人们能够首先进行直流偏压设计，然后将信号源和负载连接到放大器而不干扰直流电设计。这些放大器因此被称为电容耦合放大器

##### 7.5.2 A Common-Emitter Amplifier

共发射极 (CE) 放大器是所有 BJT 放大器配置中使用最广泛的。 图 7.56(a) 显示了使用7.48(c) 的经典偏置布置的 CE 放大器，其设计参数已在第 7.4 节中考虑。 图 7.54(a) 中的 CE 电路是图 7.55(a) 中 CS 放大器的 BJT 对应电路。 它使用耦合电容 $C_{C1}$ 和 $C_{C2}$ 以及旁路电容 $C_E$。 在这里，我们假设这些电容器在阻止直流的同时，在所有感兴趣的信号频率下都表现为完美的短路。

为了确定CE放大器的特性参数，我们用它的Hybrid-π模型代替BJT，用对地短路代替$V_{CC}$，用短路代替耦合和旁路电容。  CE放大器的小信号等效电路如图7.56(b)所示

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602151119757.png" alt="image-20210602151119757" style="zoom:67%;" />



<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602151134079.png" alt="image-20210602151134079" style="zoom:67%;" />

对于上图的电路，计算方法与之前如出一辙

首先我们计算输入电阻，不难得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602153201360.png" alt="image-20210602153201360" style="zoom:67%;" />

这表明为了保持 $R_{in}$ 相对较高，$R_{B1}$ 和 $R_{B2}$ 应该选择较大的数值（通常在几十或几百千欧的范围内）。 该要求与将 $R_{B1}$ 和 $R_{B2}$ 保持在低电平以最小化直流电流 $I_C$ 对晶体管 $β$ 的依赖性的需要相冲突。 我们在 7.4 节讨论了这种设计权衡。

电压增益 $G_v$ 由下式给出 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602153346043.png" alt="image-20210602153346043" style="zoom:67%;" />

##### 7.5.3 A Common-Emitter Amplifier with an Emitter Resistance $R_e$

如第 7.3.4 节所述，在晶体管发射极引线中包含一个小电阻是有益的。 这可以在图 7.56(a) 的电路中实现，方法是将发射极偏置电阻 $R_E$ 分成两个分量：未连接旁路的电阻 $R_e$ 和连接旁路电容器 $C_E$ 的电阻 $(R_E -R_e)$。 结果电路如图 7.57(a) 所示，其小信号模型如图 7.57(b) 所示。 在后者中，我们使用 BJT 的 T 模型，因为它会导致更简单的分析（回想一下，当电阻与发射极串联时，情况总是如此）。 另请注意，我们没有包括 $r_o$，因为这样做会使分析显着复杂化。 考虑到 $r_o$ 对分立电路放大器的性能影响很小，这种负担是不合理的。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602153656109.png" alt="image-20210602153656109" style="zoom:67%;" />

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602153711514.png" alt="image-20210602153711514" style="zoom:67%;" />

首先计算输入电阻

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602153850330.png" alt="image-20210602153850330" style="zoom:67%;" />

从中我们注意到，在电路中包含 $R_e$ 会增加 $R_{in}$，因为它通过向 $r_π$ 添加分量 $(β + 1)R_e$ 来增加看向基极的输入电阻。 总电压增益 $G_v$ 为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602154007933.png" alt="image-20210602154007933" style="zoom:67%;" />

##### 7.5.4 A Common-Base (CB) Amplifier

图 7.58(a) 显示了使用图 7.53 的偏置装置设计的 CB 放大器。请注意，$V_{CC}$ 和 $-V_{EE}$ 两个电源的可用性使我们能够将基极直接接地，从而无需使用大型旁路电容器在基极建立信号接地。

CB 放大器的小信号等效电路如图 7.58(b) 所示。 正如预期的那样，我们使用了 BJT 的 T 模型并且没有包括 $r_o$。 在分立电路放大器的情况下，包括 $r_o$ 会使分析显着复杂化，而不会对结果产生太大影响。 从图 7.58(b) 中的电路我们发现

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602154157680.png" alt="image-20210602154157680" style="zoom:67%;" />

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602154236368.png" alt="image-20210602154236368" style="zoom:67%;" />

因此其输入电阻为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602154610807.png" alt="image-20210602154610807" style="zoom:67%;" />

从而三极管的输入电压不难得到，为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602154652346.png" alt="image-20210602154652346" style="zoom:67%;" />

因此发射极电流大小为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602154724324.png" alt="image-20210602154724324" style="zoom:67%;" />

而输出电阻为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602154749311.png" alt="image-20210602154749311" style="zoom:67%;" />

因此我们可以得到总体电压增益为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602154815439.png" alt="image-20210602154815439" style="zoom:67%;" />

##### 7.5.5 An Emitter Follower

图 7.59(a) 显示了使用图 7.53 的偏置布置和两个电源 $V_{CC}$ 和 -$V_{EE}$ 设计的射极跟随器。 偏置电阻 $R_B$ 影响跟随器的输入电阻，应选择尽可能大的值，同时将其两端的直流电压降限制为 $V_{EE}$ 的一小部分； 否则偏置电流 $I_C$ 对 $β$ 的依赖性会变得不可接受。

图 7.59(b) 显示了射极跟随器的小信号等效电路。 在这里，正如预期的那样，我们用其 T 模型替换了 BJT 并包含了 $r_o$（因为这可以非常简单地完成）。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602155017186.png" alt="image-20210602155017186" style="zoom:67%;" />

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602155031867.png" alt="image-20210602155031867" style="zoom:67%;" />

可以看到输入电阻为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602155315680.png" alt="image-20210602155315680" style="zoom:67%;" />

其中 $R_{ib}$ 是从基极看的输入电阻，可以通过使用电阻-反射规则获得。 为此，请注意 $r_o$ 与 $R_E$ 和 $R_L$ 并行出现（这就是为什么它很容易被考虑在内）。 因此，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602155443810.png" alt="image-20210602155443810" style="zoom:67%;" />

总电压增益可以通过跟踪从源到负载的信号传输来确定，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602155604193.png" alt="image-20210602155604193" style="zoom:67%;" />

最后，输出电阻 $R_{out}$ 可以通过将 $v_{sig}$ 短路并回看输出端得到，不包括 $R_L$，为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210602155746397.png" alt="image-20210602155746397" style="zoom:67%;" />

在研究了 MOSFET 和 BJT 并熟悉了它们的基本电路应用之后，我们现在准备考虑它们在可以以集成电路 (IC) 形式制造的实际放大器电路的设计中的应用。 第二部分专门讨论这个丰富的主题。 它的六章构成了对 IC 放大器设计的连贯处理，因此可以作为电子电路的第二门课程。

从简要介绍 IC 设计原理开始，第 8 章介绍了 IC 放大器设计中使用的基本电路构建块。 然而，最重要的构建块，差分对配置，推迟到第 9 章，它是主要主题。 第 9 章还考虑了需要多个级联级的放大器的设计。

正如第一部分中的不同点所提到的，放大器的带宽是有限的。 第 10 章专门讨论放大器的频率响应分析； 它全面研究了限制带宽的机制以及用于估计各种放大器电路配置的工具和方法。 虽然第 10 章前半部分的学习是必不可少的，但其中一些后面的部分可以推迟到课程的稍后部分，甚至可以推迟到后续课程中。

放大器设计中的一个重要工具是明智地使用反馈。 第 11 章处理这个极其重要的主题。 对反馈概念的透彻理解、对反馈配置的洞察以及对反馈分析方法使用的熟练程度对于认真的电路设计人员来说是无价的。

在第 12 章中，我们从主要处理小信号放大器转向研究那些需要处理大信号和大功率的放大器。

最后，第 13 章将第二部分的所有主题集中在一个重要应用中：即运算放大器电路的设计。 然后，我们将回到原点，从在第 2 章中将运算放大器视为一个黑匣子，到在第 13 章中理解盒子内部的内容。

在第二部分中，MOSFET 和 BJT 电路并列处理。 由于当今超过 90% 的 IC 采用 MOSFET，因此首先介绍其电路。 尽管如此，BJT 电路的呈现深度相同，但有时会更简短一些。

在这方面，我们提请读者注意附录 G（在网站上），它提供了两种类型晶体管特性的宝贵汇编，可以进行有趣的比较。 此外，附录 K 中提供了许多 CMOS 和双极制造工艺技术的典型器件参数值

## CHAPTER 8 Building Blocks of Integrated-Circuit Amplifiers

研究了两种主要晶体管类型 MOSFET 和 BJT 及其基本分立电路放大器配置后，我们现在准备开始研究集成电路 (IC) 放大器。 本章专门介绍 IC 放大器的基本构建块的设计。

我们首先简要介绍集成电路的设计理念以及它与分立电路的设计理念有何不同。 接下来是第 8.2 节中 IC 偏置的研究，重点介绍了电流源和电流镜的设计。 电流镜是模拟集成电路最重要的构建块之一。 更高级的镜像电路在第 8.6 节中介绍。

本章的核心是第 8.3 至 8.5 节中的材料。 在第 8.3 节中，我们介绍了 IC 放大器的基本增益单元，即电流源负载共源（共发射极）放大器。之后我们为了确定如何提升其增益，我们发现了使用电流放大器的必要性。能够实现电流缓冲器的两种放大器配置，即共栅极放大器和共基极放大器，在第 8.4 节中进行了研究。 这项研究与第 7 章中的研究不同，因为它包括了晶体管的 $r_o$，在集成电路中必须始终如此。 对 CG 和 CB 的研究自然而然地引出了共源共栅原理及其在放大器设计中的应用：即共源共栅放大器和共源共栅电流源，它们是 IC 放大器非常重要的构建块。

本章最后在第 8.7 节中介绍了一组有趣且有用的放大器配置，每个配置都使用一对晶体管。 在本章中，MOS 和双极电路并排呈现，这使得呈现方式具有一定的经济性，更重要的是，提供了比较和对比两种电路类型的机会。

### 8.1 IC Design Philosophy

集成电路制造技术（附录 A）对电路设计者施加了限制并为其提供了机会。 为了应对限制和利用机遇，IC 设计人员多年来发明（现在仍然在继续发明）了许多巧妙的技术，并且出现了独特的集成电路设计理念。 在下文中，我们简要总结了 IC 设计理念的重要约束以及主要特征。
      1. 电阻器： 为了最小化芯片面积，应避免使用大甚至中等尺寸的电阻器。 同样，出于经济考虑，不鼓励使用精确值的电阻器。 另一方面，晶体管可以做得小而便宜，并且鼓励设计人员尽可能优先使用晶体管而不是电阻器。结果，在分立电路放大器设计中流行的经典偏置布置在 IC 放大器中被摒弃，转而使用在有源模式下工作的晶体管实现的**恒流源**进行偏置。 同样，放大器中的集电极和漏极电阻被具有**更高增量电阻的恒流源**取代，从而提供更大的增益。
      2. 电容器: 芯片面积的考虑也使得无法制造大容量电容器，例如用于分立电路放大器中的信号耦合和旁路的电容器。 因此，IC 放大器都是**直接耦合**的，并且使用了巧妙的技术，我们将在本章和下一章中进行研究。皮法和几分之一皮法范围内的小尺寸电容器很容易用 IC MOS 技术制造。 此类电容器可与 MOS 放大器和 MOS 开关组合以实现各种信号处理功能，包括模拟（第 17 章）和数字（第 15 章）。
      3. 电源 :为了将大量器件封装在同一个IC芯片上，从而降低系统成本并提高可靠性，减小器件尺寸的趋势一直存在。  （有关摩尔定律和器件缩放的讨论，请参见第 14.5 节。）到 2014 年，能够生产具有 14 纳米通道长度的器件的 CMOS 工艺技术已投入使用。 为避免破坏这些器件中使用的薄氧化层（小于 1 nm），电源电压限制在 1 V 左右。 低电源电压有助于解决另一个主要的设计挑战； 即，将芯片中的功耗保持在可接受的范围内。 然而，使用如此低的直流电源电压给电路设计人员带来了许多挑战。例如在场效应管电路中，晶体管必须在仅 0.1 V 至 0.2 V 的过驱动电压下工作。 在我们对 MOS 放大器的研究中，我们会经常对此类问题发表评论

4. 设备种类： 与分立电路的设计者受限于可用的现成晶体管不同，IC 设计者可以自由地指定器件尺寸并利用具有指定比率的尺寸的器件匹配和器件阵列。 例如，可以利用一组双极晶体管，其发射极-基极-结区域具有二进制加权比。  CMOS 技术提供了更大的灵活性，选择了 MOS 晶体管的 W 和 L 值以适应非常广泛的设计要求。
5. 双极技术。： BJT 仍在特殊模拟应用中使用，例如用于组装在印刷电路 (PC) 板上的高质量通用运算放大器封装（而不是作为片上系统的一部分）  . 双极电路也可以通过所谓的 BiCMOS 技术以创新和令人兴奋的方式与 CMOS 电路相结合。
6. CMOS 技术：目前绝大多数模拟集成电路都是采用CMOS技术设计的。 这种做法最初是出于与数字电路兼容的需要，数字电路已成为主要的 CMOS。 然而，现在，CMOS 为模拟设计师提供的丰富性和多功能性是其主导地位的更强有力的原因。 我们希望读者会在第 8 章和第 9 章中认识到这一点。

### 8.2 IC Biasing—Current Sources, Current Mirrors, and Current-Steering Circuits

集成电路设计中的偏置基于恒流源的使用。 在具有多个放大器级的 IC 芯片上，在一个位置生成恒定的直流电流（称为参考电流），然后在其他各个位置复制，通过称为电流控制的过程为各个放大器级提供偏置。这种方法的优点是可以生成可预测且稳定的参考电流。该装置通常使用芯片外部的精密电阻或芯片上的特殊电路，不需要对每个放大器级重复。 此外，在电源电压或温度发生变化的情况下，各个级的偏置电流会相互跟踪。

在本节中，我们将研究 IC 放大器偏置设计中采用的电路构建块和技术。 这些电流源电路也用作放大器负载元件，如第 8.3 和 8.4 节所述。

##### 8.2.3 BJT Circuits

基本的 BJT 电流镜如图 8.7 所示。 它的工作方式与 MOS 镜非常相似。 但是，有两个重要的区别：首先，BJT 的非零基极电流（或等效地，有限的 $β$）会导致双极镜的电流传输比出现误差。 其次，电流传输比由 $Q_1$ 和 $Q_2$ 的发射极-基极结的相对面积决定。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603105929667.png" alt="image-20210603105929667" style="zoom:67%;" />

让我们首先考虑 $β$ 足够高以至于我们可以忽略基极电流的情况。 参考电流 $I_{REF}$ 通过二极管连接的晶体管 $Q_1$，从而建立相应的电压 $V_{BE}$，该电压又施加在 $Q_2$ 的基极和发射极之间。 现在，如果 $Q_2$ 与 $Q_1$ 匹配，或者更具体地说，如果 $Q_2$ 的 EBJ 面积与 $Q_1$ 相同，因此 $Q_2$ 具有与 $Q_1$ 相同的标度电流 IS，那么 $Q_2$ 的集电极电流将等于$Q_1$,即

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603110117311.png" alt="image-20210603110117311" style="zoom:67%;" />

然而，要实现这一点，$Q_2$ 必须工作在有源模式下，只要集电极电压 VO 比发射极电压高 0.3 V 左右，就可以实现。

为了获得除 1 以外的电流传输比，例如 $m$，我们只需将 $Q_2$ 的 EBJ 的面积安排为 $Q_1$ 的 $m$ 倍。 在这种情况下， 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603110310797.png" alt="image-20210603110310797" style="zoom:67%;" />

通常，电流传输比由下式给出

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603110345138.png" alt="image-20210603110345138" style="zoom:67%;" />

或者，如果面积比为整数，则可以将 $Q_2$等效为 $m$ 个与$Q_1$匹配且并联连接的晶体管。

接下来我们考虑有限晶体管β对电流传输比的影响。 图 8.8 说明了对电流传输比名义上为 1 的情况（即 $Q_2$与 $Q_1$ 匹配的情况）的分析。 这里的关键是，由于 $Q_1$ 和 $Q_2$匹配且具有相同的 VBE，因此它们的集电极电流将相等。 其余的分析很简单。  $Q_1$ 集电极处的节点方程产生

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603110615019.png" alt="image-20210603110615019" style="zoom:67%;" />

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603110643863.png" alt="image-20210603110643863" style="zoom:67%;" />

因此其电流传输比大小为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603110814610.png" alt="image-20210603110814610" style="zoom:67%;" />

请注意，随着 $β$ 接近$∞$，IO /IREF 接近统一的标称值。 然而，对于典型的 $β$ 值，电流传输比的误差可能很大。 例如，$β = 100$ 导致电流传输率有 2% 的误差。 此外，随着额定电流传输比的增加，由有限 β 引起的误差也会增加。 不难证明，对于具有标称电流传输比 $m$（即 $I_{S2} = mI_{S1}$ 的反射镜）的实际电流传输比由下式给出

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603110935353.png" alt="image-20210603110935353" style="zoom:67%;" />

与 MOS 电流镜一样，BJT 镜具有有限的输出电阻 $R_o$，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603111620564.png" alt="image-20210603111620564" style="zoom:67%;" />

其中 $V_{A2}$ 和 $r_{o2}$ 分别是 $Q_2$的厄利电压和输出电阻。 因此，即使我们忽略由有限 $β$ 引起的误差，仅当 $Q_2$具有与 $Q_1$ 相同的 $V_{CE}$，即 $V_O = V_{BE}$ 时，输出电流 $I_O$ 才会处于其标称值。 随着$V_O$增加，$I_O$也会相应增加。 考虑到有限$β$和有限$R_o$，我们可以将标称电流传输比为$m$的BJT镜的输出电流表示为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603111815369.png" alt="image-20210603111815369" style="zoom:67%;" />

注：回路的判定：我们判定一个复杂电路的回路如何，一般是以接地作为分界线

A Simple Current Source

以与 MOS 情况类似的方式，基本 BJT 电流镜可用于实现简单的电流源

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603112555018.png" alt="image-20210603112555018" style="zoom:67%;" />

如图 8.9 所示。 这里的参考电流是

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603112642583.png" alt="image-20210603112642583" style="zoom:67%;" />

其中 $V_{BE}$ 是对应于所需 $I_{REF}$ 值的基极-发射极电压。 输出电流 $I_O$ 由下式给出

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603112740385.png" alt="image-20210603112740385" style="zoom:67%;" />

其输出电阻是$Q_2$的输出电阻$r_o$

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603113113991.png" alt="image-20210603113113991" style="zoom:67%;" />

Current Steering

为了为 IC 中的不同放大器级生成偏置电流，可以在双极情况下应用为 MOS 电路描述的电流控制方法。例如，考虑图 8.10 所示的电路。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603113431854.png" alt="image-20210603113431854" style="zoom:67%;" />

直流参考电流 $I_{REF}$ 在由二极管接法晶体管 $Q_1$、电阻器 $R$ 和二极管接法晶体管 $Q_2$ 组成的支路中产生： 

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603113706632.png" alt="image-20210603113706632" style="zoom:67%;" />

现在，为简单起见，假设所有晶体管都具有高 $β$，因此基极电流小到可以忽略不计。 我们还将忽略厄利效应。 二极管接法的三极管$Q_1$与$Q_3$形成电流镜； 因此 $Q_3$ 将提供一个等于 $I_{REF}$ 的恒定电流 $I_1$。

只要集电极上产生的电压不超过 ($V_{CC} -0.3 V$)，晶体管 $Q_3$ 就可以向任何负载提供此电流； 否则 $Q_3$ 将进入饱和区。

为了产生两倍于 $I_{REF}$ 值的直流电流，两个晶体管 $Q_5$ 和 $Q_6$（每个都与 $Q_1$ 匹配）并联连接，该组合与 $Q_1$ 形成一个镜像。 因此 $I_3 = 2I_{REF}$。 请注意，$Q_5$ 和 $Q_6$ 的并联组合相当于一个 EBJ 面积是 $Q_1$ 面积两倍的晶体管，这正是该电路以 IC 形式制造时所做的。

三极管$Q_4$与$Q_2$形成镜像； 因此 $Q_4$ 提供等于 $I_{REF}$ 的恒定电流 $I_2$。请注意，虽然 $Q_3$ 将其电流提供给电压不应超过 ($V_{CC} -0.3 V$) 的电路部分，但 $Q_4$ 从电压不应低于 ($-V_{EE} +0.3 V$) 的电路部分汲取电流。 最后，为了产生三倍于 $I_{REF}$ 的电流，三个晶体管 $Q_7$、$Q_8$ 和 $Q_9$（每个都与 $Q_2$ 匹配）并联连接，并且该组合与 $Q_2$ 形成镜像配置。 同样，在 IC 实现中，$Q_7$、$Q_8$ 和 $Q_9$ 将替换为结面积是 $Q_2$ 的三倍的晶体管。

A Bipolar Mirror with Base-Current Compensation

图 8.11 显示了双极电流镜，其电流传输比对 $β$ 的依赖性比简单电流镜要小得多。 减少对 $β$ 的依赖是通过包括晶体管 $Q_3$ 实现的，其发射极提供 $Q_1$ 和 $Q_2$ 的基极电流。 然后将基极电流之和除以 $(β_3 +1)$，从而导致必须由 $I_{REF}$ 提供的误差电流小得多。 详细分析见电路图； 它基于 $Q_1$ 和 $Q_2$ 匹配并因此具有相等的集电极电流 $I_C$ 的假设。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603115516055.png" alt="image-20210603115516055" style="zoom:67%;" />

 标记为 x 的节点处的节点方程给出

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603115542276.png" alt="image-20210603115542276" style="zoom:67%;" />

因为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603115605163.png" alt="image-20210603115605163" style="zoom:67%;" />

因此其电流传输比将

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603115640733.png" alt="image-20210603115640733" style="zoom:67%;" />

这意味着有限 $β$ 引起的误差已从简单镜像中的 $2/β$ 减少到 $2/β ^2$，这是一个巨大的改进。 然而不幸的是，输出电阻仍然大约等于简单反射镜的电阻，即 $r_o$。 最后，请注意，如果参考电流 $I_{REF}$ 不可用，我们只需通过电阻 $R$ 将节点 $x$ 连接到电源 $V_{CC}$。结果是参考电流由下式给出

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603115924435.png" alt="image-20210603115924435" style="zoom:67%;" />

##### 8.2.4 Small-Signal Operation of Current Mirrors

除了用于偏置之外，电流镜有时还用作电流放大器。 因此，导出电流镜的小信号参数 $R_{in}$、$A_{is}$ 和 $R_o$ 很有用。

图 8.12(a) 显示了一个用直流输入电流 $I_{D1}$ 偏置并用小信号输入电流 $i_i$ 馈电的 MOS 电流镜。 请注意，$V_{GS}$ 和 $I_{D2}$ 是产生的直流量，而 $v_{gs}$ 和 $i_o$ 是信号量。 虽然我们没有展示输出端所连接的电路，但我们假设 $Q_2$ 的漏极电压超过了保持 $Q_2$ 饱和所需的最小值。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603121340720.png" alt="image-20210603121340720" style="zoom:67%;" />

用小信号模型替换 $Q_1$ 和 $Q_2$ 会产生图 8.12(b) 中的电路。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603121520577.png" alt="image-20210603121520577" style="zoom:67%;" />

观察到受控电流源 $g_{m1} v_{gs}$ 出现在其控制电压 $v_{gs}$ 上，因此可以用电阻 $1/g_{m1}$ 代替，如图 8.12(c) 所示。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603121736299.png" alt="image-20210603121736299" style="zoom:67%;" />

 对于后一个电路，我们可以得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603121753908.png" alt="image-20210603121753908" style="zoom:67%;" />

因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603122002162.png" alt="image-20210603122002162" style="zoom:67%;" />

代入 $g_{m1,2} = μ_nC_{ox}(W/L)_{1,2}V_{OV}$ ，其中 $V_{OV}$ 是 $Q_1$ 和 $Q_2$ 工作时的过驱动电压，产生短路电流增益

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603122140447.png" alt="image-20210603122140447" style="zoom:67%;" />

它等于直流或大信号电流传递函数——清楚地表明电流镜具有出色的线性度。我们得出结论，电流镜是一种出色的电流放大器：它具有相对较低的输入电阻 ($1/g_{m1}$)，相对较高的输出电阻 ($r_{o2}$)，最后，可以使用类似的开发来获得双极镜的小信号参数。

### 8.3 The Basic Gain Cell

##### 8.3.1 The CS and CE Amplifiers with Current-Source Loads

IC 放大器中的基本增益单元是负载恒流源的共源 (CS) 或共发射极 (CE) 晶体管，如图 8.13(a) 和 (b) 所示。 这些电路类似于第 7.3 节中研究的 CS 和 CE 放大器，不同之处在于我们用恒流源替换了电阻 RD 和 RC。 这样做有两个原因：首先，如第 8.1 节所述，IC 技术很难实现具有合理精确值的电阻； 相反，使用使用晶体管实现的电流源要容易得多。 其次，通过使用恒流源，我们实际上以非常高（理想情况下为无限大）负载电阻操作 CS 和 CE 放大器； 因此，与使用有限 RD 或 RC 相比，我们可以获得更高的增益。 情况尤其如此，因为即使有无源电阻可用，它们的值也会非常小，因为直流电源现在仅限于 1 V 至 2 V。但是，这些电压确实允许使用具有以下特性的电流源输出电阻大。 图 8.13(a) 和 (b) 中的电路被称为电流源负载或有源负载。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603123949045.png" alt="image-20210603123949045" style="zoom:67%;" />

在我们考虑有源负载 CS 和 CE 放大器的小信号分析之前，有必要先介绍一下它们的直流偏置。 显然，在每个电路中，$Q_1$ 在 $I_D = I$ 和 $I_C = I$ 处偏置。 但是是什么决定了漏极（集电极）和栅极（基极）的直流电压呢？ 通常，这些增益单元将是较大电路的一部分，其中利用负反馈来固定 $V_{DS}$ 和 $V_{GS}$（$V_{CE}$ 和 $V_{BE}$）的值。 在下一章中，我们将开始看到完整的 IC 放大器，包括其偏置电路，就现在而言，我们暂时假设他们都是被偏置在active mode下的

电流源负载的 CS 和 CE 放大器的小信号分析可以利用它们的等效电路模型进行，分别如图 8.13（c）和（d）所示。请注意，由于假定电流源负载是理想的，因此它在模型中表示成一个阻值无穷大的电阻。 正如我们在上一节中看到的，实际的电流源具有有限的输出电阻。 但是，请注意，图 8.13 中的 CS 和 CE 放大器实际上以开路方式运行。 它们的输出节点和地之间的唯一电阻是晶体管本身的输出电阻 $r_o$。因此，在这些电路中获得的电压增益对于 CS 或 CE 放大器来说是最大可能的。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603124428622.png" alt="image-20210603124428622" style="zoom:67%;" />

从图 8.13（d）我们得到有源负载的 CE 放大器：

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603125759937.png" alt="image-20210603125759937" style="zoom:67%;" />

##### 8.3.2 The Intrinsic Gain(本征收益)

对于 BJT，我们可以使用以下 $g_m$ 和 $r_o$ 公式推导出固有增益 $A_0 = g_mr_o$ 的公式：

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603125904280.png" alt="image-20210603125904280" style="zoom:67%;" />

由此得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603125935575.png" alt="image-20210603125935575" style="zoom:67%;" />

因此，$A_0$ 只是厄利电压 $V_A$ 的比值，它是技术决定的参数，热电压 $V_T$ 是物理参数（室温下约为 0.025 V）。  $V_A$ 的值范围从现代 IC 制造工艺的 5 V 至 35 V 到较旧的所谓高压工艺的 100 V 至 130 V（参见附录 G）。因此，$A_0$ 的值将在 200 V/V 到 5000 V/V 的范围内，具有现代小特征尺寸设备的较低值特征。 需要注意的是，对于给定的双极晶体管制造工艺，$A_0$ 与晶体管结面积及其偏置电流无关。 

##### 8.3.3 Effect of the Output Resistance of the Current-Source Load

共源放大器的实际电路实现如图 8.16(a) 所示。 此处，电流源晶体管 $Q_2$ 是由 $Q_2$ 和 $Q_3$ 形成的电流镜的输出晶体管，并提供参考电流 $I_{REF}$。 在第 8.1 节中研究了该电流源的 NMOS 版本。 假设 $Q_2$ 和 $Q_3$ 匹配。 为了能够清楚地看到电路作为几乎线性放大器工作的 $v_I$ 区域，请确定电压传输特性 (VTC)，即 $v_O$ 与 $v_I$ 的关系。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603131146128.png" alt="image-20210603131146128" style="zoom:67%;" />

首先，我们关注电流镜，目的是确定电流源 $Q_2$ 的 $i-v$ 特性。 为此，我们注意到电流 $I_{REF}$ 流经二极管连接的晶体管 $Q_3$，从而决定 $Q_3$ 的 $V_{SG}$，而 $V_{SG}$ 又施加在 $Q_2$ 的源极和栅极之间。 因此，电流源 $Q_2$ 的 $i$-$v$ 特性将是 $Q_2$ 的 $i_D-v_{SD}$ 特性曲线。 如图 8.16(b) 所示，我们注意到 $i$ 将仅在一点上等于 $I_{REF}$，即在 $v_{SD2} = V_{SG}$ 时，这是两个匹配的晶体管 $Q_2$ 和 $Q_3$ 具有相同工作状态的唯一点。 我们还观察了 $Q_2$ 中通道长度调制的影响（厄利效应），它由有限输出电阻 $r_{o2}$ 建模

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603131520386.png" alt="image-20210603131520386" style="zoom:67%;" />

这又是在 $v_O ≤ V_{DD} − V_{OV2}$ 时获得的。 这是输出电压 $v_O$ 的最大允许值。

现在，掌握了电流源负载 $Q_2$ 的 $i-v$ 特性，我们可以继续确定 $v_O$ 与 $v_I$ 的关系。 图 8.16(c) 显示了执行此操作的图形结构。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603150230736.png" alt="image-20210603150230736" style="zoom:67%;" />

它基于第 7.1.6 节中使用的图形分析方法，不同之处在于这里的负载线不是一条直线，而是 $Q_2$ 的 i-v 特性曲线沿 $v_O$ 轴偏移 $V_{DD}$ 伏特并“翻转”。 这样做的原因是

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603150303507.png" alt="image-20210603150303507" style="zoom:67%;" />

$V_{DD}$ 需要移位，而 $v$ 的负号会引起负载曲线的“翻转”。

图 8.16(c) 的图形结构可用于逐点确定每个 $v_I$ 值的 $v_O$： $v_I$ 的值决定了工作点所在的 $Q_1$ 的特定特性曲线。工作点将位于此特定图形和负载曲线的交点处。 然后工作点的水平坐标给出了 $v_O$ 的值。按照刚才解释的方式进行，我们得到图 8.16(d) 所示的 VTC。

![image-20210603150530502](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603150530502.png)

如图所示，它有四个不同的部分，分别标记为 I、II、III 和 IV。 每个段是针对 Q1 和 $Q_2$ 的四种操作模式组合中的一种获得的，图中也指出了这些组合。 请注意，我们在图 8.16（c）中标记了与交点（A 和 B）相对应的传递特性曲线（A 和 B）上的两个重要断点。 我们敦促读者仔细研究传输特性及其各种细节。

毫不奇怪，第 III 段是放大器操作感兴趣的部分。 观察到在区域 III 中，转移曲线几乎是线性的并且非常陡峭，表明电压增益很大。 在区域III中，放大晶体管Q1和负载晶体管$Q_2$都工作在饱和状态。 区域 III 的端点是 A 和 B：在 A 处，由 vO = VDD − VOV2 定义，Q 2 进入三极管区，在 B 处，由 vO = vI − Vtn 定义，Q1 进入三极管区 . 当放大器偏置在区域 III 中的某个点时，小信号电压增益可以按照我们在图 8.15(c) 中所做的来确定。 问题仍然是我们将如何保证 vI 的直流分量将具有这样的值，从而导致在区域 III 中运行。 这就是为什么需要整体负反馈的原因，稍后将说明。

在离开这个例子之前，重申一下放大器区域的上限（即 A 点）由 VOA =VDD − VOV2 定义，而下限（即 B 点）由 VOB = 定义 VOV1，其中 VOV1 可以通过假设 ID1 IREF 来近似确定。 通过考虑 Q1 和 $Q_2$ 中的早期效应，可以获得更精确的 VOB 值，这将在下一个示例中展示

##### 8.3.4 Increasing the Gain of the Basic Cell

我们通过考虑一个问题来结束本节：我们如何增加从基本增益单元获得的电压增益？ 答案在于找到一种方法来提高放大晶体管和负载晶体管的输出电阻水平。 也就是说，我们寻求一种电路，可以让放大晶体管提供的电流 $g_mv_i$ 直接通过，但将电阻从 $r_o$ 增加到更大的值。 该要求如图 8.17 所示。 图 8.17(a) 显示了 CS 放大晶体管 $Q_1$ 及其输出等效电路。 请注意，目前我们没有显示负载设备。 在图 8.17(b) 中，我们在 $Q_1$ 的漏极和标有 $d_2$ 的新输出端子之间插入了一个阴影框。 在这里，我们再次没有显示 $d_2$ 将连接到的负载。 我们的“黑匣子”接收 $Q_1$ 的输出电流并将其传递给输出； 因此，在它的输出端，我们有所示的等效电路，由相同的受控源 $g_{m1}v_i$ 组成，但输出电阻增加了 $K$ 倍。

![image-20210603155232683](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603155232683.png)

那么，黑匣子到底有什么作用呢？ 由于它通过电流但提高了电阻水平，因此它是一个电流缓冲器。 它是电压缓冲器（源极跟随器和射极跟随器）的双重作用，它通过电压但降低电阻水平。

现在搜索我们在第 7.3 节中研究的晶体管放大器配置库，实现这种电流缓冲作用的唯一候选者是公共栅极（或双极中的公共基极）放大器。 事实上，回想一下 CG 和 CB 电路具有单位电流增益。 然而，我们尚未研究的是它们的电阻转换特性。 我们将在下一节中这样做。

### 8.4 The Common-Gate and Common-Base Amplifiers

在本节中，我们研究 CG 和 CB 放大器配置的 IC 版本。 这项研究与分立电路版本（第 7.3.5 节）的研究有很大不同，因为在这里我们必须考虑晶体管的输出电阻 $r_o$。 在下文中，我们将展示 CG 和 CB 配置都提供了上一节中讨论的电流缓冲区的出色实现

##### 8.4.4 The CB Circuit

CB 放大器的分析与 CG 放大器的分析相似，只是由于基极电流有限，因此涉及更多一些。图 8.24(a) 显示了一个 CB 放大器，其中仅部分显示了偏置细节，并且负载电阻 $R_L$ 通常使用 pnp 电流源实现。 为小信号分析准备的电路如图 8.24(b) 所示。 请注意，由于 $α\simeq 1$ , 电流增益接近于 1，这是电流缓冲器的一个重要特性。

![image-20210603155824269](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603155824269.png)

输入电阻:确定输入电阻 Rin 的电路如图 8.25 所示，其中还显示了所有支路中的电流，通过编写三个节点的节点方程获得。 特别值得注意的是使用等式 $g_m + \frac1 {r_π} = \frac1 {r_e}$ 来获得基极中的电流 $v_π /r_π$ 。 为包含 $v_x$ 、 $r_o$ 和 $R_L$ 的循环编写循环方程，并将 $v_π$ 替换为 -$v_x$ ，得到 $R_{in} ≡ v_x/i_x$ 的以下表达式，

![image-20210603160141171](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603160141171.png)

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603160856606.png" alt="image-20210603160856606" style="zoom:67%;" />

其中我们利用了关系 $r_π = (β +1)r_e$。 因为$r_o>>r_e$，所以

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603161143242.png" alt="image-20210603161143242" style="zoom:67%;" />

请注意，设置 $r_o =∞$会导致$R_{in}$ $=r_e$，这与第 7.3.5 节中研究的分立电路 CB 放大器的情况一致。 此外，对于 $R_L = 0，R_{in} = r_e。  R_{in}$ 的值随着 $R_L$ 的增加而增加，达到最大值

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603161512664.png" alt="image-20210603161512664" style="zoom:67%;" />

Output Resistance

CB 放大器输出电阻 $R_{out}$ 的确定如图 8.26 所示。 结果是

![image-20210603161749557](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603161749557.png)

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603161942370.png" alt="image-20210603161942370" style="zoom:67%;" />

或者

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603162036304.png" alt="image-20210603162036304" style="zoom:67%;" />

由于$g_mr_o>>1$，有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603162110654.png" alt="image-20210603162110654" style="zoom:67%;" />

在$R_e\rightarrow\infin$时，该式的结果趋向最大

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603162236418.png" alt="image-20210603162236418" style="zoom:67%;" />

我们得出结论，CB 电路具有接近一的电流增益、低输入电阻和高输出电阻； 因此它是一个很好的电流缓冲器。  CB 电路的阻抗转换特性总结在图 8.27 中。

![image-20210603162347661](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603162347661.png)

##### 8.4.5 Output Resistance of an Emitter-Degenerated CE Amplifier

正如我们在MOS情况下所做的那样，我们将对CB放大器的$R_o$表达式进行调整，以适用于发射极中电阻重新连接的CE放大器，如图8.28（a）所示，

![image-20210603162923559](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603162923559.png)

### 8.5 The Cascode Amplifier

级联是指使用以共栅极（或共基极）配置连接的晶体管为共源极（或共发射极）放大晶体管的输出提供电流缓冲。 图 8.29 说明了 MOS 情况下的技术。 这里 CS 晶体管 Q1 是放大晶体管，$Q_2$的CG结连接到直流偏置电压$V_{G2}$，类似的安排适用于双极情况，稍后将予以考虑。

从我们对 CG 放大器特性的研究中，我们可以看到共源共栅晶体管将电流 $g_{m1}v_i$ 传递到输出节点，同时将其源极（Q1 的 $r_{o1}$）中的电阻乘以因子 K。结果是图 1 的等效电路。  图8.29可用于确定不同负载电阻的共源共栅放大器的电压增益。 接下来我们将详细讨论 MOS 级联放大器。

![image-20210603183039570](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603183039570.png)

##### 8.5.2 The MOS Cascode Amplifier

**理想情况**

图 8.30(a) 显示了一个加载了理想恒流源的 MOS 共源共栅放大器。 实现的电压增益可以从图 8.30(b) 中的等效电路中找到。 由于负载是理想的恒流源，负载电阻无穷大。也就是说，放大器在开路负载下工作，增益为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604121801379.png" alt="image-20210604121801379" style="zoom:67%;" />

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604121819151.png" alt="image-20210604121819151" style="zoom:67%;" />

现在，由于 $Q_2$ 的 $R_s$ 为 $r_{o1}$，输出电阻 $R_o$ 由近似表达式给出

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604122526137.png" alt="image-20210604122526137" style="zoom:67%;" />

代入得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604122547541.png" alt="image-20210604122547541" style="zoom:67%;" />

对于 $g_{m1} = g_{m2} = g_m$ 和 $r_{o1} = r_{o2} = r_o$ 的情况，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604122721197.png" alt="image-20210604122721197" style="zoom:67%;" />

因此，级联将增益幅度从 $A_0$ 增加到 $A^2_0$ 。

**恒流源负载的实现**

如果电流源负载由 PMOS 晶体管（可以是 PMOS 电流镜的一部分）实现，如图 8.31(a) 所示，负载电阻 $R_L$ 将等于 $Q_3$ 的输出电阻 $r_{o3}$，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604122949820.png" alt="image-20210604122949820" style="zoom:67%;" />

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604123309655.png" alt="image-20210604123309655" style="zoom:67%;" />

并且共源共栅放大器的电压增益将为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604123330691.png" alt="image-20210604123330691" style="zoom:67%;" />

从中我们可以很容易地看出，由于 $R_L<< R_o$，总电阻将近似等于 $r_{o3}$，增益将为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604123442221.png" alt="image-20210604123442221" style="zoom:67%;" />

因此，增益幅度将回到 $A_0$，与 CS 放大器实现的数量级相同。换句话说，使用具有相对较低输出电阻的简单电流源负载实际上破坏了增加输出电阻的级联优势。 然而，事实证明，这种增益与 CS 放大器相同数量级的共源共栅放大器实际上比 CS 电路具有主要优势：它具有更宽的带宽。我们将在第 10 章证明这一点。

**级联电流源的使用**

为了实现 $A^2_ 0$ 数量级的增益，负载电阻 $R_L$ 必须与共源共栅放大器的 $R_o$ 数量级相同。 这可以通过使用如图 8.32 所示的共源共栅电流源来实现。 这里 $Q_4$ 是电流源晶体管，$Q_3$ 是 CG 级联晶体管。 电压 $V_{G3}$ 和 $V_{G4}$ 是直流偏置电压。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604123737038.png" alt="image-20210604123737038" style="zoom:67%;" />

最终得到的电路图如下

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604123820538.png" alt="image-20210604123820538" style="zoom:67%;" />

因为级联晶体管$Q_3$的存在，电流源负载的输出电阻变为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604124001949.png" alt="image-20210604124001949" style="zoom:67%;" />

将共源共栅放大器与共源共栅电流源相结合，形成图 8.33(a) 的电路。 输出侧的等效电路如图 8.33(b)所示，从中可以很容易地得出电压增益为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604124041256.png" alt="image-20210604124041256" style="zoom:67%;" />

因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210604124055708.png" alt="image-20210604124055708" style="zoom:67%;" />

通过与等式中的增益表达式进行比较。我们看到对放大晶体管和电流源负载晶体管都使用共源共栅配置会导致增益幅度增加一个等于 $A_0$ 的因子。









##### 8.5.6 The BJT Cascode

图 8.37(a) 显示了具有理想电流源负载的 BJT 共射共基放大器。 电压$V_{B2}$是CB级联晶体管$Q_2$的直流偏置电压。 该电路与 MOS 共源共栅非常相似，小信号分析将以并行方式进行。 首先，注意双极共源共栅放大器的输入电阻是有限的，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210603183432801.png" alt="image-20210603183432801" style="zoom:67%;" />

其次，回想一下 $Q_2$ 集电极中的电流信号将大约等于 $g_{m1} v_i$。 因此，共源共栅放大器输出的等效电路如图 8.37(b) 所示。 为了获得 Ro，我们使用等式中的公式。  (8.68) 并注意到 Q2 发射极的电阻 Re 为 ro1，因此















































































































































































































































































































## CHAPTER 10  Frequency Response

章节概要

1.耦合和旁路电容如何导致分立电路放大器的增益在低频时下降，以及如何获得频率fL的估计值，在该频率fL处，增益比其在中频处的值低3 dB。

2.MOSFET和BJT中存在的内部电容效应以及如何通过在混合电路中添加电容来修正这些电路的hybr$I_D$-pi模型以及T-model。

3.CS和CE放大器增益的高频限制，以及增益衰减和3db频率fH的上限主要由漏极和栅极（集电极和基极）之间的小电容决定。

4.分析复杂度不同的放大器电路的高频响应的有力方法。

5.第8章研究的共源共栅放大器如何设计成比CS和CE放大器更宽的带宽。

6.源和发射极跟随器的高频性能。

7.差分放大器的高频性能。

8.用于获得宽带放大的电路配置。

简介

我们在第五章到第九章中对晶体管放大器的研究假设它们的增益是恒定的，与输入信号的频率无关。这就意味着它们的带宽是无限的，当然这并不符合真实情况。为了说明这一点，我们在图10.1中给出了三极管分立放大电路的增益幅度与输入信号频率的关系示意图。虽然我们观察到该电路确实有一个很宽的频率范围，并且在这个范围内增益几乎保持不变。这是特定放大器的有效工作频率范围。到目前为止，我们一直假设我们的放大器工作在这个波段，该波段称为中频波段或中频。放大器的设计使其中频与所需放大信号的频谱一致。因为如果不是这样，放大器会使输入信号的频谱失真，输入信号的不同分量会被不同的量放大。

![image-20210513110800288](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210513110800288.png)

图10.1表明，在较低的频率，放大器增益的幅度下降。电路中的耦合电容和旁路电容在该频段内的阻抗迅速升高。回想一下，我们此前假设它们的阻抗很小，并且足以视为短路。这种假设虽然在中频是正确的，但是当输入信号的频率降低时，其容抗迅速变大（基于容抗的表达式），导致其不再可以被视为短路，如同我们在10.1节所要看到的，这会导致放大器的总电压增益降低。

在第10.1节分立放大电路的低频响应分析中，我们将注意力放在频率fL的确定上，它定义了中频的下限。通常而言，fL被定义为增益大小比电路处在中频的值低3分贝的频率。要注意的是，集成电路放大器不使用耦合和旁路电容器，因此其中频的下限在零频率（dc）处，如图10.2所示。

![image-20210513111412812](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210513111412812.png)

图10.1和10.2表明放大器的增益在高频端下降。这是由于BJT的内部电容效应（扩散电容和势垒电容）。我们将在第10.2节中研究这些效应，并用我们将添加到此前我们所使用的hybr$I_D$-pi model和T-model中。第10.3节将使用高频设备模型分析CS和CE放大器（分立和集成）的高频响应。我们将特别关注频率fH的确定，它定义了中频带的上限。它被定义为增益大小比电路位于中频时的增益值低3 dB的频率。因此，放大器带宽由fL和fH定义（对于IC放大器为0和fH）

放大器的增益带宽积（gain-bandw$I_D$th product）定义如下
$$
GB=|A_M|BW
$$
其中BW指带宽的的长度
$$
BW=f_H-f_L(分立电路)                         BW=f_H(集成电路)
$$
本章的其余部分将关注各种复杂度不同的放大器配置的频率响应分析。我们特别感兴趣的是通过添加特定的电路组件（例如源极和射级衰减电阻（emitter-degenerate resistance）或通过完全改变电路配置来扩展放大器带宽（即，增加fH）的方法。

### 10.1 Low-Frequency Response of Discrete-Circuit Common-Source and Common-Emitter Amplifiers
在本节中，我们考虑耦合电容器和旁路电容器对分立电路共射极（CE）放大器的增益的影响。 如前所述，它们的效果仅在低频处（即，在中频带以下）表现出来。

##### 10.1.2 The Method of Short-Circuit Time Constants

在某些电路中，如不久前讨论的共射放大器的电路中，电容器存在相互作用，很难确定fL频率。然而，幸运的是，有一种简单的方法可以获得fL的估计值，而不需要确定极点的频率。尽管该方法是基于其中一个极点占主导地位的假设，虽然该假设的前提并非精确，但其仍然为fL给出了一个良好的近似。方法如下

1.假设输入信号为0

2.每次考虑一个电容器，并且在考虑这个电容器时将其他电容器的电容大小设为无穷大（换言之，将其他电容器短路）

3.对于每一个电容器$C_i$，找到从该电容器看入的电阻$R_i$，这可以通过在电容处设置一个测试电源$V_x$得到，$R_i$被定义为$V_i/I_x$

4.通过下面的式子估算3dB频率$f_L$
$$
f_L\approx\sum_{i=1}^n\frac 1{C_iR_I} 
$$
其中n是电容器的数量

除了简单之外，该方法还有一个非常重要的作用：方程式指出了每个电容器对fL值的相对贡献。具体来说，与特定电容器相关的时间常数值越低，该电容器对fL的贡献就越大。如下文所示，这一观察结果具有重要的设计意义。

短路时间常数法的应用将在下一节中说明，其中它用于确定CE放大器的fL。

## 10.1.3 The CE Amplifier

![image-20210513115023646](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210513115023646.png)

图10.9（a）显示了使用classic偏置的分立电路共射放大器，以及耦合电容器$C_{C1}$和$C_{C2}$以及旁路电容器$C_E$。我们希望能计算出该电路的fL。并且同时，我们需要确定$C_{C1}$、$C_E$和$C_{C2}$的值，以确保fL的大小符合实际应用要求，同时最小化所需的总电容值。

为了分析CE放大器的低频增益，我们使用图10.9（b）所示的等效电路。这种等效电路是通过短接$V_{CC}$，用T-model代替BJT，而忽略$r_o$得到的。忽略$r_o$的原因在于晶体管的输出电阻对分立电路放大器的增益影响很小，并且由于它的存在会导致分析相当复杂。从图10.9（b）中的电路中，我们观察到BJT基极输入电流有限导致$C_{C1}$和$C_{C2}$相互作用。也就是说，与CS放大器的情况不同，这里由$C_{C1}$和$C_{C2}$引起的两极中的每一个都将以一种复杂的方式依赖于这两个电容值，这妨碍了对设计的理解。

![image-20210513120750743](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210513120750743.png)

因此在这里我们不应当尝试去确定极点频率，而是采用短路时间常数法来估算$f_L$的值

##### Applying the Method of Short-Circuit Time Constants

这里插入一段题外话：如何判断从某个电容看入的电阻？

我们以这里的三个电容为例

$C_{C1}$:首先我们记在BJT基极上的偏置电阻的并联等效电阻为$R_B$,换言之，                        $R_B=(R_{B1}||R_{B2})$

此外在$R_B$的左侧有一个信号源的内电阻$R_{sig}$（要注意的是$R_B$并非是三极管的内电阻），接着向右看，有一个三极管，该三极管的输入电阻是$r_\pi$,并且由于$R_B$接地，$R_B$和BJT是并联关系，因此，从$C_{C1}$看入的电阻大小是
$$
(R_B||R_\pi)+R_{sig}
$$
换言之，$C_{C1}$的时间常数为
$$
τ_1=[(R_B||R_\pi)+R_{sig}]C_{C1}
$$
![image-20210513123136273](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210513123136273.png)

$C_{E}$:此时我们视 $C_{C1}$短路，因此$R_B$和$R_{sig}$并联，并且由于发射极电路上的电流和基极电路上的电流有差异，因此在基极上的电阻需要乘以系数$\frac 1{\beta+1}$。总体上看，从$C_{E}$出发的电路分成了两条支路，因此这两条支路上电阻的并联等效电阻即为从$C_{E}$看入的电阻。

故$C_E$的时间常数为
$$
\tau_E=C_E[R_E(r_e+\frac{R_B||R_{sig}}{\beta+1})]
$$
![image-20210513124016266](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210513124016266.png)

(note:由于$r_e$上方是一个受控电流源，因此它不会被算入电阻计算中)

对于$C_{C2}$这个分析过程是类似的，此处略去不表

![image-20210513124254752](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210513124254752.png)

因此我们可以根据短路时间常数来估计其3-dB频率$f_L$
$$
f_L=\frac{\omega_L}{2\pi}=\frac1{2\pi}[\frac1{\tau_1}+\frac1{\tau_E}+\frac1{\tau_2}]
$$
当在这个表达式中代入数值时，很快就会发现三个电容器中哪个对fL的贡献最大。显然，这个贡献最大的电容器是时间常数最小的电容器。在射级放大电路中，通常是$C_E$，这是因为相关的电阻RCE通常很小。知道哪种电容器有可能主导fL具有重要的设计意义，如下所示。

##### Selecting Values for CC1, CE, and CC2

我们现在讨论为$C_{C1}$、$C_E$和$C_{C2}$选择适当值的设计问题。设计目标是将较低的3-dB频率fL放置在指定位置，使电路中的总电容值最小。由于如上所述，$C_E$通常是三个电阻中最低的，因此通过选择$C_E$使总电容最小化，从而使其对fL的贡献占主导地位。也就是说，通过参考上式，我们可以选择某个电容值$C_S$，使得$1/(C_ER_E)$，比方说，是80%的$\omega_L=2\pi f_L$，让其他每个电容器贡献10%的ωL。例10.2应该有助于说明这个过程。

##### Example 10.2

我们希望为共射放大器选择一个合适的$C_{c1}$,$C_{C2}$,$C_E$,其中放大器电路参数为$R_B=100k\Omega$,$R_C=8k\Omega$,$R_L=5k\Omega$,$R_{sig}=5k\Omega,R_E=5k\Omega,\beta=100,g_m=40mA/V$,以及$r_\pi=2.5k\Omega$.设计要求为fL=100Hz

首先我们计算三个电容的时间常数

![image-20210513135315776](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210513135315776.png)

现在我们为$C_E$选择一个合适的值，使其满足其时间常数的倒数是$\omega_L$的80%

![image-20210513135643165](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210513135643165.png)

其他两个电容分别贡献10%

![image-20210513135721790](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210513135721790.png)

### 10.2 Internal Capacitive Effects and the High-Frequency Model of the MOSFET and the BJT

耦合和旁路电容会导致晶体管放大器的增益在低频端下降，而在高频时的增益下降则是由晶体管内部的电容效应引起的。在本节中，我们将简要地考虑这些影响，更重要的是，展示如何修正电路的小信号模型，以考虑这些影响。

##### 10.2.2 The BJT

在我们对BJT物理特性的研究中，我们假设晶体管对输入信号的反应是瞬时性的，因此我们开发的晶体管模型不包括任何会引起时间或频率依赖性的元件（即电容器或电感器）。然而，实际的晶体管表现出电荷存储现象，这会限制它们的运行速度和频率。我们在第三章的pn结研究中已经遇到了这种效应，并且已经知道它们可以用电容来建模。在下面我们研究了发生在BJT中的电荷存储效应，并通过在hybr$I_D$—$\pi$ model和T-model中添加电容来考虑它们对整体电路的影响。由此产生的修正BJT模型将能够预测放大器增益对频率的依赖性，以及晶体管开关和逻辑门所表现出的时间延迟

##### The Base-Charging or Diffusion Capacitance $C_{de}$（扩散电容）

当npn BJT处于放大状态时，其基极中储存的非平衡少子(电子)的数量 $Q_n$的数量可以表示为
$$
Q_n=\tau_Fi_c
$$
其中 $\tau_F$ 是一个随时间变化的常数。称为前向基极渡越时间，表示电荷载流子（电子）穿过基极的平均时间。一般来说，$\tau_F$在10 ps到100 ps的范围内。

上式常应用于振幅较大的信号中，而由于 $i_c$的大小与 $v_{be}$成指数关系，因此 $Q_n$的大小与其关系也类似，此外，对于微变信号，我们根据电容的定义式，可以得到
$$
C_{dc}\equiv\frac{dQ_n}{dv_{BE}}=\tau_F\frac{di_C}{dv_{BE}}
$$
而在小信号模型中，集电极电流大小与EBJ电压大小之间的关系，近似为跨导 $g_m$,故
$$
C_{dc}=\tau_Fg_m=\tau_F\frac{I_C}{V_T}
$$

##### The Base–Emitter Junction Capacitance $C_{je}$

$v_{BE}$的变化不仅改变了存储在基极区的电荷，还改变了存储在基极与发射极耗尽层的电荷。这种独特的电荷存储效应由EBJ耗尽层电容$C_{je}$表示。耗尽层电容近似可以以下式表示
$$
C_{je}\simeq2C_{je0}
$$
其中 $C_{je0}$为EBJ电势差为0时的电容大小

##### The Collector–Base Junction Capacitance $C_\mu$

在放大模式下，CBJ反偏，其结电容（或称势垒电容）通常记为 $C_\mu$，其表达式如下
$$
C_\mu=\frac{C_{\mu0}}{(1+\frac{V_{CB}}{V_{0c}})^m}
$$
其中，$C_{\mu0}$是CBJ零偏时的大小；$V_{CB}$ 是CBJ反向偏置电压的大小，$V_{0c}$是CBJ内置电压（通常为0.75 V），m是其分级系数（通常为0.2–0.5）。

##### The High-Frequency Models

图10.14显示了BJT在高频信号下的hybr$I_D$— $\pi$模型和T模型，其中包括了电容效应。具体来说，有两个电容：发射极-基极电容$C_π = C_{de}+C_{je}$和集电极-基极电容$C_μ$ 通常，$C_π$ 在几微法拉到几十微法之间；而 $C_\mu$的大小则在数皮法之间。注意，我们还在模型中添加了一个电阻$r_x$

![image-20210516135259569](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516135259569.png)

这个电阻是由于BJT本身材料硅晶体所带来的（该电阻由基极区域中的硅材质导致）。一般来说，$r_x$的大小是几十欧姆，并且其大小以一种相当复杂的方式取决于电流水平。通常而言 $r_x<<r_\pi$ , 因此在低频时其影响可以忽略不计。然而，在高频相应中，该电阻的作用就会变得明显，如同我们接下来将要看到的一样。

##### The BJT Unity-Gain Frequency

晶体管数据表通常不会给出 $C_\pi$的值，更不要说地说β (或称 $h_{fe}$）与频率的关系。为了确定$C_π$ 和$C_μ$的大小, 我们将导出$h_{fe}$的表达式，即CE短路电流增益，以作为hybr$I_D$- $\pi$模型中的一个参数。为此，考虑图10.15所示的电路，其中集电极和发射极之间短接。根据C处的节点方程，可算出短路集电极电流Ic的大小为

![image-20210516140511650](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516140511650.png)

（注：其中 $sC_\mu$是电容阻抗的倒数）

![image-20210516141212273](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516141212273.png)

因此 $V_\pi$大小为

![image-20210516141449788](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516141449788.png)

从而

![image-20210516141519838](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516141519838.png)

当 $\omega{C_\mu}<<g_m$时，有

![image-20210516141707338](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516141707338.png)

故

![image-20210516141747478](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516141747478.png)

其3-dB频率为 $\omega=\omega_\beta$,其中

![image-20210516141958048](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516141958048.png)

其波特图为

![image-20210516142051358](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516142051358.png)

在 $\omega=\omega_T$时，增益大小下降到1，此时的频率称作单位增益频率，大约是

![image-20210516142332486](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516142332486.png)

即

![image-20210516142410501](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516142410501.png)

或者

![image-20210516142426980](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516142426980.png)

单位增益带宽$f_T$，也称为跃迁频率，通常会在数据表上指出。在某些情况下，$f_T$是$I_C$和$V_{CE}$的函数。要了解fT如何随$I_C$变化，请回忆一下，$g_m$与 $I_C$的大小成正比，不过在我们上面的表达式中，$C_\pi$只有一部分（扩散电容 $C_{de}$的那部分）与 $I_c$是成正比的。这可以解释 $f_T$在低电流下会变小的原因，如图10.17所示。然而，图10.17所示的高电流下$f_T$的减少不能用这个论点来解释；相反，这是由于同样的现象，导致$β_0$在大电流下减小(其工作点位置发生变化导致其直流增益变小）（第6.4.2节）。
在$f_T$几乎恒定的区域，$C_π$ 的大小主要取决于扩散电容的大小，并且远大于$C_μ$. 也就是说
$$
C_\pi+C\mu\simeq{C_{de}=\tau_Fg_m}
$$
并且基于同样的原因
$$
f_T\simeq\frac{1}{2\pi\tau_F}
$$
![image-20210516151704283](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516151704283.png)

通常，$f_T$的范围是100兆赫到几十兆赫。$f_T$的值套用于此前的公式中，以确定$C_π + C_μ$. 电容$C_μ$的大小通常通过直接测量在反偏电压 $V_{CB}$下基极和集电极之间的电容大小来确定。

从图10.14（a）的高频模型中可以观察到的一个重要现象是，当频率大小介于5到10 $f_\beta$时 , 人们可以忽略电阻$r_π$ . 可以看出，此时$r_x$成为高频输入阻抗中唯一的电阻部分。因此，rx在确定晶体管电路在高频下的频率响应方面起着重要的作用。因此，只有通过高频测量才能准确确定$r_x$的大小。

在离开本节之前，我们应该提到，图10.14中的高频模型相当准确地描述了晶体管在约0.2$f_T$的频率下的运行情况。而对于更高的频率响应，我们需要在模型中添加更多的细节才行

总结

![image-20210516153916804](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516153916804.png)

### 10.3 High-Frequency Response of the CS and CE Amplifiers
在了解了BJT高频响应的等效电路模型后，我们现在讨论CS和CE放大器的高频性能问题。我们的目标是确定限制这些重要放大器在高频信号下性能的机制。同样，我们需要找到一种简单的方法来估计频率$f_H$，在该频率$f_H$处，增益比其在中频频率$| A_M |$的值低3db。

本文的分析同样适用于分立电路、电容耦合放大器和集成电路放大器。前者的频率响应如图10.1所示，后者的频率响应如图10.2所示。在我们感兴趣的频率（高频段），所有耦合和旁路电容器都表现为完美短路，两种类型的放大器都有相同的高频等效电路。

##### 10.3.2 The Common-Emitter Amplifier

图10.19（a）显示了CE放大器的高频等效电路。它是通过用图10.14（a）的高频等效电路模型替换如图10.9（a）所示的电路中的BJT，并像往常一样移除所有直流电源而获得的。注意图10.19（a）中的电路是通用的，适用于分立和集成电路放大器。因此，它包括$R_B$，通常出现在分立放大电路中。$R_C$也可以是电流源负载的无源电阻或输出电阻，对于$R_L$也是如此。

![image-20210516154349227](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516154349227.png)

通过使用戴维南定理，我们可以得到上述电路的等效电路

![image-20210516154830165](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516154830165.png)



上述的戴维南等效电路可以用于计算中频带电压收益 $|A_M|$,正如我们之前所做的一样，我们将电路中的两个电容值设为0，有

![image-20210516155357301](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516155357301.png)

接下来我们把注意力放在输入端，并且尝试在输入端处简化电路以获得一个简单的RC低通电路，为此，我们需要将桥接电容器$C_\mu$转换成从节点B'到地面的等效电容，首先我们看向输出端

在输出端，由节点方程可以看到负载电流的大小为
$$
g_mV_\pi-I_\mu
$$
此时，放大电路处于中频段的分界线处，我们可以合理的认为此时电容效应还不很明显，也就是说，此时我们可以认为$I_\mu$的大小要远远小于$g_mV_\pi$的大小，换言之 ，输出电压可以近似表示为
$$
V_o\simeq-g_mV_\pi{R_L}
$$
此时我们把$C_\mu$等效替代成阻抗，可以得到
$$
I_\mu=sC_\mu(V_{\pi}-V_{o})=sC_\mu{V_\pi}(1+g_mR_L)
$$
接着我们用一个等效电容来代替$C_\mu$,	我们只要保证在等效替代前后流入电容的电流大小相等即可，换言之
$$
C_{eq}=C_\mu(1+g_mR_L)
$$
因此我们最终将电路图简化为如下所示

![image-20210516162134641](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516162134641.png)

这样做的好处是可以将左侧单独拿出来考虑而不用考虑右侧元件对输入端的影响，接着我们对左侧电路即可进行电路分析，电容器并联时，等效电容为并联的每个电容之和
$$
C_{in}=C_\pi+C_{eq}
$$
计算时间常数的过程略去不表，可以算出传递函数为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516160346099.png" alt="image-20210516160346099" style="zoom:150%;" />

因此3-dB频率 $f_H$由下式给出

![image-20210516160450950](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516160450950.png)

并且

![image-20210516160610909](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516160610909.png)

注意$C_{in}$是$C_\pi$和密勒电容$C_\mu(1+g_mR^`_L)$ 的和。从$C_{in}$看到的电阻$R_{sig}^、$可以从上图的电路中很容易的找到，如下所示：将$V_{sig}$减至零，从端口B '和E向左看。你会看到$r_π$ 与$r_x$并联，$r_x$与$R_B||R_{sig}$ 串联。这种寻找“被电容看到”的电阻的方法是非常有用的，而且免去了繁琐的工作！


![image-20210516162241082](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516162241082.png)

##### Example 10.4

找出以下偏置配置CE放大器的 $f_H$大小

![image-20210516162441980](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516162441980.png)



首先计算hybr$I_D$- $\pi$的模型参数，有

![image-20210516162612815](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516162612815.png)

中频带增益为

![image-20210516162654562](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516162654562.png)

其中

![image-20210516162722629](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516162722629.png)

因此

![image-20210516162857426](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516162857426.png)

故

![image-20210516162924446](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516162924446.png)

转换为分贝，有

![image-20210516163041131](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516163041131.png)

为了找到 $f_H$我们首先找到 $C_{in}$

![image-20210516163136241](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516163136241.png)

以及等效源电阻

![image-20210516163307790](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516163307790.png)

从而

![image-20210516163812066](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516163812066.png)

##### 10.3.3 Miller’s Theorem（密勒定理）

在分析共源和共发射极放大器的高频响应时，我们采用了一种替代桥接电容（$C_\mu$)用于等效输入电容。这个非常有用和有效的技术是基于一个我们现在将要介绍的定理，即密勒定理。

考虑图10.20（a）中的情况。作为未显示的更大电路的一部分，我们隔离了两个电路节点，分别标记为1和2，它们之间连接阻抗Z。节点1和节点2也连接到电路的其他部分，如从两个节点发出的虚线所示。此外，假设以某种方式已经确定节点2处的电压与节点1处的电压相关，并且成正比

![image-20210516164558175](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516164558175.png)

即
$$
V_2=KV_1
$$
在通常的情况下，K是一个增益因子，它可以是正的，也可以是负的，其大小通常大于1。不过这并非密勒定理的前提假设。

密勒定理指出阻抗Z可以由两个阻抗代替：$Z_1$连接在节点1和地之间，$Z_2$连接在节点2和地之间，其中
$$
Z_1=Z/(1-K)
$$
以及
$$
Z_2=Z/(1-\frac1K)
$$
以获得下图的等效电路图

![image-20210516165009350](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516165009350.png)

密勒定理的证明如下：在图10.20（a）的原始电路中，节点1“感觉到阻抗Z的存在”的唯一方式是通过Z从节点1获得的电流I。因此，为了使等效电路中的电流保持不变，我们必须选择Z1的值，使其产生相等的电流

![image-20210516165125366](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516165125366.png)

从而我们获得了 $Z_1$的大小，同理，我们也可以借此计算出 $Z_2$的大小

（注：尽管没有明说这一点），但上述密勒等效电路仅在电路其余部分保持不变的情况下有效；否则V2与V1的比值可能会改变。因此，密勒等效电路不能直接用来确定放大器的输出电阻。这是因为在确定输出电阻时，隐含地假设源信号被减少到零，并且测试信号源（电压或电流）被施加到输出端子显然是电路中的一个重大变化，使得密勒等效电路不再有效。）

##### Example 10.5

下图显示了一个放大倍数为-100的反相放大器，其中有一个阻抗Z从输出端作为反馈回路连接到输入端，在第一种情况下，Z是一个100M的电阻；第二种情况下Z是一个1pf大小的电容。请计算这两种情况下的密勒等效电路，并计算其电压收益

![image-20210516170849717](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516170849717.png)

在本例中，显然K=100,故对于第一种情况，有

![image-20210516170632879](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516170632879.png)

因此其电压增益为

![image-20210516171047200](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516171047200.png)

![image-20210516170710832](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516170710832.png)

第二种情况下，我们先计算电容等效的容抗，从而有

![image-20210516170824503](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516170824503.png)

同理可以得到

![image-20210516171117926](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516171117926.png)

这是该放大器的传递函数，由此可算出其3dB频率为

![image-20210516171208715](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516171208715.png)

从本例中我们可以看到，对于当K小于零时，我们对桥接电阻或反馈电阻进行密勒等效替代时，会导致输入端的等效阻抗变小（1-K)倍，若该输入阻抗由电容形成，则等效电容的值会变为（1-K）倍，这被称作密勒效应

### 10.4 Useful Tools for the Analysis of the High-Frequency Response of Amplifiers

在第10.3节中，我们介绍了一种利用密勒效应的近似方法，用于分析CS和CE放大器的高频响应。 该方法可以对$f_H$进行合理准确的估算，同等重要的是，可以对限制高频运行的机制进行深入了解。 然而，不幸的是，这种方法不能应对存在负载电容$C_L$的情况。 同样，该方法不容易扩展到更复杂的放大器电路。 因此，我们将要简要介绍一些计算高频响应的工具，这些工具在分析例如共源共栅放大器等更复杂的电路时将非常有用。 我们稍稍后退几步，更普遍地考虑放大器的高频传递函数。

##### 10.4.1 The High-Frequency Gain Function

考虑到晶体管的内部电容，放大器的增益可以表示为复变函数
$$
A(s)=A_MF_H(s)
$$
其中$A_M$是中频带增益（对于集成放大电路而言，这个也是其低频时的放大增益）可以通过分析放大器等效电路并且忽略晶体管内部电容的影响来确定$A_M$的值(即视其为)。 而当我们将放大器的内部电容纳入考虑范围时，我们可以得到$F_H(s)$，该数值可以用其极点和零频率点（通常是实数）表示，如下所示

![image-20210516185709560](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210516185709560.png)

其中$ω_{p1}$，$ω_{p2}$......$ω_{pn}$是指n个极点的频率，$ω_{Z2}$，······$ω_{Zn}$是表示n个零频率点的频率。在高频响应中，零频率点和极点的频率根据定义大于中频率，我们从等式（10.71）中可以看出，当s接近中间带频率时，$F_h(s)$大小将逐渐接近1，也使得放大电路的增益大小逐渐接近$A_M$

##### 10.4.2 Determining the 3-dB Frequency $f_H$

放大器设计人员通常对靠近中频带的高频部分特别感兴趣。 这是因为设计人员需要估计（或者根据需要修改）3 dB上限频率$f_H$（或$ω_H$； $f_H =ω_H/2π$）的值。不过需要指出的时，在许多情况下，零频率点要么是无穷大的，要么是对于确定$ω_H$无关紧要的高频。 如果另外一个极点（例如$ω_{P1}$）的频率比其他任何一个极点的频率低得多，则该极点将对放大器$ω_H$的值产生最大的影响。 换句话说，该极点将主导放大器的高频响应，并且称该放大器具有一个主极点。 在这种情况下，函数$F_H$可以近似为

![image-20210517185357271](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210517185357271.png)

也就是一阶单时间常数网络的传递函数

这是我们在第10.3节分析的共射极放大器的情况。根据经验法则，如果频率最低的极点与最近的极点或零频率点至少有四倍频的距离，则存在主极点。如果主极不存在，则3-dB频率$ω_H$可由$| F_H（jω)|$的图像确定。或采用如下的近似公式，为简单起见，仅考虑在高频带中具有两个极点和两个零频率点的电路的情况

![image-20210517190133876](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210517190133876.png)

将 $s=j\omega$代入并平方，有

![image-20210517190351433](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210517190351433.png)

根据定义，在3-dB频率( $\omega=\omega_H$) 下，放大倍数会下降一半，也就是说

![image-20210517190611463](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210517190611463.png)

由于 $\omega_H$的大小通常要小于极点和零频率点的大小，因此我们可以略去带有 $\omega_H^4$的几项，解方程，有

![image-20210517190839164](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210517190839164.png)

并且可以延伸到任意极点与零点数

![image-20210517190922972](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210517190922972.png)

##### 10.4.3 The Method of Open-Circuit Time Constants（开路时间常数法）

如果可以很容易地确定放大器传递函数的极点和零点，那么我们就可以使用上述方法来确定$f_H$。然而，在许多情况下，计算传递函数并非易事。在这种情况下，可以使用开路时间常数的方法获得$f_H$的近似值，如同我们将在下面介绍的。
该方法与我们在第10.1节中用于估算$f_L$的短路时间常数方法类似。
考虑函数$F_H(s)$（等式10.71），它决定放大器的高频响应。将其分子分母展开化简，有

![image-20210517191612005](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210517191612005.png)

其中系数a、b分别对应零点和极点的频率大小，特别的，系数$b_1$由下式给出。

![image-20210517191745123](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210517191745123.png)

也就是说，$b_1$的值是n个时间常数之和，换言之，假如要得到$b_1$的值，我们可以在电路的高频等效电路中依次计算其时间常数并求和，如同我们在短路时间常数法中所做的一样，我们每考虑一个电容，就将所有其他电容设置为开路，并令信号源电压为0，来计算其时间常数，有

![image-20210517192454136](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210517192454136.png)

最后有

![image-20210517192703928](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210517192703928.png)

需要指出的是，大多数情况下电路系统都不存在主极点，但该方法仍然可以得到一个良好的近似结果

### 10.5 High-Frequency Response of the Common-Gate and Cascode Amplifiers

尽管共射放大电路可以提供较大的电压增益，但其在高频段处的增益下降十分明显，其主要原因在于其由于密勒效应而变大的$C_{in}$电容，因此，假如我们要获得受高频信号输入影响较小的放大电路，应该采用密勒效应小或不受密勒效应的放大电路，即共基共射电路

##### 10.5.3 High-Frequency Response of the Bipolar Cascode Amplifier

此前我们曾提到过，共射共基电路能同时提供高的电压增益（$A^2$）和大的输入电阻，其等效电路如下图所示

![image-20210518113456711](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210518113456711.png)

观察到我们在电路图中又增加了三个电容$C_L、C_{cs1}、C_{cs2}$,其中，$C_L$指共射共基电路电流源负载的电容大小以及后续放大电路（如果有）中的等效电容大小；$C_{cs1}、C_{cs2}$则指集电极与衬底之间的电容大小

确定其3-dB频率最方便的办法是开路时间常数法，我么将从电路的底部到顶部逐层分析

1.首先将下方电路（共射部分）转换为等效小信号模型，在这里我们采用T-model，等效电路图略去不表

2.计算$R_{sig}'$的值，有
$$
R_{sig}'=r_{\pi1}||(r_{x1}+R_{sig})
$$
3.计算由$C_{\pi1}$看入的电阻，有
$$
R_{\pi1}=R_{sig}'
$$
4.计算在$C_1$节点的等效电阻，该等效电阻为$Q_1$的输出电阻与$Q_2$的输入电阻的并联等效值，有
$$
R_{c1}=r_{o1}||[r_{e2}(\frac{r_{o2+R_L}}{r_{o2+R_L/(\beta_2+1)}})]
$$
5.计算从$C_{\mu1}$看入的电阻，这是一个较为复杂的电路，直接“看”是难以得出等效电阻的，因此我们在$C_{\mu1}$处放置一个测试电源，用比值法来定义其电阻，如下图所示

![image-20210518131805837](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210518131805837.png)

注意到
$$
V_{be}=-I_xR_{sig}'
$$
从而得到
$$
R_{\mu1}=R_{sig}'(1+g_{m1}R_{c1})+R_{c1}
$$
6.计算$C_2$节点的电阻，即整个共基共射电路的输出电阻
$$
R_o\simeq\beta_2r_{o2}
$$
7.
$$
\tau_H=C_{\pi_1}R_{\pi1}+C_{\mu1}R_{\mu1}+(C_{cs1}+C_{\pi2})R_{c1}+(C_L+C_{cs2}+C_{\mu2})(R_O||R_L)
$$
从而$f_H\simeq\frac{1}{2\pi\tau_H}$

如果我们展开 $\tau_H$,可以发现 $\tau_H$由三部分组成
$$
\tau_H=R_{sig}(C_{\pi1}+C_{\mu1}(1+g_{m1}R_{c1}))+R_{c1}(C_{\mu1}+C_{cs1}+C_{\pi2})+(R_L||R_O)(C_L+C_{cs2}+C_{\mu2})
$$
这三部分分别对应了共基共射电路的输入端，中间段与输出端,可以看到在输入端（共射放大电路部分）我们依然能看到因为密勒效应而变大的电容 $C_{\mu1}$

当信号源的内阻很大时，显而易见，第一部分将在式子中占据主导地位（特别是当密勒效应的系数很大时）；同时，当负载电阻很大时，会使得 $R_{in2}$变大从而导致 $R_{c1}$变大， 这要求共射电路提供更大的放大倍数。因此为了在高信号源内阻的条件下获得大带宽，我们需要尽量减小负载电阻的大小以减少密勒效应的系数大小

当信号源的内阻小时，第一项内的密勒效应显得无足轻重，此时我们可以利用大的负载电阻来使共基共射电路的放大倍数最大（$A_o^2$），在这种情况，式子的第三部分将占据主导地位，更极端一些，假设信号源无内阻并且中间项可以忽略不计，则有

![image-20210518151405339](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210518151405339.png)

因此其3-dB频率大小为

![image-20210518151434685](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210518151434685.png)

### 10.6 High-Frequency Response of the Source and Emitter Followers

在本节中，我们研究两个重要电路构建模块的高频响应：源极跟随器和射极跟随器。 两者的中频带电压增益均小于但接近于1。 它们的优势在于其高输入电阻和低输出电阻。 因此，它们可用作多级放大器的输出级和电压缓冲器。 不久将看到，这些电压跟随器还具有另一个重要优势，即宽带宽。

## CHAPTER 11 Feedback

### Introduction

大多数物理系统都包含某种形式的反馈。 有趣的是，负反馈理论是由电子工程师开发的。 在寻找用于跨大西洋电话中继器的具有稳定增益的放大器的设计方法时，西方电气公司的电子工程师Harold Black于1928年发明了反馈放大器。此后，该技术得到了如此广泛的应用，以至于如果没有某种形式的隐式或显式反馈，几乎不可能构成电子电路。 此外，反馈的概念及其相关理论目前也会在工程以外的领域中使用，例如在生物系统的建模中。

反馈有两种类型：正反馈与负反馈，在放大器设计中我们一般采用负反馈来完成一以下目的

1.降低增益灵敏度：也就是说，使增益值对电路元件值的变化不那么敏感，例如温度变化可能引起的变化。

2.减少非线性失真：即使输出与输入成比例（换句话说，使增益恒定且与信号电平大小无关）。

3.减少噪音的影响：也就是说，尽量减少电路元件本身或外部干扰产生的不需要的电信号对输出的影响。

4.控制输入和输出电阻：即通过选择适当的反馈结构来提高或降低输入和输出电阻。

5.提高放大器的带宽

上述所有理想特性都是以降低增益为代价获得的。结果表明，称为反馈量的增益折减因子是使电路失敏、增加电压放大器的输入电阻、扩展带宽等的因子。简言之，负反馈的基本思想是用增益来换取其他期望的特性。本章致力于研究负反馈放大器们的分析、设计和特性。

在某些条件下，放大器中的负反馈可以变为正反馈，并且其幅度足以引起振荡。实际上，在第18章我们将研究正反馈在振荡器和双稳态电路设计中的应用。然而，在本章中，我们对稳定放大器的设计感兴趣。因此，我们将研究负反馈放大器的稳定性问题及其振荡的可能性。

然而，这并不意味着正反馈总是导致不稳定。事实上，正反馈在许多非再生应用中非常有用，例如第17章研究的有源滤波器的设计。

在我们开始研究负反馈之前，我们希望提醒读者，我们已经在许多应用中遇到了负反馈。几乎所有的运算放大器电路（第二章）都采用负反馈。负反馈的另一个流行应用是使用发射极电阻RE来稳定双极晶体管的偏置点，并增加BJT放大器的输入电阻、带宽和线性度。另外，源极跟随器和发射极跟随器都采用了大量的负反馈。

接下来的问题是，是否有必要对负反馈进行正式研究。如本章结尾所述，反馈的形式化研究为电子电路的分析和设计提供了宝贵的工具。此外，从反馈的角度思考所获得的洞察力也会非常有益

### 11.1 The General Feedback Structure

##### 11.1.1 Signal-Flow Diagram

图11.1给出了反馈放大器的基本结构。 图11.1是信号流程图，不显示电压和电流，其中x可以表示电压或电流信号。 一般而言，放大器是单向的,其开环增益记为$A$；因此它的输出$x_o$与输入$x_i$的关系为

$$
x_o=Ax_i
$$
![image-20210518153144682](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210518153144682.png)

而反馈网络则使输出信号相反方向提供了一个反馈信号 $x_f$其大小由一个反馈系数（因子）决定
$$
x_f=\beta{x_o}
$$
我们假定将反馈网络连接到放大器输出端不会改变增益$A$或$x_o$的值； 也就是说，反馈网络所产生的信号不会加载到放大器输出上。而且，反馈网络同样是单向的。

从源信号$x_s$中减去反馈信号$x_f$，所得到的信号$x_i$是该基本放大器的输入，注意到正是因为这样的原因导致其得名为“负反馈”。

##### 11.1.2 The Closed-Loop Gain

负反馈放大器的增益称之为闭环增益或反馈增益，记为 $A_f$，定义为
$$
A_o\equiv\frac{x_o}{x_s}
$$
代入上一节中的式子，有
$$
A_f=\frac{A}{1+A\beta}
$$
其中 $A\beta$称为环路增益（loop gain），对负反馈结构而言，其环路增益必然为正，从而可以降低输入放大器的信号振幅。在大部分电路中，$Aβ$的大小往往都远大于一，因此上式也可以写作

![image-20210518154844264](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210518154844264.png)

这指出了一个很有趣的结果：当放大器的环路增益很大时，反馈放大器的增益大小几乎完全由反馈电路决定，而反馈电路中一般不会包含有源器件，因此反馈电路的增益大小可以做到精确控制。换句话说，总增益几乎不依赖于基本放大器的增益$A$，这是一个理想的特性，因为增益$A$通常是许多制造和应用参数的函数，其中一些参数可能具有宽容差。

我们已经在第2章中看到了运算放大器电路中所有这些效应的生动说明，其中闭环增益几乎完全由反馈元件决定。 通常，我们将（1 /β）视为$A_f$的理想值。

我们可以将公式（11.1）至（11.3）组合在一起，以获得反馈信号$x_f$ 的表达式：

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210518155312719.png" alt="image-20210518155312719" style="zoom: 25%;" />

从中我们可以证明在$A_β$>>1时，xi变得非常小。 跟踪运算放大器的两个输入端子。 我们观察到负反馈会减少出现在基本放大器输入端子上的信号，具体地说，降低了（1 $+A_β$）倍。 稍后将看到，正是这种输入信号的减少导致反馈放大器的线性度增加。

##### 11.1.3 The Loop Gain

从上面的讨论中我们可以看到，环路增益$A_β$是反馈放大器的一个非常重要的参数，实际上,它是最重要的特性参数：

$1.A_β$的符号决定了反馈的极性； 环路增益$A_β$必须为正，反馈才能为负。

$2.A_β$的大小决定了闭环增益$A_f$与理想值$1$ /β的接近程度。

$3.A_β$的大小决定了反馈系数（1 $+A_β$）的大小，因此，正如我们将在下一部分中看到的那样，它决定了由负反馈引起的放大器性能的各种改进。

4.正如我们将在后面的部分中看到的那样，$A_β$不可避免地随频率变化的问题会导致$A_β$变为负值，进而使反馈放大器变得不稳定。 因此，稳定反馈放大器的设计可能涉及适当修改其环路增益Aβ的频率特性（第11.10节）。

环路增益的重要性促使我们思考如何才能得到环路增益的数值，上面的流程图告诉我们环路增益的值可以有以下几步得出

1.设输入信号 $x_s=0$

2.在适当的地方打断反馈回路并保证A和β值不会发生改变

3.在被打断的反馈回路节点处施加一个测试电压 $x_t$,然后测量放大器的输出电压 $x_r$，如下图

![image-20210518160723914](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210518160723914.png)

有
$$
x_r=--A\beta{x_t}
$$
从而
$$
A\beta=-\frac{x_r}{x_t}
$$
我们观察到，由于$A_β$为正，因此返回的信号$x_r$将与测试信号$x_t$异相，从而验证反馈确实为负。 实际上，此方法用于定性确定反馈的极性。 在后面的部分中，我们将有更多关于环路增益的内容。

##### Example 11.1

图11.3（a）所示的同相运算放大器配置直接实现了图11.1的反馈环路。

![image-20210518161515612](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210518161515612.png)



求：1.假设运放的输入电阻为无穷大而输出电阻为0，请计算 $\beta$的表达式

为了能够更清楚地看到图11.3（a）中的电路与图11.1中的框图之间的直接对应关系，我们用其等效电路模型代替了运算放大器，如图11.3（b）所示。  。

由于运算放大器被假定具有无限的输入电阻和零输出电阻，因此其模型是增益大小为$A$的理想电压控制电压源。从图11.3（b）可以看出，反馈网络由分压器组成 （R1，R2）并直接连接到输出，并将信号$V_f$馈送到运算放大器的反相输入端子。 在这一点上重要的是要注意，运算放大器的零输出电阻会导致输出电压为$AV_i$，而与R1和R2的值无关。 这就是我们在图11.1的框图中假定反馈网络不给基本放大器加载的陈述的意思。 现在我们可以轻松地从中确定反馈因子β
$$
\beta\equiv\frac{V_f}{V_o}=\frac{R_1}{R_1+R_2}
$$
接下来，让我们研究如何从输入端的$V_s$中减去$V_f$。 通过运算放大器的差分作用可以有效地进行减法运算。 就其本质而言，差分输入放大器利用其两个输入端子之间的信号差。 我们还应观察到，由于假定运算放大器的输入电阻是无限的，所以没有电流流入运算放大器的负输入端，从而反馈网络不会在输入侧给放大器加载负载。

2.假设A（$A=10^4$)减少20%，则反馈回路的放大倍数 $A_f(A_{f0}=10)$会下降多少？

该情况下$A>>A_f$从而有

![image-20210518154844264](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210518154844264.png)

故
$$
\beta\simeq\frac1{A_f}=0.1
$$
从而
$$
\frac1{\beta}=1+\frac{R_2}{R_1}=A_f=10\rightarrow\frac{R_2}{R_1}=9
$$
进行迭代，可以得到
$$
A_f=\frac{A}{1+A\beta}\rightarrow\beta=0.0999
$$
假设$A$减小20%，则
$$
A_f=\frac{0.8*10^4}{1+0.8*10^4*0.0999}=9.9975
$$
变化了不到0.025%

##### 11.1.4 Summary

![image-20210518164624187](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210518164624187.png)

### 11.2 Some Properties of Negative Feedback

##### 11.2.1 Gain Desensitivity

例11.1演示了负反馈对闭环增益降低灵敏度的影响，在该示例中，我们看到基本放大器的增益降低了20％，环路增益仅降低了0.025％。这种降低灵敏度的特性可以通过以下方法建立分析

假设 $\beta$是一个常数，对
$$
A_f=\frac{A}{1+A\beta}
$$
两侧微分，有
$$
dA_f=\frac{dA}{(1+A\beta)^2}
$$
两式相除，有

![image-20210518185618285](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210518185618285.png)

这表明$A_f$的变化率（由于某些电路参数的变化）要远远小于A的变化率

##### 11.2.2 Bandw$I_D$th Extension

考虑一个放大器，其高频响应以单极点为特征。 它在中高频时的增益可以表示为

![image-20210518190113160](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210518190113160.png)

在该放大器周围施加具有与频率无关的系数β的负反馈会产生由下式给出的闭环增益$A_f(s)$

![image-20210518190214790](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210518190214790.png)

代入，有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210518190248364.png" alt="image-20210518190248364" style="zoom:67%;" />

从而反馈回路会有一个中频带增益 $A_M/(1+A_M\beta)$，并且其频率上限 $\omega_{Hf}$为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210518190607807.png" alt="image-20210518190607807" style="zoom:67%;" />

换言之，其频率上限会随着反馈系数的变大而变大。类似的，假如一个放大器的开环收益函数中只有一个低频极点，则

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210518190849513.png" alt="image-20210518190849513" style="zoom:67%;" />

请注意，从中我们可以看出，在放大器带宽增加时，中频带增益将以相同的倍数减小，从而将增益带宽积保持在恒定值。 图11.4中的波特图进一步说明了这一点。

最后，请注意，负反馈在扩展放大器带宽方面的作用不足为奇：负反馈可最大程度地减小增益幅度的变化，包括其随频率的变化 

![image-20210518191735071](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210518191735071.png)

##### 11.2.3 Interference Reduction

负反馈可用于减少放大器中的干扰，或更准确地说，可用于增加信号与干扰的比率。 但是，正如我们现在要解释的那样，只有在某些条件下，这种减少干扰的过程才可能实现。 考虑图11.5所示的情况。 图11.5（a）显示了一个具有增益$A_1$，输入信号$V_s$和干扰$V_n$的放大器。 假定由于某种原因该放大器遭受干扰，并且假定干扰可以被引入到放大器的输入端。 该放大器的信噪比为
$$
S/I=V_x/V_n
$$
![image-20210518192252380](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210518192252380.png)

接着考虑下图的电路，在这里我们假设我们可以在这个电路中建立另一个放大器电路$A_2$，并且假设该放大器电路不会受到噪声影响

![image-20210518192514287](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210518192514287.png)

最后我们在总体电路的两侧施加反馈回路，通过叠加原理，可以得到

![image-20210518193038701](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210518193038701.png)

从而整个电路的信噪比为
$$
\frac{S}{I}=\frac{V_s}{V_n}A_2
$$
比之原来的值高出$A_2$倍

我们再次强调，只有当操作者可以使某个放大电路系统几乎完全不受噪声干扰时，才可以使用负反馈来提高信噪比，不过在大多数情况下这种情况都是有可能的。最好的例子是在音频放大器的输出功率放大器级。 这样的阶段通常会遭受电源嗡嗡声的问题。 这是由于该级从电源汲取大电流并且难以简单的地提供足够的电源滤波而出现的问题。 即要求功率输出级提供大的功率增益，但提供很少或没有的电压增益。 因此，我们可以在功率输出级之前放置一个小信号放大器，该放大器提供大的电压增益，然后施加大量的负反馈，从而将电压增益恢复到其原始值。 由于小信号放大器可以由另一个笨重（因此调节性能更好）的电源供电，因此不会出现嗡嗡声问题。

##### 11.2.4 Reduction in Nonlinear Distortion

图11.6中的曲线（a）显示了放大器的传输特性vO与vI的关系。 如图所示，该特性是分段线性的，电压增益从1000变为100，然后变为0。这种非线性传递特性将导致该放大器产生大量的非线性失真。

通过施加负反馈，可以将放大器的传递特性进行相当大的线性化。 这样做并不令人惊讶，因为我们已经看到，负反馈降低了整个闭环增益对基本放大器的开环增益的依赖性。

![image-20210518193724231](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210518193724231.png)

为了说明这一点，让我们将β= 0.01的负反馈应用于放大器，其开环电压传递特性如图11.6所示。 闭环放大器的最终传输特性，$v_0$与$v_S$的关系，在图11.6中显示为曲线（b）。 这里最陡段的斜率由下式给出

![image-20210518194107308](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210518194107308.png)

然后是下一段斜率

![image-20210518194138722](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210518194138722.png)

可以看到斜率的数量级变化已大大减少。 当然，付出的代价是电压增益的降低。 因此，如果必须恢复总增益，则应添加前置放大器。 该前置放大器不应出现严重的非线性失真问题，因为它将处理较小的信号。

最后，应该注意的是，负反馈对放大器的饱和状态完全没有任何作用，因为在饱和状态下，增益很小（几乎为零），因此反馈量几乎为1。

### 11.3 The Feedback Voltage Amplifier

根据要放大的参数（电压或电流）和所需的输出形式（电压或电流），放大器可以分为四类。 这些类别在第1章中进行了讨论。在本节中，我们研究最常见的放大器类型：电压放大器。我们从通过确定将负反馈施加到电压放大器的适当配置来进行研究。 然后，我们提出了一种用于分析反馈电压放大器的简单方法。 该方法利用了环路增益$A_β$

##### 11.3.1 The Series–Shunt Feedback Topology

电压放大器旨在放大输入电压信号并提供输出电压信号。 电压放大器本质上是一个电压控制的电压源。 输入电阻要求较高，输出电阻要求较低。 由于信号源本质上是电压源，因此可以用戴维南等效电路来表示。 由于关注的输出量是输出电压，因此反馈网络应该对输出电压进行采样，就像电压表测量电压一样。同样，由于电压源的戴维南等效表示，反馈信号$x_f$应当可以用一个与电压源串联的电压源来表示。

从上面的讨论中可以看出，一般而言，最适合电压放大器的反馈网络形式如下

![image-20210519115403937](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210519115403937.png)

在该反馈结构中，输入端采用串联结构，使反馈电压能够很好的作用于输入电压上而输出结构采用并联结构（或类似的结构）使反馈电压不会对下一级造成影响。如同我们将要展示的那样，这种结构不仅稳定了电压增益 $V_o/V_s$，还产生了更高的输入电阻 $R_{in}$和更低的输出电阻 $R_{out}$

输入电阻增加的原因在于反馈回路使得信号源到达放大器输入端的信号从 $V_s$变小成 $V_i$,而较小的输入信号进一步导致输入电流变小，这使得从 $V_s$看入的电阻变大，在下一部分中我们将会计算反馈放大器输入电阻的公式

输出电阻降低是因为反馈可将$V_o$保持尽可能恒定。 因此，如果从放大器输出汲取的电流变化了$\Delta I_o$，则$V_o$中的变化$\Delta V_o$将小于不存在反馈时的变化$\Delta V_o$。 因此，输出电阻$\Delta V_o$ / $\Delta I_o$将低于开环放大器的值。 在下面的部分中，我们将得出反馈电压放大器的输出电阻的表达式

##### 11.3.2 Examples of Series–Shunt Feedback Amplifiers

串联-并联反馈放大器的三个例子如图11.8所示。 图11.8（a）中的放大器是熟悉的同相运算放大器配置。 由分压器（$R_1$，$R_2$）组成的反馈网络产生一个电压$V_f$，该电压被施加到运算放大器的负输入端。 通过利用运算放大器差分输入的差分作用，可将$V_f$减去$V_s$。 为了使反馈为负，$V_f$必须与$V_s$具有相同的极性，从而在基本放大器的输入端产生较小的信号。 随着输入电压增大，我们发现反馈电压也会随之线性增大，从而达到负反馈的效果

![image-20210519121615598](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210519121615598.png)

如图11.8（b）所示，第二个反馈电压放大器级联使用两个MOSFET放大器级。 输出电压$V_o$通过由分压器（$R_1$，$R_2$）组成的反馈网络采样，反馈信号$V_f$被馈送到$Q_1$的源极端子。 通过将$V_s$施加到$Q_1$的栅极并将$V_f$施加到其源极来实现信号大小的减小，结果是该放大器输入端的信号$V_i$ = $V_{gs}$ = $V_s$ -$V_f$。 

串联-分流反馈的第三个例子如图11.8（c）所示，它使用了CG晶体管Q，其输出电压$V_o$的一部分$V_f$通过分压器（$R_1$，$R_2$）反馈到栅极。 观察到，CG放大器的输入$V_i$为$V_s$-$V_f$。 但是，像往常一样，我们必须检查反馈的极性：如果$V_s$增加，则$V_d$（即$V_o$）将增加，而$V_f$将相应地增加。 因此，$V_f$和$V_s$的变化趋势相同，从而验证反馈是否为负。

##### 11.3.3 Analysis of the Feedback Voltage Amplifier Utilizing the Loop Gain

在第11.1节中研究的反馈分析方法不能直接应用于实际的反馈电压放大器，例如图11.8中的放大器。 这是因为第11.1节的分析方法是基于以下假设：反馈网络不会影响基本放大器的放大倍数和信号源输入大小。 不幸的是，这种假设在大多数实际的放大器电路中不成立。 如图11.8的电路所示，反馈网络是一个简单的电阻电路，显然会影响到放大电路的特性参数。 例如，在图11.8（b）的电路中，组成反馈网络的电阻$R_2$和$R_1$的值会影响作为基本放大器一部分的共源级$Q_2$的增益（从整体上看，$Q_2$的偏置电路中多出了两个并接的电阻，这使得$Q_2$的工作点位置会受到影响）。 同样，反馈网络电阻$R_1$的值会影响$Q_1$放大器级的增益，该级是基本放大器的一部分。 因此，我们不能轻易地将放大电路与反馈电路分离开来来确定A和β，因此不能使用11.1和11.2节中所描述的的反馈公式。

虽然确定A和β并不容易，但我们依然可以使用11.1.3节中介绍的方法确定其乘积，即环路增益$Aβ$的大小。 另外，我们可以通过识别和隔离反馈网络（例如，图11.8中每个电路中的电阻分压器（R1，R2））轻松获得β值。 然后，我们可以使用Aβ和β的值来确定A和Af。 这种确定环路增益的方法很简单，我们将在本节中使用它来进行反馈电压放大器的分析。 然而，该方法具有局限性，将在后面提到。 下一节将介绍一种更准确，系统的分析反馈电压放大器的方法。

环路增益分析方法包括四个步骤：

1.找出反馈网络，并使用它来确定β的值。

2.定义闭环增益$A_f$的理想值为1 /β。当$Aβ>>1$时，$A_f$的值会十分接近于理想值。$A_f$的理想（或上限）值可用于反馈放大器的初始设计。 它还可以检查下面计算出的$A_f$的实际值。

3.使用第11.1.3节中描述的方法确定环路增益Aβ。 回想一下，在中断循环时，应注意不要更改循环中的条件。 因此，如果我们中断$XX'$处的反馈回路，如图11.9（a）所示，并在$XX'$左侧的端子施加测试电压$V_t$，则$XX'$右侧的端子必须为在施加电压$V_r$的同时也要串入一个阻抗$Z_t$，其大小与节点$XX'$左侧的戴维南等效电阻的阻值相等。、

![image-20210519160724511](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210519160724511.png)

从而环路增益为
$$
A\beta=\frac{A}{1+A\beta}
$$
一般来说，我们打断循环的点需要尽可能取在等效阻抗很大或接近无穷大的点处

4.使用Aβ的值与β的值一起确定开环增益A。然后，从下式确定闭环增益Af：
$$
A_f=\frac{A}{1+A\beta}
$$
如下面的例题所示

##### Example 11.2

对于图11.8（b）的串联-并联反馈放大器，忽略MOSFET的$r_o$

（a）给出反馈网络（β电路）和β的表达式。 同时计算闭环增益Af的理想值或上限值的表达式。

（b）求出$R_2 / R_1$之比，使之闭环增益的理想值为10。 如果$R_1$ = 1 k，则$R_2$必须具有什么值？

（c）找到环路增益Aβ的表达式。

（d）如果$g_{m1}$ = $g_{m2}$ = 4 mA / V且$R_{D1}$ = $R_{D2}$ = 10 k，确定Aβ，A和$A_f$的值



解：

（a）反馈网络如下所示

![image-20210519161517038](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210519161517038.png)

因此
$$
\beta=\frac{V_f}{V_o}=\frac{R_1}{R_1+R_2}
$$
从而可以得到闭环增益的理想值为
$$
A_f\simeq\frac1{\beta}=1+\frac{R_2}{R_1}
$$
（b）由上题知

![image-20210519161814066](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210519161814066.png)

（c）为了计算闭环增益的值，我们首先使信号源电压为0，再在$Q_1$的漏极和$Q_2$的栅极之间寻找一个最适合打断循环的点（我们选择在这条支路上打断循环的原因是$Q_2$的栅极输入电阻为无穷大，因此等效电阻可以直接看作断路）。结果电路如下图所示

![image-20210519162709727](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210519162709727.png)

有

![image-20210519163156606](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210519163156606.png)

从而

![image-20210519163219985](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210519163219985.png)

（d）

![image-20210519163249713](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210519163249713.png)

##### Example 11.3

在图11.11（a）的串联-并联反馈放大器中，运算放大器输入电阻为$R_{$I_D$}$，开路电压增益$μ$和输出电阻$r_o$。 计算β的表达式，$A_f≡V_o$ / $V_s$的理想值和环路增益Aβ。

![image-20210519163501815](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210519163501815.png)

solution

显然其反馈网络为由$R_1$和$R_2$所构成的串联电路，因此

![image-20210519164214544](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210519164214544.png)

从而

![image-20210519164233676](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210519164233676.png)

为了确定环路增益，我们将$V_s$设置为0，并用其等效电路模型代替运算放大器。结果电路如图11.11（b）所示。 接下来，我们断开环路以施加测试电压$V_t$，同时在断开处终止环路，其阻抗等于断开环路之前的阻抗。 产生的电路如图11.11（c）所示，其中在运算放大器的输入端子处环路已断开，左侧端子连接的电阻等于$R_{$I_D$}$。

![image-20210519164410284](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210519164410284.png)

![image-20210519164450180](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210519164450180.png)

根据分压原理，可以得到

![image-20210519170429586](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210519170429586.png)

##### 11.3.4 A Final Remark

环路增益分析方法虽然简单，但并不完整：它无法使我们找到反馈放大器的输入和输出电阻。 下一节将弥补这一缺点，我们在此提供了一种系统的方法来分析反馈电压放大器

### 11.4 Systematic Analysis of Feedback Voltage Amplifiers

在本节中，我们提供了用于分析反馈电压放大器的系统计算方法。 该过程实质上是拆解给定的反馈电压放大器电路，以获得“ $A$电路”，从中我们可以确定开环增益A和开环放大器的其他参数，例如输入和输出电阻， 和“$β$电路”，从中可以找到反馈因子β的值。从而我们根据这两个电路中计算出来的参数来确定反馈放大器中其他参数的值，比如闭环增益和输出电阻，等等

我们的方法是首先考虑反馈网络不影响基本放大电路参数的理想情况。 然后，我们考虑实际情况，其中反馈网络不仅对基本放大器的特性造成影响，而且还有一个有限的源电阻$R_s$和一个有限的负载电阻$R_L$。

##### 11.4.1 The $I_D$eal Case

如前所述，串联-并联是电压放大器的合适反馈拓扑。串联-并联反馈放大器的理想结构如图11.12（a）所示。

它由一个单边开环放大器（A电路）和一个理想的电压采样，电压混合反馈网络（β电路）组成。  A电路具有输入电阻$R_i$，开路电压增益A和输出电阻$R_o$。我们假设其信号源内阻为0并且没有负载电阻。更一步的，注意到β电路并没有连接到A电路上，这就是说β电路并没有改变A电路的放大倍数

![image-20210524185025481](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210524185025481.png)

上图的电路遵循我们此前提到的反馈模型，即
$$
A_f\equiv\frac{V_o}{V_s}=\frac{A}{1+A\beta}
$$
串联-并联反馈放大器的等效电路模型如图11.12（b）所示。 观察到$A_f$是反馈放大器的开路电压增益，$R_{if}$是其输入电阻，$R_{of}$是其输出电阻。$R_{if}$ 和$R_{of}$的表达式可以如下得出。

对于$R_{if}$，请参考图11.12（a）中电路的输入回路。 串联混频从$V_s$中减去$V_f$，因此将$V_i$减小为
$$
V_i=\frac{V_s}{1+A\beta}
$$
从而输入电流变为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210524185700349.png" alt="image-20210524185700349" style="zoom: 80%;" />

从而输入电阻（整体）的值变为
$$
R_{if}\equiv\frac{V_s}{I_i}=(1+A\beta)R_i
$$
因此，如预期的那样，串联混频反馈导致放大器输入电阻的增加等于反馈量（1 +Aβ）的因数，这是电压放大器非常希望的特性。

为了确定图11.12（a）中反馈放大器的输出电阻$R_{of}$，我们将$V_s$设为0并在输出端子之间施加测试电压$V_x$，如图11.13所示。 如果从$V_x$汲取的电流为$I_x$，则输出电阻$R_{of}$为 
$$
R_{of}\equiv\frac{V_x}{I_x}
$$
在输出端的回路方程可以得到

![image-20210524190135871](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210524190135871.png)

而在输入回路中，有

![image-20210524190209615](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210524190209615.png)

现在有$V_f=\beta V_0=\beta V_x$,因此

$$
V_i=-βV_x
$$
![image-20210524190413668](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210524190413668.png)

代入原式，有

![image-20210524190447366](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210524190447366.png)

从而

![image-20210524190458583](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210524190458583.png)

因此，正如预期的那样，输出端的并联采样（或电压采样）导致放大器输出电阻减小一个等于负反馈量（1 +Aβ）的因数，这是电压放大器的另一个非常理想的特性 。

尽管可能并不完全明显，但输出电阻的减小仅是对输出进行采样的方法的结果，而与混合方法无关。因此，晶体管放大器是采用分流（或电压）采样的另一种放大器类型，其输出电阻也将减小。

##### 11.4.2 The Practical Case

在实际的串联-并联反馈放大器中，反馈网络将不是理想的电压控制电压源。 相反，如图11.8的电路所示，反馈网络通常是电阻性的，因此会给基本放大器加载，从而影响A，$R_i$和$R_o$的值。 此外，将有有限的源电阻和负载电阻，这反过来会影响这三个参数。 因此，我们面临的问题如下：给定一个串联分流反馈放大器，如图11.14（a）的框图所示，找到A电路和β电路。

本质上，问题在于用图11.12（a）的理想结构来表示图11.14（a）的通用反馈电压放大器。 该解决方案在没有推导的情况下如图11.14（b）所示。 我们进行以下观察。

1.通过在输入端增加源电阻$R_s$和电阻$R_{11}$，在输出端增加负载电阻$R_L$和电阻$R_{22}$来基本放大完善基本放大器，从而获得A电路。 电阻$R_{11}$和$R_{22}$分别代表反馈网络在输入和输出上对基本放大器的负载效应

$2.R_{11}$是端口1在端口2短路时看入的电阻，$R_{22}$则是端口2在端口1开路时看入的电阻。这些定义已经展现在图11.14(c)中。由于反馈网络与输出并联连接，因此将其端口2短路会破坏反馈。 同样，由于反馈网络与输入端串联连接，因此打开其端口1会破坏反馈。 由此可见，通过查看反馈网络的适当端口，同时另一个端口开路或短路以破坏反馈，可以获得反馈网络的负载效果。

3.反馈因子β是来自端口2的传输 连接到反馈网络的端口1，端口1开路（这会破坏反馈）。 参考图11.14（c）可以看到

![image-20210524191719701](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210524191719701.png)

4.开环增益A可以从图11.14（e）的A电路获得。

5.A和β的值可用于确定闭环增益$A_f$，

![image-20210524191950553](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210524191950553.png)

6.开环输入电阻$R_i$和输出电阻$R_o$可以通过A电路确定[见图11.14（e）]。 这些值可用于确定包含反馈回路后的输入和输出电阻，

![image-20210524192059906](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210524192059906.png)

从图11.14（a）中我们可以看到，$R_{if}$是理想信号源$V_s$看到的电阻。 反馈放大器$R_{in}$的实际输入电阻不包括$R_s$，因此

![image-20210524192217705](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210524192217705.png)

同样，$R_{of}$是包括$R_L$在内的反馈放大器的输出电阻。 实际输出电阻不包括$R_L$（见图11.14（a）），可从$R_{of}$找到，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210524192346164.png" alt="image-20210524192346164" style="zoom:67%;" />

最后要注意的一点是：图11.14（b）中的表示仅等效于图11.14（a）中的原始电路。 近似是由于相对于基本放大器中的大得多的前向传输而忽略了反馈网络中的小前向传输。 同样，回想一下，我们一直假设基本放大器是单向的，也就是说，它没有内部反馈；它没有内部反馈。 所有反馈都发生在反馈网络中，并由反馈因子β表示。

![image-20210524191827756](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210524191827756.png)

![image-20210524190830552](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210524190830552.png)

![image-20210524190845568](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210524190845568.png)

![image-20210524191816709](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210524191816709.png)

##### Example 11.4

图11.15（a）显示了以同相配置连接的运算放大器。 运算放大器具有开路电压增益μ，差分输入电阻R$I_D$和输出电阻ro。 回想一下，在第2章对运算放大器电路的分析中，我们忽略了R$I_D$（假定为无穷大）和ro（假定为零）的影响。 在这里，我们希望使用反馈方法来同时考虑R$I_D$和ro来分析电路。 找到A，β，闭环增益Vo / Vs，输入电阻Rin [见图11.15（a）]和输出电阻Rout的表达式。 并计算出具体数值。有

![image-20210524192735197](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210524192735197.png)

![image-20210524192747331](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210524192747331.png)



![image-20210524192820082](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210524192820082.png)



解：

按照上面的步骤，我们首先找到A电路和β电路，并在电路中分别计算$R_{11}$和$R_{22}$的值，计算其开路电压收益。有

![image-20210524193909238](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210524193909238.png)

![image-20210524193919235](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210524193919235.png)

![image-20210524193937786](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210524193937786.png)

可以计算出A大约为6000V/V，而

![image-20210524194019939](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210524194019939.png)

从而

![image-20210524194031468](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210524194031468.png)

后略

### 11.5 Other Feedback-Amplifier Types

在详细研究了最常见的反馈放大器类型（即反馈电压放大器）之后，我们现在考虑其他三种类型的反馈放大器：反馈跨导放大器，反馈电流放大器和反馈跨阻放大器。 该介绍建立在反馈电压放大器的介绍的基础上，其结果将不作任何推导。 将通过大量涉及实际和广泛使用的电路的解决方案示例来说明该分析方法。

##### 11.5.1 Basic Principles

1.传感：反馈网络必须对感兴趣的输出信号进行采样。 因此，在电压和跨阻放大器的情况下，$V_o$是感兴趣的输出信号，则将反馈网络与放大器输出节点并联，就像连接电压表以测量电压一样。 另一方面，如果$I_o$是感兴趣的输出信号（如跨导和电流放大器的情况），则反馈网络与输出回路串联连接，就像连接电流表以测量电流一样。

2.混合：如果要放大的输入信号是电压，如电压和跨导放大器，则信号源由其Th'evenin等效表示，并且反馈电压信号$V_f$与输入信号串联连接。 另一方面，如果要放大的信号是电流，例如在电流和跨阻放大器的情况下，则使用诺顿形式来表示信号源，并且将反馈电流信号$I_f$与 输入信号源并联。

3.反馈结构：

![image-20210524194928576](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210524194928576.png)

适当的反馈拓扑不仅可以稳定感兴趣的增益（例如，跨导放大器中的跨导Af≡Io / Vs），而且可以使输入和输出电阻更加理想（例如，并联串联拓扑可以降低输入电阻和增加电流放大器的输出电阻）。

4.输入电阻仅取决于连接类型：串联始终会增加电阻； 并联连接始终会降低电阻。 此外，增加或减少始终取决于反馈量$（1+Aβ）$。 因此，例如，对于反馈电流放大器，输入端的并联连接会降低输入电阻：$R_{if}=R_i /（1/Aβ）$ ，并且输出端的串联连接增加了输出电阻；  $R_{of}=（1+Aβ）R_o$，其中$R_i$和$R_o$是开环放大器的输入和输出电阻。

$5.A$，$β$，$Aβ$和$A_f$的单位：根据放大器的类型，$A$，$β$和$A_f$的单位可以为$V / V，A / A，V / A$或$A / V$。 但是，$Aβ$始终是无量纲的。

6.使用环路增益进行分析：对于任何反馈放大器类型，都可以使用第11.3.3节中所述的方法确定环路增益Aβ。 然后，可以将环路增益与反馈因子β一起使用，以确定开环增益A，从而确定闭环增益Af。 但是，这种方法不能确定反馈放大器的输入和输出电阻。为此，我们需要使用以下所述的系统分析方法来获得A电路

##### Example 11.6

图11.17（a）显示了一个反馈跨导放大器，该放大器使用一个运放和一个NMOS晶体管。 反馈网络由一个电阻$R_F$组成，该电阻$R_F$感测输出电流$I_o$（请注意MOSFET的漏极电流和源极电流相等），并提供一个反馈电压，该电压通过运放输入的差分作用从$V_s$减去 。 请注意，反馈拓扑是串联-串联的，特别适合跨导放大器。

![image-20210524195720128](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210524195720128.png)

（a）求β并因此求出当Aβ为1时获得的闭环增益$A_f≡I_o / V_s。$
（b）用具有开路电压增益$μ$，输入差分电阻$R_{$I_D$}$和输出电阻$r_{o1}$的等效电路模型代替运算放大器。 同样，用具有跨导$g_m$和输出电阻$r_{o2}$的混合π模型代替MOSFET。 掌握了完整的等效电路后，将$V_s$设为0并断开环路以确定$Aβ$。
 （c）将$Aβ$与$β$联立计算$A$。
 （d）对于$μ= 1000，R_{$I_D$} = 100 k，g_m = 2 mA / V，r_{o2} = 20 k$和$R_F = 1 k$的情况，求出$β，Aβ，A$和$A_f$的值。 将$A_f$与$Aβ$为1时获得的理想值进行比较。

以下为进行电路分析时所需电路图，数值计算略。

![image-20210524200231541](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210524200231541.png)

下为等效电路图

![image-20210524200245155](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210524200245155.png)



下为测试电路

![image-20210524200259817](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210524200259817.png)

##### 11.5.2 The Feedback Transconductance Amplifier (Series–Series)

图11.18（a）显示了反馈跨导放大器的理想结构。开环放大器（A电路）是单向的，具有输入电阻$R_i$、短路跨导增益A和输出电阻$R_o$。反馈网络检测短路输出电流$I_o=AV_i$。注意，由于反馈网络端口2的电阻为零，反馈网络不会加载到放大器输出上。反馈网络在端口1处提供电压信号$V_f=βI_o$，反馈因子$β$单位为$V/A$。反馈信号与输入信号源$V_s$串联，反馈网络不加载放大器输入。最后，注意反馈输入电阻$R_{if}$和反馈输出电阻$R_{of}$的定义。后者是通过观察任意两个节点（如$O$和$O'$ ）之间的输出环路发现的电阻。

![image-20210524200911753](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210524200911753.png)

反馈跨导放大器的等效电路如图11.18（b）所示。注意，闭环增益$A_f$是短路输出（即此时负载电阻大小为0）电流$I_o$和输入电压$V_s$的比值，因此它是反馈放大器的短路跨导。此外，$R_{of}$是输出环路中任意两个节点之间的电阻，例如$O$和$O'$ ，而$V_s$设置为零。最后，图11.18（c）提供了用于确定$A_f$、$R_{if}$和$R_{of}$的公式。

![image-20210524201616534](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210524201616534.png)

这是在理想情况下的时候，我们现在考虑反馈跨导放大器的一般或实际情况，如图11.19（a）所示。为了能够对这个电路进行反馈分析，我们必须找到A电路和β电路. 如图11.19（b）所示。用$R_s$和$R_L$以及两个电阻$R_{11}$和$R_{22}$分别表示反馈网络在基本放大器输入端和输出端的负载效应，对基本放大器进行完善，得到A电路。图11.19（b）显示了如何确定$R_{11}$和$R_{22}$。这里，输入和输出端的串联意味着反馈网络的另一个端口必须保持开路。这是 $\beta$已知的情况。

![image-20210524201805620](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210524201805620.png)

![image-20210525185031196](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210525185031196.png)

![image-20210525185311957](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210525185311957.png)

##### Example 11.7

图11.20（a）显示了一个反馈跨导放大器，它由一个差分放大器$A_1$组成，该差分放大器具有一个输入差分电阻$R_{$I_D$}$、一个开路电压增益$A_1$和一个输出电阻$R_{o1}$，与一个具有跨导$g_{m2}$和一个输出电阻$r_{o2}$的共源MOSFET $Q_2$级联。利用反馈分析法确定闭环跨导Af，输入电阻$R_{in}$和输出电阻$R_{out}$。后者是$R_L$端子看向输出回路的电阻

![image-20210525185729305](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210525185729305.png)

首先确定基本放大器和反馈电路。从电路图中我们可以看出，基本放大电路有运放和晶体管构成；而输出电流通过$R_f$采样反馈到输入回路中。接下来确定闭环增益（$A_f$）的近似值（基于我们认为环路增益$A\beta$的值远远大于1的假设），换句话说
$$
\beta=R_f
$$
从而对于极大的$A\beta$,有
$$
A_f\simeq\frac1{\beta}=\frac1{R_f}
$$
接下来，我们确定A电路。由于反馈网络（图11.20b）与输入和输出回路串联，我们在每个回路中串联一个电阻$R_F$。这样做，在A电路中包括$R_s$和$R_L$，并用小信号模型替换$A_1$和$Q_2$，得到如图11.20（c）所示的A电路。

![image-20210525190550007](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210525190550007.png)

电路分析如下

![image-20210525190756567](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210525190756567.png)

从而其开环增益为

![image-20210525190835477](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210525190835477.png)

因此

![image-20210525190921346](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210525190921346.png)

进行一次迭代，有

![image-20210525190945059](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210525190945059.png)

![image-20210525190953869](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210525190953869.png)

后略

##### Example 11.8

由于负反馈扩展了放大器的带宽，所以在宽带放大器的设计中通常采用负反馈。一个这样的放大器是MC1553。MC1553的部分电路如图11.21（a）所示。所示电路（称为反馈三元组）由三个增益级组成，串联-串联反馈由$R_{E1}$、$R_F$和$R_{E2}$组成的网络提供。可以观察到，反馈网络对$Q_3$的发射极电流$I_o$进行采样，因此$I_o$是反馈放大器的输出量。然而，实际上，$I_o$很难利用。因此，通常取$Q_3$集电极电流$I_c$作为输出。这个电流当然几乎等于$I_o$。因此，作为以$I_c$作为输出电流的跨导放大器，感兴趣的输出电阻是图11.21（a）中标记为$R_{out}$的电阻。在某些应用中，$I_c$通过负载电阻，如RC3，电压Vo作为输出。假设偏置电路（未显示）确定$I_{C1}=0.6$ mA、$I_{C2}=1$ mA和$I_{C3}=4$ mA。还假设对于所有三个晶体管,$h_{fe}=100$和$r_o=∞$

![image-20210525191502104](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210525191502104.png)



当$A\beta$远远大于1时

![image-20210525191543188](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210525191543188.png)

反馈系数β 可以从反馈网络中找到。反馈网络在图11.21（a）中突出显示，并且β 如图11.21（b）所示

![image-20210525191623105](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210525191623105.png)

故

![image-20210525191749855](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210525191749855.png)

从而

![image-20210525191733794](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210525191733794.png)

（b） 利用图11.19给出的加载规则，我们得到了图11.21（c）所示的A电路。我们首先确定第一级的增益。这可以通过检视电路写为

![image-20210525192001152](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210525192001152.png)

![image-20210525192200559](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210525192200559.png)

同理第二级的增益可以写作

![image-20210525192234431](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210525192234431.png)

最后是第三级的增益

![image-20210525192300774](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210525192300774.png)

后略

##### 11.5.3 The Feedback Transresistance Amplifier (Shunt–Shunt)

图11.22（a）显示了理想的反馈跨阻放大器，正如预期的那样，它利用了并联-并联拓扑结构。放大器等效电路如图11.22（b）所示，确定$A_f$、$ R_{if}$和$R_{of}$的公式如图11.22（c）所示。

![image-20210525192439795](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210525192439795.png)

![image-20210525192453806](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210525192453806.png)

![image-20210525192506913](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210525192506913.png)

反馈分析方法在通用跨阻放大器中的应用如图11.23所示，其中给出了所需的所有步骤和公式。现在用一个详细的例子来说明这个方法。

![image-20210525192733447](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210525192733447.png)

![image-20210525192748469](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210525192748469.png)

![image-20210526143152086](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210526143152086.png)

从上式中可以看出这里的$R_{in}$($R_{out}$同理)即是从并联等效电阻中减去了信号源内阻和负载电阻的分量

##### Example 11.9

图11.24（a）显示了一个反馈跨阻放大器。它是通过在放大倍数为 $\mu$的电压放大器的负反馈通道中连接一个电阻$R_F$来形成的,其中该电压放大器的输入电阻为$R_{$I_D$}$,输出电阻为$r_o$。这个电压放大器可以是一个运放，一个简单的差分放大器，或者是一个简单的共射放大电路。练习11.18将考虑后一种情况。当然，收益$μ$,越高 反馈跨阻放大器的特性越理想，这是因为环路增益随之增加。

![image-20210526143402978](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210526143402978.png)

（a） 当环路增益较大时，求出反馈放大器闭环跨阻$V_o$/$I_s$的近似表达式。
（b） 找到A回路和$A$、$R_i$和$R_o$的表达式。
（c） 找到环路增益、$A_f$、$ R_{if}$、$R_{in}$、$R_{of}$和$R_{out}$的表达式。
（d）求$R_i$，$R_o$，$A$，$β$, $Aβ$, $A_f$，$R_{if}$，$R_{in}$，$R_{of}$和$R_{out}$的值，其中 $\mu$ = 104V/V，$R_{$I_D$}=∞$, $r_o=100\Omega$ ，$R_F=10k\Omega$ ，$R_s=R_L=1k\Omega$ 。
（e） 如果如果将电流源改为电压源（内阻大小不变）来到馈送放大器，请计算电压增益Vo/Vs的表达式和值 

解：假如环路增益$A\beta$很大，那么

![image-20210526184553781](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210526184553781.png)

其中β的值可由以下电路计算出来

![image-20210526184638617](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210526184638617.png)



![image-20210526184648870](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210526184648870.png)

即

![image-20210526184716030](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210526184716030.png)

因此

![image-20210526184726780](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210526184726780.png)

注意，在这种情况下，输入节点处的电压大小将非常接近地面（也就是接近与0），也就是说，几乎所有的$I_s$都会通过$R_F$，导致$V_o\simeq0-I_ER_F=-I_ER_F$ 。这应该让人想起第2.2节中研究的反相运算放大器配置。

从图11.24（b）中的反馈网络中，我们可以看到放大器输入和输出处的负载效应只是分别增加了一个并接电阻$R_F$。如图11.24（c）所示的A电路所示，我们已更换了放大器μ 其等效电路模型。开环跨导电阻A可以得到如下：

![image-20210526185334778](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210526185334778.png)

其A电路如下

![image-20210526185408478](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210526185408478.png)

其中

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210526185433065.png" alt="image-20210526185433065" style="zoom:67%;" />

因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210526185450153.png" alt="image-20210526185450153" style="zoom:67%;" />

我们可以通过使信号源的输入电流大小为0来得到开环输出电阻，基于放大器的单向性，我们可以得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210526185643653.png" alt="image-20210526185643653" style="zoom:67%;" />

环路增益由此前的计算可以得到，是

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210526185731333.png" alt="image-20210526185731333" style="zoom:67%;" />

我们注意到虽然开环增益大小和反馈回路增益大小均为负数，但其乘积环路增益为正数，这决定了其作为负反馈的本质

此外，闭环增益大小也因此可以得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210526185929096.png" alt="image-20210526185929096" style="zoom:67%;" />

代入数据，从而有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210526185955255.png" alt="image-20210526185955255" style="zoom:67%;" />

由于环路增益的大小远远大于1，故有
$$
A_f\simeq-R_F
$$
此外

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210526190127440.png" alt="image-20210526190127440" style="zoom:67%;" />

令
$$
\frac{\mu(R_F||R_L)}{[r_o+(R_F||R_L)]}=\mu'
$$
则有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210526190416034.png" alt="image-20210526190416034" style="zoom:67%;" />

最后得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210526190452593.png" alt="image-20210526190452593" style="zoom: 67%;" />

同理我们可以得到输出电阻

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210526190525350.png" alt="image-20210526190525350" style="zoom:67%;" />

##### 11.5.4 The Feedback Current Amplifier (Shunt–Series)

图11.25（a）显示了理想的反馈电流放大器，正如预期的那样，它利用了并联-串联拓扑结构。放大器等效电路如图11.25（b）所示，用于确定$A_f$、$r_{if}$和$R_{of}$的公式如图11.25（c）所示。
图11.26显示了反馈分析方法可应用于一般反馈电流放大器。给出了所有必要的分析步骤和计算公式。

![image-20210526190804837](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210526190804837.png)

![image-20210526190817972](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210526190817972.png)

![image-20210526190833845](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210526190833845.png)

![image-20210526190907722](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210526190907722.png)

![image-20210526190919943](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210526190919943.png)

![image-20210526190939455](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210526190939455.png)

一个电流反馈放大器的例子（分析时请注意其虚地和虚短现象）

![image-20210526192709164](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210526192709164.png)



### 11.6 Summary of the Feedback-Analysis Method

表11.2总结了分析和设计四种反馈放大器时采用的规则和关系。除了表11.2中丰富的信息外，我们还提供了以下重要的分析提示。

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210526192946097.png" alt="image-20210526192946097"  />

1.始终从确定闭环增益$A_f$的近似值开始分析，首先假设环路增益$Aβ$ 很大，因此$Af\sime$Q_1$/\beta$ 应作为对$A_f$的最终值的检查。实际$A_f$与理想值的接近程度取决于$A\beta$的大小。

2.输入或输出的并联连接总是导致相应的电阻（输入或输出）减小。输入或输出端的串联总是导致相应的电阻（输入或输出）增加。

3.在利用负反馈改善设计中放大器的性能时，设计的出发点是选择适合当前应用的反馈拓扑。负反馈（1+Aβ)的所需数目（也就是反馈网络的数目） 可以利用这样一个事实来确定，即正是这个量决定了各种放大器参数的改善幅度。还有，反馈系数$β$可根据所需的闭环增益$A_f$确定。
$$
\beta\simeq1/A_f
$$

### 11.7 The Stability Problem

##### 11.7.1 Transfer Function of the Feedback Amplifier

在如图11.1的一般结构所示的反馈放大器中，开环增益A通常是频率的函数，因此应更准确地称为开环传递函数$A(s)$。此外，我们假设一般的反馈网络由线性元件构成，因此反馈系数$β$是恒定的，但不一定总是这样。因此，我们假设在一般情况下，反馈传递函数是$β(s)$。因此，闭环传递函数$A_f(s)$由下式给出

$$
A_f(s)=\frac{A(s)}{1+A(s)\beta(s)}
$$
为了将注意力集中在我们在本节讨论的中心点上，我们假设放大器与恒定直流增益$A_0$直接耦合，并且在高频带中出现极点和零点。另外，暂时让我们假设在低频$β(s)$会减少到一个恒定值。因此，在低频时，环路增益$A(s)β(s)$ 变成常量，并且应该是正数；否则反馈不会是负面的。问题是：在更高的频率下会发生什么？

其物理频率$s=j\omega$代入，有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210526194255695.png" alt="image-20210526194255695" style="zoom:67%;" />

由于其均为复数，因此可以转化为幅角和模长表示，即

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210526194410343.png" alt="image-20210526194410343" style="zoom:67%;" />

环路增益随频率变化的方式决定了反馈放大器的稳定与否。要了解这一事实，请考虑相位角φ(ω) =180°的情况. 在这个频率下，$ω_{180}$会使回路增益$A(jω)β( jω)$ 变为负实数。因此，在这个频率的反馈将变为正反馈。如果在$ω = ω_{180}$时的环路增益的大小小于1，那么从等式（11.58）我们可以看出闭环增益$A_f(jω)$ 将大于开环增益$A(jω),$ 因为式（11.58）的分母将小于1。然而，反馈放大器将是稳定的。

另一方面，如果频率$ω_{180}$环路增益的大小等于1，由式（11.58）可知，$A_f（jω)$ 将变为无穷大。这意味着放大器即使在输入为0的情况下仍然会有输出；这就是振荡器的定义。为了直观地观察这个反馈回路是如何振荡的，考虑图11.1的一般回路，外部输入$x_s$设置为零。电路中的任何干扰，如电源开关的闭合，将在放大器的输入处产生信号$x_i(t)$。这样的噪声信号通常包含很宽的频率范围，现在我们将集中讨论频率分量ω = ω180，即信号$X_i sin(ω_{180}）$。这个输入信号将产生如下的反馈信号

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210526195425174.png" alt="image-20210526195425174" style="zoom:67%;" />

由于$X_f$在输入端的summer块中进一步乘以–1，我们看到反馈导致放大器输入端的信号$X_i$保持不变。也就是说，从这一点开始，放大器的输入和输出频率都会出现频率大小为$ω_{180}$的正弦信号。

现在的问题是：如果$ω_{180}$环路增益的大小大于1，将会发生什么？我们将不会从一般的角度来回答这个问题，而是我们在这里感兴趣的受限但非常重要的一类电路。答案（从公式（11.58）中不明显）是电路将振荡，并且振荡的幅度将增加，直到一些非线性（总是以某种形式存在）将环路增益的幅度降低到精确的单位，此时将获得持续振荡。在第十八章的正弦波振荡器的设计中将采用这种机制，即通过使用环路增益大于1的正反馈来启动振荡，然后使用非线性来将环路增益减小到所需幅度（也就是1），这种机制将在正弦振荡器的设计中得到利用。不过现在恰恰相反，我们知道在负反馈放大器中如何发生振荡，我们希望找到防止振荡发生的方法。

##### 11.7.2 The Nyquist Plot（奈奎斯特图）

奈奎斯特图是基于上述讨论的用于测试稳定性的一种形式化方法。 它只是环路增益的极坐标图，其中频率用作参数。如下图所示

![image-20210526200237730](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210526200237730.png)

请注意，径向距离为|Aβ| 角度是相位角φ。 实线图表示正频率。 由于环路增益（就此而言，物理网络的任何增益函数）都具有一个幅度，该幅度是频率的偶函数，而相位是频率的奇函数，因此Aβ表示负频率（如图11.28所示）（如虚线）可以通过Re轴绘制镜像。

奈奎斯特图与负实轴在频率ω180处相交。 因此，如果此交点发生在点（–1，0）的左侧，我们知道该频率下环路增益的幅度大于1，放大器将变得不稳定。 另一方面，如果相交出现在点（–1，0）的右侧，则放大器将保持稳定。 因此，如果奈奎斯特图围绕点（–1，0），则放大器将不稳定。 但是，应该指出的是，该陈述是奈奎斯特准则的简化版本。 但是，它适用于我们感兴趣的所有电路。

### 11.8 Effect of Feedback on the Amplifier Poles

放大器的频率响应和稳定性直接由其极点决定。因此，我们将研究反馈对放大器极点的影响

##### 11.8.1 Stability and Pole Location

我们将从考虑稳定性和极点位置之间的关系开始。为了使放大器或任何其他系统稳定，其极点应位于s平面的左半部分。一对位于$jω$轴（虚轴）上的复共轭极点会引起持续的正弦振荡。而位于右半平面的极点则会使振荡幅度越来越大。

为了验证上述说法，考虑一个极点位置位于$s=σ_0\pm jω$的极点。如果该放大器受到干扰，例如电源开关闭合引起的干扰，其瞬态响应将包含以下形式的项

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527110300877.png" alt="image-20210527110300877" style="zoom:67%;" />

该复变函数可以证明，当极点位置位于复平面左侧时是稳定的；而位于右侧时是不稳定的，如下图所示

![image-20210527110653675](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527110653675.png)

![image-20210527110707651](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527110707651.png)

尽管上面的讨论是关于复共轭形式极点的，但可以证明，任何右半平面极点的存在都会导致不稳定性

##### 11.8.2 Poles of the Feedback Amplifier

从式（11.57）中的闭环传递函数可以看出，反馈放大器的极点是$1+A(s)β(s)$的零点 。即解方程

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527110955625.png" alt="image-20210527110955625" style="zoom:67%;" />

这就是反馈回路的特征方程。因此，很明显，对放大器施加反馈会改变其极点。

下面，我们将考虑反馈如何影响放大器的极点。为此，我们假设开环放大器有实极点，没有有限的零点（即，所有的零点都在$s=∞$上). 这将简化分析，使我们能够把注意力集中在所涉及的基本概念上。我们还假设反馈因子β与频率无关。

##### 11.8.3 Amplifier with a Single-Pole Response

首先考虑一个放大器的情况，假设其开环传递函数是单极的

$$
A(s)=\frac{A_0}{1+s/\omega_p}
$$
我们此前假设反馈因数$β$的大小不守频率影响，因此其闭环增益大小为
$$
A_f(s)=\frac{A_0/(1+A_0\beta)}{1+s/\omega_p(1+A_0\beta)}
$$
换言之，反馈使得极点沿负实半轴移动了一个系数，有
$$
\omega_{Pf}=\omega_P(1+A_0\beta)
$$
如下图所示

![image-20210527111801839](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527111801839.png)

下面的波特图展示了其开环和闭环时的幅频响应

![image-20210527111958297](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527111958297.png)

可以看到，在较低频率下，$|A|$与$|A_f|$之间有$20lg（1+A_0\beta）$的差距，但在高频下这两者趋于重合。当$ω>>\omega_P(1+A_0\beta)$(也就是说$s/\omega_P>>1$时)，有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527112518711.png" alt="image-20210527112518711" style="zoom: 67%;" />

从物理上讲，在如此高的频率，环路增益远小于1，反馈是无效的

由于该闭环放大器的极点没有位于右半平面的极点，从而单极放大器对于任何$β$值都是稳定的. 因此，这个放大器被认为是无条件稳定的（unconditionally stable)。然而，这个结果并不令人惊讶，因为与单极响应相关的相位滞后永远不会大于90°. 因此，环路增益从未达到180° (使反馈变为正所需的相移）。

##### 11.8.4 Amplifier with a Two-Pole Response

接下来考虑一个放大器，其开环传递函数由两个实轴极点表征

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527113112070.png" alt="image-20210527113112070" style="zoom:67%;" />

在这种情况下，其闭环极点由方程$1+A(s)\beta=0$给出，展开可以得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527113326311.png" alt="image-20210527113326311" style="zoom:67%;" />

可以解得

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527113356498.png" alt="image-20210527113356498" style="zoom:67%;" />

从上式中我们可以看到随着环路增益$A_0\beta$从0开始增加，这两个极点会逐渐靠拢，直到达到重合（即此时根号内数值为0）。如果闭环增益进一步增加，则这两个极点会变为复共轭，并分别向虚轴的两个相反方向分开，下图显示了随着环路增益值的增加，极点在该复平面上的运动轨迹。称为root-locus diagram

![image-20210527133127853](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527133127853.png)

从上图中我们也可以看出这个反馈放大器是无条件稳定的。不过这也在我们意料之中，虽然该放大器最多可以拥有180的相位延迟（有两个极点）。但要达到180的相位延迟，必须使输入信号的频率达到无穷大才行。

在图11.31的根轨迹图上进行的另一观察是，开环放大器可能有一个主极点，但闭环放大器不一定是这样。当然，一旦从公式（11.68）中找到极点，闭环放大器的响应就可以绘制出来。与一般的二阶响应一样，闭环响应可以显示峰值（见第17章）。特别的，该二阶电路的特征方程如下

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527133554678.png" alt="image-20210527133554678" style="zoom:67%;" />

其中$ω_0$称作极点频率（pole frequency），Q称作pole Q factor。从这个特征方程中我们可以看出，当Q大于0.5时，该特征方程的解即为复数。换言之，极点即为复数。下图给出了这两个参数的几何解释

![image-20210527133936779](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527133936779.png)

其中$ω_0$表示极点到原点的极径，而Q则与极点到虚轴的距离有关

从上面的讯息中，我们可以计算得到Q的值，是

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527134714864.png" alt="image-20210527134714864" style="zoom:67%;" />

从第17章对二阶网络响应的研究可以看出，所考虑的反馈放大器的响应的Q有峰值（≤ 0.707）. 对应于Q=0.707的边界情况（使相位延迟在45°处的极点）导致最大平坦响应。图11.33显示了各种Q值（或相应地，各种$A_0β$值）的可能响应.

![image-20210527135027580](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527135027580.png)

##### Example 11.11

为了说明刚才讨论的一些想法，我们考虑图11.34（a）所示的正反馈电路。 求出回路方程$L(s)$和特征方程。 并画出其对应不断变化的K的根轨迹图，并找出产生最大平坦响应的K值和使电路振荡的K值。 假设放大器具有与频率无关的增益，无限的输入阻抗和零输出阻抗。

![image-20210527140222023](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527140222023.png)

为了获得环路增益的大小，我们将信号源短路并断开放大器输入端的环路。 然后，我们施加一个测试电压$V_t$并计算返回电压$V_r$，如图11.34（b）所示。

![image-20210527140548684](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527140548684.png)

其回路传输方程由下式给出
$$
L(s)\equiv A(s)\beta(s)=-\frac{V_r}{V_t}=-KT(s)
$$
其中$T(s)$是上图虚线框中的双端口RC电路的传递函数

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527140934961.png" alt="image-20210527140934961" style="zoom:67%;" />

因此

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527140955487.png" alt="image-20210527140955487" style="zoom:67%;" />

其特征方程为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527141027919.png" alt="image-20210527141027919" style="zoom:67%;" />

换言之

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527141046611.png" alt="image-20210527141046611" style="zoom:67%;" />

比之于此前我们所给出的二阶电路标准特征方程，我们可以得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527141146621.png" alt="image-20210527141146621" style="zoom:67%;" />

因此当K=0时，Q=1/3，从而极点位于负实轴上。而随着放大倍数K的增加，极点之间的距离逐渐拉近并最终重合。继续增加使得两级点开始在此分离。在上面我们看到$ω_0$的值不变。换言之其根轨迹是一个圆，在圆与虚轴的交点处我们可以得到$Q=\infin$，换言之此时K=3，恰好使放大电路进入不稳定状态，因此对于K大于等于3，电路会变得不稳定

![image-20210527141946274](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527141946274.png)

##### 11.8.5 Amplifiers with Three or More Poles

图11.35显示了一个反馈放大器的根轨迹图，其开环响应以三个极点为特征。 如图所示，从零开始增加环路增益会使最高频率极点向外移动，而另外两个极点更靠近在一起。 随着$A_0\beta$进一步增加，两个极点变得重合，然后变得复杂且共轭。 存在这对复共轭极点进入s平面右半部分的$A_0\beta$值，从而使放大器变得不稳定。这个结果并非完全出乎意料，因为当ω接近∞时，三极放大器的相移达到–270°。 因此，存在一个有限的频率ω180，在该频率下，环路增益具有180°的相移。

从图11.35的根轨迹图可以看出，始终可以通过使环路增益$A_0\beta$小于与进入右半平面的极点相对应的值来保持放大器的稳定性。 就奈奎斯特图而言，$A_0\beta$的临界值为该图通过（–1、0）点的临界值。 将$A_0\beta$降低到该值以下会导致奈奎斯特图缩小，从而使负实轴与（–1，0）点右侧相交，表明放大器性能稳定。 另一方面，将$A_0\beta$增加到临界值以上会导致奈奎斯特图扩大，从而圈住（–1，0）点并指示性能不稳定。

对于给定的开环增益$A_0$，可以根据反馈因子β陈述上述结论。 即，存在β的最大值，超过该最大值，反馈放大器变得不稳定。 或者，我们可以声明存在一个闭环增益$A_{f0}$的最小值，低于该最小值放大器就会变得不稳定。 为了获得较低的闭环增益值，因此需要改变环路传递函数$L(s)$。 这就是称为频率补偿的过程。 我们将在11.10节中研究频率补偿的理论和技术

![image-20210527142159145](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527142159145.png)

### 11.9 Stability Study Using Bode Plots

##### 11.9.1 Gain and Phase Margins(增益和相位裕度)

从第11.17和11.18节我们知道，可以通过检查其环路增益Aβ作为频率的函数来确定反馈放大器是否稳定。 最简单，最有效的方法之一是使用Aβ的波特图，如图11.36所示。  （请注意，因为相位接近–360°，所以检查的电路是四阶电路。）图11.36中绘出了环路增益的反馈放大器将是稳定的，因为在180°的相移频率$ω_{180}$处， 环路增益的幅度小于1（负dB）。  $ω_{180}$处的$|A\beta|$值与单位增益的差值（注：是转换为分贝以后的差值）称为增益裕度。 增益裕度表示在保持稳定性的同时可以增加环路增益的量。 反馈放大器通常设计为具有足够的增益裕度，以允许环路增益随温度，时间等不可避免地发生变化。

![image-20210527144227376](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527144227376.png)   

类似的我们可以定义相位裕度。如果在此频率（指单位增益时的频率）下相位角（幅度）小于180°，则放大器是稳定的。 这就是图11.36所示的情况。 该频率下的相位角与180°之间的差称为相位裕度。 另一方面，如果在单位环路增益幅度的频率下，相位滞后超过180°，则放大器将变得不稳定。

##### 11.9.2 Effect of Phase Margin on Closed-Loop Response

一般而言我们所设计的放大器要有至少45度的相位裕度。相位裕度的大小对闭环增益响应的形状有深远的影响。 要了解这种关系，请考虑具有较大低频环路增益的反馈放大器。假设其$A_0β>>1$，并记其单位增益频率为$ω_1$，有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527145204246.png" alt="image-20210527145204246" style="zoom:67%;" />

其中θ的大小为180减去相位裕度，此时环路增益大小为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527145319966.png" alt="image-20210527145319966" style="zoom:67%;" />

合并两式可以得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527145356596.png" alt="image-20210527145356596" style="zoom:67%;" />

从而在单位增益频率时的增益大小为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527145444324.png" alt="image-20210527145444324" style="zoom:67%;" />

对于大小为45度的相位裕度，我们可以得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527145519032.png" alt="image-20210527145519032" style="zoom:67%;" />

即，增益峰值是低频值1 /β的1.3倍。 该峰值随相位裕度的减小而增加，最终在相位裕度为零时达到∞。

##### 11.9.3 An Alternative Approach for Investigating Stability

通过构建环路增益$Aβ$的Bode图来研究稳定性可能是一个冗长而耗时的过程，尤其是当我们必须研究给定放大器对于各种反馈网络的稳定性时。另一种更简单的方法是只构造开环增益$A(jω)$的Bode图。暂时假设β与频率无关，在这个波特图中同时画出$20lg(1/\beta)$和$20lg|A|$,两条曲线之差是

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527151011179.png" alt="image-20210527151011179" style="zoom:67%;" />

由此我们得到了环路增益（单位为分贝）。 因此，我们可以通过检查两个图之间的差异来研究稳定性。 如果我们希望评估不同反馈因子的稳定性，我们只需在水平$20 log（1 /β）$处绘制另一条水平直线。

为了说明这一点，考虑一个放大器，其开环传递函数的特征方程有三个极点。 为简单起见，让三个极点分开放置-例如，分别为0.1 MHz，1 MHz和10 MHz，如图11.37所示。 请注意，由于两极之间的距离很远，因此第一个极点频率的相位约为–45°，第二个极点的频率约为–135°，第三个极点的频率约为–225°。  A（jω）的相位为–180°的频率位于–40dB /十倍频段上，如图11.37所示。

![image-20210527151249621](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527151249621.png)

该放大器的开环增益可以表示为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527151616980.png" alt="image-20210527151616980" style="zoom:67%;" />

并且相位可以表示为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527151812823.png" alt="image-20210527151812823" style="zoom:67%;" />

图11.37所示的幅值和相位图是使用构造波特图的方法（附录F）获得的。 这些图提供了重要放大器参数的近似值，并且可以从等式（11.85） 和（11.86）获得更精确的值。  例如，从图11.37可以得出相位角为180°的频率$f_{180}$约为$3.2×10^6 Hz$。 以该值作为初始值，可以使用等式通过反复迭代找到更精确的值。  （11.86）。 结果是$f_{180}$ $= 3.34×10^6 Hz$。 在此频率下， （11.85）给出的增益幅度为58.2 dB，这与图11.37给出的60 dB的近似值相当接近。

接下来考虑图11.37中标记为（a）的直线。 这条线表示一个反馈因子，其$20 log（1 /β）= 85 dB$，对应于$β= 5.623×10^{-5}$和83.6 $dB$的闭环增益。 由于环路增益是| A |和1 /β线之间的差 曲线，交点$X_1$对应于|Aβ| = 1的频率。 使用图11.37的图表，可以发现该频率约为$5.6×10^5 Hz。$ 使用传递函数方程可以得到更精确的$4.936×10^5$值。 在此频率下，相位角约为–108°。 因此，对于$20 log（1 /β）= 85 dB$的闭环放大器,要使其保持稳定，相位裕度为72°。 从图11.37可以很容易地获得增益裕度； 它是25 dB。

接下来，假设我们希望使用该放大器来获得标称值50 dB的闭环增益。 由于$A_0 = 100 dB$，我们看到$20 log（A_0β）=50 dB$，导致$20 log（1 /β）=50dB$。 为了查看该闭环放大器是否稳定，我们在图11.37中画出了高度为50 dB的线（b）。 该线在相应的相位大于180°的点$X_2$与开环增益曲线相交。 因此，增益为50 dB的闭环放大器将不稳定。

实际上，从图11.37可以很容易地看出，在使放大器稳定的情况下，可以使用的最小值$20 log（1 /β）$为60 dB。 换句话说，用该放大器获得的稳定闭环增益的最小值约为60 dB。 但是，在此增益值下，此放大器的制造版本可能仍会振荡，因为没有余量以允许可能的增益变化。

由于| A |总是在Bode图的–40dB / decade片段上出现180°相位点，因此保证稳定性的经验法则如下：如果$20 log  （1 /β）$线与$20 log | A |$相交 曲线在–20 dB /十倍频段上的一点。则应该至少保证45°的相位裕量。 对于图11.37的示例，该规则意味着β的最大值为$10^{-4}$，这对应于大约80 dB的闭环增益。

对于β是频率的函数的情况，可以概括上述经验法则。 一般规则指出，在$20 log [1 / |β（jω）|]$和$20 log | A（jω）|$的交点处 斜率之差（称为闭合率）不应超过20 dB /十倍。

### 11.10 Frequency Compensation(频率补偿)

在本节中，我们将讨论用于修改具有三个或更多极点的放大器的开环传递函数A（s）的方法，以使闭环放大器对于给定的所需闭环增益值保持稳定。 此过程称为频率补偿

##### 11.10.1 Theory

最简单的频率补偿方法是在函数$A（s）$中以一个频率$f_D$引入一个新的极点，该极点必须足够低，以使修改后的开环增益$A（s）$与$20 log（1 / |β|）$曲线相交处的斜率差为20 dB /十倍频程。 例如，让我们补偿图一个放大器，其开环传递函数$A(s)$如图所示，以使β高达$10^{-2}$的闭环放大器（即闭环增益低至约40 dB）保持稳定。 

![image-20210527155002649](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527155002649.png)

首先，我们在40dB的水平上画一条水平直线，代表$20 log（1 /β）$，如图11.38所示。 然后，我们将第一条频率$f_{P1}$处的点Y定位在这条线上。 从Y绘制一条斜率为$–20dB / decade$的直线，并确定该直线与直流增益线的交点$Y'$。这个点给出必须在开环传递函数中引入的新极点的频率$f_D$

补偿后的开环响应$A（s）$如图11.38所示。 它有四个极点：在$f_{D}，f_{P1}，f_{P2}$和$f_{P3}$处。 在$f_D$处，A开始以–20 dB /十倍频程的斜率滚降。 在$f_{P1}$处，斜率更改为– 40 dB /十倍，在$f_{P2}$处，斜率更改为– 60 dB /十倍，依此类推。 由于$20 log（1 /β）$线与新的直流增益曲线$20log|A'|$交点处的斜率大小为-20dB/十倍频，因此具有此β值（或更低值）的闭环放大器将保持稳定 。

这种补偿方法的严重缺点是，在大多数频率下，开环增益已大大降低。 这意味着在大多数频率下，可用的反馈量将很小。 由于负反馈的所有优点都与反馈量成正比，因此补偿放大器的性能将受到损害。

仔细检查图11.38可知，由于$f_{P1}$处的极点，增益$A（s）$较低。 如果我们能够以某种方式消除该极点，则可以从点Z（以第二极点的频率）开始，而不是定位点Y，绘制$YY'$等，而绘制线$ZZ'$。这会产生一个新的，远高于原来值的开环增益$A''(s)$

尽管不可能消除$f_{P1}$处的极点，但通常可以将该极点从$f = f_{P1}$移到$f = f'_D$。这使得极点占主导地位，并且无需引入额外的低频极点，如同我们接下来所展示的那样

##### 11.10.2 Implementation

现在，我们将解决实施上述频率补偿方案的问题。 放大器电路通常由多个级联增益级组成，每个级负责一个或多个传递函数极点。 通过对电路的手动和/或计算机分析，可以确定引入每个重要极点fP1，fP2等的阶段。 为了便于讨论，假设在图11.39（a）所示的两个级联差分级之间的界面处引入了第一极点$f_{P1}$。 在图11.39（b）中，我们在此接口处显示了一个简单的电路小信号模型。 电流源$I_x$代表$Q_1$-$Q_2$级的输出信号电流。 电阻$R_x$和电容$C_x$代表两个节点B和B之间的总电阻和电容。

![image-20210527161426746](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527161426746.png)

 因此，极点$f_{P1}$由下式给出：

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527161545872.png" alt="image-20210527161545872" style="zoom:67%;" />

现在让我们在节点B和B之间连接补偿电容器$C_C$。 这将导致修改后的等效电路如图11.39（c）所示，从中我们可以看到引入的极点不再位于$f_{P1}$处。 相反，极点可以处于任何所需的较低频率$f'_D$：

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527161730444.png" alt="image-20210527161730444" style="zoom:67%;" />

因此，我们得出的结论是，可以为$C_C$选择合适的值，以将极点频率从$f_{P1}$移至由图11.38中的点Z确定的值$f'_D$。

此时，应该指出的是，添加电容器CC通常会导致其他极点（$f_{P2}$和$f_{P3}$处）的位置发生变化。 因此，可能需要计算$f_{P2}$的新位置并执行几次迭代才能获得$C_C$所需的值。

该实施方法的缺点是$C_C$的要求值通常很大。 因此，如果要补偿的放大器是一个IC运算放大器，那么在IC芯片上包括这个补偿电容器将很困难，甚至可能是不可能的。  （如第8章和附录A所指出的，单片电容器的最大实际尺寸约为100 pF。）一个解决此问题的好方法是将补偿电容器连接到反相放大器级的反馈路径中。 由于存在米勒效应（第10.3节），补偿电容将乘以级增益，从而产生更大的有效电容。 此外，如稍后所述，还会产生另一个意外的好处。

##### 11.10.3 Miller Compensation and Pole Splitting

图11.40（a）显示了多级放大器中的一个增益级。 为简单起见，该级被示为一个共射极放大器，但实际上它可能是一个更复杂的电路。 在该共发射极级的反馈路径中，我们放置了一个补偿电容器$C_f$。

![image-20210527162336559](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527162336559.png)

图11.40（b）示出了图11.40（a）增益级的简化等效电路。这里，$R_1$和$C_1$代表节点B与地面之间的总电阻和总电容。 类似地，$R_2$和$C_2$代表节点C与地面之间的总电阻和总电容。 此外，假设$C_1$已经包含有因为$C_\mu$存在而导致的密勒分量，而C2包括后续放大器级的输入电容。最后，$I_i$代表前一级的输出信号电流。

在没有补偿电容器$C_f$的情况下，从图11.40（b）可以看到，存在两个极点-一个在输入端，一个在输出端。 让我们假设这两个极点是图11.38的$f_{P1}$和$f_{P2}$； 因此，

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527190244691.png" alt="image-20210527190244691" style="zoom:67%;" />

在存在$C_f$的情况下，对电路进行分析即可得出传递函数

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527190352894.png" alt="image-20210527190352894" style="zoom:67%;" />

零频率点通常比主极点要高得多，我们将忽略其影响。 分母多项式$D（s）$可以写为

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527190447337.png" alt="image-20210527190447337" style="zoom:67%;" />

其中$ω'_{P1}$和$ω'_{P2}$即为两个极点的新频率，通常来讲，其中一个极点会占据主导地位

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527190634839.png" alt="image-20210527190634839" style="zoom:67%;" />

通过比较系数我们可以得到

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527190726989.png" alt="image-20210527190726989" style="zoom:67%;" />

大约是

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527190746392.png" alt="image-20210527190746392" style="zoom:67%;" />

同理有

<img src="C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210527190839019.png" alt="image-20210527190839019" style="zoom:67%;" />

从上面两式中我们可以看到，随着$C_f$的增加，$ω_{P1}$减小，$ω_{P2}$增大。 该现象称为极分裂。注意，$ω_{P2}$的增加是非常有益的。 它使我们可以将Z点（见图11.38）进一步向右移动，从而获得更高的补偿开环增益。 最后，请注意$C_f$乘以米勒效应因子$g_mR_2$，从而产生更大的有效电容$g_mR_2C_f。$换句话说，$C_f$的要求值将比图11.39中的$C_C$小得多。







#### 附录1：极点的概念：

我们以一个普通的单时间常数电路为例

![image-20210517110016082](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210517110016082.png)

这是一个典型的低通滤波电路，要计算$V_o$，根据电容C的定义式，我们可以得到
$$
C=\frac{Q}V\rightarrow V=\frac{Q}C\rightarrow \frac{dV}{dt}=\frac1C\frac{dQ}{dt}=\frac1Ci\rightarrow i=C\frac{dV}{dt}
$$
故我们得出了在电路中电流大小$i$与输出电压$V_o$的数量关系，接下来有
$$
V_o+RC\frac{dV_o}{dt}=V_s
$$
解这个微分方程，可以得到
$$
e^t=A(V_o-V_s)^{-RC}(A为常数)
$$
我们现在假设$V_s$是一个阶跃函数（step function），在t=0时会发生阶跃，其解析式为
$$
f(t)=\begin{cases}0(t<0)\\V_s(t\geq0)\end{cases}
$$
由上面的微分方程解可以得出
$$
A_2e^{-\frac{t}{RC}}=V_o-V_s
$$
从而
$$
V_o=V_s+A_2e^{-\frac{t}{RC}}
$$
其中$A_2$可以根据初值条件计算得出，该初始条件是t=0时电容器上积累的电荷量大小，在本例中，t=0时积累的电荷量大小为0，故
$$
Q=0\rightarrow V_o=\frac QC=V_o=V_s+A_2e^{-\frac{t}{RC}}=0\rightarrow A_2=-V_s\rightarrow V_o=V_s(1-e^{-\frac t{RC}})
$$
由此我们定义时间常数 $\tau=RC$,在t= $\tau$时，有
$$
V_o=V_s(1-e^{-1})
$$
我们认为在此时，$V_o$的大小已经接近$V_s$(表示了电路的反应时间)

现我们假设输入信号$V_i(t)$是一正弦波，复平面上其方程用
$$
V_i(t)=V_ie^{j\omega{t}}
$$
表示，由上面的推导可知，输入电压和输出电压之间的响应存在一定的时间差，这意味着输入与输出波形之间会产生相位差，记为 $\theta$

再由
$$
V_o+RC\frac{dV_o}{dt}=V_s
$$
可以得到
$$
V_se^{j\omega{t}}=\tau{j\omega}V_oe^{j{\omega}t}+V_oe^{j{\omega}t}
$$
化简可以得到
$$
V_s=V_o({\tau}j\omega+1)
$$
即
$$
V_o=\frac{V_s}{\tau{j}{\omega}+1}
$$
我们定义 $\omega_0=\frac1{\tau}$(即该电路系统的角频率)，从而有
$$
V_o=\frac{V_s}{1+j(\frac{\omega}{\omega_0})}
$$
在这个式子中我们发现，实常数$V_s$的表达式中出现了虚数单位 $j$，由此我们可得出$V_o$必然是一个复数，这从数学角度上解释了输出电压和输入电压之间存在相位差的原因

将上式代入$V_o（t）$的表达式中，有
$$
V_o（t）=\frac{V_s}{1+j(\frac{\omega}{\omega_0})}e^{j{\omega}t}
$$
现定义传递函数$T(\omega)$
$$
T(\omega)\equiv\frac{V_o}{V_s}=\frac{1}{1+j(\frac{\omega}{\omega_0})}
$$
从而有
$$
V_o(t)=T(\omega)V_i(t)
$$
习惯上我们记$j\omega=s$，则有
$$
T(s)=\frac{K}{1+(\frac{s}{\omega_0})}
$$
其中K指电路系统的直流电压增益，作波特图，有

![image-20210517121147000](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210517121147000.png)

此前我们提到过，当 $t=\tau$时，我们认为电路的输出与输入可以看作恰好响应，但当输入信号的频率过高（一个周期的时间过短时）就会导致电路无法及时响应，从而使输出电压变小（来不及变大已经开始变小），这解释了在上面的波特图中频率越高传递函数越小的原因。此外，除了在数值上的变化以外，相位上的变化也可以藉由传递函数得出，相位的变化大小即为传递函数（复变函数）的相角大小，有
$$
T_(\omega)=|T|e^{j\theta}=\frac{K}{1+j(\frac{\omega}{\omega_0})}
$$
分子为常数，故幅角为0，简化为 $e^{j0}$,从而有
$$
e^{j\theta}=\frac{e^{j0}}{e^{jtan^{-1}\frac{\omega}{\omega_0}}}=e^{j(-tan^{-1}\frac{\omega}{\omega_0})}
$$
故
$$
\theta=-tan^{-1}\frac{\omega}{\omega_0}
$$
同样作波特图，可以得到



![image-20210517135020862](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210517135020862.png)

可以看到，在频率较低时，相位几乎不会发生改变；频率与电路系统的角频率相等时则出现45度的相位差；而随着频率逐渐升高，相位差则会逐渐向90度移动

在上面的图中，可以看到，当 $\omega=\omega_0$,也就是输入信号的频率等于电路系统的角频率时，反映在波特图上都可以找到一个较为明显的转折点，我们称这些转折点为***极点（pole）***，换言之，当我们面对一个复杂的电路系统时，这个电路系统可能同时包含有高通和低通两个滤波电路，我们要做的就是计算该电路的传递函数，并借此计算出电路的极点大小，以确定电路的带宽和 $f_H$、$f_L$

是否对于每一个电路我们都需要用微分方程求解？答案当然是否定的，事实上，我们可以把电容器看作是一个容抗大小为 $R_c$的电阻来解电路。推导如下
$$
i=C\frac{dV}{dt}
$$
而在交变电路中，电流大小与电压大小都可以用复变函数表示
$$
i=Ie^{j\omega{t}}
$$
以及
$$
V=Ve^{j\omega{t}}
$$
从而我们可以通过电流与电压的比值来定义容抗
$$
R_c=\frac{V}i=\frac{1}{j\omega{C}}
$$
从而在电容两端的分压即为简单的电阻分压，在本例中，我们可以借此计算出传递函数
$$
\frac{V_o(\omega)}{V_s(\omega)}=\frac{\frac{1}{j\omega{C}}}{R+\frac{1}{j\omega{C}}}=\frac{1}{1+j(\frac{\omega}{\omega_0})}
$$
有时一个电路可能有多个极点，例如下面求解一个场效应管电路 $f_L$的例子

![image-20210517145739364](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210517145739364.png)

该场效应管电路图及其等效电路图如上所示，我们所要计算的传递函数即是
$$
\frac{V_o}{V_{sig}}
$$
分析电路的过程在此略去不表，我们可以得出
$$
\frac{V_o}{V_{sig}}=\frac{V_g}{V_{sig}}*\frac{I_D}{V_g}*\frac{V_o}{I_D}
$$
换言之，我们的计算会得到三个传递函数，也就会得到三个极点频率

对于第一个极点频率，我们进行简单的分析，有

![image-20210517150322351](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210517150322351.png)

也就是说我们可以得到第一幅波特图

![image-20210517150442987](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210517150442987.png)

第二项传递函数

![image-20210517150622957](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210517150622957.png)

此外，当
$$
s=-\frac{1}{C_sR_s}
$$
该传递函数的值为零，因此我们额外得到了零频率点。但我们从算式中也能看出，由于 $\omega_{p2}$通常远远大于 $\omega_Z$,因此在决定 $\omega_L$时，$\omega_{p2}$的权重要远大于$\omega_Z$

波特图如下

![image-20210517151410864](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210517151410864.png)

同理可以得到

![image-20210517151548299](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210517151548299.png)

及其波特图

![image-20210517151640673](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210517151640673.png)

最后得出传递函数

![image-20210517151725714](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210517151725714.png)



以及该传递函数的波特图

![image-20210517151801178](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210517151801178.png)

































