# Microelectronic-Circuits

### CHAPTER 10  Frequency Response
章节概要

1.耦合和旁路电容如何导致分立电路放大器的增益在低频时下降，以及如何获得频率fL的估计值，在该频率fL处，增益比其在中频处的值低3 dB。

2.MOSFET和BJT中存在的内部电容效应以及如何通过在混合电路中添加电容来修正这些电路的hybrid-pi模型以及T-model。

3.CS和CE放大器增益的高频限制，以及增益衰减和3db频率fH的上限主要由漏极和栅极（集电极和基极）之间的小电容决定。

4.分析复杂度不同的放大器电路的高频响应的有力方法。

5.第8章研究的共源共栅放大器如何设计成比CS和CE放大器更宽的带宽。

6.源和发射极跟随器的高频性能。

7.差分放大器的高频性能。

8.用于获得宽带放大的电路配置。

简介

我们在第五章到第九章中对晶体管放大器的研究假设它们的增益是恒定的，与输入信号的频率无关。这就意味着它们的带宽是无限的，当然这并不符合真实情况。为了说明这一点，我们在图10.1中给出了三极管分立放大电路的增益幅度与输入信号频率的关系示意图。虽然我们观察到该电路确实有一个很宽的频率范围，并且在这个范围内增益几乎保持不变。这是特定放大器的有效工作频率范围。到目前为止，我们一直假设我们的放大器工作在这个波段，该波段称为中频波段或中频。放大器的设计使其中频与所需放大信号的频谱一致。因为如果不是这样，放大器会使输入信号的频谱失真，输入信号的不同分量会被不同的量放大。

![image-20210513110800288](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210513110800288.png)

图10.1表明，在较低的频率，放大器增益的幅度下降。电路中的耦合电容和旁路电容在该频段内的阻抗迅速升高。回想一下，我们此前假设它们的阻抗很小，并且足以视为短路。这种假设虽然在中频是正确的，但是当输入信号的频率降低时，其容抗迅速变大（基于容抗的表达式），导致其不再可以被视为短路，如同我们在10.1节所要看到的，这会导致放大器的总电压增益降低。

在第10.1节分立放大电路的低频响应分析中，我们将注意力放在频率fL的确定上，它定义了中频的下限。通常而言，fL被定义为增益大小比电路处在中频的值低3分贝的频率。要注意的是，集成电路放大器不使用耦合和旁路电容器，因此其中频的下限在零频率（dc）处，如图10.2所示。

![image-20210513111412812](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210513111412812.png)

图10.1和10.2表明放大器的增益在高频端下降。这是由于BJT的内部电容效应（扩散电容和势垒电容）。我们将在第10.2节中研究这些效应，并用我们将添加到此前我们所使用的hybrid-pi model和T-model中。第10.3节将使用高频设备模型分析CS和CE放大器（分立和集成）的高频响应。我们将特别关注频率fH的确定，它定义了中频带的上限。它被定义为增益大小比电路位于中频时的增益值低3 dB的频率。因此，放大器带宽由fL和fH定义（对于IC放大器为0和fH）

放大器的增益带宽积（gain-bandwidth product）定义如下
$$
GB=|A_M|BW
$$
其中BW指带宽的的长度
$$
BW=f_H-f_L(分立电路)                         BW=f_H(集成电路)
$$
本章的其余部分将关注各种复杂度不同的放大器配置的频率响应分析。我们特别感兴趣的是通过添加特定的电路组件（例如源极和射级衰减电阻（emitter-degenerate resistance）或通过完全改变电路配置来扩展放大器带宽（即，增加fH）的方法。

### 10.1 Low-Frequency Response of Discrete-Circuit Common-Source and Common-Emitter Amplifiers
在本节中，我们考虑耦合电容器和旁路电容器对分立电路共射极（CE）放大器的增益的影响。 如前所述，它们的效果仅在低频处（即，在中频带以下）表现出来。

#### 10.1.2 The Method of Short-Circuit Time Constants

在某些电路中，如不久前讨论的共射放大器的电路中，电容器存在相互作用，很难确定fL频率。然而，幸运的是，有一种简单的方法可以获得fL的估计值，而不需要确定极点的频率。尽管该方法是基于其中一个极点占主导地位的假设，虽然该假设的前提并非精确，但其仍然为fL给出了一个良好的近似。方法如下

1.假设输入信号为0

2.每次考虑一个电容器，并且在考虑这个电容器时将其他电容器的电容大小设为无穷大（换言之，将其他电容器短路）

3.对于每一个电容器$C_i$，找到从该电容器看入的电阻$R_i$，这可以通过在电容处设置一个测试电源$V_x$得到，$R_i$被定义为$V_i/I_x$

4.通过下面的式子估算3dB频率$f_L$
$$
f_L\approx\sum_{i=1}^n\frac 1{C_iR_I} 
$$
其中n是电容器的数量

除了简单之外，该方法还有一个非常重要的作用：方程式指出了每个电容器对fL值的相对贡献。具体来说，与特定电容器相关的时间常数值越低，该电容器对fL的贡献就越大。如下文所示，这一观察结果具有重要的设计意义。

短路时间常数法的应用将在下一节中说明，其中它用于确定CE放大器的fL。

#### 10.1.3 The CE Amplifier

![image-20210513115023646](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210513115023646.png)

图10.9（a）显示了使用classic偏置的分立电路共射放大器，以及耦合电容器$C_{C1}$和$C_{C2}$以及旁路电容器$C_E$。我们希望能计算出该电路的fL。并且同时，我们需要确定$C_{C1}$、$C_E$和$C_{C2}$的值，以确保fL的大小符合实际应用要求，同时最小化所需的总电容值。

为了分析CE放大器的低频增益，我们使用图10.9（b）所示的等效电路。这种等效电路是通过短接$V_{CC}$，用T-model代替BJT，而忽略$r_o$得到的。忽略$r_o$的原因在于晶体管的输出电阻对分立电路放大器的增益影响很小，并且由于它的存在会导致分析相当复杂。从图10.9（b）中的电路中，我们观察到BJT基极输入电流有限导致$C_{C1}$和$C_{C2}$相互作用。也就是说，与CS放大器的情况不同，这里由$C_{C1}$和$C_{C2}$引起的两极中的每一个都将以一种复杂的方式依赖于这两个电容值，这妨碍了对设计的理解。

![image-20210513120750743](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210513120750743.png)

因此在这里我们不应当尝试去确定极点频率，而是采用短路时间常数法来估算$f_L$的值

###### Applying the Method of Short-Circuit Time Constants

这里插入一段题外话：如何判断从某个电容看入的电阻？

我们以这里的三个电容为例

$C_{C1}$:首先我们记在BJT基极上的偏置电阻的并联等效电阻为$R_B$,换言之，                        $R_B=(R_{B1}||R_{B2})$

此外在$R_B$的左侧有一个信号源的内电阻$R_{sig}$（要注意的是$R_B$并非是三极管的内电阻），接着向右看，有一个三极管，该三极管的输入电阻是$r_\pi$,并且由于$R_B$接地，$R_B$和BJT是并联关系，因此，从$C_{C1}$看入的电阻大小是
$$
(R_B||R_\pi)+R_{sig}
$$
换言之，$C_{C1}$的时间常数为
$$
τ_1=[(R_B||R_\pi)+R_{sig}]C_{C1}
$$
![image-20210513123136273](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210513123136273.png)

$C_{E}$:此时我们视 $C_{C1}$短路，因此$R_B$和$R_{sig}$并联，并且由于发射极电路上的电流和基极电路上的电流有差异，因此在基极上的电阻需要乘以系数$\frac 1{\beta+1}$。总体上看，从$C_{E}$出发的电路分成了两条支路，因此这两条支路上电阻的并联等效电阻即为从$C_{E}$看入的电阻。

故$C_E$的时间常数为
$$
\tau_E=C_E[R_E(r_e+\frac{R_B||R_{sig}}{\beta+1})]
$$
![image-20210513124016266](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210513124016266.png)

(note:由于$r_e$上方是一个受控电流源，因此它不会被算入电阻计算中)

对于$C_{C2}$这个分析过程是类似的，此处略去不表

![image-20210513124254752](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210513124254752.png)

因此我们可以根据短路时间常数来估计其3-dB频率$f_L$
$$
f_L=\frac{\omega_L}{2\pi}=\frac1{2\pi}[\frac1{\tau_1}+\frac1{\tau_E}+\frac1{\tau_2}]
$$
当在这个表达式中代入数值时，很快就会发现三个电容器中哪个对fL的贡献最大。显然，这个贡献最大的电容器是时间常数最小的电容器。在射级放大电路中，通常是$C_E$，这是因为相关的电阻RCE通常很小。知道哪种电容器有可能主导fL具有重要的设计意义，如下所示。

###### Selecting Values for CC1, CE, and CC2

我们现在讨论为$C_{C1}$、$C_E$和$C_{C2}$选择适当值的设计问题。设计目标是将较低的3-dB频率fL放置在指定位置，使电路中的总电容值最小。由于如上所述，$C_E$通常是三个电阻中最低的，因此通过选择$C_E$使总电容最小化，从而使其对fL的贡献占主导地位。也就是说，通过参考上式，我们可以选择某个电容值$C_S$，使得$1/(C_ER_E)$，比方说，是80%的$\omega_L=2\pi f_L$，让其他每个电容器贡献10%的ωL。例10.2应该有助于说明这个过程。

##### Example 10.2

我们希望为共射放大器选择一个合适的$C_{c1}$,$C_{C2}$,$C_E$,其中放大器电路参数为$R_B=100k\Omega$,$R_C=8k\Omega$,$R_L=5k\Omega$,$R_{sig}=5k\Omega,R_E=5k\Omega,\beta=100,g_m=40mA/V$,以及$r_\pi=2.5k\Omega$.设计要求为fL=100Hz

首先我们计算三个电容的时间常数

![image-20210513135315776](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210513135315776.png)

现在我们为$C_E$选择一个合适的值，使其满足其时间常数的倒数是$\omega_L$的80%

![image-20210513135643165](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210513135643165.png)

其他两个电容分别贡献10%

![image-20210513135721790](C:\Users\Lenovo\AppData\Roaming\Typora\typora-user-images\image-20210513135721790.png)

### 10.2 Internal Capacitive Effects and the High-Frequency Model of the MOSFET and the BJT

耦合和旁路电容会导致晶体管放大器的增益在低频端下降，而在高频时的增益下降则是由晶体管内部的电容效应引起的。在本节中，我们将简要地考虑这些影响，更重要的是，展示如何修正电路的小信号模型，以考虑这些影响。

##### 10.2.2 The BJT

在我们对BJT物理特性的研究中，我们假设晶体管对输入信号的反应是瞬时性的，因此我们开发的晶体管模型不包括任何会引起时间或频率依赖性的元件（即电容器或电感器）。然而，实际的晶体管表现出电荷存储现象，这会限制它们的运行速度和频率。我们在第三章的pn结研究中已经遇到了这种效应，并且已经知道它们可以用电容来建模。在下面我们研究了发生在BJT中的电荷存储效应，并通过在hybrid—$\pi$ model和T-model中添加电容来考虑它们对整体电路的影响。由此产生的修正BJT模型将能够预测放大器增益对频率的依赖性，以及晶体管开关和逻辑门所表现出的时间延迟























